<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Farm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom, #87CEEB, #98FB98);
            min-height: 100vh;
            transition: all 0.5s ease;
        }

        .night {
            background: linear-gradient(to bottom, #191970, #2F4F4F);
            color: white;
        }

        .raining {
            background: linear-gradient(to bottom, #708090, #778899);
        }

        .game-header {
            background: rgba(139, 69, 19, 0.9);
            color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 10px;
        }

        .info-item {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .main-container {
            display: flex;
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .farm-area {
            flex: 2;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .plots-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .plot {
            width: 120px;
            height: 120px;
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .plot:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .plot.fertilized {
            background: #654321;
            border-color: #8B4513;
        }

        .plot.watered {
            background: #4A4A4A;
            border-color: #2F4F4F;
        }

        .plot.growing {
            background: #228B22;
            border-color: #006400;
        }

        .plot-content {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .plot-status {
            font-size: 0.8rem;
            text-align: center;
            color: white;
            font-weight: bold;
        }

        .progress-bar {
            width: 80%;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #32CD32;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* √Årea para sistemas da fazenda */
        .animals-area {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            min-width: 400px;
            margin: 0 auto;
        }

        .animals-area h3 {
            color: #2F4F4F;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #32CD32;
            padding-bottom: 5px;
            text-align: center;
        }

        .animals-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .animals-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .animals-actions button {
            background: #32CD32;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .animals-actions button:hover {
            background: #228B22;
        }

        .sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .panel h3 {
            color: #2F4F4F;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #32CD32;
            padding-bottom: 5px;
        }

        .seeds-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .seed-item {
            background: #F0F8FF;
            border: 2px solid #32CD32;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .seed-item:hover {
            background: #E6FFE6;
            transform: translateY(-2px);
        }

        .seed-item.selected {
            background: #90EE90;
            border-color: #228B22;
        }

        .seed-emoji {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 5px;
        }

        .seed-name {
            font-size: 0.9rem;
            font-weight: bold;
            color: #2F4F4F;
        }

        .actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .action-btn {
            background: #32CD32;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: #228B22;
            transform: translateY(-2px);
        }

        .action-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .well {
            background: #4682B4;
            border: 4px solid #2F4F4F;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .well:hover {
            transform: scale(1.1);
        }

        .weather-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .weather-indicator.active {
            opacity: 1;
        }

        .rain-drops {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .rain-drop {
            position: absolute;
            background: #87CEEB;
            width: 2px;
            height: 20px;
            border-radius: 1px;
            animation: fall linear infinite;
        }

        @keyframes fall {
            from {
                transform: translateY(-100vh);
            }
            to {
                transform: translateY(100vh);
            }
        }

        /* Efeitos das esta√ß√µes */
        .season-spring .plot.planted::after {
            content: '‚ú®‚≠ê‚ú®';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.7; transform: translateX(-50%) scale(1.2); }
        }

        .season-autumn {
            position: relative;
        }

        .season-autumn::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="20">üçÇ</text></svg>') repeat;
            animation: windEffect 3s infinite linear;
            pointer-events: none;
            z-index: 1000;
            opacity: 0.7;
        }

        @keyframes windEffect {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100vw); }
        }

        .season-winter .plot {
            background: #E6F3FF;
            border-color: #B0E0E6;
        }

        .season-winter .plot.planted {
            opacity: 0.5;
            pointer-events: none;
        }

        .snow-drop {
            position: absolute;
            background: white;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: fall linear infinite;
        }

        /* Anima√ß√µes do lago */
        @keyframes wave {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100px); }
        }

        @keyframes fishSwim {
            0% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(20px) translateY(-10px); }
            50% { transform: translateX(0) translateY(-20px); }
            75% { transform: translateX(-20px) translateY(-10px); }
            100% { transform: translateX(0) translateY(0); }
        }

        @keyframes fishSwim2 {
            0% { transform: translateX(0) translateY(0) scaleX(1); }
            33% { transform: translateX(-30px) translateY(15px) scaleX(-1); }
            66% { transform: translateX(30px) translateY(-15px) scaleX(1); }
            100% { transform: translateX(0) translateY(0) scaleX(1); }
        }

        @keyframes fishSwim3 {
            0% { transform: translateX(0) translateY(0) rotate(0deg); }
            25% { transform: translateX(25px) translateY(20px) rotate(15deg); }
            50% { transform: translateX(-10px) translateY(-25px) rotate(-10deg); }
            75% { transform: translateX(-25px) translateY(10px) rotate(5deg); }
            100% { transform: translateX(0) translateY(0) rotate(0deg); }
        }

        .fish {
            position: absolute;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            user-select: none;
        }

        .fish:hover {
            transform: scale(1.2);
            filter: brightness(1.2);
        }

        .fish.swimming1 {
            animation: fishSwim 4s ease-in-out infinite;
        }

        .fish.swimming2 {
            animation: fishSwim2 5s ease-in-out infinite;
        }

        .fish.swimming3 {
            animation: fishSwim3 6s ease-in-out infinite;
        }

        .fish.caught {
            animation: fishCaught 0.5s ease-out forwards;
        }

        @keyframes fishCaught {
            0% { 
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% { 
                transform: scale(1.5) rotate(180deg);
                opacity: 0.8;
            }
            100% { 
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        .fishing-ripple {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: ripple 1s ease-out;
            pointer-events: none;
        }

        @keyframes ripple {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 100px;
                height: 100px;
                opacity: 0;
            }
        }



        .grass-tile {
            width: 30px;
            height: 30px;
            background: #32CD32;
            border: 2px solid #228B22;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .grass-tile:hover {
            transform: scale(1.1);
            background: #90EE90;
        }

        .grass-tile.empty {
            background: #8B4513;
            border-color: #654321;
            cursor: not-allowed;
        }

        .grass-tile.regenerating {
            background: #DAA520;
            border-color: #B8860B;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .cow-item {
            background: #F0F8FF;
            border: 2px solid #8B4513;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .cow-item:hover {
            background: #E6FFE6;
            transform: translateY(-2px);
        }

        .cow-item.fed {
            background: #90EE90;
            border-color: #228B22;
        }

        .cow-item.ready-to-milk {
            background: #FFD700;
            border-color: #FFA500;
            animation: pulse 1s infinite;
        }

        .cow-emoji {
            font-size: 2rem;
            display: block;
            margin-bottom: 5px;
        }

        .cow-status {
            font-size: 0.8rem;
            font-weight: bold;
            color: #2F4F4F;
        }

        .cow-timer {
            font-size: 0.7rem;
            color: #666;
            margin-top: 3px;
        }

        .product-item {
            background: #F0F8FF;
            border: 2px solid #32CD32;
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product-item:hover {
            background: #E6FFE6;
            transform: translateY(-2px);
        }

        .product-emoji {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .product-count {
            font-size: 0.9rem;
            font-weight: bold;
            color: #2F4F4F;
        }

        .product-price {
            font-size: 0.8rem;
            color: #666;
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .plots-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .plot {
                width: 100px;
                height: 100px;
            }

            .animals-area {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="game-header">
        <h1 class="game-title">üöú Real Farm üå± - <span id="season-display">üå∏ Primavera</span></h1>
        <div class="game-info">
            <div class="info-item">üí∞ <span id="money">200</span> moedas</div>
            <div class="info-item">üíß <span id="water">0</span> baldes</div>
            <div class="info-item">üåø <span id="fertilizer">0</span> adubos</div>
            <div class="info-item">‚è∞ <span id="time-display">10:00</span></div>
            <div class="info-item">üåÖ <span id="day-night">Dia</span></div>
        </div>
    </div>



    <div class="main-container">
        <div class="farm-area">
            <div>
                <h2 style="color: white; text-align: center; margin-bottom: 20px;">üåæ Canteiros da Fazenda</h2>
                <div class="plots-grid" id="plots-grid">
                    <!-- Canteiros ser√£o gerados pelo JavaScript -->
                </div>
            </div>

            <div class="panel" id="well-panel" style="display: none;">
                <h3>üíß Po√ßo de √Ågua</h3>
                <div class="well" id="well" onclick="collectWater()">
                    <span style="color: white; font-size: 2rem;">ü™£</span>
                </div>
                <p style="text-align: center; color: #2F4F4F;">Clique para coletar 4 √°guas</p>
            </div>

            <div class="animals-area" id="chickens-area" style="display: none;">
                <h3>üêî Galinheiro</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üêî Galinhas: <span id="chicken-count">0</span>/4 | üê£ Pintinhos: <span id="chick-count">0</span></div>
                    <div>ü•ö Ovos dispon√≠veis: <span id="available-eggs">0</span> | üçó Frangos: <span id="raw-chicken-count">0</span></div>
                </div>
                <div id="chickens-container" class="animals-container">
                    <!-- Galinhas ser√£o geradas pelo JavaScript -->
                </div>
                <div class="animals-actions">
                    <button onclick="feedAllChickens()">Alimentar Todas</button>
                    <button onclick="collectAllEggs()">Coletar Todos</button>
                    <button onclick="breedChickens()" id="breed-btn">üê£ Gerar Pintinho</button>
                    <button onclick="sacrificeChicken()" id="sacrifice-btn">üçó Sacrificar Galinha</button>
                </div>
            </div>



            <div class="animals-area" id="pigs-area" style="display: none;">
                <h3>üê∑ Chiqueiro</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üê∑ Porcos: <span id="pig-count">0</span></div>
                    <div>ü•© Carne dispon√≠vel: <span id="available-meat">0</span></div>
                </div>
                <div id="pigs-container" class="animals-container">
                    <!-- Porcos ser√£o geradas pelo JavaScript -->
                </div>
                <div class="animals-actions">
                    <button onclick="feedAllPigs()">Alimentar Todos</button>
                    <button onclick="collectAllMeat()">Coletar Toda</button>
                </div>
            </div>



            <div class="animals-area" id="sheep-area" style="display: none;">
                <h3>üêë Curral das Ovelhas</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üêë Ovelhas: <span id="sheep-count">0</span></div>
                    <div>üß∂ L√£ dispon√≠vel: <span id="available-wool">0</span></div>
                </div>
                <div id="sheep-container" class="animals-container">
                    <!-- Ovelhas ser√£o geradas pelo JavaScript -->
                </div>
                <div class="animals-actions">
                    <button onclick="feedAllSheep()">Alimentar Todas</button>
                    <button onclick="collectAllWool()">Coletar Toda L√£</button>
                </div>
            </div>



            <div class="animals-area" id="pasture-area" style="display: none;">
                <h3>üêÑ Pasto das Vacas</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üêÑ Vacas: <span id="cow-count">0</span></div>
                    <div>ü•õ Leite dispon√≠vel: <span id="available-milk">0</span></div>
                </div>
                <div id="cows-container" class="animals-container">
                    <!-- Vacas ser√£o geradas pelo JavaScript -->
                </div>
                <div class="animals-actions">
                    <button onclick="feedAllCows()">Alimentar Todas</button>
                    <button onclick="milkAllCows()">Ordenhar Todas</button>
                </div>
            </div>



            <div class="animals-area" id="horse-stable" style="display: none;">
                <h3>üê¥ Baia do Duque</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üê¥ Cavalo: Duque</div>
                    <div>‚ù§Ô∏è Amizade: <span id="horse-friendship">0</span>/100</div>
                    <div>üü® Feno no invent√°rio: <span id="hay-for-horse">0</span></div>
                    <div>üçé Ma√ß√£s no invent√°rio: <span id="apples-count">0</span></div>
                </div>
                <div style="text-align: center; margin-bottom: 15px; position: relative;">
                    <div id="horse-display" onclick="interactWithHorse()" style="font-size: 4rem; cursor: pointer; transition: transform 0.3s ease;">
                        üê¥
                    </div>
                    <div id="horse-hearts" style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 1.5rem; opacity: 0; transition: opacity 0.5s ease;"></div>
                    <div id="horse-status" style="color: #2F4F4F; font-size: 0.9rem; margin-top: 5px;">Com fome (precisa de 1 feno/dia)</div>
                </div>
                <div class="animals-actions">
                    <button onclick="giveHayToHorse()">üü® Dar Feno (alimentar)</button>
                    <button onclick="giveAppleToHorse()">üçé Dar Ma√ß√£ (+10 amizade)</button>
                    <button onclick="rideHorse()" id="ride-btn" style="display: none;">üèá Montar Duque</button>
                </div>
            </div>



            <div class="animals-area" id="grass-field-area" style="display: none;">
                <h3>üåø Campo de Grama</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üåø Gramas coletadas: <span id="grass-collected">0</span>/4</div>
                    <div>üå∏ Flores no invent√°rio: <span id="flower-inventory">0</span></div>
                </div>
                <div id="grass-grid" style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; margin-bottom: 15px;">
                    <!-- Campo de grama ser√° gerado pelo JavaScript -->
                </div>
                <p style="text-align: center; color: #2F4F4F; font-size: 0.9rem;">Clique na grama para coletar. A cada 4 gramas = 1 flor!</p>
            </div>

            <div class="animals-area" id="dog-area" style="display: none;">
                <h3>üêï Mocinha - Pet da Fazenda</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üêï Cachorra: Mocinha</div>
                    <div>ü¶¥ Ra√ß√£o de cachorro: <span id="dog-food-count">0</span></div>
                    <div>ü¶¥ Ossos (petiscos): <span id="dog-bones-count">0</span></div>
                    <div>‚ù§Ô∏è Amizade: <span id="dog-friendship">0</span>/100</div>
                    <div>üíé Tesouros encontrados hoje: <span id="treasures-found-today">0</span>/1</div>
                </div>
                <div style="text-align: center; margin-bottom: 15px; position: relative;">
                    <div id="dog-display" onclick="interactWithDog()" style="font-size: 4rem; cursor: pointer; transition: transform 0.3s ease;">
                        üêï
                    </div>
                    <div id="dog-hearts" style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 1.5rem; opacity: 0; transition: opacity 0.5s ease;"></div>
                    <div id="dog-status" style="color: #2F4F4F; font-size: 0.9rem; margin-top: 5px;">Com fome</div>
                </div>
                <div class="animals-actions">
                    <button onclick="feedDog()">ü¶¥ Alimentar Mocinha</button>
                    <button onclick="giveBoneTreat()">ü¶¥ Dar Petisco (+10 amizade)</button>
                    <button onclick="collectTreasure()" id="collect-treasure-btn" style="display: none;">üíé Coletar Tesouro</button>
                </div>
            </div>



            <div class="animals-area" id="beehive-area" style="display: none;">
                <h3>üêù Colmeia</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üçØ Mel dispon√≠vel: <span id="honey-available">0</span></div>
                    <div>üìÖ Pr√≥xima produ√ß√£o: <span id="honey-timer">2 dias</span></div>
                </div>
                <div style="text-align: center; margin-bottom: 10px; position: relative;">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 5px; margin-bottom: 5px;">
                        <div style="font-size: 1rem;">üêù</div>
                        <div onclick="collectHoney()" style="font-size: 2.5rem; cursor: pointer; transition: transform 0.3s ease;" id="beehive-display">
                            üçØ
                        </div>
                        <div style="font-size: 1rem;">üêù</div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 8px; font-size: 1.2rem;">
                        üå∏ üå∫ üåª
                    </div>
                    <p style="color: #2F4F4F; font-size: 0.8rem; margin-top: 5px;">Colmeia (2 potes a cada 2 dias)</p>
                </div>
                <div class="animals-actions">
                    <button onclick="collectHoney()" id="collect-honey-btn">üçØ Coletar Mel</button>
                </div>
            </div>

            <div class="animals-area" id="greenhouse-area" style="display: none;">
                <h3>üè† Estufa (Inverno)</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>‚ùÑÔ∏è Canteiros protegidos: 12</div>
                    <div>üå°Ô∏è Temperatura controlada para plantio no inverno</div>
                </div>
                <div class="plots-grid" id="greenhouse-grid" style="grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 600px; margin: 0 auto;">
                    <!-- Canteiros da estufa ser√£o gerados pelo JavaScript -->
                </div>
            </div>

            <div class="animals-area" id="fishing-lake" style="display: block;">
                <h3>üé£ Lago dos Peixes</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>üêü Peixes dispon√≠veis hoje: <span id="fish-available">4</span>/4</div>
                    <div>üé£ Vara de pesca: <span id="fishing-rod-status">N√£o possui</span> (<span id="rod-uses">0</span>/50 usos)</div>
                    <div>üêü Peixes pescados: <span id="fish-caught-today">0</span></div>
                </div>
                <div style="text-align: center; margin-bottom: 15px; position: relative;">
                    <div id="fishing-lake-container" style="background: linear-gradient(to bottom, #87CEEB, #4682B4); border-radius: 20px; width: 300px; height: 200px; margin: 0 auto; position: relative; overflow: hidden; cursor: crosshair; border: 3px solid #2F4F4F;">
                        <div style="position: absolute; top: 10px; left: 10px; font-size: 1.5rem; opacity: 0.3;">üåä</div>
                        <div style="position: absolute; top: 10px; right: 10px; font-size: 1.5rem; opacity: 0.3;">üåä</div>
                        <div style="position: absolute; bottom: 10px; left: 10px; font-size: 1.5rem; opacity: 0.3;">üåä</div>
                        <div style="position: absolute; bottom: 10px; right: 10px; font-size: 1.5rem; opacity: 0.3;">üåä</div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2rem; opacity: 0.2;">üåä</div>
                        
                        <!-- Peixes ser√£o adicionados aqui pelo JavaScript -->
                        <div id="fish-container"></div>
                        
                        <!-- Efeito de ondas -->
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 20\"><path d=\"M0,10 Q25,0 50,10 T100,10 V20 H0 Z\" fill=\"rgba(255,255,255,0.1)\"/></svg>') repeat-x; animation: wave 3s linear infinite; pointer-events: none;"></div>
                    </div>
                    <p style="color: #2F4F4F; font-size: 0.8rem; margin-top: 5px;">Clique nos peixes para pesc√°-los! (Precisa de vara de pesca)</p>
                    <div id="fishing-status" style="font-size: 0.9rem; color: #2F4F4F; margin-top: 5px;"></div>
                </div>
                <div class="animals-actions">
                    <button onclick="spawnFish()" id="spawn-fish-btn" style="display: none;">üêü Repovoar Lago</button>
                </div>
            </div>

            <div class="animals-area" id="tree-area" style="display: none;">
                <h3>üå≥ Bosque</h3>
                <div style="margin-bottom: 15px; text-align: center;">
                    <div>ü™µ Troncos coletados: <span id="logs-count">0</span></div>
                    <div>ü™ì Machado: <span id="axe-status">N√£o possui</span> (<span id="axe-uses">0</span>/50 usos)</div>
                    <div>üçé Ma√ß√£s: <span id="apples-collected">0</span> | üçå Bananas: <span id="bananas-collected">0</span> | üçä Laranjas: <span id="oranges-collected">0</span></div>
                    <div>üåø Galhos: <span id="branches-collected">0</span></div>
                </div>
                <div style="text-align: center; margin-bottom: 15px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div>
                        <div class="tree" id="tree" onclick="collectLogs()" style="font-size: 3rem; cursor: pointer; transition: transform 0.3s ease;">
                            üå≥
                        </div>
                        <p style="color: #2F4F4F; font-size: 0.8rem;">√Årvore (5 troncos/dia + galhos)</p>
                        <div id="tree-timer" style="font-size: 0.7rem; color: #666;"></div>
                    </div>
                    <div>
                        <div class="tree" id="apple-tree" onclick="collectApples()" style="font-size: 3rem; cursor: pointer; transition: transform 0.3s ease;">
                            üçé
                        </div>
                        <p style="color: #2F4F4F; font-size: 0.8rem;">Macieira (5 ma√ß√£s/dia)</p>
                        <div id="apple-timer" style="font-size: 0.7rem; color: #666;"></div>
                    </div>
                    <div>
                        <div class="tree" id="banana-tree" onclick="collectBananas()" style="font-size: 3rem; cursor: pointer; transition: transform 0.3s ease;">
                            üçå
                        </div>
                        <p style="color: #2F4F4F; font-size: 0.8rem;">Bananeira (4 bananas/dia)</p>
                        <div id="banana-timer" style="font-size: 0.7rem; color: #666;"></div>
                    </div>
                    <div>
                        <div class="tree" id="orange-tree" onclick="collectOranges()" style="font-size: 3rem; cursor: pointer; transition: transform 0.3s ease;">
                            üçä
                        </div>
                        <p style="color: #2F4F4F; font-size: 0.8rem;">Laranjeira (4 laranjas/dia)</p>
                        <div id="orange-timer" style="font-size: 0.7rem; color: #666;"></div>
                    </div>
                </div>
            </div>





            <div class="panel">
                <h3>ü•¨ Quitanda</h3>
                <div style="margin-bottom: 10px;">
                    <h4 style="color: #2F4F4F; margin-bottom: 8px; font-size: 1rem;">Produtos da Fazenda:</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px;">
                        <div class="product-item" onclick="sellProduct('milk')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•õ</div>
                            <div class="product-count" id="milk-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">15m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('eggs')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•ö</div>
                            <div class="product-count" id="eggs-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">12m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('coffee')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">‚òï</div>
                            <div class="product-count" id="coffee-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">25m</div>
                        </div>

                        <div class="product-item" onclick="sellProduct('flour')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçö</div>
                            <div class="product-count" id="flour-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">20m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('honey')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçØ</div>
                            <div class="product-count" id="honey-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">35m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('meat')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•©</div>
                            <div class="product-count" id="meat-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">50m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('juice')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üç∑</div>
                            <div class="product-count" id="juice-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">40m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('cheese')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üßÄ</div>
                            <div class="product-count" id="cheese-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">60m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('yarn')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üßµ</div>
                            <div class="product-count" id="yarn-count-display" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">45m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('bread')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçû</div>
                            <div class="product-count" id="bread-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">35m</div>
                        </div>

                        <div class="product-item" onclick="sellProduct('rawChicken')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçó</div>
                            <div class="product-count" id="raw-chicken-market" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">80m</div>
                        </div>
                        <div class="product-item" onclick="sellProduct('fish')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üêü</div>
                            <div class="product-count" id="fish-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">30m</div>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 10px;">
                    <h4 style="color: #2F4F4F; margin-bottom: 8px; font-size: 1rem;">Frutas e Vegetais:</h4>
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px;">
                        <div class="product-item" onclick="sellFruit('banana')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçå</div>
                            <div class="product-count" id="banana-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">8m</div>
                        </div>
                        <div class="product-item" onclick="sellFruit('apple')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçé</div>
                            <div class="product-count" id="apple-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">10m</div>
                        </div>
                        <div class="product-item" onclick="sellFruit('orange')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçä</div>
                            <div class="product-count" id="orange-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">9m</div>
                        </div>
                        <div class="product-item" onclick="sellInventoryItem(0)" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•î</div>
                            <div class="product-count" id="potato-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">25m</div>
                        </div>
                        <div class="product-item" onclick="sellInventoryItem(1)" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçÖ</div>
                            <div class="product-count" id="tomato-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">30m</div>
                        </div>
                        <div class="product-item" onclick="sellInventoryItem(2)" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•ï</div>
                            <div class="product-count" id="carrot-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">20m</div>
                        </div>
                        <div class="product-item" onclick="sellInventoryItem(6)" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üéÉ</div>
                            <div class="product-count" id="pumpkin-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">40m</div>
                        </div>
                        <div class="product-item" onclick="sellInventoryItem(7)" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•¶</div>
                            <div class="product-count" id="broccoli-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">25m</div>
                        </div>
                        <div class="product-item" onclick="sellInventoryItem(8)" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">ü•¨</div>
                            <div class="product-count" id="lettuce-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">20m</div>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 10px;">
                    <h4 style="color: #2F4F4F; margin-bottom: 8px; font-size: 1rem;">Tesouros da Mocinha:</h4>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px;">
                        <div class="product-item" onclick="sellTreasure('cd')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üíø</div>
                            <div class="product-count" id="cd-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">80m</div>
                        </div>
                        <div class="product-item" onclick="sellTreasure('bottle')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üçº</div>
                            <div class="product-count" id="bottle-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">60m</div>
                        </div>
                        <div class="product-item" onclick="sellTreasure('shoe')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">üëü</div>
                            <div class="product-count" id="shoe-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">70m</div>
                        </div>
                        <div class="product-item" onclick="sellTreasure('ball')" style="padding: 5px;">
                            <div class="product-emoji" style="font-size: 1.2rem;">‚öΩ</div>
                            <div class="product-count" id="ball-count" style="font-size: 0.8rem;">0</div>
                            <div class="product-price" style="font-size: 0.7rem;">90m</div>
                        </div>
                    </div>
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="sellAllProducts()" style="padding: 8px; font-size: 0.9rem;">Vender Todos</button>
                </div>
            </div>


        </div>

        <div class="sidebar">
            <div class="panel">
                <h3>üë©‚Äçüåæ Eu</h3>
                <div style="text-align: center; margin-bottom: 10px;">
                    <div id="avatar-display" style="font-size: 2.5rem; margin-bottom: 8px;">üë©‚Äçüåæ</div>
                    <div style="margin-bottom: 8px;">
                        <div style="background: #ddd; border-radius: 8px; height: 15px; overflow: hidden;">
                            <div id="energy-bar" style="background: linear-gradient(90deg, #32CD32, #FFD700, #FF6347); height: 100%; width: 100%; transition: width 0.3s ease;"></div>
                        </div>
                        <div style="font-size: 0.8rem; color: #2F4F4F; margin-top: 3px;">
                            Energia: <span id="energy-display">100</span>%
                        </div>
                    </div>
                    <div id="avatar-status" style="font-size: 0.8rem; color: #2F4F4F; margin-bottom: 8px;">Energizada e pronta!</div>
                </div>

            </div>



            <div class="panel">
                <h3>üå± Sementes & Invent√°rio</h3>
                <div class="seeds-grid" id="seeds-grid" style="grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <!-- Sementes ser√£o geradas pelo JavaScript -->
                </div>
                <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #32CD32;">
                    <h4 style="color: #2F4F4F; margin-bottom: 8px; font-size: 1rem;">Invent√°rio:</h4>
                    <div id="inventory-display" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; font-size: 0.8rem;">
                        <!-- Invent√°rio ser√° atualizado pelo JavaScript -->
                    </div>
                </div>
            </div>



            <div class="panel">
                <h3>üè™ Mercadinho</h3>
                <div class="actions" style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
                    <button class="action-btn" onclick="buyWell()" id="buy-well-btn">Comprar Po√ßo (50 moedas)</button>
                    <button class="action-btn" onclick="buyCompost()" id="buy-compost-btn">Comprar Composteira (100 moedas)</button>
                    <button class="action-btn" onclick="buyGrassField()" id="buy-grass-btn">Comprar Campo de Grama (150 moedas)</button>
                    <button class="action-btn" onclick="buyDryer()" id="buy-dryer-btn">Comprar Secador de Grama (80 moedas)</button>
                    <button class="action-btn" onclick="buyPasture()" id="buy-pasture-btn">Comprar Pasto (200 moedas)</button>
                    <button class="action-btn" onclick="buySheepPen()" id="buy-sheep-pen-btn">Comprar Curral de Ovelhas (180 moedas)</button>
                    <button class="action-btn" onclick="buyMixer()" id="buy-mixer-btn">Comprar Misturador (120 moedas)</button>
                    <button class="action-btn" onclick="buyCheeseMaker()" id="buy-cheese-btn">Comprar Queijaria (90 moedas)</button>
                    <button class="action-btn" onclick="buyAxe()" id="buy-axe-btn">Comprar Machado (40 moedas)</button>
                    <button class="action-btn" onclick="buyRoaster()" id="buy-roaster-btn">Comprar Torradeira (60 moedas)</button>
                    <button class="action-btn" onclick="buySpinningMachine()" id="buy-spinning-btn">Comprar M√°quina de Fiar (70 moedas)</button>
                    <button class="action-btn" onclick="buyMill()" id="buy-mill-btn">Comprar Moinho (85 moedas)</button>
                    <button class="action-btn" onclick="buyBeehive()" id="buy-beehive-btn">Comprar Colmeia (120 moedas)</button>
                    <button class="action-btn" onclick="buyJuiceMaker()" id="buy-juice-btn">Comprar M√°quina de Suco (75 moedas)</button>
                    <button class="action-btn" onclick="buyStove()" id="buy-stove-btn">Comprar Fog√£o a Lenha (150 moedas)</button>
                    <button class="action-btn" onclick="buyBosque()" id="buy-bosque-btn">Comprar Bosque (300 moedas)</button>
                    <button class="action-btn" onclick="buyPlots()" id="buy-plots-btn">Comprar +8 Canteiros (200 moedas)</button>
                    <button class="action-btn" onclick="buyGreenhouse()" id="buy-greenhouse-btn">Comprar Estufa (800 moedas)</button>
                    <button class="action-btn" onclick="buyFishingRod()" id="buy-fishing-rod-btn">Comprar Vara de Pesca (60 moedas)</button>

                    <button class="action-btn" onclick="buyDogFood()" id="buy-dog-food-btn">Comprar Ra√ß√£o de Cachorro (15 moedas)</button>
                    <button class="action-btn" onclick="buyDog()" id="buy-dog-btn">Comprar Mocinha (500 moedas)</button>
                    <button class="action-btn" onclick="buyHorse()" id="buy-horse-btn">Comprar Duque (1000 moedas)</button>
                    <button class="action-btn" onclick="buyCow()" id="buy-cow-btn" style="display: none;">Comprar Vaca Leiteira (80 moedas)</button>
                    <button class="action-btn" onclick="buyChicken()" id="buy-chicken-btn" style="display: none;">Comprar Galinha (60 moedas)</button>
                    <button class="action-btn" onclick="buyPig()" id="buy-pig-btn" style="display: none;">Comprar Porco (100 moedas)</button>
                    <button class="action-btn" onclick="buySheep()" id="buy-sheep-btn" style="display: none;">Comprar Ovelha (70 moedas)</button>
                </div>
            </div>



            <div class="panel" id="compost-panel" style="display: none;">
                <h3>üóëÔ∏è Composteira</h3>
                <div style="margin-bottom: 15px;">
                    <div>üå∏ Flores: <span id="flowers">0</span></div>
                    <div>üåø Galhos: <span id="branches">0</span></div>
                    <div>üí© Esterco: <span id="manure">0</span></div>
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="collectMaterials()">Coletar Materiais</button>
                    <button class="action-btn" onclick="makeCompost()">Fazer Adubo (1üå∏ + 1üåø + 2üí©)</button>
                </div>
                <div id="compost-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>





            <div class="panel" id="drying-panel" style="display: none;">
                <h3>‚òÄÔ∏è Secador de Grama</h3>
                <div style="margin-bottom: 15px;">
                    <div>üåø Gramas frescas: <span id="fresh-grass">0</span></div>
                    <div>üåæ Gramas secas: <span id="dried-grass">0</span></div>
                    <div>üü® Feno: <span id="hay-count">0</span></div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="grass-amount">Quantidade para secar (4-8):</label>
                    <input type="number" id="grass-amount" min="4" max="8" value="4" style="width: 60px; margin-left: 10px;">
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="startDrying()">Secar Grama</button>
                    <button class="action-btn" onclick="makeHay()">Fazer Feno (4 gramas secas)</button>
                </div>
                <div id="drying-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="mixer-panel" style="display: none;">
                <h3>ü•£ Misturador de Ra√ß√£o</h3>
                <div style="margin-bottom: 15px;">
                    <div>üêî Ra√ß√£o de Galinha: <span id="chicken-feed">0</span></div>
                    <div>üê∑ Ra√ß√£o de Porco: <span id="pig-feed">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receitas:</strong><br>
                    üêî Galinha: 2 milhos + 1 trigo = 4 por√ß√µes<br>
                    üê∑ Porco: 1 tomate + 1 batata + 1 milho + 1 alface = 4 por√ß√µes
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="makeChickenFeed()">Fazer Ra√ß√£o de Galinha</button>
                    <button class="action-btn" onclick="makePigFeed()">Fazer Ra√ß√£o de Porco</button>
                </div>
            </div>



            <div class="panel" id="cheese-panel" style="display: none;">
                <h3>üßÄ Queijaria</h3>
                <div style="margin-bottom: 15px;">
                    <div>ü•õ Leite dispon√≠vel: <span id="milk-for-cheese">0</span></div>
                    <div>üßÄ Queijos prontos: <span id="cheese-ready">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receita:</strong><br>
                    üßÄ Queijo: 2 leites = 1 queijo (5 minutos)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="makeCheese()">Fazer Queijo</button>
                </div>
                <div id="cheese-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="wood-panel" style="display: none;">
                <h3>ü™ì Cortar Lenha</h3>
                <div style="margin-bottom: 15px;">
                    <div>ü™µ Troncos: <span id="logs-inventory">0</span></div>
                    <div>ü™® Lenha: <span id="firewood-count">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Processo:</strong><br>
                    ü™® Lenha: 1 tronco = 4 lenhas (10 segundos)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="refineWood()">Refinar Tronco</button>
                </div>
                <div id="wood-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="roaster-panel" style="display: none;">
                <h3>‚òï Torradeira de Caf√©</h3>
                <div style="margin-bottom: 15px;">
                    <div>üî¥ Gr√£os de caf√©: <span id="coffee-beans">0</span></div>
                    <div>‚òï Caf√© torrado: <span id="coffee-roasted">0</span></div>
                    <div>ü™® Lenha dispon√≠vel: <span id="firewood-for-roaster">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receita:</strong><br>
                    ‚òï Caf√© torrado: 4 gr√£os + 3 lenhas = 2 pacotes (1 minuto)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="roastCoffee()">Torrar Caf√©</button>
                </div>
                <div id="roaster-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="spinning-panel" style="display: none;">
                <h3>üßµ M√°quina de Fiar</h3>
                <div style="margin-bottom: 15px;">
                    <div>üß∂ L√£ dispon√≠vel: <span id="wool-for-spinning">0</span></div>
                    <div>üßµ Novelos prontos: <span id="yarn-count">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receita:</strong><br>
                    üßµ Novelo: 4 l√£s = 2 novelos (30 segundos)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="spinWool()">Fiar L√£</button>
                </div>
                <div id="spinning-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="mill-panel" style="display: none;">
                <h3>üè≠ Moinho de Trigo</h3>
                <div style="margin-bottom: 15px;">
                    <div>üåæ Trigo dispon√≠vel: <span id="wheat-for-mill">0</span></div>
                    <div>üçö Farinha pronta: <span id="flour-ready">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receita:</strong><br>
                    üçö Farinha: 4 trigos = 2 pacotes (1 minuto)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="millWheat()">Moer Trigo</button>
                </div>
                <div id="mill-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="juice-panel" style="display: none;">
                <h3>üçá M√°quina de Suco</h3>
                <div style="margin-bottom: 15px;">
                    <div>üçá Uvas dispon√≠veis: <span id="grapes-for-juice">0</span></div>
                    <div>üç∑ Suco pronto: <span id="juice-ready">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receita:</strong><br>
                    üç∑ Suco de Uva: 4 uvas = 2 garrafas (20 segundos)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="makeGrapeJuice()">Fazer Suco</button>
                </div>
                <div id="juice-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>

            <div class="panel" id="stove-panel" style="display: none;">
                <h3>üî• Fog√£o e Forno a Lenha</h3>
                <div style="margin-bottom: 15px;">
                    <div>ü™® Lenha dispon√≠vel: <span id="firewood-for-stove">0</span></div>
                    <div>üçû P√£es prontos: <span id="bread-ready">0</span></div>
                </div>
                <div style="margin-bottom: 15px; font-size: 0.9rem; color: #2F4F4F;">
                    <strong>Receitas do Fog√£o (2 lenhas):</strong><br>
                    ü•ó Salada: 1 ovo + 1 br√≥colis + 1 alface = +50% energia (30s)<br>
                    üç≤ Ensopado: 1 tomate + 1 batata + 1 carne = +100% energia (30s)<br><br>
                    <strong>Receita do Forno (3 lenhas):</strong><br>
                    üçû P√£o: 1 ovo + 1 leite + 1 farinha = 1 p√£o (3 min)
                </div>
                <div class="actions">
                    <button class="action-btn" onclick="cookSalad()">ü•ó Cozinhar Salada</button>
                    <button class="action-btn" onclick="cookStew()">üç≤ Cozinhar Ensopado</button>
                    <button class="action-btn" onclick="bakeBread()">üçû Assar P√£o</button>
                </div>
                <div id="stove-status" style="margin-top: 10px; text-align: center; color: #2F4F4F;"></div>
            </div>


        </div>
    </div>

    <div class="weather-indicator" id="weather-indicator"></div>
    <div class="rain-drops" id="rain-drops"></div>

    <script>
        // Estado do jogo
        let gameState = {
            money: 200,
            water: 0,
            selectedSeed: null,
            selectedPlot: null,
            inventory: {},
            isRaining: false,
            isNight: false,
            currentSeason: 0,
            gameTime: 900,
            fertilizer: 50,
            energy: 100,
            hasCompost: false,
            hasWell: false,
            hasGrassField: false,
            hasDryer: false,
            hasPasture: false,
            hasSheepPen: false,
            hasMixer: false,
            hasCheeseMaker: false,
            hasAxe: false,
            axeUses: 0,
            logs: 0,
            firewood: 0,
            isRefiningWood: false,
            woodTimer: null,
            hasRoaster: false,
            isRoasting: false,
            roastingTimer: null,
            hasSpinningMachine: false,
            isSpinning: false,
            spinningTimer: null,
            yarnCount: 0,
            hasMill: false,
            isMilling: false,
            millingTimer: null,
            hasBeehive: false,
            honeyAvailable: 0,
            lastHoneyCollection: 0,
            canCollectHoney: false,
            hasJuiceMaker: false,
            isMakingJuice: false,
            juiceTimer: null,
            hasStove: false,
            isCooking: false,
            cookingTimer: null,
            isBaking: false,
            bakingTimer: null,
            breadReady: 0,
            hasGreenhouse: false,
            greenhousePlots: Array(12).fill(null).map(() => ({
                fertilized: false,
                planted: false,
                watered: false,
                seedType: null,
                growthProgress: 0,
                readyToHarvest: false,
                growthTimer: null
            })),
            hasFishingRod: false,
            fishingRodUses: 0,
            fishAvailable: 4,
            fishCaught: 0,
            lastFishingDay: 0,
            isFishing: false,
            fishingTimer: null,
            hasBosque: false,
            branchesCollected: 0,
            logsCollectedCount: 0,
            horse: {
                fed: false,
                friendship: 0,
                canRide: false,
                fedToday: false,
                lastFeedDay: 0
            },
            apples: 0,
            canCollectApples: true,
            lastAppleCollection: 0,
            bananas: 0,
            canCollectBananas: true,
            lastBananaCollection: 0,
            oranges: 0,
            canCollectOranges: true,
            lastOrangeCollection: 0,
            canCollectLogs: true,
            lastLogCollection: 0,
            hasDog: false,
            hasHorse: false,
            dog: {
                fed: false,
                fedToday: false,
                lastFeedDay: 0,
                hasFoundTreasure: false,
                treasureReady: false,
                currentTreasure: null,
                treasureTimer: null,
                friendship: 0
            },
            dogFood: 0,
            dogBones: 0,
            treasures: {
                cd: 0,
                bottle: 0,
                shoe: 0,
                ball: 0
            },
            treasuresFoundToday: 0,
            cows: [],
            chickens: [],
            chicks: [],
            pigs: [],
            sheep: [],
            feed: { chicken: 0, pig: 0 },
            breedingTimer: null,
            lastChickBirth: 0,
            cheeseReady: 0,
            isMakingCheese: false,
            cheeseTimer: null,
            compostMaterials: { flowers: 0, branches: 0, manure: 0 },
            isComposting: false,
            compostTimer: null,
            grassCollected: 0,
            freshGrass: 0,
            driedGrass: 0,
            hay: 0,
            isDrying: false,
            dryingTimer: null,
            grassField: Array(24).fill(null).map(() => ({
                hasGrass: true,
                regenerating: false,
                regenerationTimer: null
            })),
            products: {
                milk: 0,
                eggs: 0,
                coffee: 0,
                wool: 0,
                flour: 0,
                honey: 0,
                meat: 0,
                juice: 0,
                cheese: 0,
                yarn: 0,
                bread: 0,
                rawChicken: 0,
                fish: 0
            },
            plots: Array(8).fill(null).map(() => ({
                fertilized: false,
                planted: false,
                watered: false,
                seedType: null,
                growthProgress: 0,
                readyToHarvest: false,
                growthTimer: null
            })),
            maxPlots: 8,
            dayCount: 1,
            lastRainDay: 0,
            isResting: false
        };

        // Dados das sementes
        const seeds = [
            { name: 'Batata', emoji: 'ü•î', price: 10, sellPrice: 25 },
            { name: 'Tomate', emoji: 'üçÖ', price: 10, sellPrice: 30 },
            { name: 'Cenoura', emoji: 'ü•ï', price: 10, sellPrice: 20 },
            { name: 'Milho', emoji: 'üåΩ', price: 10, sellPrice: 35 },
            { name: 'Trigo', emoji: 'üåæ', price: 10, sellPrice: 15 },
            { name: 'Caf√©', emoji: 'üî¥', price: 10, sellPrice: 50 },
            { name: 'Ab√≥bora', emoji: 'üéÉ', price: 10, sellPrice: 40 },
            { name: 'Br√≥colis', emoji: 'ü•¶', price: 10, sellPrice: 25 },
            { name: 'Alface', emoji: 'ü•¨', price: 10, sellPrice: 20 },
            { name: 'Uva', emoji: 'üçá', price: 10, sellPrice: 45 }
        ];

        const seasons = ['üå∏ Primavera', '‚òÄÔ∏è Ver√£o', 'üçÇ Outono', '‚ùÑÔ∏è Inverno'];

        // Pre√ßos dos produtos
        const productPrices = {
            milk: 15,
            eggs: 12,
            coffee: 25,
            wool: 30,
            flour: 20,
            honey: 35,
            meat: 50,
            juice: 40,
            cheese: 60,
            yarn: 45,
            bread: 35,
            rawChicken: 80,
            fish: 30
        };

        // Inicializar o jogo
        function initGame() {
            createPlots();
            createSeedsGrid();
            spawnFish(); // Criar peixes no lago
            updateDisplay();
            startGameTimer();
            startWeatherSystem();
            startSeasonCycle();
        }

        // Criar canteiros
        function createPlots() {
            const plotsGrid = document.getElementById('plots-grid');
            plotsGrid.innerHTML = '';
            
            // Calcular colunas baseado no n√∫mero de canteiros
            const columns = Math.min(8, Math.ceil(Math.sqrt(gameState.maxPlots)));
            plotsGrid.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            
            for (let i = 0; i < gameState.maxPlots; i++) {
                const plot = document.createElement('div');
                plot.className = 'plot';
                plot.onclick = () => selectPlot(i);
                plot.innerHTML = `
                    <div class="plot-content" id="plot-content-${i}">üå±</div>
                    <div class="plot-status" id="plot-status-${i}">Vazio</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-${i}"></div>
                    </div>
                `;
                plotsGrid.appendChild(plot);
            }
        }

        // Criar canteiros da estufa
        function createGreenhousePlots() {
            const greenhouseGrid = document.getElementById('greenhouse-grid');
            greenhouseGrid.innerHTML = '';
            
            for (let i = 0; i < 12; i++) {
                const plot = document.createElement('div');
                plot.className = 'plot';
                plot.style.width = '80px';
                plot.style.height = '80px';
                plot.onclick = () => selectGreenhousePlot(i);
                plot.innerHTML = `
                    <div class="plot-content" id="greenhouse-content-${i}">üå±</div>
                    <div class="plot-status" id="greenhouse-status-${i}">Vazio</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="greenhouse-progress-${i}"></div>
                    </div>
                `;
                greenhouseGrid.appendChild(plot);
            }
        }

        // Criar grid de sementes
        function createSeedsGrid() {
            const seedsGrid = document.getElementById('seeds-grid');
            seedsGrid.innerHTML = '';
            
            seeds.forEach((seed, index) => {
                const seedItem = document.createElement('div');
                seedItem.className = 'seed-item';
                seedItem.onclick = () => selectSeed(index);
                seedItem.innerHTML = `
                    <span class="seed-emoji">${seed.emoji}</span>
                    <div class="seed-name">${seed.name}</div>
                    <div style="font-size: 0.7rem; color: #666;">10 moedas</div>
                `;
                seedsGrid.appendChild(seedItem);
            });
        }

        // Selecionar semente (agora ilimitada)
        function selectSeed(index) {
            gameState.selectedSeed = index;
            
            // Destacar semente selecionada
            document.querySelectorAll('.seed-item').forEach((item, i) => {
                item.classList.toggle('selected', i === index);
            });
            
            alert(`${seeds[index].name} selecionada! Clique nos canteiros para plantar (10 moedas por semente).`);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Selecionar canteiro e executar a√ß√£o
        function selectPlot(index) {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            gameState.selectedPlot = index;
            document.querySelectorAll('.plot').forEach((plot, i) => {
                plot.style.border = i === index ? '3px solid #FFD700' : '3px solid #654321';
            });
            
            const plot = gameState.plots[index];
            
            // Executar a√ß√£o apropriada baseada no estado do canteiro
            if (plot.readyToHarvest) {
                harvestPlot();
            } else if (plot.planted && !plot.watered) {
                waterPlot();
            } else if (plot.fertilized && !plot.planted) {
                plantSeed();
            } else if (!plot.fertilized) {
                fertilizePlot();
            }
        }

        // Comprar po√ßo
        function buyWell() {
            if (gameState.hasWell) {
                alert('Voc√™ j√° tem um po√ßo!');
                return;
            }
            
            if (gameState.money < 50) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 50;
            gameState.hasWell = true;
            document.getElementById('well-panel').style.display = 'block';
            document.getElementById('buy-well-btn').style.display = 'none';
            updateDisplay();
            alert('Po√ßo comprado! Agora voc√™ pode coletar √°gua.');
        }

        // Comprar composteira
        function buyCompost() {
            if (gameState.hasCompost) {
                alert('Voc√™ j√° tem uma composteira!');
                return;
            }
            
            if (gameState.money < 100) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 100;
            gameState.hasCompost = true;
            document.getElementById('compost-panel').style.display = 'block';
            document.getElementById('buy-compost-btn').style.display = 'none';
            updateDisplay();
            alert('Composteira comprada! Agora voc√™ pode fazer adubo.');
        }

        // Comprar campo de grama
        function buyGrassField() {
            if (gameState.hasGrassField) {
                alert('Voc√™ j√° tem um campo de grama!');
                return;
            }
            
            if (gameState.money < 150) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 150;
            gameState.hasGrassField = true;
            document.getElementById('grass-field-area').style.display = 'block';
            document.getElementById('buy-grass-btn').style.display = 'none';
            createGrassField();
            updateDisplay();
            alert('Campo de grama comprado! Colete grama para ganhar flores.');
        }

        // Comprar pasto
        function buyPasture() {
            if (gameState.hasPasture) {
                alert('Voc√™ j√° tem um pasto!');
                return;
            }
            
            if (gameState.money < 200) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 200;
            gameState.hasPasture = true;
            document.getElementById('pasture-area').style.display = 'block';
            document.getElementById('buy-pasture-btn').style.display = 'none';
            document.getElementById('buy-cow-btn').style.display = 'block';
            updateDisplay();
            alert('Pasto comprado! Agora voc√™ pode comprar vacas leiteiras.');
        }

        // Comprar curral de ovelhas
        function buySheepPen() {
            if (gameState.hasSheepPen) {
                alert('Voc√™ j√° tem um curral de ovelhas!');
                return;
            }
            
            if (gameState.money < 180) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 180;
            gameState.hasSheepPen = true;
            document.getElementById('sheep-area').style.display = 'block';
            document.getElementById('buy-sheep-pen-btn').style.display = 'none';
            document.getElementById('buy-sheep-btn').style.display = 'block';
            updateDisplay();
            alert('Curral de ovelhas comprado! Agora voc√™ pode comprar ovelhas.');
        }

        // Comprar secador
        function buyDryer() {
            if (gameState.hasDryer) {
                alert('Voc√™ j√° tem um secador!');
                return;
            }
            
            if (gameState.money < 80) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 80;
            gameState.hasDryer = true;
            document.getElementById('drying-panel').style.display = 'block';
            document.getElementById('buy-dryer-btn').style.display = 'none';
            updateDisplay();
            alert('Secador de grama comprado! Agora voc√™ pode secar grama e fazer feno.');
        }

        // Comprar misturador
        function buyMixer() {
            if (gameState.hasMixer) {
                alert('Voc√™ j√° tem um misturador!');
                return;
            }
            
            if (gameState.money < 120) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 120;
            gameState.hasMixer = true;
            document.getElementById('mixer-panel').style.display = 'block';
            document.getElementById('buy-mixer-btn').style.display = 'none';
            document.getElementById('buy-chicken-btn').style.display = 'block';
            document.getElementById('buy-pig-btn').style.display = 'block';
            updateDisplay();
            alert('Misturador comprado! Agora voc√™ pode fazer ra√ß√£o e comprar galinhas e porcos.');
        }

        // Comprar queijaria
        function buyCheeseMaker() {
            if (gameState.hasCheeseMaker) {
                alert('Voc√™ j√° tem uma queijaria!');
                return;
            }
            
            if (gameState.money < 90) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 90;
            gameState.hasCheeseMaker = true;
            document.getElementById('cheese-panel').style.display = 'block';
            document.getElementById('buy-cheese-btn').style.display = 'none';
            updateDisplay();
            alert('Queijaria comprada! Agora voc√™ pode fazer queijo com leite (2 leites = 1 queijo).');
        }

        // Comprar machado
        function buyAxe() {
            if (gameState.hasAxe) {
                alert('Voc√™ j√° tem um machado!');
                return;
            }
            
            if (gameState.money < 40) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 40;
            gameState.hasAxe = true;
            document.getElementById('wood-panel').style.display = 'block';
            document.getElementById('buy-axe-btn').style.display = 'none';
            updateDisplay();
            alert('Machado comprado! Agora voc√™ pode coletar troncos da √°rvore e refinar em lenha.');
        }

        // Comprar torradeira
        function buyRoaster() {
            if (gameState.hasRoaster) {
                alert('Voc√™ j√° tem uma torradeira!');
                return;
            }
            
            if (gameState.money < 60) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 60;
            gameState.hasRoaster = true;
            document.getElementById('roaster-panel').style.display = 'block';
            document.getElementById('buy-roaster-btn').style.display = 'none';
            updateDisplay();
            alert('Torradeira comprada! Agora voc√™ pode torrar caf√© (4 gr√£os + 3 lenhas = 2 pacotes).');
        }

        // Comprar m√°quina de fiar
        function buySpinningMachine() {
            if (gameState.hasSpinningMachine) {
                alert('Voc√™ j√° tem uma m√°quina de fiar!');
                return;
            }
            
            if (gameState.money < 70) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 70;
            gameState.hasSpinningMachine = true;
            document.getElementById('spinning-panel').style.display = 'block';
            document.getElementById('buy-spinning-btn').style.display = 'none';
            updateDisplay();
            alert('M√°quina de fiar comprada! Agora voc√™ pode transformar l√£ em novelos (4 l√£s = 2 novelos).');
        }

        // Comprar moinho
        function buyMill() {
            if (gameState.hasMill) {
                alert('Voc√™ j√° tem um moinho!');
                return;
            }
            
            if (gameState.money < 85) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 85;
            gameState.hasMill = true;
            document.getElementById('mill-panel').style.display = 'block';
            document.getElementById('buy-mill-btn').style.display = 'none';
            updateDisplay();
            alert('Moinho comprado! Agora voc√™ pode moer trigo em farinha (4 trigos = 2 farinhas).');
        }

        // Comprar colmeia
        function buyBeehive() {
            if (gameState.hasBeehive) {
                alert('Voc√™ j√° tem uma colmeia!');
                return;
            }
            
            if (gameState.money < 120) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 120;
            gameState.hasBeehive = true;
            gameState.lastHoneyCollection = gameState.dayCount;
            document.getElementById('beehive-area').style.display = 'block';
            document.getElementById('buy-beehive-btn').style.display = 'none';
            updateDisplay();
            alert('Colmeia comprada! As abelhas produzem 2 potes de mel a cada 2 dias.');
        }

        // Comprar m√°quina de suco
        function buyJuiceMaker() {
            if (gameState.hasJuiceMaker) {
                alert('Voc√™ j√° tem uma m√°quina de suco!');
                return;
            }
            
            if (gameState.money < 75) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 75;
            gameState.hasJuiceMaker = true;
            document.getElementById('juice-panel').style.display = 'block';
            document.getElementById('buy-juice-btn').style.display = 'none';
            updateDisplay();
            alert('M√°quina de suco comprada! Agora voc√™ pode fazer suco de uva (4 uvas = 2 garrafas).');
        }

        // Comprar fog√£o a lenha
        function buyStove() {
            if (gameState.hasStove) {
                alert('Voc√™ j√° tem um fog√£o!');
                return;
            }
            
            if (gameState.money < 150) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 150;
            gameState.hasStove = true;
            document.getElementById('stove-panel').style.display = 'block';
            document.getElementById('buy-stove-btn').style.display = 'none';
            updateDisplay();
            alert('Fog√£o a lenha comprado! Agora voc√™ pode cozinhar refei√ß√µes para recuperar energia e assar p√£o!');
        }

        // Comprar bosque
        function buyBosque() {
            if (gameState.hasBosque) {
                alert('Voc√™ j√° tem um bosque!');
                return;
            }
            
            if (gameState.money < 300) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 300;
            gameState.hasBosque = true;
            gameState.branchesCollected = 0;
            document.getElementById('tree-area').style.display = 'block';
            document.getElementById('buy-bosque-btn').style.display = 'none';
            updateDisplay();
            alert('Bosque comprado! Agora voc√™ pode coletar troncos, frutas e galhos para a composteira!');
        }

        // Comprar mais canteiros
        function buyPlots() {
            if (gameState.maxPlots >= 40) {
                alert('Voc√™ j√° tem o m√°ximo de canteiros (40)!');
                return;
            }
            
            if (gameState.money < 200) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 200;
            gameState.maxPlots += 8;
            
            // Adicionar novos canteiros ao array
            for (let i = 0; i < 8; i++) {
                gameState.plots.push({
                    fertilized: false,
                    planted: false,
                    watered: false,
                    seedType: null,
                    growthProgress: 0,
                    readyToHarvest: false,
                    growthTimer: null
                });
            }
            
            // Recriar grid de canteiros
            createPlots();
            
            // Esconder bot√£o se chegou ao m√°ximo
            if (gameState.maxPlots >= 40) {
                document.getElementById('buy-plots-btn').style.display = 'none';
            }
            
            updateDisplay();
            alert(`+8 canteiros comprados! Agora voc√™ tem ${gameState.maxPlots} canteiros.`);
        }

        // Comprar estufa
        function buyGreenhouse() {
            if (gameState.hasGreenhouse) {
                alert('Voc√™ j√° tem uma estufa!');
                return;
            }
            
            if (gameState.money < 800) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 800;
            gameState.hasGreenhouse = true;
            document.getElementById('greenhouse-area').style.display = 'block';
            document.getElementById('buy-greenhouse-btn').style.display = 'none';
            createGreenhousePlots();
            updateDisplay();
            alert('Estufa comprada! Agora voc√™ pode plantar no inverno usando os 12 canteiros protegidos.');
        }

        // Comprar vara de pesca
        function buyFishingRod() {
            if (gameState.hasFishingRod) {
                alert('Voc√™ j√° tem uma vara de pesca!');
                return;
            }
            
            if (gameState.money < 60) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 60;
            gameState.hasFishingRod = true;
            gameState.fishingRodUses = 0;
            document.getElementById('buy-fishing-rod-btn').style.display = 'none';
            updateDisplay();
            alert('Vara de pesca comprada! Agora voc√™ pode pescar no lago (4 peixes por dia, 10s cada).');
        }

        // Sistema de peixes interativos
        let fishInLake = [];

        // Criar peixes no lago
        function spawnFish() {
            const fishContainer = document.getElementById('fish-container');
            if (!fishContainer) return;
            
            fishContainer.innerHTML = '';
            fishInLake = [];
            
            const fishTypes = ['üêü', 'üê†', 'üê°', 'ü¶à'];
            const swimPatterns = ['swimming1', 'swimming2', 'swimming3'];
            
            for (let i = 0; i < gameState.fishAvailable; i++) {
                const fish = document.createElement('div');
                const fishType = fishTypes[Math.floor(Math.random() * fishTypes.length)];
                const swimPattern = swimPatterns[Math.floor(Math.random() * swimPatterns.length)];
                
                fish.className = `fish ${swimPattern}`;
                fish.textContent = fishType;
                fish.id = `fish-${i}`;
                
                // Posi√ß√£o inicial aleat√≥ria
                const x = Math.random() * 250 + 25; // 25px de margem
                const y = Math.random() * 150 + 25; // 25px de margem
                
                fish.style.left = x + 'px';
                fish.style.top = y + 'px';
                
                // Adicionar delay aleat√≥rio na anima√ß√£o
                fish.style.animationDelay = Math.random() * 2 + 's';
                
                fish.onclick = () => catchSpecificFish(i, fish);
                
                fishContainer.appendChild(fish);
                fishInLake.push({
                    id: i,
                    element: fish,
                    type: fishType,
                    caught: false
                });
            }
        }

        // Pescar peixe espec√≠fico
        function catchSpecificFish(fishId, fishElement) {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (!gameState.hasFishingRod) {
                alert('Voc√™ precisa comprar uma vara de pesca primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            if (gameState.isFishing) {
                alert('Voc√™ j√° est√° pescando! Aguarde terminar.');
                return;
            }
            
            const fish = fishInLake.find(f => f.id === fishId);
            if (!fish || fish.caught) {
                return;
            }
            
            // Marcar peixe como sendo pescado
            fish.caught = true;
            gameState.isFishing = true;
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.fishingRodUses++;
            
            // Criar efeito de ondula√ß√£o
            createRippleEffect(fishElement);
            
            // Anima√ß√£o de captura
            fishElement.classList.add('caught');
            fishElement.style.pointerEvents = 'none';
            
            let timeLeft = 3; // 3 segundos para pescar
            const statusElement = document.getElementById('fishing-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Pescando ${fish.type}... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isFishing = false;
                    gameState.fishAvailable--;
                    gameState.fishCaught++;
                    gameState.products.fish++;
                    
                    // Remover peixe do lago
                    setTimeout(() => {
                        fishElement.remove();
                    }, 500);
                    
                    statusElement.textContent = `${fish.type} pescado!`;
                    clearInterval(gameState.fishingTimer);
                    
                    // Verificar se a vara quebrou
                    if (gameState.fishingRodUses >= 50) {
                        gameState.hasFishingRod = false;
                        gameState.fishingRodUses = 0;
                        document.getElementById('buy-fishing-rod-btn').style.display = 'block';
                        alert(`${fish.type} pescado! +1 peixe\n\nSua vara de pesca quebrou! Voc√™ precisa comprar outra.`);
                    } else {
                        alert(`${fish.type} pescado! +1 peixe`);
                    }
                    
                    updateDisplay();
                }
            };
            
            updateTimer();
            gameState.fishingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Criar efeito de ondula√ß√£o
        function createRippleEffect(fishElement) {
            const ripple = document.createElement('div');
            ripple.className = 'fishing-ripple';
            
            const rect = fishElement.getBoundingClientRect();
            const lakeRect = document.getElementById('fishing-lake-container').getBoundingClientRect();
            
            const x = rect.left - lakeRect.left + rect.width / 2 - 50;
            const y = rect.top - lakeRect.top + rect.height / 2 - 50;
            
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            
            document.getElementById('fishing-lake-container').appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 1000);
        }

        // Fun√ß√£o antiga mantida para compatibilidade (n√£o ser√° mais usada)
        function catchFish() {
            alert('Clique diretamente nos peixes para pesc√°-los!');
        }

        // Fazer suco de uva
        function makeGrapeJuice() {
            if (!gameState.hasJuiceMaker) {
                alert('Voc√™ precisa comprar a m√°quina de suco primeiro!');
                return;
            }
            
            if (gameState.isMakingJuice) {
                alert('J√° h√° suco sendo feito! Aguarde terminar.');
                return;
            }
            
            const grapesCount = gameState.inventory[9] || 0; // Uva √© √≠ndice 9
            if (grapesCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 uvas para fazer suco!');
                return;
            }
            
            gameState.inventory[9] -= 4;
            gameState.isMakingJuice = true;
            
            let timeLeft = 20; // 20 segundos
            const statusElement = document.getElementById('juice-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fazendo suco... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMakingJuice = false;
                    gameState.products.juice += 2;
                    statusElement.textContent = '2 garrafas de suco prontas! üç∑';
                    clearInterval(gameState.juiceTimer);
                    updateDisplay();
                    alert('Suco de uva pronto! +2 garrafas de suco');
                }
            };
            
            updateTimer();
            gameState.juiceTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Cozinhar salada (50% energia)
        function cookSalad() {
            if (!gameState.hasStove) {
                alert('Voc√™ precisa comprar o fog√£o primeiro!');
                return;
            }
            
            if (gameState.isCooking) {
                alert('J√° h√° algo sendo cozinhado! Aguarde terminar.');
                return;
            }
            
            // Verificar ingredientes: 1 ovo + 1 br√≥colis + 1 alface
            if (gameState.products.eggs < 1) {
                alert('Voc√™ precisa de 1 ovo!');
                return;
            }
            
            const broccoliCount = gameState.inventory[7] || 0; // Br√≥colis √© √≠ndice 7
            const lettuceCount = gameState.inventory[8] || 0; // Alface √© √≠ndice 8
            
            if (broccoliCount < 1 || lettuceCount < 1) {
                alert('Voc√™ precisa de 1 br√≥colis e 1 alface!');
                return;
            }
            
            if (gameState.firewood < 2) {
                alert('Voc√™ precisa de 2 lenhas para acender o fog√£o!');
                return;
            }
            
            // Consumir ingredientes
            gameState.products.eggs -= 1;
            gameState.inventory[7] -= 1; // Br√≥colis
            gameState.inventory[8] -= 1; // Alface
            gameState.firewood -= 2;
            gameState.isCooking = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('stove-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Cozinhando salada... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isCooking = false;
                    gameState.energy = Math.min(100, gameState.energy + 50);
                    statusElement.textContent = 'Salada pronta! +50% energia ü•ó';
                    clearInterval(gameState.cookingTimer);
                    updateDisplay();
                    alert('Salada cozinhada! Voc√™ recuperou 50% de energia!');
                }
            };
            
            updateTimer();
            gameState.cookingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Cozinhar ensopado (100% energia)
        function cookStew() {
            if (!gameState.hasStove) {
                alert('Voc√™ precisa comprar o fog√£o primeiro!');
                return;
            }
            
            if (gameState.isCooking) {
                alert('J√° h√° algo sendo cozinhado! Aguarde terminar.');
                return;
            }
            
            // Verificar ingredientes: 1 tomate + 1 batata + 1 carne
            const tomatoCount = gameState.inventory[1] || 0; // Tomate √© √≠ndice 1
            const potatoCount = gameState.inventory[0] || 0; // Batata √© √≠ndice 0
            
            if (tomatoCount < 1 || potatoCount < 1) {
                alert('Voc√™ precisa de 1 tomate e 1 batata!');
                return;
            }
            
            if (gameState.products.meat < 1) {
                alert('Voc√™ precisa de 1 carne!');
                return;
            }
            
            if (gameState.firewood < 2) {
                alert('Voc√™ precisa de 2 lenhas para acender o fog√£o!');
                return;
            }
            
            // Consumir ingredientes
            gameState.inventory[1] -= 1; // Tomate
            gameState.inventory[0] -= 1; // Batata
            gameState.products.meat -= 1;
            gameState.firewood -= 2;
            gameState.isCooking = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('stove-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Cozinhando ensopado... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isCooking = false;
                    gameState.energy = 100; // Recupera 100% da energia
                    statusElement.textContent = 'Ensopado pronto! +100% energia üç≤';
                    clearInterval(gameState.cookingTimer);
                    updateDisplay();
                    alert('Ensopado cozinhado! Voc√™ recuperou toda a energia!');
                }
            };
            
            updateTimer();
            gameState.cookingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Assar p√£o
        function bakeBread() {
            if (!gameState.hasStove) {
                alert('Voc√™ precisa comprar o fog√£o primeiro!');
                return;
            }
            
            if (gameState.isBaking) {
                alert('J√° h√° p√£o sendo assado! Aguarde terminar.');
                return;
            }
            
            // Verificar ingredientes: 1 ovo + 1 leite + 1 farinha
            if (gameState.products.eggs < 1 || gameState.products.milk < 1 || gameState.products.flour < 1) {
                alert('Voc√™ precisa de 1 ovo, 1 leite e 1 farinha!');
                return;
            }
            
            if (gameState.firewood < 3) {
                alert('Voc√™ precisa de 3 lenhas para acender o forno!');
                return;
            }
            
            // Consumir ingredientes
            gameState.products.eggs -= 1;
            gameState.products.milk -= 1;
            gameState.products.flour -= 1;
            gameState.firewood -= 3;
            gameState.isBaking = true;
            
            let timeLeft = 180; // 3 minutos
            const statusElement = document.getElementById('stove-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Assando p√£o... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isBaking = false;
                    gameState.breadReady += 1;
                    gameState.products.bread += 1;
                    statusElement.textContent = 'P√£o assado! üçû';
                    clearInterval(gameState.bakingTimer);
                    updateDisplay();
                    alert('P√£o assado! +1 p√£o pronto para comer ou vender!');
                }
            };
            
            updateTimer();
            gameState.bakingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }



        // Selecionar canteiro da estufa
        function selectGreenhousePlot(index) {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (gameState.currentSeason !== 3) {
                alert('A estufa s√≥ √© usada no inverno!');
                return;
            }
            
            gameState.selectedPlot = null; // Limpar sele√ß√£o normal
            gameState.selectedGreenhousePlot = index;
            
            // Destacar canteiro selecionado
            document.querySelectorAll('#greenhouse-grid .plot').forEach((plot, i) => {
                plot.style.border = i === index ? '3px solid #FFD700' : '3px solid #654321';
            });
            
            const plot = gameState.greenhousePlots[index];
            
            // Executar a√ß√£o apropriada baseada no estado do canteiro
            if (plot.readyToHarvest) {
                harvestGreenhousePlot();
            } else if (plot.planted && !plot.watered) {
                waterGreenhousePlot();
            } else if (plot.fertilized && !plot.planted) {
                plantGreenhouseSeed();
            } else if (!plot.fertilized) {
                fertilizeGreenhousePlot();
            }
        }

        // Adubar canteiro da estufa
        function fertilizeGreenhousePlot() {
            if (gameState.selectedGreenhousePlot === null) {
                alert('Selecione um canteiro da estufa primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            if (gameState.fertilizer < 1) {
                alert('Voc√™ n√£o tem adubo! Use a composteira para fazer.');
                return;
            }
            
            const plot = gameState.greenhousePlots[gameState.selectedGreenhousePlot];
            if (!plot.fertilized) {
                gameState.energy = Math.max(0, gameState.energy - 1);
                gameState.fertilizer -= 1;
                plot.fertilized = true;
                updateGreenhousePlotDisplay(gameState.selectedGreenhousePlot);
                updateDisplay();
                alert('Solo da estufa adubado!');
            } else {
                alert('Este canteiro j√° est√° adubado!');
            }
        }

        // Plantar na estufa
        function plantGreenhouseSeed() {
            if (gameState.selectedGreenhousePlot === null || gameState.selectedSeed === null) {
                alert('Selecione um canteiro da estufa e uma semente!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            const plot = gameState.greenhousePlots[gameState.selectedGreenhousePlot];
            if (!plot.fertilized) {
                alert('Adube o solo primeiro!');
                return;
            }
            
            if (plot.planted) {
                alert('Este canteiro j√° tem uma planta!');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 5);
            plot.planted = true;
            plot.seedType = gameState.selectedSeed;
            updateGreenhousePlotDisplay(gameState.selectedGreenhousePlot);
            updateDisplay();
            alert('Semente plantada na estufa! Agora regue para crescer. üè†');
        }

        // Regar canteiro da estufa
        function waterGreenhousePlot() {
            if (gameState.selectedGreenhousePlot === null) {
                alert('Selecione um canteiro da estufa primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            if (gameState.water <= 0) {
                alert('Voc√™ n√£o tem √°gua! Colete no po√ßo.');
                return;
            }
            
            const plot = gameState.greenhousePlots[gameState.selectedGreenhousePlot];
            if (!plot.planted) {
                alert('Plante algo primeiro!');
                return;
            }
            
            if (!plot.watered) {
                gameState.energy = Math.max(0, gameState.energy - 1);
                gameState.water--;
                plot.watered = true;
                startGreenhouseGrowth(gameState.selectedGreenhousePlot);
                updateGreenhousePlotDisplay(gameState.selectedGreenhousePlot);
                updateDisplay();
                alert('Planta da estufa regada! Crescer√° em 1 minuto.');
            } else {
                alert('Esta planta j√° foi regada!');
            }
        }

        // Colher da estufa
        function harvestGreenhousePlot() {
            if (gameState.selectedGreenhousePlot === null) {
                alert('Selecione um canteiro da estufa primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            const plot = gameState.greenhousePlots[gameState.selectedGreenhousePlot];
            if (!plot.readyToHarvest) {
                alert('A planta ainda n√£o est√° pronta para colher!');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            const seed = seeds[plot.seedType];
            
            // Adicionar ao invent√°rio
            switch(plot.seedType) {
                case 3: // Milho
                    gameState.inventory[3] = (gameState.inventory[3] || 0) + 1;
                    break;
                case 4: // Trigo
                    gameState.inventory[4] = (gameState.inventory[4] || 0) + 1;
                    break;
                case 5: // Caf√©
                    gameState.inventory[5] = (gameState.inventory[5] || 0) + 1;
                    break;
                case 9: // Uva
                    gameState.inventory[9] = (gameState.inventory[9] || 0) + 1;
                    break;
                default:
                    gameState.inventory[plot.seedType] = (gameState.inventory[plot.seedType] || 0) + 1;
                    break;
            }
            
            // Resetar canteiro
            plot.fertilized = false;
            plot.planted = false;
            plot.watered = false;
            plot.seedType = null;
            plot.growthProgress = 0;
            plot.readyToHarvest = false;
            if (plot.growthTimer) {
                clearInterval(plot.growthTimer);
                plot.growthTimer = null;
            }
            
            updateGreenhousePlotDisplay(gameState.selectedGreenhousePlot);
            updateDisplay();
            alert(`${seed.name} colhido da estufa! üè†`);
        }

        // Iniciar crescimento na estufa
        function startGreenhouseGrowth(plotIndex) {
            const plot = gameState.greenhousePlots[plotIndex];
            if (plot.growthTimer) clearInterval(plot.growthTimer);
            
            let growthTime = 60; // 1 minuto na estufa
            
            plot.growthTimer = setInterval(() => {
                plot.growthProgress += 100/growthTime;
                
                if (plot.growthProgress >= 100) {
                    plot.growthProgress = 100;
                    plot.readyToHarvest = true;
                    clearInterval(plot.growthTimer);
                    plot.growthTimer = null;
                }
                
                updateGreenhousePlotDisplay(plotIndex);
            }, 1000);
        }

        // Atualizar display do canteiro da estufa
        function updateGreenhousePlotDisplay(plotIndex) {
            const plot = gameState.greenhousePlots[plotIndex];
            const plotElement = document.querySelectorAll('#greenhouse-grid .plot')[plotIndex];
            const contentElement = document.getElementById(`greenhouse-content-${plotIndex}`);
            const statusElement = document.getElementById(`greenhouse-status-${plotIndex}`);
            const progressElement = document.getElementById(`greenhouse-progress-${plotIndex}`);
            
            // Atualizar classe do canteiro
            plotElement.className = 'plot';
            if (plot.fertilized) plotElement.classList.add('fertilized');
            if (plot.watered) plotElement.classList.add('watered');
            if (plot.planted && plot.growthProgress > 0) plotElement.classList.add('growing');
            
            // Atualizar conte√∫do
            if (plot.readyToHarvest) {
                contentElement.textContent = seeds[plot.seedType].emoji;
                statusElement.textContent = 'Pronto!';
            } else if (plot.planted) {
                contentElement.textContent = plot.watered ? 'üå±' : seeds[plot.seedType].emoji;
                statusElement.textContent = plot.watered ? 'Crescendo...' : 'Precisa regar';
            } else if (plot.fertilized) {
                contentElement.textContent = 'üå±';
                statusElement.textContent = 'Adubado';
            } else {
                contentElement.textContent = 'üå±';
                statusElement.textContent = 'Vazio';
            }
            
            // Atualizar barra de progresso
            progressElement.style.width = `${plot.growthProgress}%`;
        }

        // Comprar ra√ß√£o de cachorro
        function buyDogFood() {
            if (gameState.money < 15) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 15;
            gameState.dogFood += 1;
            
            // A cada 2 ra√ß√µes compradas, ganha 1 osso de brinde
            if (gameState.dogFood % 2 === 0) {
                gameState.dogBones += 1;
                alert('Ra√ß√£o de cachorro comprada! +1 osso de brinde (a cada 2 ra√ß√µes)! ü¶¥');
            } else {
                alert('Ra√ß√£o de cachorro comprada! Alimente a Mocinha para ela encontrar tesouros.');
            }
            
            updateDisplay();
        }

        // Comprar Mocinha
        function buyDog() {
            if (gameState.hasDog) {
                alert('Voc√™ j√° tem a Mocinha!');
                return;
            }
            
            if (gameState.money < 500) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 500;
            gameState.hasDog = true;
            document.getElementById('dog-area').style.display = 'block';
            document.getElementById('buy-dog-btn').style.display = 'none';
            updateDisplay();
            alert('Mocinha comprada! Agora voc√™ tem uma cachorrinha que encontra tesouros!');
        }

        // Comprar Duque
        function buyHorse() {
            if (gameState.hasHorse) {
                alert('Voc√™ j√° tem o Duque!');
                return;
            }
            
            if (gameState.money < 1000) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 1000;
            gameState.hasHorse = true;
            document.getElementById('horse-stable').style.display = 'block';
            document.getElementById('buy-horse-btn').style.display = 'none';
            updateDisplay();
            alert('Duque comprado! Alimente-o com 1 ma√ß√£ por dia e d√™ frutas para aumentar a amizade.');
        }

        // Interagir com cachorro
        function interactWithDog() {
            const dog = gameState.dog;
            
            if (!dog.fedToday) {
                feedDog();
            } else if (dog.treasureReady) {
                collectTreasure();
            } else {
                alert('Mocinha j√° foi alimentada hoje! Aguarde ela encontrar um tesouro.');
            }
        }

        // Alimentar cachorro
        function feedDog() {
            const dog = gameState.dog;
            
            if (dog.fedToday) {
                alert('Mocinha j√° foi alimentada hoje!');
                return;
            }
            
            if (gameState.dogFood <= 0) {
                alert('Voc√™ n√£o tem ra√ß√£o de cachorro! Compre no mercadinho.');
                return;
            }
            
            gameState.dogFood--;
            dog.fed = true;
            dog.fedToday = true;
            dog.lastFeedDay = gameState.dayCount;
            
            // Mostrar cora√ß√µes
            showDogHearts();
            
            // Iniciar busca por tesouro (30 segundos)
            dog.treasureTimer = setTimeout(() => {
                findTreasure();
            }, 30000);
            
            updateDogDisplay();
            updateDisplay();
            alert('Mocinha foi alimentada! ‚ù§Ô∏è Ela vai procurar tesouros agora (30 segundos).');
        }

        // Mostrar cora√ß√µes no cachorro
        function showDogHearts() {
            const heartsElement = document.getElementById('dog-hearts');
            heartsElement.textContent = '‚ù§Ô∏èüíï‚ù§Ô∏è';
            heartsElement.style.opacity = '1';
            
            setTimeout(() => {
                heartsElement.style.opacity = '0';
            }, 2000);
        }

        // Dar petisco (osso) para o cachorro
        function giveBoneTreat() {
            if (!gameState.hasDog) {
                alert('Voc√™ precisa comprar a Mocinha primeiro!');
                return;
            }
            
            if (gameState.dogBones <= 0) {
                alert('Voc√™ n√£o tem ossos! Compre 2 ra√ß√µes para ganhar 1 osso de brinde.');
                return;
            }
            
            gameState.dogBones--;
            gameState.dog.friendship = Math.min(100, gameState.dog.friendship + 10);
            
            // Mostrar cora√ß√µes
            showDogHearts();
            
            updateDogDisplay();
            updateDisplay();
            alert(`Mocinha adorou o petisco! ‚ù§Ô∏è Amizade: ${gameState.dog.friendship}/100`);
        }

        // Encontrar tesouro
        function findTreasure() {
            const dog = gameState.dog;
            
            if (gameState.treasuresFoundToday >= 1) {
                return; // M√°ximo 1 tesouro por dia
            }
            
            const treasureTypes = ['cd', 'bottle', 'shoe', 'ball'];
            const randomTreasure = treasureTypes[Math.floor(Math.random() * treasureTypes.length)];
            
            dog.currentTreasure = randomTreasure;
            dog.treasureReady = true;
            dog.hasFoundTreasure = true;
            
            document.getElementById('collect-treasure-btn').style.display = 'block';
            updateDogDisplay();
            
            alert('üéâ Mocinha encontrou um tesouro! Clique para coletar.');
        }

        // Coletar tesouro
        function collectTreasure() {
            const dog = gameState.dog;
            
            if (!dog.treasureReady || !dog.currentTreasure) {
                alert('Mocinha ainda n√£o encontrou nenhum tesouro!');
                return;
            }
            
            const treasureEmojis = {
                cd: 'üíø',
                bottle: 'üçº', 
                shoe: 'üëü',
                ball: '‚öΩ'
            };
            
            gameState.treasures[dog.currentTreasure]++;
            gameState.treasuresFoundToday++;
            
            const treasureEmoji = treasureEmojis[dog.currentTreasure];
            const treasureName = getTreasureName(dog.currentTreasure);
            
            // Reset do cachorro
            dog.treasureReady = false;
            dog.currentTreasure = null;
            document.getElementById('collect-treasure-btn').style.display = 'none';
            
            updateDogDisplay();
            updateDisplay();
            alert(`Tesouro coletado! ${treasureEmoji} Mocinha encontrou um(a) ${treasureName}!`);
        }

        // Obter nome do tesouro
        function getTreasureName(treasure) {
            const names = {
                cd: 'CD',
                bottle: 'garrafa',
                shoe: 'sapato', 
                ball: 'bola'
            };
            return names[treasure] || treasure;
        }

        // Vender tesouro
        function sellTreasure(treasureType) {
            if (gameState.treasures[treasureType] <= 0) {
                alert(`Voc√™ n√£o tem ${getTreasureName(treasureType)} para vender!`);
                return;
            }
            
            const prices = {
                cd: 80,
                bottle: 60,
                shoe: 70,
                ball: 90
            };
            
            const price = prices[treasureType];
            gameState.treasures[treasureType]--;
            gameState.money += price;
            updateDisplay();
            alert(`${getTreasureName(treasureType)} vendido por ${price} moedas!`);
        }

        // Atualizar display do cachorro
        function updateDogDisplay() {
            const dog = gameState.dog;
            const statusElement = document.getElementById('dog-status');
            
            if (dog.treasureReady) {
                statusElement.textContent = `Encontrou tesouro! üíé`;
            } else if (dog.fedToday) {
                if (gameState.treasuresFoundToday >= 1) {
                    statusElement.textContent = 'J√° encontrou tesouro hoje';
                } else {
                    statusElement.textContent = 'Procurando tesouros...';
                }
            } else {
                statusElement.textContent = 'Com fome';
            }
        }

        // Interagir com cavalo
        function interactWithHorse() {
            if (!gameState.hasHorseStable) return;
            
            const horse = gameState.horse;
            
            if (!horse.fed && !horse.fedToday) {
                feedHorse();
            } else if (horse.friendship >= 100 && horse.canRide) {
                rideHorse();
            } else {
                alert('Duque precisa ser alimentado ou ainda n√£o confia em voc√™ o suficiente para montar.');
            }
        }



        // Dar feno ao cavalo (alimentar)
        function giveHayToHorse() {
            if (!gameState.hasHorse) {
                alert('Voc√™ precisa comprar o Duque primeiro!');
                return;
            }
            
            const horse = gameState.horse;
            if (horse.fedToday) {
                alert('Duque j√° foi alimentado hoje!');
                return;
            }
            
            if (gameState.hay <= 0) {
                alert('Voc√™ n√£o tem feno! Fa√ßa feno no secador de grama.');
                return;
            }
            
            gameState.hay--;
            horse.fed = true;
            horse.fedToday = true;
            horse.lastFeedDay = gameState.dayCount;
            
            // Produzir esterco
            gameState.compostMaterials.manure += 1;
            
            // Mostrar cora√ß√µes
            showHorseHearts();
            
            updateHorseDisplay();
            updateDisplay();
            alert('Duque foi alimentado com feno! +1 esterco adicionado.');
        }

        // Dar ma√ß√£ ao cavalo (+amizade)
        function giveAppleToHorse() {
            if (!gameState.hasHorse) {
                alert('Voc√™ precisa comprar o Duque primeiro!');
                return;
            }
            
            if (gameState.apples <= 0) {
                alert('Voc√™ n√£o tem ma√ß√£s! Colete na macieira do bosque.');
                return;
            }
            
            gameState.apples--;
            gameState.horse.friendship = Math.min(100, gameState.horse.friendship + 10);
            
            // Mostrar cora√ß√µes
            showHorseHearts();
            
            // Verificar se pode montar
            if (gameState.horse.friendship >= 100) {
                gameState.horse.canRide = true;
                document.getElementById('ride-btn').style.display = 'block';
                alert(`Duque ama ma√ß√£s! ‚ù§Ô∏è Amizade: ${gameState.horse.friendship}/100. Agora voc√™ pode montar nele!`);
            } else {
                alert(`Duque ama ma√ß√£s! ‚ù§Ô∏è Amizade: ${gameState.horse.friendship}/100`);
            }
            
            updateHorseDisplay();
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }



        // Mostrar cora√ß√µes no cavalo
        function showHorseHearts() {
            const heartsElement = document.getElementById('horse-hearts');
            heartsElement.textContent = '‚ù§Ô∏èüíï‚ù§Ô∏è';
            heartsElement.style.opacity = '1';
            
            setTimeout(() => {
                heartsElement.style.opacity = '0';
            }, 2000);
        }

        // Montar no cavalo
        function rideHorse() {
            if (!gameState.horse.canRide) {
                alert('Duque ainda n√£o confia em voc√™ o suficiente! D√™ mais ma√ß√£s para ele.');
                return;
            }
            
            if (!gameState.horse.fed) {
                alert('Duque precisa ser alimentado antes de trabalhar!');
                return;
            }
            
            alert('üèá Voc√™ montou no Duque! Que experi√™ncia incr√≠vel! Duque √© um cavalo leal e forte.');
            
            // Anima√ß√£o especial
            const horseDisplay = document.getElementById('horse-display');
            horseDisplay.style.transform = 'scale(1.2)';
            setTimeout(() => {
                horseDisplay.style.transform = 'scale(1)';
            }, 1000);
        }

        // Atualizar display do cavalo
        function updateHorseDisplay() {
            if (!gameState.hasHorse) return;
            
            const horse = gameState.horse;
            const statusElement = document.getElementById('horse-status');
            
            if (horse.fedToday) {
                if (horse.canRide) {
                    statusElement.textContent = 'Alimentado e pronto para montar! üèá';
                } else {
                    statusElement.textContent = `Alimentado (amizade: ${horse.friendship}/100)`;
                }
            } else {
                statusElement.textContent = 'Com fome (precisa de 1 feno/dia)';
            }
        }

        // Iniciar secagem de grama
        function startDrying() {
            if (!gameState.hasDryer) {
                alert('Voc√™ precisa comprar o secador primeiro!');
                return;
            }
            
            if (gameState.isDrying) {
                alert('J√° h√° grama secando! Aguarde terminar.');
                return;
            }
            
            const amount = parseInt(document.getElementById('grass-amount').value);
            
            if (amount < 4 || amount > 8) {
                alert('Quantidade deve ser entre 4 e 8 gramas!');
                return;
            }
            
            if (gameState.freshGrass < amount) {
                alert('Voc√™ n√£o tem grama fresca suficiente!');
                return;
            }
            
            gameState.freshGrass -= amount;
            gameState.isDrying = true;
            
            let timeLeft = 30; // 30 segundos para secar
            const statusElement = document.getElementById('drying-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Secando... ${timeLeft}s restantes`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isDrying = false;
                    gameState.driedGrass += amount;
                    statusElement.textContent = `${amount} gramas secas prontas!`;
                    clearInterval(gameState.dryingTimer);
                    updateDisplay();
                    alert(`${amount} gramas foram secas com sucesso!`);
                }
            };
            
            updateTimer();
            gameState.dryingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Fazer feno
        function makeHay() {
            if (!gameState.hasDryer) {
                alert('Voc√™ precisa comprar o secador primeiro!');
                return;
            }
            
            if (gameState.driedGrass < 4) {
                alert('Voc√™ precisa de pelo menos 4 gramas secas para fazer feno!');
                return;
            }
            
            gameState.driedGrass -= 4;
            
            // Processo de fazer feno (20 segundos)
            let timeLeft = 20;
            const statusElement = document.getElementById('drying-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fazendo feno... ${timeLeft}s restantes`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.hay += 4;
                    statusElement.textContent = '4 fenos prontos! üü®';
                    updateDisplay();
                    alert('4 fenos foram produzidos! Agora voc√™ pode alimentar vacas com feno.');
                }
            };
            
            updateTimer();
            const hayTimer = setInterval(updateTimer, 1000);
            
            setTimeout(() => {
                clearInterval(hayTimer);
            }, 20000);
            
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Comprar vaca
        function buyCow() {
            if (!gameState.hasPasture) {
                alert('Voc√™ precisa comprar o pasto primeiro!');
                return;
            }
            
            if (gameState.money < 80) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 80;
            const cowId = gameState.cows.length;
            gameState.cows.push({
                id: cowId,
                fed: false,
                readyToMilk: false,
                milkTimer: null,
                feedTimer: null,
                milkedToday: false,
                isBeingMilked: false,
                milkingProgress: 0
            });
            
            createCowElement(cowId);
            updateDisplay();
            alert('Vaca leiteira comprada! Alimente-a para produzir leite (3 leites por dia + 1 esterco di√°rio).');
        }

        // Comprar galinha
        function buyChicken() {
            if (!gameState.hasMixer) {
                alert('Voc√™ precisa comprar o misturador primeiro!');
                return;
            }
            
            if (gameState.money < 60) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            if (gameState.chickens.length >= 4) {
                alert('M√°ximo de 4 galinhas no galinheiro!');
                return;
            }
            
            gameState.money -= 60;
            const chickenId = gameState.chickens.length;
            gameState.chickens.push({
                id: chickenId,
                fed: false,
                readyToCollect: false,
                collectTimer: null,
                feedTimer: null,
                laidEggsToday: false,
                purchaseDay: gameState.dayCount
            });
            
            // Mostrar galinheiro se for a primeira galinha
            if (gameState.chickens.length === 1) {
                document.getElementById('chickens-area').style.display = 'block';
            }
            
            // Iniciar reprodu√ß√£o autom√°tica se tiver 2+ galinhas
            if (gameState.chickens.length >= 2 && !gameState.breedingTimer) {
                startAutomaticBreeding();
            }
            
            createChickenElement(chickenId);
            updateDisplay();
            alert('Galinha comprada! Alimente-a com ra√ß√£o para produzir ovos (3 ovos por dia).');
        }

        // Sistema de reprodu√ß√£o autom√°tica
        function startAutomaticBreeding() {
            if (gameState.breedingTimer) return;
            
            gameState.breedingTimer = setInterval(() => {
                // Verificar se ainda tem 2+ galinhas e espa√ßo
                if (gameState.chickens.length >= 2 && 
                    gameState.chicks.length + gameState.chickens.length < 4) {
                    
                    // Gerar pintinho automaticamente
                    const chickId = gameState.chicks.length;
                    gameState.chicks.push({
                        id: chickId,
                        birthTime: Date.now(),
                        isAdult: false
                    });
                    
                    createChickElement(chickId);
                    updateDisplay();
                    alert('üê£ Um pintinho nasceu automaticamente! Ele ficar√° adulto em 1 hora.');
                    
                    // Timer para o pintinho crescer (1 hora = 3600000ms)
                    setTimeout(() => {
                        growChickToAdult(chickId);
                    }, 3600000);
                }
                
                // Parar reprodu√ß√£o se n√£o tiver mais 2 galinhas
                if (gameState.chickens.length < 2) {
                    clearInterval(gameState.breedingTimer);
                    gameState.breedingTimer = null;
                }
            }, 300000); // A cada 5 minutos verifica se pode reproduzir
        }

        // Reprodu√ß√£o manual de pintinhos (mantida para compatibilidade)
        function breedChickens() {
            if (gameState.chickens.length < 2) {
                alert('Voc√™ precisa de pelo menos 2 galinhas para gerar pintinhos!');
                return;
            }
            
            if (gameState.chicks.length + gameState.chickens.length >= 4) {
                alert('M√°ximo de 4 galinhas/pintinhos no galinheiro!');
                return;
            }
            
            // Gerar pintinho
            const chickId = gameState.chicks.length;
            gameState.chicks.push({
                id: chickId,
                birthTime: Date.now(),
                isAdult: false
            });
            
            createChickElement(chickId);
            updateDisplay();
            alert('üê£ Um pintinho nasceu! Ele ficar√° adulto em 1 hora.');
            
            // Timer para o pintinho crescer (1 hora = 3600000ms)
            setTimeout(() => {
                growChickToAdult(chickId);
            }, 3600000);
        }

        // Crescer pintinho para galinha adulta
        function growChickToAdult(chickId) {
            const chickIndex = gameState.chicks.findIndex(chick => chick.id === chickId);
            if (chickIndex === -1) return;
            
            // Remover pintinho
            gameState.chicks.splice(chickIndex, 1);
            
            // Adicionar galinha adulta
            const newChickenId = gameState.chickens.length;
            gameState.chickens.push({
                id: newChickenId,
                fed: false,
                readyToCollect: false,
                collectTimer: null,
                feedTimer: null,
                laidEggsToday: false,
                purchaseDay: gameState.dayCount
            });
            
            // Remover elemento do pintinho
            const chickElement = document.getElementById(`chick-${chickId}`);
            if (chickElement) {
                chickElement.remove();
            }
            
            // Criar elemento da galinha adulta
            createChickenElement(newChickenId);
            updateDisplay();
            alert('üêî O pintinho cresceu e virou uma galinha adulta!');
        }

        // Sacrificar galinha
        function sacrificeChicken() {
            if (gameState.chickens.length === 0) {
                alert('Voc√™ n√£o tem galinhas para sacrificar!');
                return;
            }
            
            // Remover a √∫ltima galinha
            const removedChicken = gameState.chickens.pop();
            
            // Adicionar frango cru aos produtos
            gameState.products.rawChicken += 1;
            
            // Remover elemento visual
            const chickenElement = document.getElementById(`chicken-${removedChicken.id}`);
            if (chickenElement) {
                chickenElement.remove();
            }
            
            // Parar reprodu√ß√£o se ficou com menos de 2 galinhas
            if (gameState.chickens.length < 2 && gameState.breedingTimer) {
                clearInterval(gameState.breedingTimer);
                gameState.breedingTimer = null;
            }
            
            updateDisplay();
            alert('Galinha sacrificada! +1 frango cru para vender (80 moedas).');
        }

        // Comprar porco
        function buyPig() {
            if (!gameState.hasMixer) {
                alert('Voc√™ precisa comprar o misturador primeiro!');
                return;
            }
            
            if (gameState.money < 100) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 100;
            const pigId = gameState.pigs.length;
            gameState.pigs.push({
                id: pigId,
                fed: false,
                readyToCollect: false,
                collectTimer: null,
                feedTimer: null,
                canProduceToday: true,
                lastProductionDay: 0
            });
            
            // Mostrar chiqueiro se for o primeiro porco
            if (gameState.pigs.length === 1) {
                document.getElementById('pigs-area').style.display = 'block';
            }
            
            createPigElement(pigId);
            updateDisplay();
            alert('Porco comprado! Alimente-o com ra√ß√£o para produzir carne (dia sim, dia n√£o).');
        }

        // Comprar ovelha
        function buySheep() {
            if (!gameState.hasSheepPen) {
                alert('Voc√™ precisa comprar o curral de ovelhas primeiro!');
                return;
            }
            
            if (gameState.money < 70) {
                alert('Dinheiro insuficiente!');
                return;
            }
            
            gameState.money -= 70;
            const sheepId = gameState.sheep.length;
            gameState.sheep.push({
                id: sheepId,
                fed: false,
                readyToCollect: false,
                collectTimer: null,
                feedTimer: null,
                canFeedToday: true,
                lastFeedDay: 0,
                isBeingSheared: false,
                shearingProgress: 0
            });
            
            createSheepElement(sheepId);
            updateDisplay();
            alert('Ovelha comprada! Alimente-a com feno para produzir l√£ (dia sim, dia n√£o, tosquia dura 12s).');
        }

        // Fazer ra√ß√£o de galinha
        function makeChickenFeed() {
            if (!gameState.hasMixer) {
                alert('Voc√™ precisa comprar o misturador primeiro!');
                return;
            }
            
            // Verificar se tem os ingredientes: 2 milhos + 1 trigo
            const cornCount = gameState.inventory[3] || 0; // Milho √© √≠ndice 3
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            
            if (cornCount < 2 || wheatCount < 1) {
                alert('Ingredientes insuficientes! Precisa de: 2 milhos + 1 trigo');
                return;
            }
            
            gameState.inventory[3] -= 2; // Remove 2 milhos
            gameState.inventory[4] -= 1; // Remove 1 trigo
            gameState.feed.chicken += 4; // Adiciona 4 por√ß√µes de ra√ß√£o
            
            updateDisplay();
            alert('Ra√ß√£o de galinha produzida! +4 por√ß√µes');
        }

        // Fazer ra√ß√£o de porco
        function makePigFeed() {
            if (!gameState.hasMixer) {
                alert('Voc√™ precisa comprar o misturador primeiro!');
                return;
            }
            
            // Verificar se tem os ingredientes: 1 tomate + 1 batata + 1 milho + 1 alface
            const tomatoCount = gameState.inventory[1] || 0; // Tomate √© √≠ndice 1
            const potatoCount = gameState.inventory[0] || 0; // Batata √© √≠ndice 0
            const cornCount = gameState.inventory[3] || 0; // Milho √© √≠ndice 3
            const lettuceCount = gameState.inventory[8] || 0; // Alface √© √≠ndice 8
            
            if (tomatoCount < 1 || potatoCount < 1 || cornCount < 1 || lettuceCount < 1) {
                alert('Ingredientes insuficientes! Precisa de: 1 tomate + 1 batata + 1 milho + 1 alface');
                return;
            }
            
            gameState.inventory[1] -= 1; // Remove 1 tomate
            gameState.inventory[0] -= 1; // Remove 1 batata
            gameState.inventory[3] -= 1; // Remove 1 milho
            gameState.inventory[8] -= 1; // Remove 1 alface
            gameState.feed.pig += 4; // Adiciona 4 por√ß√µes de ra√ß√£o
            
            updateDisplay();
            alert('Ra√ß√£o de porco produzida! +4 por√ß√µes');
        }

        // Fazer queijo
        function makeCheese() {
            if (!gameState.hasCheeseMaker) {
                alert('Voc√™ precisa comprar a queijaria primeiro!');
                return;
            }
            
            if (gameState.isMakingCheese) {
                alert('J√° h√° queijo sendo feito! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.milk < 2) {
                alert('Voc√™ precisa de pelo menos 2 leites para fazer queijo!');
                return;
            }
            
            gameState.products.milk -= 2;
            gameState.isMakingCheese = true;
            
            let timeLeft = 300; // 5 minutos em segundos
            const statusElement = document.getElementById('cheese-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Fazendo queijo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMakingCheese = false;
                    gameState.cheeseReady += 1;
                    gameState.products.cheese += 1;
                    statusElement.textContent = '1 queijo pronto! üßÄ';
                    clearInterval(gameState.cheeseTimer);
                    updateDisplay();
                    alert('Queijo pronto! +1 queijo (vale 60 moedas)');
                }
            };
            
            updateTimer();
            gameState.cheeseTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Coletar troncos da √°rvore
        function collectLogs() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (!gameState.hasBosque) {
                alert('Voc√™ precisa comprar o bosque primeiro!');
                return;
            }
            
            if (!gameState.hasAxe) {
                alert('Voc√™ precisa comprar um machado primeiro!');
                return;
            }
            
            if (!gameState.canCollectLogs) {
                alert('A √°rvore ainda n√£o cresceu! Aguarde at√© amanh√£.');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.logs += 5;
            gameState.axeUses += 1;
            gameState.canCollectLogs = false;
            gameState.lastLogCollection = gameState.dayCount;
            gameState.logsCollectedCount += 5;
            
            // A cada 5 troncos coletados, ganha 1 galho
            if (gameState.logsCollectedCount >= 5) {
                gameState.branchesCollected += 1;
                gameState.compostMaterials.branches += 1;
                gameState.logsCollectedCount = 0;
                alert('Troncos coletados! +5 troncos + 1 galho para composteira!');
            } else {
                alert('Troncos coletados! +5 troncos (pr√≥xima coleta amanh√£)');
            }
            
            // Verificar se o machado quebrou
            if (gameState.axeUses >= 50) {
                gameState.hasAxe = false;
                gameState.axeUses = 0;
                document.getElementById('wood-panel').style.display = 'none';
                document.getElementById('buy-axe-btn').style.display = 'none';
                alert('Seu machado quebrou! Voc√™ precisa comprar outro.');
            }
            
            // Anima√ß√£o da √°rvore
            const tree = document.getElementById('tree');
            tree.style.transform = 'scale(1.1)';
            setTimeout(() => {
                tree.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
        }

        // Coletar ma√ß√£s da macieira
        function collectApples() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (!gameState.hasBosque) {
                alert('Voc√™ precisa comprar o bosque primeiro!');
                return;
            }
            
            if (!gameState.canCollectApples) {
                alert('As ma√ß√£s ainda n√£o cresceram! Aguarde at√© amanh√£.');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.apples += 5;
            gameState.canCollectApples = false;
            gameState.lastAppleCollection = gameState.dayCount;
            
            // Anima√ß√£o da macieira
            const appleTree = document.getElementById('apple-tree');
            appleTree.style.transform = 'scale(1.1)';
            setTimeout(() => {
                appleTree.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Ma√ß√£s coletadas! +5 ma√ß√£s (pr√≥xima coleta amanh√£)');
        }

        // Coletar bananas da bananeira
        function collectBananas() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (!gameState.hasBosque) {
                alert('Voc√™ precisa comprar o bosque primeiro!');
                return;
            }
            
            if (!gameState.canCollectBananas) {
                alert('As bananas ainda n√£o cresceram! Aguarde at√© amanh√£.');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.bananas += 4;
            gameState.canCollectBananas = false;
            gameState.lastBananaCollection = gameState.dayCount;
            
            // Anima√ß√£o da bananeira
            const bananaTree = document.getElementById('banana-tree');
            bananaTree.style.transform = 'scale(1.1)';
            setTimeout(() => {
                bananaTree.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Bananas coletadas! +4 bananas (pr√≥xima coleta amanh√£)');
        }

        // Coletar laranjas da laranjeira
        function collectOranges() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (!gameState.hasBosque) {
                alert('Voc√™ precisa comprar o bosque primeiro!');
                return;
            }
            
            if (!gameState.canCollectOranges) {
                alert('As laranjas ainda n√£o cresceram! Aguarde at√© amanh√£.');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.oranges += 4;
            gameState.canCollectOranges = false;
            gameState.lastOrangeCollection = gameState.dayCount;
            
            // Anima√ß√£o da laranjeira
            const orangeTree = document.getElementById('orange-tree');
            orangeTree.style.transform = 'scale(1.1)';
            setTimeout(() => {
                orangeTree.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Laranjas coletadas! +4 laranjas (pr√≥xima coleta amanh√£)');
        }

        // Refinar madeira
        function refineWood() {
            if (!gameState.hasAxe) {
                alert('Voc√™ precisa comprar um machado primeiro!');
                return;
            }
            
            if (gameState.isRefiningWood) {
                alert('J√° h√° madeira sendo refinada! Aguarde terminar.');
                return;
            }
            
            if (gameState.logs < 1) {
                alert('Voc√™ precisa de pelo menos 1 tronco para refinar!');
                return;
            }
            
            gameState.logs -= 1;
            gameState.isRefiningWood = true;
            
            let timeLeft = 10; // 10 segundos
            const statusElement = document.getElementById('wood-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Refinando madeira... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isRefiningWood = false;
                    gameState.firewood += 4;
                    statusElement.textContent = '4 lenhas prontas! ü™®';
                    clearInterval(gameState.woodTimer);
                    updateDisplay();
                    alert('Refinamento completo! +4 lenhas');
                }
            };
            
            updateTimer();
            gameState.woodTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Torrar caf√©
        function roastCoffee() {
            if (!gameState.hasRoaster) {
                alert('Voc√™ precisa comprar a torradeira primeiro!');
                return;
            }
            
            if (gameState.isRoasting) {
                alert('J√° h√° caf√© sendo torrado! Aguarde terminar.');
                return;
            }
            
            // Verificar se tem gr√£os de caf√© suficientes (do invent√°rio)
            const coffeeBeansCount = gameState.inventory[5] || 0; // Caf√© √© √≠ndice 5
            if (coffeeBeansCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 gr√£os de caf√©!');
                return;
            }
            
            if (gameState.firewood < 3) {
                alert('Voc√™ precisa de pelo menos 3 lenhas para acender o fogo!');
                return;
            }
            
            gameState.inventory[5] -= 4; // Remove gr√£os de caf√© do invent√°rio
            gameState.firewood -= 3;
            gameState.isRoasting = true;
            
            let timeLeft = 60; // 1 minuto em segundos
            const statusElement = document.getElementById('roaster-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Torrando caf√©... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isRoasting = false;
                    gameState.products.coffee += 2; // Adiciona caf√© torrado aos produtos
                    statusElement.textContent = '2 pacotes de caf√© torrado prontos! ‚òï';
                    clearInterval(gameState.roastingTimer);
                    updateDisplay();
                    alert('Caf√© torrado! +2 pacotes de caf√© torrado (vale mais que gr√£os crus)');
                }
            };
            
            updateTimer();
            gameState.roastingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Coletar materiais para compostagem
        function collectMaterials() {
            if (!gameState.hasCompost) {
                alert('Voc√™ precisa comprar a composteira primeiro!');
                return;
            }
            
            gameState.compostMaterials.flowers += Math.floor(Math.random() * 3) + 1;
            gameState.compostMaterials.branches += Math.floor(Math.random() * 3) + 1;
            gameState.compostMaterials.manure += Math.floor(Math.random() * 4) + 1;
            updateDisplay();
            alert('Materiais coletados!');
        }

        // Fazer adubo
        function makeCompost() {
            if (!gameState.hasCompost) {
                alert('Voc√™ precisa comprar a composteira primeiro!');
                return;
            }
            
            if (gameState.isComposting) {
                alert('J√° h√° adubo sendo feito! Aguarde terminar.');
                return;
            }
            
            if (gameState.compostMaterials.flowers < 1 || 
                gameState.compostMaterials.branches < 1 || 
                gameState.compostMaterials.manure < 2) {
                alert('Materiais insuficientes! Precisa de: 1 flor, 1 galho, 2 estercos');
                return;
            }
            
            gameState.compostMaterials.flowers -= 1;
            gameState.compostMaterials.branches -= 1;
            gameState.compostMaterials.manure -= 2;
            gameState.isComposting = true;
            
            let timeLeft = 600; // 10 minutos em segundos
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('compost-status').textContent = `Compostando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isComposting = false;
                    gameState.fertilizer += 8;
                    document.getElementById('compost-status').textContent = '8 adubos prontos! üåø';
                    clearInterval(gameState.compostTimer);
                    updateDisplay();
                    alert('Compostagem completa! +8 adubos');
                }
            };
            
            updateTimer();
            gameState.compostTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Adubar canteiro
        function fertilizePlot() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (gameState.selectedPlot === null) {
                alert('Selecione um canteiro primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            if (gameState.fertilizer < 1) {
                alert('Voc√™ n√£o tem adubo! Use a composteira para fazer.');
                return;
            }
            
            const plot = gameState.plots[gameState.selectedPlot];
            if (!plot.fertilized) {
                gameState.energy = Math.max(0, gameState.energy - 1);
                gameState.fertilizer -= 1;
                plot.fertilized = true;
                updatePlotDisplay(gameState.selectedPlot);
                updateDisplay();
                alert('Solo adubado!');
            } else {
                alert('Este canteiro j√° est√° adubado!');
            }
        }

        // Plantar semente
        function plantSeed() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            // Verificar se √© inverno e n√£o tem estufa
            if (gameState.currentSeason === 3 && !gameState.hasGreenhouse) { // Inverno
                alert('‚ùÑÔ∏è No inverno n√£o √© poss√≠vel plantar! Compre uma estufa ou aguarde a primavera.');
                return;
            }
            
            // No inverno, s√≥ pode plantar na estufa
            if (gameState.currentSeason === 3) {
                alert('‚ùÑÔ∏è No inverno, s√≥ √© poss√≠vel plantar na estufa! Use os canteiros protegidos.');
                return;
            }
            
            if (gameState.selectedPlot === null || gameState.selectedSeed === null) {
                alert('Selecione um canteiro e uma semente!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            const plot = gameState.plots[gameState.selectedPlot];
            if (!plot.fertilized) {
                alert('Adube o solo primeiro!');
                return;
            }
            
            if (plot.planted) {
                alert('Este canteiro j√° tem uma planta!');
                return;
            }
            
            // Consumir energia
            gameState.energy = Math.max(0, gameState.energy - 5);
            
            plot.planted = true;
            plot.seedType = gameState.selectedSeed;
            updatePlotDisplay(gameState.selectedPlot);
            updateDisplay();
            
            // Mensagem baseada na esta√ß√£o
            let message = 'Semente plantada! Agora regue para crescer.';
            if (gameState.currentSeason === 0) { // Primavera
                message += ' ‚ú® Na primavera, suas plantas s√£o mais valiosas!';
            } else if (gameState.currentSeason === 1) { // Ver√£o
                message += ' ‚òÄÔ∏è No ver√£o, voc√™ ganhar√° 2 frutos por canteiro!';
            } else if (gameState.currentSeason === 2) { // Outono
                message += ' üçÇ No outono, as plantas crescem mais r√°pido!';
            }
            
            alert(message);
        }

        // Regar canteiro
        function waterPlot() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (gameState.selectedPlot === null) {
                alert('Selecione um canteiro primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            if (gameState.water <= 0) {
                alert('Voc√™ n√£o tem √°gua! Colete no po√ßo.');
                return;
            }
            
            const plot = gameState.plots[gameState.selectedPlot];
            if (!plot.planted) {
                alert('Plante algo primeiro!');
                return;
            }
            
            if (!plot.watered) {
                gameState.energy = Math.max(0, gameState.energy - 1);
                gameState.water--;
                plot.watered = true;
                startGrowth(gameState.selectedPlot);
                updatePlotDisplay(gameState.selectedPlot);
                updateDisplay();
                alert('Planta regada! Crescer√° em 1 minuto.');
            } else {
                alert('Esta planta j√° foi regada!');
            }
        }

        // Iniciar crescimento
        function startGrowth(plotIndex) {
            const plot = gameState.plots[plotIndex];
            if (plot.growthTimer) clearInterval(plot.growthTimer);
            
            // Determinar tempo de crescimento baseado na esta√ß√£o
            let growthTime = 60; // Padr√£o: 60 segundos
            if (gameState.currentSeason === 2) { // Outono
                growthTime = 60; // 1 minuto no outono
            }
            
            plot.growthTimer = setInterval(() => {
                plot.growthProgress += 100/growthTime;
                
                if (plot.growthProgress >= 100) {
                    plot.growthProgress = 100;
                    plot.readyToHarvest = true;
                    clearInterval(plot.growthTimer);
                    plot.growthTimer = null;
                }
                
                updatePlotDisplay(plotIndex);
            }, 1000);
        }

        // Colher - agora adiciona produtos ao invent√°rio
        function harvestPlot() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (gameState.selectedPlot === null) {
                alert('Selecione um canteiro primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            const plot = gameState.plots[gameState.selectedPlot];
            if (!plot.readyToHarvest) {
                alert('A planta ainda n√£o est√° pronta para colher!');
                return;
            }
            
            // Consumir energia
            gameState.energy = Math.max(0, gameState.energy - 1);
            
            const seed = seeds[plot.seedType];
            
            // Determinar quantidade baseada na esta√ß√£o
            let quantity = 1;
            let bonusMessage = '';
            
            if (gameState.currentSeason === 1) { // Ver√£o - 2 frutos por canteiro
                quantity = 2;
                bonusMessage = ' ‚òÄÔ∏è B√¥nus do ver√£o: +1 fruto extra!';
            }
            
            // Adicionar produtos espec√≠ficos ao invent√°rio
            switch(plot.seedType) {
                case 3: // Milho
                    gameState.inventory[3] = (gameState.inventory[3] || 0) + quantity;
                    break;
                case 4: // Trigo
                    gameState.inventory[4] = (gameState.inventory[4] || 0) + quantity;
                    break;
                case 5: // Caf√© (gr√£os crus v√£o para invent√°rio)
                    gameState.inventory[5] = (gameState.inventory[5] || 0) + quantity;
                    break;
                case 9: // Uva
                    gameState.inventory[9] = (gameState.inventory[9] || 0) + quantity;
                    break;
                default:
                    // Outras plantas v√£o para o invent√°rio normal
                    gameState.inventory[plot.seedType] = (gameState.inventory[plot.seedType] || 0) + quantity;
                    break;
            }
            
            // B√¥nus de valor na primavera
            if (gameState.currentSeason === 0) { // Primavera
                const bonusValue = Math.floor(seed.sellPrice * 0.5); // 50% de b√¥nus
                gameState.money += bonusValue;
                bonusMessage = ` ‚ú® B√¥nus da primavera: +${bonusValue} moedas extras!`;
            }
            
            // Resetar canteiro
            plot.fertilized = false;
            plot.planted = false;
            plot.watered = false;
            plot.seedType = null;
            plot.growthProgress = 0;
            plot.readyToHarvest = false;
            if (plot.growthTimer) {
                clearInterval(plot.growthTimer);
                plot.growthTimer = null;
            }
            
            updatePlotDisplay(gameState.selectedPlot);
            updateDisplay();
            alert(`${seed.name} colhido e adicionado ao invent√°rio!${bonusMessage}`);
        }

        // Coletar √°gua
        function collectWater() {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            if (!gameState.hasWell) {
                alert('Voc√™ precisa comprar o po√ßo primeiro!');
                return;
            }
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.water += 4;
            updateDisplay();
            
            // Anima√ß√£o do po√ßo
            const well = document.getElementById('well');
            well.style.transform = 'scale(1.2)';
            setTimeout(() => {
                well.style.transform = 'scale(1)';
            }, 200);
        }

        // Alimentar avatar
        function feedAvatar() {
            if (gameState.money < 20) {
                alert('Voc√™ n√£o tem dinheiro suficiente para comprar p√£o!');
                return;
            }
            
            gameState.money -= 20;
            gameState.energy = Math.min(100, gameState.energy + 30);
            updateDisplay();
            alert('Voc√™ comeu p√£o e recuperou 30% de energia!');
        }

        // Descansar avatar
        function restAvatar() {
            if (gameState.isResting) {
                alert('Voc√™ j√° est√° descansando!');
                return;
            }
            
            gameState.isResting = true;
            let restTime = 300; // 5 minutos em segundos
            
            const restInterval = setInterval(() => {
                restTime--;
                updateAvatarStatus(`Descansando... ${Math.floor(restTime/60)}:${(restTime%60).toString().padStart(2, '0')}`);
                
                if (restTime <= 0) {
                    gameState.isResting = false;
                    gameState.energy = 100;
                    clearInterval(restInterval);
                    updateDisplay();
                    alert('Voc√™ descansou e recuperou toda a energia!');
                }
            }, 1000);
        }

        // Atualizar status do avatar
        function updateAvatarStatus(status) {
            document.getElementById('avatar-status').textContent = status;
        }

        // Criar campo de grama
        function createGrassField() {
            const grassGrid = document.getElementById('grass-grid');
            grassGrid.innerHTML = '';
            
            for (let i = 0; i < 24; i++) {
                const grassTile = document.createElement('div');
                grassTile.className = 'grass-tile';
                grassTile.onclick = () => collectGrass(i);
                grassTile.innerHTML = 'üåø';
                grassTile.id = `grass-${i}`;
                grassGrid.appendChild(grassTile);
            }
        }

        // Coletar grama
        function collectGrass(index) {
            if (!gameState.hasGrassField) return;
            
            const grass = gameState.grassField[index];
            if (!grass.hasGrass || grass.regenerating) return;
            
            // Coletar grama
            grass.hasGrass = false;
            grass.regenerating = true;
            gameState.grassCollected++;
            gameState.freshGrass++; // Adiciona grama fresca
            
            // Verificar se ganhou flor (a cada 4 gramas)
            if (gameState.grassCollected >= 4) {
                gameState.grassCollected = 0;
                gameState.compostMaterials.flowers++;
                alert('Voc√™ ganhou uma flor! üå∏');
            }
            
            // Atualizar visual
            updateGrassTile(index);
            
            // Iniciar regenera√ß√£o
            grass.regenerationTimer = setTimeout(() => {
                grass.hasGrass = true;
                grass.regenerating = false;
                updateGrassTile(index);
            }, 20000); // 20 segundos
            
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Atualizar visual da grama
        function updateGrassTile(index) {
            const tile = document.getElementById(`grass-${index}`);
            const grass = gameState.grassField[index];
            
            if (grass.hasGrass) {
                tile.className = 'grass-tile';
                tile.innerHTML = 'üåø';
            } else if (grass.regenerating) {
                tile.className = 'grass-tile regenerating';
                tile.innerHTML = '‚è≥';
            } else {
                tile.className = 'grass-tile empty';
                tile.innerHTML = '';
            }
        }

        // Criar elemento da vaca
        function createCowElement(cowId) {
            const cowsContainer = document.getElementById('cows-container');
            const cowElement = document.createElement('div');
            cowElement.className = 'cow-item';
            cowElement.id = `cow-${cowId}`;
            cowElement.onclick = () => interactWithCow(cowId);
            cowElement.innerHTML = `
                <span class="cow-emoji">üêÑ</span>
                <div class="cow-status" id="cow-status-${cowId}">Com fome</div>
                <div class="cow-timer" id="cow-timer-${cowId}"></div>
            `;
            cowsContainer.appendChild(cowElement);
        }

        // Criar elemento da galinha
        function createChickenElement(chickenId) {
            const chickensContainer = document.getElementById('chickens-container');
            const chickenElement = document.createElement('div');
            chickenElement.className = 'cow-item';
            chickenElement.id = `chicken-${chickenId}`;
            chickenElement.onclick = () => interactWithChicken(chickenId);
            chickenElement.innerHTML = `
                <span class="cow-emoji">üêî</span>
                <div class="cow-status" id="chicken-status-${chickenId}">Com fome</div>
                <div class="cow-timer" id="chicken-timer-${chickenId}"></div>
            `;
            chickensContainer.appendChild(chickenElement);
        }

        // Criar elemento do pintinho
        function createChickElement(chickId) {
            const chickensContainer = document.getElementById('chickens-container');
            const chickElement = document.createElement('div');
            chickElement.className = 'cow-item';
            chickElement.id = `chick-${chickId}`;
            chickElement.style.opacity = '0.7';
            chickElement.innerHTML = `
                <span class="cow-emoji">üê£</span>
                <div class="cow-status">Crescendo...</div>
                <div class="cow-timer">1h para adulto</div>
            `;
            chickensContainer.appendChild(chickElement);
        }

        // Criar elemento do porco
        function createPigElement(pigId) {
            const pigsContainer = document.getElementById('pigs-container');
            const pigElement = document.createElement('div');
            pigElement.className = 'cow-item';
            pigElement.id = `pig-${pigId}`;
            pigElement.onclick = () => interactWithPig(pigId);
            pigElement.innerHTML = `
                <span class="cow-emoji">üê∑</span>
                <div class="cow-status" id="pig-status-${pigId}">Com fome</div>
                <div class="cow-timer" id="pig-timer-${pigId}"></div>
            `;
            pigsContainer.appendChild(pigElement);
        }

        // Criar elemento da ovelha
        function createSheepElement(sheepId) {
            const sheepContainer = document.getElementById('sheep-container');
            const sheepElement = document.createElement('div');
            sheepElement.className = 'cow-item';
            sheepElement.id = `sheep-${sheepId}`;
            sheepElement.onclick = () => interactWithSheep(sheepId);
            sheepElement.innerHTML = `
                <span class="cow-emoji">üêë</span>
                <div class="cow-status" id="sheep-status-${sheepId}">Com fome</div>
                <div class="cow-timer" id="sheep-timer-${sheepId}"></div>
            `;
            sheepContainer.appendChild(sheepElement);
        }

        // Interagir com vaca
        function interactWithCow(cowId) {
            const cow = gameState.cows[cowId];
            
            if (cow.milkedToday) {
                alert('Esta vaca j√° foi ordenhada hoje! Aguarde o pr√≥ximo dia.');
                return;
            }
            
            if (!cow.fed) {
                feedCow(cowId);
            } else if (cow.readyToMilk) {
                milkCow(cowId);
            }
        }

        // Interagir com galinha
        function interactWithChicken(chickenId) {
            const chicken = gameState.chickens[chickenId];
            
            if (!chicken.fed) {
                feedChicken(chickenId);
            } else if (chicken.readyToCollect) {
                collectEggs(chickenId);
            }
        }

        // Interagir com porco
        function interactWithPig(pigId) {
            const pig = gameState.pigs[pigId];
            
            if (!pig.fed) {
                feedPig(pigId);
            } else if (pig.readyToCollect) {
                collectMeat(pigId);
            }
        }

        // Interagir com ovelha
        function interactWithSheep(sheepId) {
            const sheep = gameState.sheep[sheepId];
            
            if (!sheep.canFeedToday) {
                alert('Esta ovelha s√≥ pode ser alimentada dia sim, dia n√£o! Aguarde o pr√≥ximo dia permitido.');
                return;
            }
            
            if (!sheep.fed) {
                feedSheep(sheepId);
            } else if (sheep.readyToCollect) {
                collectWool(sheepId);
            }
        }

        // Alimentar vaca
        function feedCow(cowId) {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            const cow = gameState.cows[cowId];
            if (cow.fed) return;
            
            if (gameState.energy <= 0) {
                alert('Voc√™ est√° sem energia! Descanse ou se alimente.');
                return;
            }
            
            if (gameState.hay <= 0) {
                alert('Voc√™ n√£o tem feno! Fa√ßa feno no secador de grama.');
                return;
            }
            
            gameState.energy = Math.max(0, gameState.energy - 1);
            gameState.hay--;
            cow.fed = true;
            
            // Produzir esterco imediatamente ao alimentar
            gameState.compostMaterials.manure += 1;
            
            cow.feedTimer = setTimeout(() => {
                cow.readyToMilk = true;
                updateCowDisplay(cowId);
            }, 15000); // 15 segundos
            
            updateCowDisplay(cowId);
            startCowTimer(cowId, 15);
            updateDisplay();
            alert('Vaca alimentada! +1 esterco adicionado √† composteira.');
        }

        // Alimentar galinha
        function feedChicken(chickenId) {
            const chicken = gameState.chickens[chickenId];
            if (chicken.fed || chicken.laidEggsToday) return;
            
            if (gameState.feed.chicken <= 0) {
                alert('Voc√™ n√£o tem ra√ß√£o de galinha! Fa√ßa no misturador.');
                return;
            }
            
            gameState.feed.chicken--;
            chicken.fed = true;
            chicken.feedTimer = setTimeout(() => {
                chicken.readyToCollect = true;
                updateChickenDisplay(chickenId);
            }, 20000); // 20 segundos
            
            updateChickenDisplay(chickenId);
            startChickenTimer(chickenId, 20);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Alimentar porco
        function feedPig(pigId) {
            const pig = gameState.pigs[pigId];
            if (pig.fed || !pig.canProduceToday) return;
            
            if (gameState.feed.pig <= 0) {
                alert('Voc√™ n√£o tem ra√ß√£o de porco! Fa√ßa no misturador.');
                return;
            }
            
            gameState.feed.pig--;
            pig.fed = true;
            pig.feedTimer = setTimeout(() => {
                pig.readyToCollect = true;
                updatePigDisplay(pigId);
            }, 20000); // 20 segundos
            
            updatePigDisplay(pigId);
            startPigTimer(pigId, 20);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Alimentar ovelha
        function feedSheep(sheepId) {
            const sheep = gameState.sheep[sheepId];
            if (sheep.fed || !sheep.canFeedToday) return;
            
            if (gameState.hay <= 0) {
                alert('Voc√™ n√£o tem feno! Fa√ßa feno no secador de grama.');
                return;
            }
            
            gameState.hay--;
            sheep.fed = true;
            sheep.canFeedToday = false;
            sheep.lastFeedDay = gameState.dayCount;
            
            sheep.feedTimer = setTimeout(() => {
                sheep.readyToCollect = true;
                updateSheepDisplay(sheepId);
            }, 20000); // 20 segundos
            
            updateSheepDisplay(sheepId);
            startSheepTimer(sheepId);
            updateDisplay();
        }

        // Fiar l√£
        function spinWool() {
            if (!gameState.hasSpinningMachine) {
                alert('Voc√™ precisa comprar a m√°quina de fiar primeiro!');
                return;
            }
            
            if (gameState.isSpinning) {
                alert('J√° h√° l√£ sendo fiada! Aguarde terminar.');
                return;
            }
            
            if (gameState.products.wool < 4) {
                alert('Voc√™ precisa de pelo menos 4 l√£s para fiar!');
                return;
            }
            
            gameState.products.wool -= 4;
            gameState.isSpinning = true;
            
            let timeLeft = 30; // 30 segundos
            const statusElement = document.getElementById('spinning-status');
            
            const updateTimer = () => {
                statusElement.textContent = `Fiando l√£... ${timeLeft}s`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isSpinning = false;
                    gameState.yarnCount += 2;
                    gameState.products.yarn += 2;
                    statusElement.textContent = '2 novelos prontos! üßµ';
                    clearInterval(gameState.spinningTimer);
                    updateDisplay();
                    alert('L√£ fiada! +2 novelos (valem mais que l√£ bruta)');
                }
            };
            
            updateTimer();
            gameState.spinningTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Moer trigo
        function millWheat() {
            if (!gameState.hasMill) {
                alert('Voc√™ precisa comprar o moinho primeiro!');
                return;
            }
            
            if (gameState.isMilling) {
                alert('J√° h√° trigo sendo mo√≠do! Aguarde terminar.');
                return;
            }
            
            const wheatCount = gameState.inventory[4] || 0; // Trigo √© √≠ndice 4
            if (wheatCount < 4) {
                alert('Voc√™ precisa de pelo menos 4 trigos para moer!');
                return;
            }
            
            gameState.inventory[4] -= 4;
            gameState.isMilling = true;
            
            let timeLeft = 60; // 1 minuto
            const statusElement = document.getElementById('mill-status');
            
            const updateTimer = () => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                statusElement.textContent = `Moendo trigo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    gameState.isMilling = false;
                    gameState.products.flour += 2;
                    statusElement.textContent = '2 pacotes de farinha prontos! üçö';
                    clearInterval(gameState.millingTimer);
                    updateDisplay();
                    alert('Trigo mo√≠do! +2 pacotes de farinha');
                }
            };
            
            updateTimer();
            gameState.millingTimer = setInterval(updateTimer, 1000);
            updateDisplay();
        }

        // Coletar mel
        function collectHoney() {
            if (!gameState.hasBeehive) {
                alert('Voc√™ precisa comprar a colmeia primeiro!');
                return;
            }
            
            if (!gameState.canCollectHoney) {
                alert('O mel ainda n√£o est√° pronto! As abelhas produzem mel a cada 2 dias.');
                return;
            }
            
            gameState.products.honey += 2;
            gameState.honeyAvailable = 0;
            gameState.canCollectHoney = false;
            gameState.lastHoneyCollection = gameState.dayCount;
            
            // Anima√ß√£o da colmeia
            const beehive = document.getElementById('beehive-display');
            beehive.style.transform = 'scale(1.1)';
            setTimeout(() => {
                beehive.style.transform = 'scale(1)';
            }, 200);
            
            updateDisplay();
            alert('Mel coletado! +2 potes de mel (pr√≥xima coleta em 2 dias)');
        }

        // Ordenhar vaca
        function milkCow(cowId) {
            if (gameState.isNight) {
                alert('O avatar est√° dormindo! Aguarde o dia amanhecer.');
                return;
            }
            
            const cow = gameState.cows[cowId];
            if (!cow.readyToMilk || cow.isBeingMilked) return;
            
            cow.isBeingMilked = true;
            cow.milkingProgress = 0;
            
            // Processo de ordenha de 12 segundos
            const milkingInterval = setInterval(() => {
                cow.milkingProgress += 100/12; // 12 segundos
                
                if (cow.milkingProgress >= 100) {
                    cow.milkingProgress = 100;
                    cow.isBeingMilked = false;
                    
                    gameState.products.milk += 3;
                    cow.fed = false;
                    cow.readyToMilk = false;
                    cow.milkedToday = true;
                    
                    if (cow.feedTimer) {
                        clearTimeout(cow.feedTimer);
                        cow.feedTimer = null;
                    }
                    
                    clearInterval(milkingInterval);
                    updateCowDisplay(cowId);
                    updateDisplay();
                    alert('Vaca ordenhada! +3 leites (pr√≥xima ordenha amanh√£)');
                }
                
                updateCowDisplay(cowId);
            }, 1000);
        }

        // Coletar ovos
        function collectEggs(chickenId) {
            const chicken = gameState.chickens[chickenId];
            if (!chicken.readyToCollect) return;
            
            gameState.products.eggs += 3; // 3 ovos por dia
            chicken.fed = false;
            chicken.readyToCollect = false;
            chicken.laidEggsToday = true; // Marca que botou ovos hoje
            
            if (chicken.feedTimer) {
                clearTimeout(chicken.feedTimer);
                chicken.feedTimer = null;
            }
            
            updateChickenDisplay(chickenId);
            updateDisplay();
            alert('Ovos coletados! +3 ovos (pr√≥xima postura amanh√£)');
        }

        // Coletar carne
        function collectMeat(pigId) {
            const pig = gameState.pigs[pigId];
            if (!pig.readyToCollect) return;
            
            gameState.products.meat += 1;
            pig.fed = false;
            pig.readyToCollect = false;
            pig.canProduceToday = false;
            pig.lastProductionDay = gameState.dayCount;
            
            if (pig.feedTimer) {
                clearTimeout(pig.feedTimer);
                pig.feedTimer = null;
            }
            
            updatePigDisplay(pigId);
            updateDisplay();
            alert('Carne coletada! +1 carne (pr√≥xima produ√ß√£o em 2 dias)');
        }

        // Coletar l√£ (tosquiar)
        function collectWool(sheepId) {
            const sheep = gameState.sheep[sheepId];
            if (!sheep.readyToCollect || sheep.isBeingSheared) return;
            
            sheep.isBeingSheared = true;
            sheep.shearingProgress = 0;
            
            // Processo de tosquia de 12 segundos
            const shearingInterval = setInterval(() => {
                sheep.shearingProgress += 100/12; // 12 segundos
                
                if (sheep.shearingProgress >= 100) {
                    sheep.shearingProgress = 100;
                    sheep.isBeingSheared = false;
                    
                    gameState.products.wool += 2;
                    sheep.fed = false;
                    sheep.readyToCollect = false;
                    
                    if (sheep.feedTimer) {
                        clearTimeout(sheep.feedTimer);
                        sheep.feedTimer = null;
                    }
                    
                    clearInterval(shearingInterval);
                    updateSheepDisplay(sheepId);
                    updateDisplay();
                    alert('L√£ coletada! +2 l√£s (tosquia completa)');
                }
                
                updateSheepDisplay(sheepId);
            }, 1000);
        }

        // Alimentar todas as vacas
        function feedAllCows() {
            let fedCount = 0;
            gameState.cows.forEach((cow, index) => {
                if (!cow.fed && !cow.milkedToday && gameState.hay > 0) {
                    feedCow(index);
                    fedCount++;
                }
            });
            
            if (fedCount === 0) {
                alert('Nenhuma vaca pode ser alimentada (sem feno ou j√° alimentadas)!');
            }
        }

        // Ordenhar todas as vacas
        function milkAllCows() {
            let totalMilk = 0;
            gameState.cows.forEach((cow, index) => {
                if (cow.readyToMilk && !cow.milkedToday) {
                    totalMilk += 3;
                    milkCow(index);
                }
            });
            
            if (totalMilk > 0) {
                alert(`Todas as vacas ordenhadas! +${totalMilk} leites`);
            } else {
                alert('Nenhuma vaca est√° pronta para ordenhar!');
            }
        }

        // Alimentar todas as galinhas
        function feedAllChickens() {
            let fedCount = 0;
            gameState.chickens.forEach((chicken, index) => {
                if (!chicken.fed && gameState.feed.chicken > 0) {
                    feedChicken(index);
                    fedCount++;
                }
            });
            
            if (fedCount === 0) {
                alert('Nenhuma galinha pode ser alimentada (sem ra√ß√£o ou j√° alimentadas)!');
            }
        }

        // Coletar todos os ovos
        function collectAllEggs() {
            let totalEggs = 0;
            gameState.chickens.forEach((chicken, index) => {
                if (chicken.readyToCollect) {
                    totalEggs += 2;
                    collectEggs(index);
                }
            });
            
            if (totalEggs > 0) {
                alert(`Todos os ovos coletados! +${totalEggs} ovos`);
            } else {
                alert('Nenhuma galinha est√° pronta para coleta!');
            }
        }

        // Alimentar todos os porcos
        function feedAllPigs() {
            let fedCount = 0;
            gameState.pigs.forEach((pig, index) => {
                if (!pig.fed && gameState.feed.pig > 0) {
                    feedPig(index);
                    fedCount++;
                }
            });
            
            if (fedCount === 0) {
                alert('Nenhum porco pode ser alimentado (sem ra√ß√£o ou j√° alimentados)!');
            }
        }

        // Coletar toda a carne
        function collectAllMeat() {
            let totalMeat = 0;
            gameState.pigs.forEach((pig, index) => {
                if (pig.readyToCollect) {
                    totalMeat += 1;
                    collectMeat(index);
                }
            });
            
            if (totalMeat > 0) {
                alert(`Toda a carne coletada! +${totalMeat} carnes`);
            } else {
                alert('Nenhum porco est√° pronto para coleta!');
            }
        }

        // Alimentar todas as ovelhas
        function feedAllSheep() {
            let fedCount = 0;
            gameState.sheep.forEach((sheep, index) => {
                if (!sheep.fed && sheep.canFeedToday && gameState.hay > 0) {
                    feedSheep(index);
                    fedCount++;
                }
            });
            
            if (fedCount === 0) {
                alert('Nenhuma ovelha pode ser alimentada (sem feno, j√° alimentadas ou n√£o √© o dia permitido)!');
            }
        }

        // Coletar toda a l√£
        function collectAllWool() {
            let totalWool = 0;
            gameState.sheep.forEach((sheep, index) => {
                if (sheep.readyToCollect) {
                    totalWool += 2;
                    collectWool(index);
                }
            });
            
            if (totalWool > 0) {
                alert(`Toda a l√£ coletada! +${totalWool} l√£s`);
            } else {
                alert('Nenhuma ovelha est√° pronta para coleta!');
            }
        }

        // Atualizar display da vaca
        function updateCowDisplay(cowId) {
            const cow = gameState.cows[cowId];
            const cowElement = document.getElementById(`cow-${cowId}`);
            const statusElement = document.getElementById(`cow-status-${cowId}`);
            
            cowElement.className = 'cow-item';
            
            if (cow.isBeingMilked) {
                cowElement.classList.add('fed');
                statusElement.textContent = `Ordenhando... ${Math.floor(cow.milkingProgress)}%`;
            } else if (cow.milkedToday) {
                statusElement.textContent = 'Ordenhada hoje';
            } else if (cow.readyToMilk) {
                cowElement.classList.add('ready-to-milk');
                statusElement.textContent = 'Pronta para ordenha!';
            } else if (cow.fed) {
                cowElement.classList.add('fed');
                statusElement.textContent = 'Alimentada';
            } else {
                statusElement.textContent = 'Com fome';
            }
        }

        // Atualizar display da galinha
        function updateChickenDisplay(chickenId) {
            const chicken = gameState.chickens[chickenId];
            const chickenElement = document.getElementById(`chicken-${chickenId}`);
            const statusElement = document.getElementById(`chicken-status-${chickenId}`);
            
            chickenElement.className = 'cow-item';
            
            if (chicken.laidEggsToday) {
                statusElement.textContent = 'Botou ovos hoje';
            } else if (chicken.readyToCollect) {
                chickenElement.classList.add('ready-to-milk');
                statusElement.textContent = 'Pronta! (3 ovos)';
            } else if (chicken.fed) {
                chickenElement.classList.add('fed');
                statusElement.textContent = 'Alimentada';
            } else {
                statusElement.textContent = 'Com fome';
            }
        }

        // Atualizar display do porco
        function updatePigDisplay(pigId) {
            const pig = gameState.pigs[pigId];
            const pigElement = document.getElementById(`pig-${pigId}`);
            const statusElement = document.getElementById(`pig-status-${pigId}`);
            
            pigElement.className = 'cow-item';
            
            if (!pig.canProduceToday) {
                statusElement.textContent = 'Aguardando pr√≥ximo dia';
            } else if (pig.readyToCollect) {
                pigElement.classList.add('ready-to-milk');
                statusElement.textContent = 'Pronto! (1 carne)';
            } else if (pig.fed) {
                pigElement.classList.add('fed');
                statusElement.textContent = 'Alimentado';
            } else {
                statusElement.textContent = 'Com fome';
            }
        }

        // Atualizar display da ovelha
        function updateSheepDisplay(sheepId) {
            const sheep = gameState.sheep[sheepId];
            const sheepElement = document.getElementById(`sheep-${sheepId}`);
            const statusElement = document.getElementById(`sheep-status-${sheepId}`);
            
            sheepElement.className = 'cow-item';
            
            if (!sheep.canFeedToday) {
                statusElement.textContent = 'Aguardando pr√≥ximo dia';
            } else if (sheep.readyToCollect) {
                sheepElement.classList.add('ready-to-milk');
                statusElement.textContent = 'Pronta!';
            } else if (sheep.fed) {
                sheepElement.classList.add('fed');
                statusElement.textContent = 'Alimentada';
            } else {
                statusElement.textContent = 'Com fome';
            }
        }

        // Timer da vaca
        function startCowTimer(cowId, duration) {
            const cow = gameState.cows[cowId];
            let timeLeft = duration;
            
            const timerInterval = setInterval(() => {
                timeLeft--;
                const timerElement = document.getElementById(`cow-timer-${cowId}`);
                if (timerElement) {
                    timerElement.textContent = `${timeLeft}s`;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (timerElement) {
                        timerElement.textContent = '';
                    }
                }
            }, 1000);
        }

        // Timer da galinha
        function startChickenTimer(chickenId, duration) {
            const chicken = gameState.chickens[chickenId];
            let timeLeft = duration;
            
            const timerInterval = setInterval(() => {
                timeLeft--;
                const timerElement = document.getElementById(`chicken-timer-${chickenId}`);
                if (timerElement) {
                    timerElement.textContent = `${timeLeft}s`;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (timerElement) {
                        timerElement.textContent = '';
                    }
                }
            }, 1000);
        }

        // Timer do porco
        function startPigTimer(pigId, duration) {
            const pig = gameState.pigs[pigId];
            let timeLeft = duration;
            
            const timerInterval = setInterval(() => {
                timeLeft--;
                const timerElement = document.getElementById(`pig-timer-${pigId}`);
                if (timerElement) {
                    timerElement.textContent = `${timeLeft}s`;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (timerElement) {
                        timerElement.textContent = '';
                    }
                }
            }, 1000);
        }

        // Timer da ovelha
        function startSheepTimer(sheepId) {
            const sheep = gameState.sheep[sheepId];
            let timeLeft = 20;
            
            const timerInterval = setInterval(() => {
                timeLeft--;
                const timerElement = document.getElementById(`sheep-timer-${sheepId}`);
                if (timerElement) {
                    timerElement.textContent = `${timeLeft}s`;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (timerElement) {
                        timerElement.textContent = '';
                    }
                }
            }, 1000);
        }

        // Produzir produtos da fazenda
        function produceProducts() {
            // Produzir produtos aleatoriamente
            gameState.products.honey += Math.floor(Math.random() * 2) + 1;
            gameState.products.wool += Math.floor(Math.random() * 2) + 1;
            
            updateDisplay();
            alert('Produtos produzidos!');
        }

        // Vender produto individual
        function sellProduct(productType) {
            if (gameState.products[productType] <= 0) {
                alert(`Voc√™ n√£o tem ${getProductEmoji(productType)} para vender!`);
                return;
            }
            
            const price = productPrices[productType];
            gameState.products[productType]--;
            gameState.money += price;
            updateDisplay();
            alert(`${getProductEmoji(productType)} vendido por ${price} moedas!`);
        }

        // Vender frutas
        function sellFruit(fruitType) {
            const fruitPrices = {
                banana: 8,
                apple: 10,
                orange: 9
            };
            
            const fruitEmojis = {
                banana: 'üçå',
                apple: 'üçé',
                orange: 'üçä'
            };
            
            const fruitNames = {
                banana: 'bananas',
                apple: 'apples',
                orange: 'oranges'
            };
            
            const count = gameState[fruitNames[fruitType]] || 0;
            if (count <= 0) {
                alert(`Voc√™ n√£o tem ${fruitEmojis[fruitType]} para vender!`);
                return;
            }
            
            const price = fruitPrices[fruitType];
            gameState[fruitNames[fruitType]]--;
            gameState.money += price;
            updateDisplay();
            alert(`${fruitEmojis[fruitType]} vendido por ${price} moedas!`);
        }

        // Vender itens do invent√°rio
        function sellInventoryItem(seedIndex) {
            const count = gameState.inventory[seedIndex] || 0;
            if (count <= 0) {
                alert(`Voc√™ n√£o tem ${seeds[seedIndex].emoji} para vender!`);
                return;
            }
            
            const price = seeds[seedIndex].sellPrice;
            gameState.inventory[seedIndex]--;
            gameState.money += price;
            updateDisplay();
            alert(`${seeds[seedIndex].emoji} vendido por ${price} moedas!`);
        }

        // Vender todos os produtos
        function sellAllProducts() {
            let totalEarnings = 0;
            let soldItems = [];
            
            Object.keys(gameState.products).forEach(product => {
                if (gameState.products[product] > 0) {
                    const earnings = gameState.products[product] * productPrices[product];
                    totalEarnings += earnings;
                    soldItems.push(`${gameState.products[product]} ${getProductEmoji(product)}`);
                    gameState.products[product] = 0;
                }
            });
            
            if (totalEarnings > 0) {
                gameState.money += totalEarnings;
                updateDisplay();
                alert(`Vendido: ${soldItems.join(', ')}\nTotal ganho: ${totalEarnings} moedas!`);
            } else {
                alert('Voc√™ n√£o tem produtos para vender!');
            }
        }

        // Obter emoji do produto
        function getProductEmoji(product) {
            const emojis = {
                milk: 'ü•õ',
                eggs: 'ü•ö',
                coffee: '‚òï',
                wool: 'üß∂',
                flour: 'üåæ',
                honey: 'üçØ',
                meat: 'ü•©',
                juice: 'üç∑',
                cheese: 'üßÄ',
                yarn: 'üßµ',
                bread: 'üçû',
                rawChicken: 'üçó',
                fish: 'üêü'
            };
            return emojis[product] || '';
        }

        // Atualizar display do canteiro
        function updatePlotDisplay(plotIndex) {
            const plot = gameState.plots[plotIndex];
            const plotElement = document.querySelectorAll('.plot')[plotIndex];
            const contentElement = document.getElementById(`plot-content-${plotIndex}`);
            const statusElement = document.getElementById(`plot-status-${plotIndex}`);
            const progressElement = document.getElementById(`progress-${plotIndex}`);
            
            // Atualizar classe do canteiro
            plotElement.className = 'plot';
            if (plot.fertilized) plotElement.classList.add('fertilized');
            if (plot.watered) plotElement.classList.add('watered');
            if (plot.planted && plot.growthProgress > 0) plotElement.classList.add('growing');
            
            // Atualizar conte√∫do
            if (plot.readyToHarvest) {
                contentElement.textContent = seeds[plot.seedType].emoji;
                statusElement.textContent = 'Pronto!';
            } else if (plot.planted) {
                contentElement.textContent = plot.watered ? 'üå±' : seeds[plot.seedType].emoji;
                statusElement.textContent = plot.watered ? 'Crescendo...' : 'Precisa regar';
            } else if (plot.fertilized) {
                contentElement.textContent = 'üå±';
                statusElement.textContent = 'Adubado';
            } else {
                contentElement.textContent = 'üå±';
                statusElement.textContent = 'Vazio';
            }
            
            // Atualizar barra de progresso
            progressElement.style.width = `${plot.growthProgress}%`;
        }

        // Atualizar display geral
        function updateDisplay() {
            document.getElementById('money').textContent = gameState.money;
            document.getElementById('water').textContent = gameState.water;
            document.getElementById('fertilizer').textContent = gameState.fertilizer;
            document.getElementById('energy').textContent = gameState.energy;
            
            // Atualizar barra de energia
            const energyBar = document.getElementById('energy-bar');
            const energyDisplay = document.getElementById('energy-display');
            const avatarDisplay = document.getElementById('avatar-display');
            
            energyBar.style.width = `${gameState.energy}%`;
            energyDisplay.textContent = gameState.energy;
            
            // Mudar apar√™ncia do avatar baseado na energia
            if (gameState.isNight) {
                avatarDisplay.textContent = 'üò¥';
                updateAvatarStatus('Dormindo... Zzz');
            } else if (gameState.isResting) {
                avatarDisplay.textContent = 'üò¥';
                updateAvatarStatus('Descansando...');
            } else if (gameState.energy <= 0) {
                avatarDisplay.textContent = 'üòµ';
                updateAvatarStatus('Exausta! Precisa descansar.');
            } else if (gameState.energy <= 20) {
                avatarDisplay.textContent = 'üò∞';
                updateAvatarStatus('Muito cansada');
            } else if (gameState.energy <= 50) {
                avatarDisplay.textContent = 'üòÖ';
                updateAvatarStatus('Cansada');
            } else if (gameState.energy <= 80) {
                avatarDisplay.textContent = 'üôÇ';
                updateAvatarStatus('Bem disposta');
            } else {
                avatarDisplay.textContent = 'üë©‚Äçüåæ';
                updateAvatarStatus('Energizada e pronta!');
            }
            
            // Atualizar materiais da composteira
            if (gameState.hasCompost) {
                document.getElementById('flowers').textContent = gameState.compostMaterials.flowers;
                document.getElementById('branches').textContent = gameState.compostMaterials.branches;
                document.getElementById('manure').textContent = gameState.compostMaterials.manure;
            }
            
            // Atualizar campo de grama
            if (gameState.hasGrassField) {
                document.getElementById('grass-collected').textContent = gameState.grassCollected;
                document.getElementById('flower-inventory').textContent = gameState.compostMaterials.flowers;
            }
            
            // Atualizar secador
            if (gameState.hasDryer) {
                document.getElementById('fresh-grass').textContent = gameState.freshGrass;
                document.getElementById('dried-grass').textContent = gameState.driedGrass;
                document.getElementById('hay-count').textContent = gameState.hay;
            }
            
            // Atualizar misturador
            if (gameState.hasMixer) {
                document.getElementById('chicken-feed').textContent = gameState.feed.chicken;
                document.getElementById('pig-feed').textContent = gameState.feed.pig;
            }
            
            // Atualizar pasto das vacas
            if (gameState.hasPasture) {
                document.getElementById('cow-count').textContent = gameState.cows.length;
                const availableMilk = gameState.cows.filter(cow => cow.readyToMilk && !cow.milkedToday).length * 3;
                document.getElementById('available-milk').textContent = availableMilk;
            }
            
            // Atualizar galinheiro
            if (gameState.hasMixer) {
                document.getElementById('chicken-count').textContent = gameState.chickens.length;
                document.getElementById('chick-count').textContent = gameState.chicks.length;
                document.getElementById('raw-chicken-count').textContent = gameState.products.rawChicken;
                const availableEggs = gameState.chickens.filter(chicken => chicken.readyToCollect).length * 2;
                document.getElementById('available-eggs').textContent = availableEggs;
            }
            
            // Atualizar chiqueiro
            if (gameState.hasMixer) {
                document.getElementById('pig-count').textContent = gameState.pigs.length;
                const availableMeat = gameState.pigs.filter(pig => pig.readyToCollect).length;
                document.getElementById('available-meat').textContent = availableMeat;
            }
            
            // Atualizar curral das ovelhas
            if (gameState.hasSheepPen) {
                document.getElementById('sheep-count').textContent = gameState.sheep.length;
                const availableWool = gameState.sheep.filter(sheep => sheep.readyToCollect).length * 2;
                document.getElementById('available-wool').textContent = availableWool;
            }
            
            // Sementes s√£o ilimitadas agora, n√£o precisa atualizar contadores
            
            // Atualizar queijaria
            if (gameState.hasCheeseMaker) {
                document.getElementById('milk-for-cheese').textContent = gameState.products.milk;
                document.getElementById('cheese-ready').textContent = gameState.cheeseReady;
            }
            
            // Atualizar sistema de madeira
            if (gameState.hasBosque) {
                document.getElementById('logs-count').textContent = gameState.logs;
                document.getElementById('axe-status').textContent = gameState.hasAxe ? 'Possui' : 'N√£o possui';
                document.getElementById('axe-uses').textContent = gameState.axeUses;
                document.getElementById('apples-collected').textContent = gameState.apples;
                document.getElementById('bananas-collected').textContent = gameState.bananas;
                document.getElementById('oranges-collected').textContent = gameState.oranges;
                document.getElementById('branches-collected').textContent = gameState.branchesCollected;
            }
            
            // Atualizar timers das √°rvores
            const appleTimer = document.getElementById('apple-timer');
            if (!gameState.canCollectApples) {
                appleTimer.textContent = 'Pr√≥xima coleta amanh√£';
            } else {
                appleTimer.textContent = 'Dispon√≠vel para coleta!';
            }

            const bananaTimer = document.getElementById('banana-timer');
            if (!gameState.canCollectBananas) {
                bananaTimer.textContent = 'Pr√≥xima coleta amanh√£';
            } else {
                bananaTimer.textContent = 'Dispon√≠vel para coleta!';
            }

            const orangeTimer = document.getElementById('orange-timer');
            if (!gameState.canCollectOranges) {
                orangeTimer.textContent = 'Pr√≥xima coleta amanh√£';
            } else {
                orangeTimer.textContent = 'Dispon√≠vel para coleta!';
            }

            const treeTimer = document.getElementById('tree-timer');
            if (!gameState.canCollectLogs) {
                treeTimer.textContent = 'Pr√≥xima coleta amanh√£';
            } else {
                treeTimer.textContent = 'Dispon√≠vel para coleta!';
            }
            
            if (gameState.hasAxe) {
                document.getElementById('logs-inventory').textContent = gameState.logs;
                document.getElementById('firewood-count').textContent = gameState.firewood;
            }
            
            // Atualizar baia do cavalo
            if (gameState.hasHorse) {
                document.getElementById('horse-friendship').textContent = gameState.horse.friendship;
                document.getElementById('hay-for-horse').textContent = gameState.hay;
                document.getElementById('apples-count').textContent = gameState.apples;
                updateHorseDisplay();
            }
            
            // Atualizar cachorro
            if (gameState.hasDog) {
                document.getElementById('dog-food-count').textContent = gameState.dogFood;
                document.getElementById('dog-bones-count').textContent = gameState.dogBones;
                document.getElementById('dog-friendship').textContent = gameState.dog.friendship;
                document.getElementById('treasures-found-today').textContent = gameState.treasuresFoundToday;
                updateDogDisplay();
            }
            
            // Atualizar tesouros
            document.getElementById('cd-count').textContent = gameState.treasures.cd;
            document.getElementById('bottle-count').textContent = gameState.treasures.bottle;
            document.getElementById('shoe-count').textContent = gameState.treasures.shoe;
            document.getElementById('ball-count').textContent = gameState.treasures.ball;
            
            // Atualizar torradeira
            if (gameState.hasRoaster) {
                document.getElementById('coffee-beans').textContent = gameState.inventory[5] || 0; // Gr√£os crus do invent√°rio
                document.getElementById('coffee-roasted').textContent = gameState.products.coffee; // Caf√© torrado dos produtos
                document.getElementById('firewood-for-roaster').textContent = gameState.firewood;
            }
            
            // Atualizar m√°quina de fiar
            if (gameState.hasSpinningMachine) {
                document.getElementById('wool-for-spinning').textContent = gameState.products.wool;
                document.getElementById('yarn-count').textContent = gameState.yarnCount;
            }
            
            // Atualizar moinho
            if (gameState.hasMill) {
                document.getElementById('wheat-for-mill').textContent = gameState.inventory[4] || 0;
                document.getElementById('flour-ready').textContent = gameState.products.flour;
            }
            
            // Atualizar m√°quina de suco
            if (gameState.hasJuiceMaker) {
                document.getElementById('grapes-for-juice').textContent = gameState.inventory[9] || 0;
                document.getElementById('juice-ready').textContent = gameState.products.juice;
            }
            
            // Atualizar fog√£o
            if (gameState.hasStove) {
                document.getElementById('firewood-for-stove').textContent = gameState.firewood;
                document.getElementById('bread-ready').textContent = gameState.breadReady;
            }
            
            // Atualizar frutas na quitanda
            document.getElementById('banana-count').textContent = gameState.bananas;
            document.getElementById('apple-count').textContent = gameState.apples;
            document.getElementById('orange-count').textContent = gameState.oranges;
            document.getElementById('juice-count-market').textContent = gameState.products.juice;
            
            // Atualizar vegetais na quitanda
            document.getElementById('potato-count').textContent = gameState.inventory[0] || 0;
            document.getElementById('tomato-count').textContent = gameState.inventory[1] || 0;
            document.getElementById('carrot-count').textContent = gameState.inventory[2] || 0;
            document.getElementById('pumpkin-count').textContent = gameState.inventory[6] || 0;
            document.getElementById('broccoli-count').textContent = gameState.inventory[7] || 0;
            document.getElementById('lettuce-count').textContent = gameState.inventory[8] || 0;
            
            // Atualizar colmeia
            if (gameState.hasBeehive) {
                document.getElementById('honey-available').textContent = gameState.honeyAvailable;
                const honeyTimer = document.getElementById('honey-timer');
                if (gameState.canCollectHoney) {
                    honeyTimer.textContent = 'Pronto para coleta!';
                } else {
                    const daysLeft = 2 - (gameState.dayCount - gameState.lastHoneyCollection);
                    honeyTimer.textContent = `${daysLeft} dias`;
                }
            }
            
            // Atualizar produtos da fazenda
            document.getElementById('milk-count').textContent = gameState.products.milk;
            document.getElementById('eggs-count').textContent = gameState.products.eggs;
            document.getElementById('coffee-count').textContent = gameState.products.coffee;
            document.getElementById('wool-count').textContent = gameState.products.wool;
            document.getElementById('flour-count').textContent = gameState.products.flour;
            document.getElementById('honey-count').textContent = gameState.products.honey;
            document.getElementById('meat-count').textContent = gameState.products.meat;
            document.getElementById('juice-count').textContent = gameState.products.juice;
            document.getElementById('cheese-count').textContent = gameState.products.cheese;
            document.getElementById('yarn-count-display').textContent = gameState.products.yarn;
            document.getElementById('bread-count').textContent = gameState.products.bread;
            document.getElementById('juice-count-farm').textContent = gameState.products.juice;
            document.getElementById('raw-chicken-market').textContent = gameState.products.rawChicken;
            document.getElementById('fish-count').textContent = gameState.products.fish;
            
            // Atualizar pescaria
            document.getElementById('fish-available').textContent = gameState.fishAvailable;
            document.getElementById('fishing-rod-status').textContent = gameState.hasFishingRod ? 'Possui' : 'N√£o possui';
            document.getElementById('rod-uses').textContent = gameState.fishingRodUses;
            document.getElementById('fish-caught-today').textContent = gameState.fishCaught;
            
            // Atualizar invent√°rio de sementes
            const inventoryDisplay = document.getElementById('inventory-display');
            inventoryDisplay.innerHTML = '';
            seeds.forEach((seed, index) => {
                const count = gameState.inventory[index] || 0;
                if (count > 0) {
                    const inventoryItem = document.createElement('div');
                    inventoryItem.style.textAlign = 'center';
                    inventoryItem.style.padding = '5px';
                    inventoryItem.style.background = '#F0F8FF';
                    inventoryItem.style.borderRadius = '5px';
                    inventoryItem.innerHTML = `
                        <div style="font-size: 1rem;">${seed.emoji}</div>
                        <div style="font-size: 0.7rem; color: #2F4F4F;">${count}</div>
                    `;
                    inventoryDisplay.appendChild(inventoryItem);
                }
            });
            
            // Atualizar todos os canteiros
            for (let i = 0; i < gameState.maxPlots; i++) {
                updatePlotDisplay(i);
            }
            
            // Atualizar canteiros da estufa se existir
            if (gameState.hasGreenhouse) {
                for (let i = 0; i < 12; i++) {
                    updateGreenhousePlotDisplay(i);
                }
            }
        }

        // Sistema de tempo
        function startGameTimer() {
            setInterval(() => {
                if (!gameState.isNight) {
                    gameState.gameTime--;
                } else {
                    gameState.gameTime--;
                }
                
                if (gameState.gameTime <= 0) {
                    if (gameState.isNight) {
                        // Fim da noite, come√ßar novo dia
                        gameState.gameTime = 900; // 15 minutos
                        gameState.isNight = false;
                        gameState.dayCount++;
                        document.body.classList.remove('night');
                        document.getElementById('day-night').textContent = 'Dia';
                        
                        // Reset das vacas para novo dia
                        gameState.cows.forEach(cow => {
                            cow.milkedToday = false;
                        });
                        
                        // Reset do cavalo para novo dia
                        if (gameState.hasHorse) {
                            gameState.horse.fedToday = false;
                            gameState.horse.fed = false;
                            updateHorseDisplay();
                        }
                        
                        // Reset do cachorro para novo dia
                        gameState.dog.fedToday = false;
                        gameState.dog.fed = false;
                        gameState.dog.treasureReady = false;
                        gameState.dog.currentTreasure = null;
                        gameState.treasuresFoundToday = 0;
                        document.getElementById('collect-treasure-btn').style.display = 'none';
                        updateDogDisplay();
                        
                        // Verificar se pode coletar frutas e troncos (diariamente)
                        if (gameState.dayCount - gameState.lastAppleCollection >= 1) {
                            gameState.canCollectApples = true;
                        }
                        if (gameState.dayCount - gameState.lastBananaCollection >= 1) {
                            gameState.canCollectBananas = true;
                        }
                        if (gameState.dayCount - gameState.lastOrangeCollection >= 1) {
                            gameState.canCollectOranges = true;
                        }
                        if (gameState.dayCount - gameState.lastLogCollection >= 1) {
                            gameState.canCollectLogs = true;
                        }
                        
                        // Verificar se pode coletar mel (a cada 2 dias)
                        if (gameState.hasBeehive && gameState.dayCount - gameState.lastHoneyCollection >= 2) {
                            gameState.canCollectHoney = true;
                            gameState.honeyAvailable = 2;
                        }
                        
                        // Recuperar energia completa no novo dia
                        gameState.energy = 100;
                        gameState.isResting = false;
                        
                        // Atualizar ovelhas para novo dia (dia sim, dia n√£o)
                        gameState.sheep.forEach((sheep, index) => {
                            // Se passou 2 dias desde a √∫ltima alimenta√ß√£o, pode alimentar novamente
                            if (gameState.dayCount - sheep.lastFeedDay >= 2) {
                                sheep.canFeedToday = true;
                                updateSheepDisplay(index);
                            }
                        });
                        
                        // Atualizar porcos para novo dia (dia sim, dia n√£o)
                        gameState.pigs.forEach((pig, index) => {
                            // Se passou 2 dias desde a √∫ltima produ√ß√£o, pode produzir novamente
                            if (gameState.dayCount - pig.lastProductionDay >= 2) {
                                pig.canProduceToday = true;
                                updatePigDisplay(index);
                            }
                        });
                        
                        // Reset das galinhas para novo dia
                        gameState.chickens.forEach((chicken, index) => {
                            chicken.laidEggsToday = false;
                            updateChickenDisplay(index);
                        });
                        
                        // Reset da pescaria para novo dia
                        gameState.fishAvailable = 4;
                        gameState.fishCaught = 0;
                        gameState.lastFishingDay = gameState.dayCount;
                        spawnFish(); // Repovoar o lago com novos peixes
                        
                        // Verificar se deve chover (dia sim, dia n√£o)
                        if (gameState.dayCount % 2 === 0) {
                            setTimeout(() => {
                                startRain();
                            }, 5000); // Chove 5 segundos ap√≥s come√ßar o dia
                        }
                    } else {
                        // Fim do dia, come√ßar noite
                        gameState.gameTime = 60; // 1 minuto
                        gameState.isNight = true;
                        document.body.classList.add('night');
                        document.getElementById('day-night').textContent = 'Noite';
                    }
                }
                
                const minutes = Math.floor(gameState.gameTime / 60);
                const seconds = gameState.gameTime % 60;
                document.getElementById('time-display').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Sistema de chuva - agora chove dia sim dia n√£o
        function startWeatherSystem() {
            // A chuva agora √© controlada pelo sistema de dias
        }

        function startRain() {
            if (gameState.isRaining) return;
            
            gameState.isRaining = true;
            document.body.classList.add('raining');
            
            // Verificar se √© inverno para neve
            const isWinter = gameState.currentSeason === 3;
            
            // Mostrar indicador de chuva ou neve
            const indicator = document.getElementById('weather-indicator');
            indicator.textContent = isWinter ? '‚ùÑÔ∏è' : 'üåßÔ∏è';
            indicator.classList.add('active');
            
            // Criar gotas de chuva ou neve
            if (isWinter) {
                createSnowFlakes();
            } else {
                createRainDrops();
            }
            
            // Regar todas as plantas automaticamente (exceto no inverno)
            if (!isWinter) {
                gameState.plots.forEach((plot, index) => {
                    if (plot.planted && !plot.watered) {
                        plot.watered = true;
                        startGrowth(index);
                        updatePlotDisplay(index);
                    }
                });
                alert('Chuva! Todas as plantas foram regadas automaticamente! üåßÔ∏è');
            } else {
                alert('Neve! ‚ùÑÔ∏è Que paisagem linda, mas as plantas n√£o podem crescer no inverno.');
            }
            
            // Parar chuva/neve ap√≥s 2 minutos
            setTimeout(() => {
                gameState.isRaining = false;
                document.body.classList.remove('raining');
                indicator.classList.remove('active');
                document.getElementById('rain-drops').innerHTML = '';
            }, 120000);
        }

        function createRainDrops() {
            const rainContainer = document.getElementById('rain-drops');
            
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'rain-drop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                drop.style.animationDelay = Math.random() * 2 + 's';
                rainContainer.appendChild(drop);
            }
        }

        function createSnowFlakes() {
            const rainContainer = document.getElementById('rain-drops');
            
            for (let i = 0; i < 50; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snow-drop';
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.animationDuration = (Math.random() * 2 + 2) + 's'; // Mais lento que chuva
                snowflake.style.animationDelay = Math.random() * 3 + 's';
                rainContainer.appendChild(snowflake);
            }
        }

        // Sistema de esta√ß√µes
        function startSeasonCycle() {
            // Aplicar classe inicial
            document.body.classList.add(`season-${gameState.currentSeason}`);
            
            setInterval(() => {
                // Remover classe da esta√ß√£o anterior
                document.body.classList.remove(`season-${gameState.currentSeason}`);
                
                gameState.currentSeason = (gameState.currentSeason + 1) % 4;
                document.getElementById('season-display').textContent = seasons[gameState.currentSeason];
                
                // Aplicar classe da nova esta√ß√£o
                document.body.classList.add(`season-${gameState.currentSeason}`);
                
                // Mensagem de mudan√ßa de esta√ß√£o
                const seasonMessages = [
                    'üå∏ Primavera chegou! Plantas s√£o mais valiosas!',
                    '‚òÄÔ∏è Ver√£o chegou! Plantas produzem 2 frutos!',
                    'üçÇ Outono chegou! Plantas crescem em 1 minuto!',
                    '‚ùÑÔ∏è Inverno chegou! N√£o √© poss√≠vel plantar.'
                ];
                alert(seasonMessages[gameState.currentSeason]);
            }, 7200000); // Muda esta√ß√£o a cada 2 horas
        }

        // Inicializar o jogo quando a p√°gina carregar
        window.onload = initGame;
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'968aecdc76b4007b',t:'MTc1NDEwOTkyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
