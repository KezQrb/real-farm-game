<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Fazendinha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&display=swap');
        
        .farm-plot {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .farm-plot:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .planted {
            background: linear-gradient(45deg, #8B4513, #A0522D);
        }
        
        .growing {
            background: linear-gradient(45deg, #228B22, #32CD32);
        }
        
        .ready {
            background: linear-gradient(45deg, #FFD700, #FFA500);
        }
        
        .needs-water {
            background: linear-gradient(45deg, #D2691E, #CD853F);
            border: 2px dashed #8B4513 !important;
        }
        
        .fertilized {
            background: linear-gradient(45deg, #8B4513, #A0522D);
            border: 2px solid #654321 !important;
        }
        
        .plant-icon {
            font-size: 2rem;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .coin-animation {
            animation: coinFlip 0.6s ease-in-out;
        }
        
        @keyframes coinFlip {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.2); }
            100% { transform: rotateY(360deg) scale(1); }
        }
        
        .day-sky {
            background: linear-gradient(to bottom, #87CEEB, #98FB98);
        }
        
        .night-sky {
            background: linear-gradient(to bottom, #191970, #2F4F4F);
        }
        
        .rain-drop {
            position: absolute;
            width: 3px;
            height: 15px;
            background: linear-gradient(to bottom, rgba(135, 206, 235, 0.8), rgba(79, 195, 247, 1));
            border-radius: 0 0 50% 50%;
            animation: rain-fall 1.5s linear infinite;
            box-shadow: 0 0 3px rgba(79, 195, 247, 0.5);
        }
        
        @keyframes rain-fall {
            0% { transform: translateY(-100vh) rotate(10deg); opacity: 0.8; }
            100% { transform: translateY(100vh) rotate(10deg); opacity: 0; }
        }
        
        .cow {
            animation: cow-move 8s ease-in-out infinite;
        }
        
        @keyframes cow-move {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(50px); }
        }
        
        .chicken {
            animation: chicken-peck 2s ease-in-out infinite;
        }
        
        .chicken:nth-child(2) {
            animation-delay: 1s;
        }
        
        @keyframes chicken-peck {
            0%, 70%, 100% { transform: translateY(0) rotate(0deg); }
            35% { transform: translateY(-3px) rotate(-5deg); }
            50% { transform: translateY(2px) rotate(5deg); }
        }
        
        .pig {
            animation: pig-move 6s ease-in-out infinite;
        }
        
        .pig:nth-child(2) {
            animation-delay: 3s;
        }
        
        @keyframes pig-move {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(20px) rotate(5deg); }
            50% { transform: translateX(-10px) rotate(-3deg); }
            75% { transform: translateX(15px) rotate(2deg); }
        }
        
        .sheep {
            animation: sheep-graze 4s ease-in-out infinite;
        }
        
        .sheep:nth-child(2) {
            animation-delay: 2s;
        }
        
        @keyframes sheep-graze {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-2px) rotate(-2deg); }
            50% { transform: translateY(3px) rotate(1deg); }
            75% { transform: translateY(-1px) rotate(-1deg); }
        }
        
        .horse {
            animation: horse-gallop 3s ease-in-out infinite;
        }
        
        @keyframes horse-gallop {
            0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
            25% { transform: translateX(-15px) translateY(-3px) rotate(-2deg); }
            50% { transform: translateX(0) translateY(-5px) rotate(0deg); }
            75% { transform: translateX(15px) translateY(-3px) rotate(2deg); }
        }
        
        .egg-bounce {
            animation: egg-appear 0.5s ease-out;
        }
        
        @keyframes egg-appear {
            0% { transform: scale(0) translateY(-20px); }
            100% { transform: scale(1) translateY(0); }
        }
        
        .avatar-bounce {
            animation: avatar-bounce 3s ease-in-out infinite;
        }
        
        @keyframes avatar-bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        
        .avatar-celebrate {
            animation: avatar-celebrate 1s ease-in-out;
        }
        
        @keyframes avatar-celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }
        
        .roaster-fire {
            animation: fire-flicker 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes fire-flicker {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }
    </style>
</head>
<body class="day-sky min-h-screen font-sans transition-all duration-1000" id="game-body">
    <!-- Rain Container -->
    <div id="rain-container" class="fixed inset-0 pointer-events-none z-10 hidden"></div>
    
    <!-- Header -->
    <div class="bg-green-600 text-white p-4 shadow-lg relative z-20">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <!-- Avatar da Camponesa -->
                <div class="bg-white rounded-full p-2 shadow-lg avatar-bounce" id="avatar-container">
                    <div class="w-12 h-12 flex items-center justify-center text-2xl bg-pink-100 rounded-full border-2 border-pink-300" id="avatar">
                        👩‍🌾
                    </div>
                </div>
                <h1 class="text-3xl font-bold" style="font-family: 'Fredoka One', cursive;">🚜 Real Farm</h1>
            </div>
            <div class="flex items-center space-x-4">
                <div class="bg-yellow-500 px-3 py-2 rounded-full font-bold text-green-800 text-sm">
                    💰 <span id="coins">100</span>
                </div>
                <div class="bg-blue-500 px-3 py-2 rounded-full font-bold text-white text-sm">
                    💧 <span id="water">50</span>
                </div>
                <div class="bg-white px-3 py-2 rounded-full font-bold text-blue-600 text-sm">
                    🥛 <span id="milk">0</span>
                </div>
                <div class="bg-yellow-200 px-3 py-2 rounded-full font-bold text-orange-600 text-sm">
                    🥚 <span id="eggs">0</span>
                </div>
                <div class="bg-orange-200 px-3 py-2 rounded-full font-bold text-amber-700 text-sm">
                    🍞 <span id="bread">0</span>
                </div>
                <div class="bg-yellow-300 px-3 py-2 rounded-full font-bold text-orange-700 text-sm">
                    🧀 <span id="cheese">0</span>
                </div>
                <div class="bg-amber-700 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🪵 <span id="wood">0</span>
                </div>
                <div class="bg-amber-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🍂 <span id="fertilizer">20</span>
                </div>
                <div class="bg-green-700 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🌱 <span id="grass">0</span>
                </div>
                <div class="bg-yellow-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🟫 <span id="hay">0</span>
                </div>
                <div class="bg-amber-900 px-3 py-2 rounded-full font-bold text-white text-sm">
                    ☕ <span id="roasted-coffee">0</span>
                </div>
                <div class="bg-purple-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🍷 <span id="grape-juice">0</span>
                </div>
                <div class="bg-orange-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🥣 <span id="chicken-feed">0</span>
                </div>
                <div class="bg-pink-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🍲 <span id="pig-feed">0</span>
                </div>
                <div class="bg-red-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🥩 <span id="pork-meat">0</span>
                </div>
                <div class="bg-white px-3 py-2 rounded-full font-bold text-gray-700 text-sm">
                    ☁️ <span id="wool">0</span>
                </div>
                <div class="bg-purple-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    ⚪ <span id="yarn">0</span>
                </div>
                <div class="bg-amber-800 px-3 py-2 rounded-full font-bold text-white text-sm">
                    💩 <span id="manure">0</span>
                </div>
                <div class="bg-yellow-400 px-3 py-2 rounded-full font-bold text-orange-700 text-sm">
                    🌼 <span id="yellow-flowers">0</span>
                </div>
                <div class="bg-green-800 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🌿 <span id="branches">0</span>
                </div>
                <div class="bg-yellow-600 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🍯 <span id="honey">0</span>
                </div>
                <div class="bg-amber-200 px-3 py-2 rounded-full font-bold text-amber-800 text-sm">
                    🍚 <span id="flour">0</span>
                </div>
                <div class="bg-red-500 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🐔 <span id="raw-chicken">0</span>
                </div>
                <div class="bg-yellow-300 px-3 py-2 rounded-full font-bold text-orange-700 text-sm">
                    🐣 <span id="chicks">0</span>
                </div>
                <div class="bg-green-400 px-3 py-2 rounded-full font-bold text-white text-sm">
                    🍽️ <span id="cooked-meals">0</span>
                </div>
                <div class="bg-red-500 px-3 py-2 rounded-full font-bold text-white text-sm">
                    ⚡ <span id="avatar-energy">100</span>%
                </div>
                <div class="bg-purple-500 px-3 py-2 rounded-full font-bold text-white text-sm">
                    ⭐ <span id="level">1</span>
                </div>
                <div class="bg-gray-700 px-3 py-2 rounded-full font-bold text-white text-sm">
                    <span id="time-indicator">☀️ Dia</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Controls -->
    <div class="max-w-6xl mx-auto p-4">
        <div class="bg-white rounded-lg shadow-lg p-4 mb-6">
            <h2 class="text-xl font-bold text-green-700 mb-3">🌱 Sementes Disponíveis</h2>
            <div class="grid grid-cols-3 gap-3">
                <button id="carrot-seed" class="seed-btn bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="carrot" data-cost="10">
                    🥕 Cenoura (10)
                </button>
                <button id="tomato-seed" class="seed-btn bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="tomato" data-cost="15">
                    🍅 Tomate (15)
                </button>
                <button id="corn-seed" class="seed-btn bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="corn" data-cost="20">
                    🌽 Milho (20)
                </button>
                <button id="potato-seed" class="seed-btn bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="potato" data-cost="12">
                    🥔 Batata (12)
                </button>
                <button id="wheat-seed" class="seed-btn bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="wheat" data-cost="18">
                    🌾 Trigo (18)
                </button>
                <button id="coffee-seed" class="seed-btn bg-green-700 hover:bg-green-800 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="coffee" data-cost="25">
                    🌿 Planta de Café (25)
                </button>
                <button id="pumpkin-seed" class="seed-btn bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="pumpkin" data-cost="30">
                    🎃 Abóbora (30)
                </button>
                <button id="lettuce-seed" class="seed-btn bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="lettuce" data-cost="8">
                    🥬 Alface (8)
                </button>
                <button id="broccoli-seed" class="seed-btn bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="broccoli" data-cost="22">
                    🥦 Brócolis (22)
                </button>
                <button id="grape-seed" class="seed-btn bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm" data-seed="grape" data-cost="35">
                    🍇 Uva (35)
                </button>
            </div>
            <div class="flex justify-between items-center mt-3">
                <p class="text-sm text-gray-600">Adube o solo primeiro, depois plante as sementes!</p>
                <div class="space-x-2">
                    <!-- Botão removido - agora adubo vem da compostagem -->
                </div>
            </div>
        </div>

        <!-- Farm Grid -->
        <div class="bg-green-100 rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-green-700 mb-4 text-center">🌾 Plantação</h2>
            <div class="grid grid-cols-4 gap-3 max-w-4xl mx-auto" id="farm-grid">
                <!-- 36 canteiros serão gerados aqui -->
            </div>
        </div>

        <!-- Expansion Shop -->
        <div class="bg-blue-100 rounded-lg shadow-lg p-6 mb-6">
            <h3 class="text-xl font-bold text-blue-700 mb-4 text-center">🏗️ Loja de Expansões</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                <!-- Expansão de Canteiros -->
                <button id="expand-plots" class="bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm">
                    🌾 Expandir Canteiros<br><span class="text-xs">+4 canteiros (100 moedas)</span>
                </button>
                
                <!-- Setores -->
                <button id="buy-well" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="well" data-cost="150">
                    💧 Poço<br><span class="text-xs">150 moedas</span>
                </button>
                
                <button id="buy-tree-area" class="bg-green-700 hover:bg-green-800 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="treeArea" data-cost="100">
                    🌳 Área da Árvore<br><span class="text-xs">100 moedas</span>
                </button>
                
                <button id="buy-grass-field" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="grassField" data-cost="100">
                    🌱 Campo de Grama<br><span class="text-xs">100 moedas</span>
                </button>
                
                <button id="buy-composter" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="composter" data-cost="150">
                    🗑️ Composteira<br><span class="text-xs">150 moedas</span>
                </button>
                
                <button id="buy-bee-hive" class="bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="beeHive" data-cost="200">
                    🐝 Colmeia<br><span class="text-xs">200 moedas</span>
                </button>
                
                <button id="buy-hay-maker" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="hayMaker" data-cost="200">
                    🌾 Máquina de Feno<br><span class="text-xs">200 moedas</span>
                </button>
                
                <button id="buy-feed-maker" class="bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="feedMaker" data-cost="250">
                    🏭 Fábrica de Ração<br><span class="text-xs">250 moedas</span>
                </button>
                
                <button id="buy-dairy" class="bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="dairy" data-cost="250">
                    🧀 Queijaria<br><span class="text-xs">250 moedas</span>
                </button>
                
                <button id="buy-bakery" class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="bakery" data-cost="300">
                    🔥 Padaria<br><span class="text-xs">300 moedas</span>
                </button>
                
                <button id="buy-yarn-maker" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="yarnMaker" data-cost="300">
                    🧶 Fiandeira<br><span class="text-xs">300 moedas</span>
                </button>
                
                <button id="buy-chicken-coop" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="chickenCoop" data-cost="300">
                    🐔 Galinheiro<br><span class="text-xs">300 moedas</span>
                </button>
                
                <button id="buy-flour-mill" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="flourMill" data-cost="350">
                    ⚙️ Moinho<br><span class="text-xs">350 moedas</span>
                </button>
                
                <button id="buy-winery" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="winery" data-cost="350">
                    🍇 Prensa de Uvas<br><span class="text-xs">350 moedas</span>
                </button>
                
                <button id="buy-roastery" class="bg-amber-800 hover:bg-amber-900 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="roastery" data-cost="400">
                    ☕ Torrefação<br><span class="text-xs">400 moedas</span>
                </button>
                
                <button id="buy-pig-pen" class="bg-pink-600 hover:bg-pink-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="pigPen" data-cost="400">
                    🐷 Chiqueiro<br><span class="text-xs">400 moedas</span>
                </button>
                
                <button id="buy-sheep-pen" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="sheepPen" data-cost="450">
                    🐑 Curral das Ovelhas<br><span class="text-xs">450 moedas</span>
                </button>
                
                <button id="buy-cow-pasture" class="bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="cowPasture" data-cost="500">
                    🐄 Pasto das Vacas<br><span class="text-xs">500 moedas</span>
                </button>
                
                <button id="buy-horse-stable" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm sector-btn" data-sector="horseStable" data-cost="600">
                    🐴 Estábulo<br><span class="text-xs">600 moedas</span>
                </button>
            </div>
        </div>

        <!-- Animal Shop -->
        <div class="bg-green-100 rounded-lg shadow-lg p-6 mb-6">
            <h3 class="text-xl font-bold text-green-700 mb-4 text-center">🐄 Loja de Animais</h3>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-4">
                <button id="buy-chicken" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm animal-btn" data-animal="chickens" data-cost="50">
                    🐔 Galinha<br><span class="text-xs">50 moedas</span><br><span class="text-xs">Você tem: <span id="owned-chickens">0</span></span>
                </button>
                
                <button id="buy-cow" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm animal-btn" data-animal="cows" data-cost="200">
                    🐄 Vaca<br><span class="text-xs">200 moedas</span><br><span class="text-xs">Você tem: <span id="owned-cows">0</span></span>
                </button>
                
                <button id="buy-sheep" class="bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm animal-btn" data-animal="sheep" data-cost="120">
                    🐑 Ovelha<br><span class="text-xs">120 moedas</span><br><span class="text-xs">Você tem: <span id="owned-sheep">0</span></span>
                </button>
                
                <button id="buy-pig" class="bg-pink-600 hover:bg-pink-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm animal-btn" data-animal="pigs" data-cost="150">
                    🐷 Porco<br><span class="text-xs">150 moedas</span><br><span class="text-xs">Você tem: <span id="owned-pigs">0</span></span>
                </button>
                
                <button id="buy-horse" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg font-bold transition-colors text-sm animal-btn" data-animal="horses" data-cost="300">
                    🐴 Cavalo<br><span class="text-xs">300 moedas</span><br><span class="text-xs">Você tem: <span id="owned-horses">0</span></span>
                </button>
            </div>
            
            <!-- Ações com Animais -->
            <div class="bg-red-50 rounded-lg p-4 mt-4">
                <h4 class="text-lg font-bold text-red-700 mb-3 text-center">⚠️ Ações com Animais</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <button id="sacrifice-chicken" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                        🔪 Sacrificar Galinha<br><span class="text-xs">Transforma 1 galinha em frango cru</span>
                    </button>
                    
                    <button id="grow-chick" class="bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                        🐣➡️🐔 Crescer Pintinho<br><span class="text-xs">Transforma 1 pintinho em galinha (24h)</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Shop -->
        <div class="bg-purple-100 rounded-lg shadow-lg p-6 mb-6">
            <h3 class="text-xl font-bold text-purple-700 mb-4 text-center">🏪 Loja da Fazenda</h3>
            <div class="grid grid-cols-5 gap-4 mb-4">
                <button id="sell-milk" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🥛 Vender Leite<br><span class="text-sm">15 moedas cada</span>
                </button>
                <button id="sell-eggs" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🥚 Vender Ovos<br><span class="text-sm">8 moedas cada</span>
                </button>
                <button id="sell-bread" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🍞 Vender Pão<br><span class="text-sm">50 moedas cada</span>
                </button>
                <button id="sell-cheese" class="bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🧀 Vender Queijo<br><span class="text-sm">35 moedas cada</span>
                </button>
                <button id="sell-roasted-coffee" class="bg-amber-800 hover:bg-amber-900 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    ☕ Vender Café Torrado<br><span class="text-sm">80 moedas cada</span>
                </button>
                <button id="sell-grape-juice" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🍷 Vender Suco de Uva<br><span class="text-sm">60 moedas cada</span>
                </button>
                <button id="sell-pork-meat" class="bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🥩 Vender Carne Suína<br><span class="text-sm">120 moedas cada</span>
                </button>
                <button id="sell-yarn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    ⚪ Vender Novelos<br><span class="text-sm">60 moedas cada</span>
                </button>
                <button id="sell-honey" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-3 rounded-lg font-bold transition-colors">
                    🍯 Vender Mel<br><span class="text-sm">40 moedas cada</span>
                </button>
                <button id="sell-flour" class="bg-amber-200 hover:bg-amber-300 text-amber-800 px-4 py-3 rounded-lg font-bold transition-colors">
                    🍚 Vender Farinha<br><span class="text-sm">25 moedas cada</span>
                </button>


            </div>
            <div class="bg-green-50 rounded-lg p-4">
                <h4 class="text-lg font-bold text-green-700 mb-3 text-center">🌾 Vender Colheitas</h4>
                <div class="grid grid-cols-3 gap-2" id="harvest-shop">
                    <!-- Colheitas disponíveis aparecerão aqui -->
                </div>
            </div>
        </div>

        <!-- Production Areas -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6" id="production-areas">
            <!-- Bakery -->
            <div class="bg-orange-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-orange-700 mb-4 text-center">🔥 Padaria</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-orange-600 mb-3 text-center">📋 Receita de Pão</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🥚</span>
                            <span class="font-bold text-sm">1 Ovo</span>
                        </div>
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🥛</span>
                            <span class="font-bold text-sm">1 Leite</span>
                        </div>
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🍚</span>
                            <span class="font-bold text-sm">1 Farinha</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-bread" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🍞 Fazer Pão
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Oven -->
                <div class="bg-red-100 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-red-600 mb-3 text-center">🔥 Forno</h4>
                    <div class="bg-gray-800 rounded-lg p-4 h-32 relative border-4 border-gray-900">
                        <!-- Porta do forno -->
                        <div class="absolute bottom-2 left-2 right-2 h-16 bg-gray-700 rounded border-2 border-gray-600"></div>
                        <!-- Chaminé -->
                        <div class="absolute -top-2 right-4 w-4 h-6 bg-gray-900 rounded-t"></div>
                        <!-- Fogo/Status -->
                        <div id="oven-status" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-2xl">❄️</div>
                        <!-- Lenha no forno -->
                        <div id="oven-wood" class="absolute bottom-6 left-4 right-4 flex justify-center space-x-1">
                            <!-- Lenhas aparecerão aqui -->
                        </div>
                        
                        <div class="absolute top-1 left-2 right-2 text-center">
                            <button id="add-wood" class="bg-amber-600 hover:bg-amber-700 text-white px-2 py-1 rounded text-xs font-bold transition-colors mb-1">
                                🪵 Adicionar Lenha (2 necessárias)
                            </button>
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-red-700">
                                <span id="baking-timer">Forno apagado</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cheese Making -->
            <div class="bg-yellow-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-yellow-700 mb-4 text-center">🧀 Queijaria</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-yellow-600 mb-3 text-center">📋 Receita de Queijo</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🥛🥛</span>
                            <span class="font-bold text-sm">2 Leites</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-cheese" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🧀 Fazer Queijo
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Cheese Press -->
                <div class="bg-yellow-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-yellow-600 mb-3 text-center">🗜️ Prensa de Queijo</h4>
                    <div class="bg-amber-800 rounded-lg p-4 h-24 relative border-4 border-amber-900">
                        <!-- Base da prensa -->
                        <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-4 bg-amber-900 rounded"></div>
                        <!-- Haste da prensa -->
                        <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 w-2 h-8 bg-gray-600 rounded"></div>
                        <!-- Peso da prensa -->
                        <div class="absolute top-2 left-1/2 transform -translate-x-1/2 w-8 h-6 bg-gray-800 rounded"></div>
                        <!-- Status do queijo -->
                        <div id="cheese-status" class="absolute bottom-3 left-1/2 transform -translate-x-1/2 text-2xl">🧀</div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-yellow-700">
                                <span id="cheese-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coffee Roaster -->
            <div class="bg-amber-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-amber-700 mb-4 text-center">☕ Torrefação</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-amber-600 mb-3 text-center">📋 Receita de Café Torrado</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🔴🔴🔴🔴</span>
                            <span class="font-bold text-sm">4 Grãos de Café</span>
                        </div>
                        <div class="mt-3">
                            <button id="roast-coffee" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                ☕ Torrar Café
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Coffee Roaster Machine -->
                <div class="bg-amber-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-amber-600 mb-3 text-center">🔥 Torradora</h4>
                    <div class="bg-amber-900 rounded-lg p-4 h-24 relative border-4 border-amber-800">
                        <!-- Tambor da torradora -->
                        <div class="absolute top-4 left-1/2 transform -translate-x-1/2 w-16 h-8 bg-gray-700 rounded-full border-2 border-gray-600"></div>
                        <!-- Fogo embaixo -->
                        <div id="roaster-fire" class="absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xl">🔥</div>
                        <!-- Grãos na torradora -->
                        <div id="roaster-beans" class="absolute top-5 left-1/2 transform -translate-x-1/2 flex space-x-1">
                            <!-- Grãos aparecerão aqui -->
                        </div>
                        <!-- Lenhas embaixo -->
                        <div id="roaster-wood" class="absolute bottom-3 left-2 right-2 flex justify-center space-x-1">
                            <!-- Lenhas aparecerão aqui -->
                        </div>
                        
                        <div class="absolute top-1 left-2 right-2 text-center">
                            <button id="add-wood-roaster" class="bg-amber-600 hover:bg-amber-700 text-white px-2 py-1 rounded text-xs font-bold transition-colors mb-1">
                                🪵 Adicionar Lenha (2 necessárias)
                            </button>
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-amber-700">
                                <span id="roasting-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grape Press -->
            <div class="bg-purple-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-purple-700 mb-4 text-center">🍇 Prensa de Uvas</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-purple-600 mb-3 text-center">📋 Receita de Suco</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🍇🍇🍇🍇</span>
                            <span class="font-bold text-sm">4 Uvas</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-grape-juice" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🍷 Fazer Suco de Uva
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Grape Press Machine -->
                <div class="bg-purple-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-purple-600 mb-3 text-center">🗜️ Prensa</h4>
                    <div class="bg-purple-900 rounded-lg p-4 h-24 relative border-4 border-purple-800">
                        <!-- Base da prensa -->
                        <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-4 bg-purple-800 rounded"></div>
                        <!-- Haste da prensa -->
                        <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 w-2 h-8 bg-gray-600 rounded"></div>
                        <!-- Peso da prensa -->
                        <div class="absolute top-2 left-1/2 transform -translate-x-1/2 w-8 h-6 bg-gray-800 rounded"></div>
                        <!-- Uvas na prensa -->
                        <div id="press-grapes" class="absolute top-5 left-1/2 transform -translate-x-1/2 flex space-x-1">
                            <!-- Uvas aparecerão aqui -->
                        </div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-purple-700">
                                <span id="pressing-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hay Maker -->
            <div class="bg-yellow-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-yellow-700 mb-4 text-center">🌾 Máquina de Feno</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-yellow-600 mb-3 text-center">📋 Receita de Feno</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🌱🌱🌱🌱</span>
                            <span class="font-bold text-sm">4 Tufos de Grama</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-hay" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🌾 Fazer Feno
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Hay Making Machine -->
                <div class="bg-yellow-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-yellow-600 mb-3 text-center">⚙️ Processadora</h4>
                    <div class="bg-yellow-800 rounded-lg p-4 h-24 relative border-4 border-yellow-700">
                        <!-- Cilindros da máquina -->
                        <div class="absolute top-3 left-1/2 transform -translate-x-1/2 w-12 h-4 bg-gray-600 rounded-full border-2 border-gray-500"></div>
                        <div class="absolute top-7 left-1/2 transform -translate-x-1/2 w-12 h-4 bg-gray-600 rounded-full border-2 border-gray-500"></div>
                        <!-- Grama sendo processada -->
                        <div id="hay-grass" class="absolute top-4 left-1/2 transform -translate-x-1/2 flex space-x-1">
                            <!-- Grama aparecerá aqui -->
                        </div>
                        <!-- Feno saindo -->
                        <div class="absolute bottom-3 left-1/2 transform -translate-x-1/2 text-lg" id="hay-output">🟫</div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-yellow-700">
                                <span id="hay-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Yarn Maker -->
            <div class="bg-purple-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-purple-700 mb-4 text-center">🧶 Fiandeira</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-purple-600 mb-3 text-center">📋 Receita de Novelos</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">☁️☁️</span>
                            <span class="font-bold text-sm">2 Tufos de Lã</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-yarn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                ⚪ Fazer Novelos (4 unidades)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Yarn Making Machine -->
                <div class="bg-purple-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-purple-600 mb-3 text-center">🎡 Roda de Fiar</h4>
                    <div class="bg-purple-900 rounded-lg p-4 h-24 relative border-4 border-purple-800">
                        <!-- Roda de fiar -->
                        <div class="absolute top-3 left-1/2 transform -translate-x-1/2 w-12 h-12 bg-amber-700 rounded-full border-4 border-amber-600"></div>
                        <!-- Eixo da roda -->
                        <div class="absolute top-5 left-1/2 transform -translate-x-1/2 w-8 h-8 bg-gray-600 rounded-full border-2 border-gray-500"></div>
                        <!-- Lã sendo processada -->
                        <div id="yarn-wool" class="absolute top-4 left-2 right-2 flex justify-center space-x-1">
                            <!-- Lã aparecerá aqui -->
                        </div>
                        <!-- Novelos saindo -->
                        <div class="absolute bottom-3 left-1/2 transform -translate-x-1/2 text-lg" id="yarn-output">🧶</div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-purple-700">
                                <span id="yarn-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flour Mill -->
            <div class="bg-amber-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-amber-700 mb-4 text-center">⚙️ Moinho de Trigo</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-amber-600 mb-3 text-center">📋 Receita de Farinha</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🌾🌾🌾🌾</span>
                            <span class="font-bold text-sm">4 Trigos</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-flour" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🍚 Moer Trigo (2 pacotes)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Flour Mill Machine -->
                <div class="bg-amber-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-amber-600 mb-3 text-center">🌪️ Moinho</h4>
                    <div class="bg-amber-900 rounded-lg p-4 h-24 relative border-4 border-amber-800">
                        <!-- Pedras do moinho -->
                        <div class="absolute top-3 left-1/2 transform -translate-x-1/2 w-12 h-4 bg-gray-600 rounded-full border-2 border-gray-500"></div>
                        <div class="absolute top-7 left-1/2 transform -translate-x-1/2 w-12 h-4 bg-gray-600 rounded-full border-2 border-gray-500"></div>
                        <!-- Trigo sendo moído -->
                        <div id="mill-wheat" class="absolute top-4 left-1/2 transform -translate-x-1/2 flex space-x-1">
                            <!-- Trigo aparecerá aqui -->
                        </div>
                        <!-- Farinha saindo -->
                        <div class="absolute bottom-3 left-1/2 transform -translate-x-1/2 text-lg" id="flour-output">🍚</div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-amber-700">
                                <span id="milling-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Composter -->
            <div class="bg-amber-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-amber-700 mb-4 text-center">🗑️ Composteira</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-amber-600 mb-3 text-center">📋 Receita de Adubo</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">💩💩</span>
                            <span class="font-bold text-sm">2 Estercos</span>
                        </div>
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🌿</span>
                            <span class="font-bold text-sm">1 Galho</span>
                        </div>
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🌼</span>
                            <span class="font-bold text-sm">1 Flor Amarela</span>
                        </div>
                        <div class="mt-3">
                            <button id="make-compost" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🍂 Fazer Compostagem (4 adubos)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Composter Machine -->
                <div class="bg-amber-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-amber-600 mb-3 text-center">🗑️ Composteira</h4>
                    <div class="bg-amber-900 rounded-lg p-4 h-24 relative border-4 border-amber-800">
                        <!-- Base da composteira -->
                        <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-6 bg-amber-800 rounded"></div>
                        <!-- Tampa da composteira -->
                        <div class="absolute top-2 left-1/2 transform -translate-x-1/2 w-14 h-4 bg-amber-700 rounded"></div>
                        <!-- Materiais sendo compostados -->
                        <div id="compost-materials" class="absolute top-6 left-1/2 transform -translate-x-1/2 flex space-x-1">
                            <!-- Materiais aparecerão aqui -->
                        </div>
                        <!-- Vapor saindo -->
                        <div class="absolute top-1 left-1/2 transform -translate-x-1/2 text-lg" id="compost-steam">💨</div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-amber-700">
                                <span id="compost-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stove -->
            <div class="bg-red-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-red-700 mb-4 text-center">🔥 Fogão a Lenha</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-red-600 mb-3 text-center">📋 Receita de Refeição</h4>
                    <div class="space-y-2 text-center">
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🥔</span>
                            <span class="font-bold text-sm">1 Batata</span>
                        </div>
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🥚</span>
                            <span class="font-bold text-sm">1 Ovo</span>
                        </div>
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-xl">🥬</span>
                            <span class="font-bold text-sm">1 Alface</span>
                        </div>
                        <div class="mt-3">
                            <button id="cook-meal" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                🍽️ Cozinhar Refeição
                            </button>
                        </div>
                        <div class="mt-2">
                            <button id="eat-meal" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold transition-colors text-sm">
                                😋 Comer Refeição (+100% energia)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Stove -->
                <div class="bg-red-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-red-600 mb-3 text-center">🔥 Fogão</h4>
                    <div class="bg-gray-800 rounded-lg p-4 h-32 relative border-4 border-gray-900">
                        <!-- Fogão -->
                        <div class="absolute bottom-2 left-2 right-2 h-16 bg-gray-700 rounded border-2 border-gray-600"></div>
                        <!-- Chaminé -->
                        <div class="absolute -top-2 right-4 w-4 h-6 bg-gray-900 rounded-t"></div>
                        <!-- Fogo/Status -->
                        <div id="stove-status" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-2xl">❄️</div>
                        <!-- Lenha no fogão -->
                        <div id="stove-wood" class="absolute bottom-6 left-4 right-4 flex justify-center space-x-1">
                            <!-- Lenhas aparecerão aqui -->
                        </div>
                        
                        <div class="absolute top-1 left-2 right-2 text-center">
                            <button id="add-wood-stove" class="bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs font-bold transition-colors mb-1">
                                🪵 Adicionar Lenha (2 necessárias)
                            </button>
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-red-700">
                                <span id="cooking-timer">Fogão apagado</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Feed Maker -->
            <div class="bg-orange-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-orange-700 mb-4 text-center">🏭 Fábrica de Ração</h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h4 class="text-lg font-bold text-orange-600 mb-3 text-center">📋 Receitas</h4>
                    <div class="space-y-3">
                        <!-- Ração para Galinhas -->
                        <div class="border-2 border-orange-300 rounded-lg p-2">
                            <h5 class="font-bold text-sm text-orange-700 mb-2 text-center">🐔 Ração para Galinhas</h5>
                            <div class="flex items-center justify-center space-x-2 mb-2">
                                <span class="text-sm">🌽🌽 + 🌾</span>
                                <span class="font-bold text-xs">2 Milho + 1 Trigo</span>
                            </div>
                            <button id="make-chicken-feed" class="bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded-lg font-bold transition-colors text-xs w-full">
                                🥣 Fazer Ração (4 tigelas)
                            </button>
                        </div>
                        
                        <!-- Ração para Porcos -->
                        <div class="border-2 border-pink-300 rounded-lg p-2">
                            <h5 class="font-bold text-sm text-pink-700 mb-2 text-center">🐷 Ração para Porcos</h5>
                            <div class="flex items-center justify-center space-x-1 mb-2">
                                <span class="text-sm">🍅🌽🥔🥬</span>
                                <span class="font-bold text-xs">1 cada</span>
                            </div>
                            <button id="make-pig-feed" class="bg-pink-600 hover:bg-pink-700 text-white px-3 py-1 rounded-lg font-bold transition-colors text-xs w-full">
                                🍲 Fazer Ração (4 tigelas)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Feed Making Machine -->
                <div class="bg-orange-200 rounded-lg p-4">
                    <h4 class="text-lg font-bold text-orange-600 mb-3 text-center">⚙️ Misturador</h4>
                    <div class="bg-orange-800 rounded-lg p-4 h-24 relative border-4 border-orange-700">
                        <!-- Misturador -->
                        <div class="absolute top-3 left-1/2 transform -translate-x-1/2 w-14 h-10 bg-gray-600 rounded border-2 border-gray-500"></div>
                        <!-- Hélice do misturador -->
                        <div class="absolute top-5 left-1/2 transform -translate-x-1/2 text-lg">⚙️</div>
                        <!-- Ingredientes sendo processados -->
                        <div id="feed-ingredients" class="absolute top-4 left-2 right-2 flex justify-center space-x-1">
                            <!-- Ingredientes aparecerão aqui -->
                        </div>
                        <!-- Ração saindo -->
                        <div class="absolute bottom-3 left-1/2 transform -translate-x-1/2 text-lg" id="feed-output">🥣</div>
                        
                        <div class="absolute bottom-1 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-orange-700">
                                <span id="feed-timer">Pronto para usar</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tree, Axe, Well, Grass Field and Bee Hive Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6" id="resource-areas">
            <!-- Tree and Axe -->
            <div class="bg-green-300 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-green-700 mb-4 text-center">🌳 Área da Árvore</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Tree -->
                    <div class="bg-green-400 rounded-lg p-4 h-32 relative" id="tree-area">
                        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-4xl cursor-pointer hover:scale-110 transition-transform" id="tree" title="Clique para cortar lenha!">
                            🌳
                        </div>
                        <div class="absolute top-2 left-2 right-2 text-center">
                            <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-green-700">
                                <span id="tree-status">Árvore saudável (20/20)</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Axe Shop -->
                    <div class="bg-gray-200 rounded-lg p-4 h-32 relative">
                        <h4 class="text-sm font-bold text-gray-700 mb-2 text-center">🪓 Machado</h4>
                        <div class="flex flex-col items-center justify-center h-full space-y-2">
                            <div class="text-2xl" id="axe-display">🪓</div>
                            <button id="buy-axe" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded-lg font-bold text-xs transition-colors">
                                Comprar (50 moedas)
                            </button>
                            <div class="text-xs text-gray-600 text-center">
                                <span id="axe-status">Sem machado</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Water Well -->
            <div class="bg-blue-200 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-blue-700 mb-4 text-center">💧 Poço de Água</h3>
                <div class="bg-blue-600 rounded-lg p-4 h-32 relative" id="well-area">
                    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-4xl cursor-pointer hover:scale-110 transition-transform" id="well" title="Clique para coletar água!">
                        🪣
                    </div>
                    <div class="absolute top-2 left-2 right-2 text-center">
                        <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-blue-700">
                            <span id="well-status">Clique para coletar água</span>
                        </div>
                        <div class="bg-blue-100 rounded-full px-2 py-1 text-xs font-bold text-blue-800 mt-1">
                            Baldes: <span id="water-buckets">4</span>/4
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grass Field -->
            <div class="bg-green-200 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-green-700 mb-4 text-center">🌱 Campo de Grama</h3>
                <div class="bg-green-500 rounded-lg p-4 h-40 relative overflow-hidden" id="grass-field">
                    <!-- Grass tufts grid -->
                    <div class="grid grid-cols-6 gap-1 h-full" id="grass-grid">
                        <!-- 24 tufos de grama serão gerados aqui -->
                    </div>
                    <div class="absolute top-2 left-2 right-2 text-center">
                        <div class="bg-white rounded-full px-3 py-1 text-sm font-bold text-green-700">
                            <span id="grass-status">Clique nos tufos para colher grama!</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bee Hive -->
            <div class="bg-yellow-200 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-yellow-700 mb-4 text-center">🐝 Colmeia</h3>
                <div class="bg-yellow-400 rounded-lg p-4 h-40 relative overflow-hidden" id="bee-hive">
                    <!-- Beehive structure -->
                    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-6xl cursor-pointer hover:scale-110 transition-transform" id="hive" title="Clique para coletar mel!">
                        🏠
                    </div>
                    <!-- Flying bees -->
                    <div class="absolute top-6 left-8 text-2xl animate-bounce" style="animation-delay: 0s;">🐝</div>
                    <div class="absolute top-12 right-8 text-2xl animate-bounce" style="animation-delay: 1s;">🐝</div>
                    <div class="absolute top-8 left-1/2 text-2xl animate-bounce" style="animation-delay: 2s;">🐝</div>
                    <!-- Honey pots -->
                    <div class="absolute bottom-12 left-1/2 transform -translate-x-1/2 flex space-x-1" id="honey-pots">
                        <!-- Potes de mel aparecerão aqui -->
                    </div>
                    <div class="absolute top-2 left-2 right-2 text-center">
                        <div class="bg-white rounded-full px-3 py-1 text-sm font-bold text-yellow-700">
                            <span id="hive-status">Abelhas trabalhando...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pasture and Chicken Coop -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6" id="animal-areas">
            <!-- Cow Pasture -->
            <div class="bg-green-200 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-green-700 mb-4 text-center">🐄 Pasto</h3>
                <div class="bg-green-800 rounded-lg p-4 h-40 relative overflow-hidden">
                    <div class="cow absolute bottom-4 left-4 text-4xl cursor-pointer" id="cow1" title="Clique para ordenhar!">
                        🐄
                    </div>
                    <div class="cow absolute bottom-4 right-4 text-4xl cursor-pointer" id="cow2" title="Clique para ordenhar!" style="animation-delay: 2s;">
                        🐄
                    </div>
                    <!-- Comedouro das vacas -->
                    <div class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-amber-700 rounded-lg p-2 border-2 border-amber-800">
                        <div class="flex space-x-1" id="cow-feeder">
                            <!-- Feno das vacas aparecerá aqui -->
                        </div>
                    </div>
                    
                    <div class="absolute bottom-2 left-2 right-2 text-center">
                        <button id="feed-cows" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-1 rounded-lg font-bold text-xs transition-colors mb-1">
                            🟫 Alimentar Vacas (2 feno)
                        </button>
                        <div class="bg-white rounded-full px-3 py-1 text-sm font-bold text-green-700">
                            Status: <span id="cow-status">Famintas - sem leite</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chicken Coop -->
            <div class="bg-yellow-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-yellow-700 mb-4 text-center">🐔 Galinheiro</h3>
                <div class="bg-amber-200 rounded-lg p-4 h-40 relative border-4 border-amber-600">
                    <!-- Roof -->
                    <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 text-2xl">🏠</div>
                    
                    <!-- Chickens -->
                    <div class="chicken absolute bottom-6 left-6 text-2xl" id="chicken1">🐔</div>
                    <div class="chicken absolute bottom-6 right-6 text-2xl" id="chicken2">🐔</div>
                    
                    <!-- Nests -->
                    <div class="absolute top-4 left-4 bg-amber-700 rounded-full w-8 h-6 flex items-center justify-center">
                        <div id="nest1" class="text-sm">🥚</div>
                    </div>
                    <div class="absolute top-4 right-4 bg-amber-700 rounded-full w-8 h-6 flex items-center justify-center">
                        <div id="nest2" class="text-sm">🥚</div>
                    </div>
                    
                    <!-- Eggs on ground -->
                    <div class="absolute top-12 left-2 right-2 flex justify-center space-x-1" id="eggs-container">
                        <!-- Ovos aparecerão aqui -->
                    </div>
                    
                    <!-- Chicken Feeder -->
                    <div class="absolute top-6 left-1/2 transform -translate-x-1/2 bg-orange-700 rounded-lg p-1 border-2 border-orange-800">
                        <div class="flex space-x-1" id="chicken-feeder">
                            <!-- Ração das galinhas aparecerá aqui -->
                        </div>
                    </div>
                    
                    <div class="absolute bottom-1 left-2 right-2 text-center">
                        <div class="flex space-x-1 mb-1">
                            <button id="feed-chickens" class="bg-orange-600 hover:bg-orange-700 text-white px-2 py-1 rounded-lg font-bold text-xs transition-colors">
                                🌾 Alimentar (2 ração)
                            </button>
                            <button id="collect-eggs" class="bg-orange-500 hover:bg-orange-600 text-white px-2 py-1 rounded-lg font-bold text-xs transition-colors">
                                🥚 Coletar Ovos
                            </button>
                        </div>
                        <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-amber-700">
                            Status: <span id="chicken-status">Famintas - sem ovos</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pig Pen -->
            <div class="bg-pink-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-pink-700 mb-4 text-center">🐷 Chiqueiro</h3>
                <div class="bg-pink-300 rounded-lg p-4 h-40 relative border-4 border-pink-600">
                    <!-- Fence -->
                    <div class="absolute -top-1 left-0 right-0 h-2 bg-amber-800 rounded-t"></div>
                    <div class="absolute -bottom-1 left-0 right-0 h-2 bg-amber-800 rounded-b"></div>
                    <div class="absolute top-0 bottom-0 -left-1 w-2 bg-amber-800 rounded-l"></div>
                    <div class="absolute top-0 bottom-0 -right-1 w-2 bg-amber-800 rounded-r"></div>
                    
                    <!-- Pigs -->
                    <div class="pig absolute bottom-6 left-6 text-3xl cursor-pointer hover:scale-110 transition-transform" id="pig1" title="Clique para colher carne!">🐷</div>
                    <div class="pig absolute bottom-6 right-6 text-3xl cursor-pointer hover:scale-110 transition-transform" id="pig2" title="Clique para colher carne!">🐷</div>
                    
                    <!-- Pig Feeder -->
                    <div class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-pink-700 rounded-lg p-2 border-2 border-pink-800">
                        <div class="flex space-x-1" id="pig-feeder">
                            <!-- Ração dos porcos aparecerá aqui -->
                        </div>
                    </div>
                    
                    <!-- Mud puddle -->
                    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-4 bg-amber-600 rounded-full opacity-60"></div>
                    
                    <div class="absolute bottom-1 left-2 right-2 text-center">
                        <button id="feed-pigs" class="bg-pink-600 hover:bg-pink-700 text-white px-3 py-1 rounded-lg font-bold text-xs transition-colors mb-1">
                            🍲 Alimentar Porcos (2 ração)
                        </button>
                        <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-pink-700">
                            Status: <span id="pig-status">Famintos - sem carne</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sheep Pen -->
            <div class="bg-gray-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-700 mb-4 text-center">🐑 Curral das Ovelhas</h3>
                <div class="bg-gray-200 rounded-lg p-4 h-40 relative border-4 border-gray-600">
                    <!-- Fence -->
                    <div class="absolute -top-1 left-0 right-0 h-2 bg-amber-800 rounded-t"></div>
                    <div class="absolute -bottom-1 left-0 right-0 h-2 bg-amber-800 rounded-b"></div>
                    <div class="absolute top-0 bottom-0 -left-1 w-2 bg-amber-800 rounded-l"></div>
                    <div class="absolute top-0 bottom-0 -right-1 w-2 bg-amber-800 rounded-r"></div>
                    
                    <!-- Sheep -->
                    <div class="sheep absolute bottom-6 left-6 text-3xl cursor-pointer hover:scale-110 transition-transform" id="sheep1" title="Clique para colher lã!">🐑</div>
                    <div class="sheep absolute bottom-6 right-6 text-3xl cursor-pointer hover:scale-110 transition-transform" id="sheep2" title="Clique para colher lã!">🐑</div>
                    
                    <!-- Sheep Feeder -->
                    <div class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-gray-700 rounded-lg p-2 border-2 border-gray-800">
                        <div class="flex space-x-1" id="sheep-feeder">
                            <!-- Feno das ovelhas aparecerá aqui -->
                        </div>
                    </div>
                    
                    <!-- Grass patch -->
                    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-4 bg-green-500 rounded-full opacity-60"></div>
                    
                    <div class="absolute bottom-1 left-2 right-2 text-center">
                        <button id="feed-sheep" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded-lg font-bold text-xs transition-colors mb-1">
                            🟫 Alimentar Ovelhas (2 feno)
                        </button>
                        <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-gray-700">
                            Status: <span id="sheep-status">Famintas - sem lã</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Horse Stable -->
            <div class="bg-amber-100 rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-amber-700 mb-4 text-center">🐴 Estábulo</h3>
                <div class="bg-amber-200 rounded-lg p-4 h-40 relative border-4 border-amber-600">
                    <!-- Stable roof -->
                    <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 text-3xl">🏠</div>
                    
                    <!-- Horse -->
                    <div class="horse absolute bottom-6 left-1/2 transform -translate-x-1/2 text-4xl cursor-pointer hover:scale-110 transition-transform" id="horse1" title="Clique para montar!">🐴</div>
                    
                    <!-- Horse Feeder -->
                    <div class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-amber-700 rounded-lg p-2 border-2 border-amber-800">
                        <div class="flex space-x-1" id="horse-feeder">
                            <!-- Feno do cavalo aparecerá aqui -->
                        </div>
                    </div>
                    
                    <!-- Hay on ground -->
                    <div class="absolute bottom-2 left-2 right-2 flex justify-center">
                        <div class="w-12 h-3 bg-yellow-600 rounded-full opacity-70"></div>
                    </div>
                    
                    <div class="absolute bottom-1 left-2 right-2 text-center">
                        <button id="feed-horse" class="bg-amber-600 hover:bg-amber-700 text-white px-3 py-1 rounded-lg font-bold text-xs transition-colors mb-1">
                            🟫 Alimentar Cavalo (1 feno)
                        </button>
                        <div class="bg-white rounded-full px-2 py-1 text-xs font-bold text-amber-700">
                            Status: <span id="horse-status">Faminto - sem energia</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Orders -->
        <div class="bg-purple-100 rounded-lg shadow-lg p-6 mb-6">
            <h3 class="text-xl font-bold text-purple-700 mb-4 text-center">📋 Pedidos dos Clientes</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="customer-orders">
                <!-- Pedidos aparecerão aqui -->
            </div>
            <div class="mt-4 text-center">
                <button id="deliver-orders" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                    🐴🛒 Entregar Pedidos com Cavalo e Carroça
                </button>
                <p class="text-sm text-purple-600 mt-2">Novos pedidos chegam a cada novo dia!</p>
            </div>
        </div>

        <!-- Instructions -->
        <div class="bg-blue-100 rounded-lg shadow-lg p-4">
            <h3 class="text-lg font-bold text-blue-700 mb-2">📋 Como Jogar:</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-blue-600 text-sm">
                <div>
                    <h4 class="font-bold mb-1">🌱 Plantação:</h4>
                    <ul class="space-y-1">
                        <li>• 1º: Clique no canteiro vazio para adubar</li>
                        <li>• 2º: Selecione semente e plante no solo adubado</li>
                        <li>• 3º: Regue as plantas (ou espere a chuva!)</li>
                        <li>• Todas as plantas levam 30 segundos para crescer</li>
                        <li>• Café cresce em estágios e leva 45 segundos</li>
                        <li>• Colha quando estiverem maduras</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-1">🐄🐔🐷🍞🧀☕🪵🌾 Produção:</h4>
                    <ul class="space-y-1">
                        <li>• 2 vacas precisam de 2 blocos de feno para produzir leite</li>
                        <li>• Cada vaca alimentada dá 3 leites após 15 segundos</li>
                        <li>• 2 galinhas precisam de 2 rações para botar ovos</li>
                        <li>• Galinhas alimentadas botam 4 ovos após 15 segundos</li>
                        <li>• 2 porcos precisam de 2 rações para produzir carne</li>
                        <li>• Cada porco alimentado dá 1 carne suína após 15 segundos</li>
                        <li>• 2 ovelhas precisam de 2 fenos para produzir lã</li>
                        <li>• Cada ovelha alimentada dá 1 tufo de lã (☁️) após 15 segundos = 2 tufos total</li>
                        <li>• Novelos: 2 tufos de lã = 4 novelos (20s na fiandeira)</li>
                        <li>• Ração galinhas: 2 milhos + 1 trigo = 4 tigelas (30s)</li>
                        <li>• Ração porcos: 1 tomate + 1 milho + 1 batata + 1 alface = 4 tigelas (30s)</li>
                        <li>• Colete água do poço (1 balde = 12 regas)</li>
                        <li>• Poço recarrega 4 baldes a cada novo dia</li>
                        <li>• Compre machado (50 moedas, 20 usos) para cortar lenha</li>
                        <li>• Árvore some após 20 cortes (renasce em 5 min)</li>
                        <li>• Clique nos tufos de grama para colher (renascem em 30s)</li>
                        <li>• A cada 6 gramas coletadas, ganha 1 florzinha amarela 🌼</li>
                        <li>• Vacas soltam 1 esterco por dia (clique para coletar) 💩</li>
                        <li>• A cada 4 lenhas cortadas, árvore solta 1 galho com folhas 🌿</li>
                        <li>• Compostagem: 2 estercos + 1 galho + 1 flor = 4 adubos (1 dia)</li>
                        <li>• Forno precisa de 2 lenhas para acender</li>
                        <li>• Pão: 1 ovo + 1 leite + 1 farinha + forno aceso</li>
                        <li>• Queijo: 2 leites (30s na prensa)</li>
                        <li>• Café torrado: 4 grãos de café (20s na torradora)</li>
                        <li>• Farinha: 4 trigos = 2 pacotes (15s no moinho)</li>
                        <li>• Suco de uva: 4 uvas (25s na prensa)</li>
                        <li>• Feno: 4 tufos de grama (10s na máquina)</li>
                        <li>• Cavalo solta 1 esterco por dia (clique para coletar) 💩</li>
                        <li>• Pedidos dos clientes: 3-5 pedidos novos por dia</li>
                        <li>• Entregas: cavalo precisa de 50% energia, consome 50% por entrega</li>
                        <li>• Preços dos pedidos são melhores que a loja normal!</li>
                        <li>• Avatar reage às suas ações na fazenda!</li>
                        <li>• Chuva dura 1 minuto, dia sim dia não</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        class FarmGame {
            constructor() {
                this.coins = 200; // Começar com mais moedas para compras iniciais
                this.water = 50;
                this.milk = 0;
                this.eggs = 0;
                this.fertilizer = 20;
                this.level = 1;
                this.selectedSeed = null;
                this.plots = [];
                this.isDay = true;
                this.gameTime = 0;
                this.lastMilkTime = -300000; // Pode ordenhar no início
                this.lastEggTime = 0;
                this.availableEggs = 0;
                this.isRaining = false;
                this.dailyMilkCollected = false;
                this.dailyEggsProduced = false;
                this.dayCount = 0;
                this.shouldRainToday = false;
                this.cowsFed = false;
                this.cow1Milked = false;
                this.cow2Milked = false;
                this.chickensFed = false;
                this.pigsFed = false;
                this.pig1Harvested = false;
                this.pig2Harvested = false;
                this.porkMeat = 0;
                this.sheepFed = false;
                this.sheep1Harvested = false;
                this.sheep2Harvested = false;
                this.wool = 0;
                this.yarn = 0;
                this.isMakingYarn = false;
                this.yarnTimer = null;
                this.manure = 0; // Esterco das vacas
                this.yellowFlowers = 0; // Flores amarelas da grama
                this.branches = 0; // Galhos com folhas da árvore
                this.grassCollected = 0; // Contador de grama coletada
                this.woodChopped = 0; // Contador de lenha cortada
                this.manureAvailable = false; // Esterco disponível para coleta
                this.isMakingCompost = false; // Status da compostagem
                this.compostTimer = null; // Timer da compostagem
                this.compostStartDay = 0; // Dia que começou a compostagem
                this.honey = 0; // Mel das abelhas
                this.availableHoney = 0; // Mel disponível para coleta
                this.lastHoneyTime = 0; // Último tempo de produção de mel
                this.flour = 0; // Farinha de trigo
                this.isMakingFlour = false; // Status da moagem
                this.flourTimer = null; // Timer da moagem
                this.horseFed = false; // Status do cavalo
                this.horseEnergy = 0; // Energia do cavalo
                this.customerOrders = []; // Pedidos dos clientes
                this.horseManureAvailable = false; // Esterco do cavalo disponível
                
                // Sistema de energia do avatar
                this.avatarEnergy = 100; // Energia do avatar (0-100)
                this.cookedMeals = 0; // Refeições cozinhadas
                this.stoveWood = 0; // Lenha no fogão
                this.stoveLit = false; // Fogão aceso
                this.isCooking = false; // Status de cozimento
                this.cookingTimer = null; // Timer de cozimento
                
                // Sistema de desbloqueios e compras
                this.unlockedPlots = 8; // Começar com 8 canteiros
                this.maxPlots = 40; // Máximo de 40 canteiros
                this.plotExpansionCost = 100; // Custo para desbloquear 4 canteiros
                
                // Setores desbloqueados
                this.unlockedSectors = {
                    bakery: false,        // Padaria - 300 moedas
                    dairy: false,         // Queijaria - 250 moedas
                    roastery: false,      // Torrefação - 400 moedas
                    winery: false,        // Prensa de Uvas - 350 moedas
                    hayMaker: false,      // Máquina de Feno - 200 moedas
                    yarnMaker: false,     // Fiandeira - 300 moedas
                    flourMill: false,     // Moinho - 350 moedas
                    composter: false,     // Composteira - 150 moedas
                    feedMaker: false,     // Fábrica de Ração - 250 moedas
                    treeArea: false,      // Área da Árvore - 100 moedas
                    well: false,          // Poço - 150 moedas
                    grassField: false,    // Campo de Grama - 100 moedas
                    beeHive: false,       // Colmeia - 200 moedas
                    cowPasture: false,    // Pasto das Vacas - 500 moedas
                    chickenCoop: false,   // Galinheiro - 300 moedas
                    pigPen: false,        // Chiqueiro - 400 moedas
                    sheepPen: false,      // Curral das Ovelhas - 450 moedas
                    horseStable: false    // Estábulo - 600 moedas
                };
                
                // Animais comprados
                this.ownedAnimals = {
                    cows: 0,              // Vacas - 200 moedas cada
                    chickens: 0,          // Galinhas - 50 moedas cada
                    pigs: 0,              // Porcos - 150 moedas cada
                    sheep: 0,             // Ovelhas - 120 moedas cada
                    horses: 0,            // Cavalos - 300 moedas cada
                    chicks: 0             // Pintinhos (nascem automaticamente)
                };
                
                // Produtos de animais
                this.rawChicken = 0; // Frango cru (galinhas sacrificadas)
                
                // Timers para reprodução
                this.lastChickBirth = 0;
                
                this.seedTypes = {
                    carrot: { icon: '🥕', cost: 10, reward: 25, growTime: 30000, waterNeeded: 2 },
                    tomato: { icon: '🍅', cost: 10, reward: 35, growTime: 30000, waterNeeded: 3 },
                    corn: { icon: '🌽', cost: 10, reward: 50, growTime: 30000, waterNeeded: 4 },
                    potato: { icon: '🥔', cost: 10, reward: 28, growTime: 30000, waterNeeded: 2 },
                    wheat: { icon: '🌾', cost: 10, reward: 45, growTime: 30000, waterNeeded: 3 },
                    coffee: { icon: '☕', cost: 10, reward: 60, growTime: 45000, waterNeeded: 5, stages: ['🌱', '🌿', '🌳', '🔴'] },
                    pumpkin: { icon: '🎃', cost: 10, reward: 75, growTime: 30000, waterNeeded: 6 },
                    lettuce: { icon: '🥬', cost: 10, reward: 20, growTime: 30000, waterNeeded: 1 },
                    broccoli: { icon: '🥦', cost: 10, reward: 55, growTime: 30000, waterNeeded: 4 },
                    grape: { icon: '🍇', cost: 10, reward: 85, growTime: 30000, waterNeeded: 7 }
                };
                
                this.harvestInventory = {
                    carrot: 0, tomato: 0, corn: 0, potato: 0, wheat: 0,
                    coffee: 0, pumpkin: 0, lettuce: 0, broccoli: 0, grape: 0
                };
                
                this.bread = 0;
                this.cheese = 0;
                this.wood = 0;
                this.roastedCoffee = 0;
                this.grapeJuice = 0;
                this.grass = 0;
                this.hay = 0;
                this.chickenFeed = 0;
                this.pigFeed = 0;
                this.isMakingFeed = false;
                this.feedTimer = null;
                this.hasAxe = false;
                this.axeUses = 0;
                this.maxAxeUses = 20;
                this.ovenWood = 0;
                this.ovenLit = false;
                this.isBaking = false;
                this.isMakingCheese = false;
                this.isRoastingCoffee = false;
                this.isPressingGrapes = false;
                this.isMakingHay = false;
                this.roasterWood = 0;
                this.treeWoodCount = 0;
                this.maxTreeWood = 20;
                this.treeAlive = true;
                this.treeRespawnTimer = null;
                this.bakingTimer = null;
                this.cheeseTimer = null;
                this.roastingTimer = null;
                this.pressingTimer = null;
                this.hayTimer = null;
                this.coffeeStages = {};
                this.grassTufts = [];
                this.waterBuckets = 4;
                
                // Produtos disponíveis para pedidos
                this.orderProducts = {
                    // Colheitas
                    carrot: { icon: '🥕', name: 'Cenoura', price: 20 },
                    tomato: { icon: '🍅', name: 'Tomate', price: 28 },
                    corn: { icon: '🌽', name: 'Milho', price: 40 },
                    potato: { icon: '🥔', name: 'Batata', price: 22 },
                    wheat: { icon: '🌾', name: 'Trigo', price: 36 },
                    coffee: { icon: '🔴', name: 'Grão de Café', price: 48 },
                    pumpkin: { icon: '🎃', name: 'Abóbora', price: 60 },
                    lettuce: { icon: '🥬', name: 'Alface', price: 16 },
                    broccoli: { icon: '🥦', name: 'Brócolis', price: 44 },
                    grape: { icon: '🍇', name: 'Uva', price: 68 },
                    // Produtos processados
                    milk: { icon: '🥛', name: 'Leite', price: 18 },
                    eggs: { icon: '🥚', name: 'Ovos', price: 12 },
                    bread: { icon: '🍞', name: 'Pão', price: 60 },
                    cheese: { icon: '🧀', name: 'Queijo', price: 42 },
                    roastedCoffee: { icon: '☕', name: 'Café Torrado', price: 96 },
                    grapeJuice: { icon: '🍷', name: 'Suco de Uva', price: 72 },
                    porkMeat: { icon: '🥩', name: 'Carne Suína', price: 144 },
                    yarn: { icon: '⚪', name: 'Novelos', price: 72 },
                    honey: { icon: '🍯', name: 'Mel', price: 48 },
                    flour: { icon: '🍚', name: 'Farinha', price: 30 }
                };
                
                this.init();
            }
            
            init() {
                this.createFarmGrid();
                this.updateSectorVisibility();
                this.generateDailyOrders();
                this.setupEventListeners();
                this.startGameLoop();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            generateDailyOrders() {
                this.customerOrders = [];
                const productKeys = Object.keys(this.orderProducts);
                
                // Gerar 3-5 pedidos por dia
                const numOrders = Math.floor(Math.random() * 3) + 3;
                
                const customerNames = [
                    'Maria Silva', 'João Santos', 'Ana Costa', 'Pedro Lima', 'Carla Souza',
                    'Roberto Alves', 'Lucia Ferreira', 'Carlos Oliveira', 'Fernanda Rocha', 'Marcos Pereira'
                ];
                
                for (let i = 0; i < numOrders; i++) {
                    const productKey = productKeys[Math.floor(Math.random() * productKeys.length)];
                    const product = this.orderProducts[productKey];
                    const quantity = Math.floor(Math.random() * 3) + 1; // 1-3 unidades
                    const customerName = customerNames[Math.floor(Math.random() * customerNames.length)];
                    
                    this.customerOrders.push({
                        id: i + 1,
                        customer: customerName,
                        productKey: productKey,
                        product: product,
                        quantity: quantity,
                        totalPrice: product.price * quantity,
                        delivered: false
                    });
                }
                
                this.updateOrdersDisplay();
            }
            
            updateOrdersDisplay() {
                const ordersContainer = document.getElementById('customer-orders');
                ordersContainer.innerHTML = '';
                
                this.customerOrders.forEach(order => {
                    const orderCard = document.createElement('div');
                    orderCard.className = `bg-white rounded-lg p-4 border-2 ${order.delivered ? 'border-green-500 bg-green-50' : 'border-purple-300'} shadow-md`;
                    
                    orderCard.innerHTML = `
                        <div class="text-center">
                            <h4 class="font-bold text-purple-700 mb-2">${order.customer}</h4>
                            <div class="text-4xl mb-2">${order.product.icon}</div>
                            <p class="text-sm font-bold text-gray-700">${order.quantity}x ${order.product.name}</p>
                            <p class="text-lg font-bold text-green-600 mt-2">💰 ${order.totalPrice}</p>
                            ${order.delivered ? 
                                '<p class="text-sm text-green-600 font-bold mt-2">✅ Entregue!</p>' : 
                                '<p class="text-sm text-purple-600 mt-2">📦 Aguardando entrega</p>'
                            }
                        </div>
                    `;
                    
                    ordersContainer.appendChild(orderCard);
                });
            }
            
            deliverOrders() {
                if (!this.horseFed) {
                    this.showMessage('Cavalo precisa estar alimentado para fazer entregas! 🐴', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.horseEnergy < 50) {
                    this.showMessage('Cavalo precisa de pelo menos 50% de energia para entregas! 🐴', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                let deliveredOrders = 0;
                let totalEarned = 0;
                let missingProducts = [];
                
                // Verificar quais pedidos podem ser entregues
                this.customerOrders.forEach(order => {
                    if (order.delivered) return;
                    
                    const productKey = order.productKey;
                    let availableQuantity = 0;
                    
                    // Verificar disponibilidade do produto
                    if (this.harvestInventory[productKey] !== undefined) {
                        availableQuantity = this.harvestInventory[productKey];
                    } else {
                        availableQuantity = this[productKey] || 0;
                    }
                    
                    if (availableQuantity >= order.quantity) {
                        // Entregar pedido
                        if (this.harvestInventory[productKey] !== undefined) {
                            this.harvestInventory[productKey] -= order.quantity;
                        } else {
                            this[productKey] -= order.quantity;
                        }
                        
                        this.coins += order.totalPrice;
                        totalEarned += order.totalPrice;
                        order.delivered = true;
                        deliveredOrders++;
                    } else {
                        missingProducts.push(`${order.product.name} (${order.quantity - availableQuantity} faltando)`);
                    }
                });
                
                if (deliveredOrders > 0) {
                    // Consumir energia do cavalo
                    this.horseEnergy -= 50;
                    
                    this.playSound('coin');
                    this.showMessage(`🚚 ${deliveredOrders} pedidos entregues! +${totalEarned} moedas!`, 'success');
                    this.changeAvatarExpression('🤑');
                    this.celebrateAvatar();
                    
                    if (missingProducts.length > 0) {
                        setTimeout(() => {
                            this.showMessage(`⚠️ Produtos em falta: ${missingProducts.join(', ')}`, 'error');
                        }, 2000);
                    }
                } else {
                    this.showMessage('Nenhum pedido pode ser entregue! Verifique os produtos necessários.', 'error');
                    this.changeAvatarExpression('😔');
                }
                
                this.updateOrdersDisplay();
                this.updateHorseDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            // Avatar interactions
            celebrateAvatar() {
                const avatar = document.getElementById('avatar-container');
                avatar.classList.remove('avatar-bounce');
                avatar.classList.add('avatar-celebrate');
                
                setTimeout(() => {
                    avatar.classList.remove('avatar-celebrate');
                    avatar.classList.add('avatar-bounce');
                }, 1000);
            }
            
            reduceAvatarEnergy(amount = 5) {
                this.avatarEnergy = Math.max(0, this.avatarEnergy - amount);
                
                // Atualizar cor do indicador baseado na energia
                const energyElement = document.getElementById('avatar-energy');
                const energyContainer = energyElement.parentElement;
                
                if (this.avatarEnergy > 70) {
                    energyContainer.className = 'bg-green-500 px-3 py-2 rounded-full font-bold text-white text-sm';
                } else if (this.avatarEnergy > 30) {
                    energyContainer.className = 'bg-yellow-500 px-3 py-2 rounded-full font-bold text-white text-sm';
                } else {
                    energyContainer.className = 'bg-red-500 px-3 py-2 rounded-full font-bold text-white text-sm';
                }
                
                // Mostrar mensagem se energia baixa
                if (this.avatarEnergy <= 20 && this.avatarEnergy > 0) {
                    this.showMessage('⚡ Energia baixa! Cozinhe uma refeição para recuperar!', 'error');
                    this.changeAvatarExpression('😴');
                } else if (this.avatarEnergy === 0) {
                    this.showMessage('😴 Sem energia! Precisa comer para continuar!', 'error');
                    this.changeAvatarExpression('😵');
                }
                
                this.updateUI();
            }
            
            changeAvatarExpression(expression) {
                const avatar = document.getElementById('avatar');
                const originalExpression = '👩‍🌾';
                
                avatar.textContent = expression;
                
                setTimeout(() => {
                    avatar.textContent = originalExpression;
                }, 2000);
            }
            
            roastCoffee() {
                // Verificar se tem os ingredientes necessários
                if (this.harvestInventory.coffee < 4) {
                    this.showMessage('Precisa de 4 grãos de café para torrar! 🔴', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isRoastingCoffee) {
                    this.showMessage('Torradora ocupada! Aguarde o café ficar pronto! ☕', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.harvestInventory.coffee -= 4;
                
                // Iniciar processo de torra
                this.isRoastingCoffee = true;
                this.playSound('baking');
                this.showMessage('☕ Grãos na torradora! Torrando café...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Café fica pronto em 20 segundos
                setTimeout(() => {
                    this.roastedCoffee += 1;
                    this.isRoastingCoffee = false;
                    this.playSound('oven');
                    this.showMessage('☕ Café torrado! Aroma delicioso!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateRoasterDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 20000);
                
                this.updateRoasterDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            makeFlour() {
                // Verificar se tem os ingredientes necessários
                if (this.harvestInventory.wheat < 4) {
                    this.showMessage('Precisa de 4 trigos para fazer farinha! 🌾', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingFlour) {
                    this.showMessage('Moinho ocupado! Aguarde a farinha ficar pronta! ⚙️', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.harvestInventory.wheat -= 4;
                
                // Iniciar processo de moagem
                this.isMakingFlour = true;
                this.playSound('baking');
                this.showMessage('🌾 Trigo no moinho! Moendo farinha...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Farinha fica pronta em 15 segundos e produz 2 pacotes
                setTimeout(() => {
                    this.flour += 2;
                    this.isMakingFlour = false;
                    this.playSound('oven');
                    this.showMessage('🌾 2 pacotes de farinha prontos! Perfeita para receitas!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateFlourDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 15000);
                
                this.updateFlourDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            updateFlourDisplay() {
                const millingTimer = document.getElementById('milling-timer');
                const millWheat = document.getElementById('mill-wheat');
                
                // Limpar trigo visual
                millWheat.innerHTML = '';
                
                if (this.isMakingFlour) {
                    // Mostrar 4 trigos sendo moídos
                    for (let i = 0; i < 4; i++) {
                        const wheat = document.createElement('div');
                        wheat.textContent = '🌾';
                        wheat.className = 'text-xs';
                        millWheat.appendChild(wheat);
                    }
                    
                    millingTimer.textContent = 'Moendo...';
                    millingTimer.className = 'text-orange-600 font-bold';
                } else {
                    millingTimer.textContent = 'Pronto para usar';
                    millingTimer.className = 'text-green-600 font-bold';
                }
            }
            
            updateRoasterDisplay() {
                const roastingTimer = document.getElementById('roasting-timer');
                const roasterFire = document.getElementById('roaster-fire');
                const roasterBeans = document.getElementById('roaster-beans');
                const roasterWood = document.getElementById('roaster-wood');
                
                // Limpar grãos e lenhas visuais
                roasterBeans.innerHTML = '';
                roasterWood.innerHTML = '';
                
                // Mostrar lenhas na torradora
                for (let i = 0; i < this.roasterWood; i++) {
                    const wood = document.createElement('div');
                    wood.textContent = '🪵';
                    wood.className = 'text-xs';
                    roasterWood.appendChild(wood);
                }
                
                if (this.isRoastingCoffee) {
                    // Mostrar 4 grãos sendo torrados
                    for (let i = 0; i < 4; i++) {
                        const bean = document.createElement('div');
                        bean.textContent = '🔴';
                        bean.className = 'text-xs';
                        roasterBeans.appendChild(bean);
                    }
                    
                    roastingTimer.textContent = 'Torrando...';
                    roastingTimer.className = 'text-orange-600 font-bold';
                    roasterFire.className = 'absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xl roaster-fire';
                } else {
                    roastingTimer.textContent = 'Pronto para usar';
                    roastingTimer.className = 'text-green-600 font-bold';
                    roasterFire.className = 'absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xl';
                }
            }
            
            makeGrapeJuice() {
                // Verificar se tem os ingredientes necessários
                if (this.harvestInventory.grape < 4) {
                    this.showMessage('Precisa de 4 uvas para fazer suco! 🍇', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isPressingGrapes) {
                    this.showMessage('Prensa ocupada! Aguarde o suco ficar pronto! 🧃', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.harvestInventory.grape -= 4;
                
                // Iniciar processo de prensar
                this.isPressingGrapes = true;
                this.playSound('baking');
                this.showMessage('🍇 Uvas na prensa! Fazendo suco...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Suco fica pronto em 25 segundos e produz 4 garrafas
                setTimeout(() => {
                    this.grapeJuice += 4;
                    this.isPressingGrapes = false;
                    this.playSound('oven');
                    this.showMessage('🧃 4 garrafas de suco de uva prontas! Delicioso!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updatePressDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 25000);
                
                this.updatePressDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            updatePressDisplay() {
                const pressingTimer = document.getElementById('pressing-timer');
                const pressGrapes = document.getElementById('press-grapes');
                
                // Limpar uvas visuais
                pressGrapes.innerHTML = '';
                
                if (this.isPressingGrapes) {
                    // Mostrar 4 uvas sendo prensadas
                    for (let i = 0; i < 4; i++) {
                        const grape = document.createElement('div');
                        grape.textContent = '🍇';
                        grape.className = 'text-xs';
                        pressGrapes.appendChild(grape);
                    }
                    
                    pressingTimer.textContent = 'Prensando...';
                    pressingTimer.className = 'text-orange-600 font-bold';
                } else {
                    pressingTimer.textContent = 'Pronto para usar';
                    pressingTimer.className = 'text-green-600 font-bold';
                }
            }
            
            addWoodToStove() {
                if (this.wood < 1) {
                    this.showMessage('Precisa de lenha! Corte a árvore primeiro! 🪵', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.stoveWood >= 2) {
                    this.showMessage('Fogão já tem lenha suficiente! 🔥', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.wood -= 1;
                this.stoveWood += 1;
                this.reduceAvatarEnergy(3); // Reduzir energia por atividade
                
                if (this.stoveWood >= 2 && !this.stoveLit) {
                    this.stoveLit = true;
                    this.playSound('baking');
                    this.showMessage('🔥 Fogão aceso! Agora pode cozinhar refeições!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                } else {
                    this.showMessage(`🪵 Lenha adicionada! (${this.stoveWood}/2)`, 'success');
                    this.changeAvatarExpression('😊');
                }
                
                this.updateStoveDisplay();
                this.updateUI();
            }
            
            cookMeal() {
                // Verificar se tem os ingredientes necessários
                if (this.harvestInventory.potato < 1) {
                    this.showMessage('Precisa de 1 batata para cozinhar! 🥔', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.eggs < 1) {
                    this.showMessage('Precisa de 1 ovo para cozinhar! 🥚', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.harvestInventory.lettuce < 1) {
                    this.showMessage('Precisa de 1 alface para cozinhar! 🥬', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (!this.stoveLit) {
                    this.showMessage('Fogão precisa estar aceso! Adicione 2 lenhas! 🔥', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.isCooking) {
                    this.showMessage('Fogão ocupado! Aguarde a refeição ficar pronta! 🔥', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.harvestInventory.potato -= 1;
                this.eggs -= 1;
                this.harvestInventory.lettuce -= 1;
                this.reduceAvatarEnergy(8); // Reduzir energia por cozinhar
                
                // Iniciar processo de cozinhar
                this.isCooking = true;
                this.playSound('baking');
                this.showMessage('🍽️ Ingredientes no fogão! Cozinhando refeição...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Refeição fica pronta em 25 segundos
                setTimeout(() => {
                    this.cookedMeals += 1;
                    this.isCooking = false;
                    // Consumir lenha do fogão após cozinhar
                    this.stoveWood = 0;
                    this.stoveLit = false;
                    this.playSound('oven');
                    this.showMessage('🍽️ Refeição pronta! Fogão apagou, precisa de mais lenha.', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateStoveDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 25000);
                
                this.updateStoveDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            eatMeal() {
                if (this.cookedMeals < 1) {
                    this.showMessage('Precisa cozinhar uma refeição primeiro! 🍽️', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.cookedMeals -= 1;
                this.avatarEnergy = 100; // Restaurar energia completamente
                
                this.playSound('harvest');
                this.showMessage('😋 Refeição deliciosa! Energia restaurada para 100%!', 'success');
                this.changeAvatarExpression('😋');
                this.celebrateAvatar();
                
                // Atualizar cor do indicador para verde
                const energyContainer = document.getElementById('avatar-energy').parentElement;
                energyContainer.className = 'bg-green-500 px-3 py-2 rounded-full font-bold text-white text-sm';
                
                this.updateUI();
            }
            
            updateStoveDisplay() {
                const stoveStatus = document.getElementById('stove-status');
                const stoveWoodContainer = document.getElementById('stove-wood');
                const cookingTimer = document.getElementById('cooking-timer');
                
                // Limpar lenhas visuais
                stoveWoodContainer.innerHTML = '';
                
                // Mostrar lenhas no fogão
                for (let i = 0; i < this.stoveWood; i++) {
                    const wood = document.createElement('div');
                    wood.textContent = '🪵';
                    wood.className = 'text-lg';
                    stoveWoodContainer.appendChild(wood);
                }
                
                // Status do fogão
                if (this.isCooking) {
                    stoveStatus.textContent = '🔥🍽️';
                    cookingTimer.textContent = 'Cozinhando...';
                    cookingTimer.className = 'text-orange-600 font-bold';
                } else if (this.stoveLit) {
                    stoveStatus.textContent = '🔥';
                    cookingTimer.textContent = 'Fogão aceso';
                    cookingTimer.className = 'text-green-600 font-bold';
                } else {
                    stoveStatus.textContent = '❄️';
                    cookingTimer.textContent = 'Fogão apagado';
                    cookingTimer.className = 'text-red-600 font-bold';
                }
            }
            
            playSound(type) {
                // Criar contexto de áudio para efeitos sonoros
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                const sounds = {
                    plant: { freq: 440, duration: 0.2, type: 'sine' },
                    water: { freq: 220, duration: 0.3, type: 'sine' },
                    harvest: { freq: 660, duration: 0.4, type: 'triangle' },
                    coin: { freq: 880, duration: 0.3, type: 'square' },
                    cow: { freq: 150, duration: 0.8, type: 'sawtooth' },
                    chicken: { freq: 800, duration: 0.4, type: 'triangle' },
                    rain: { freq: 300, duration: 0.1, type: 'sine' },
                    fertilize: { freq: 200, duration: 0.3, type: 'triangle' },
                    baking: { freq: 400, duration: 0.5, type: 'square' },
                    oven: { freq: 180, duration: 0.6, type: 'sawtooth' }
                };
                
                const sound = sounds[type];
                if (!sound) return;
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(sound.freq, audioContext.currentTime);
                oscillator.type = sound.type;
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + sound.duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + sound.duration);
            }
            
            startGameLoop() {
                // Ciclo dia/noite - dia: 9 minutos, noite: 1 minuto
                setInterval(() => {
                    this.gameTime += 1000;
                    
                    // Alternar para noite após 9 minutos de dia
                    if (this.isDay && this.gameTime % 540000 === 0) {
                        this.isDay = false;
                        this.updateDayNight();
                    }
                    
                    // Alternar para dia após 1 minuto de noite
                    if (!this.isDay && this.gameTime % 60000 === 0) {
                        this.isDay = true;
                        this.updateDayNight();
                        this.newDay();
                    }
                    
                    // Produção de ovos a cada 10 minutos (600 segundos)
                    if (this.gameTime % 600000 === 0) {
                        this.produceEggs();
                    }
                    
                    // Produção de mel a cada 20 minutos (1200 segundos)
                    if (this.gameTime % 1200000 === 0) {
                        this.produceHoney();
                    }
                    
                    // Reprodução de pintinhos a cada 1 hora (3600 segundos)
                    if (this.gameTime % 3600000 === 0) {
                        this.produceChicks();
                    }
                    
                    this.updateTimers();
                    this.updateBakingTimer();
                    this.updateCheeseTimer();
                    this.updateRoasterDisplay();
                    this.updateEggTimer();
                }, 1000);
            }
            
            updateDayNight() {
                const body = document.getElementById('game-body');
                const timeIndicator = document.getElementById('time-indicator');
                
                if (this.isDay) {
                    body.className = 'day-sky min-h-screen font-sans transition-all duration-1000';
                    timeIndicator.textContent = '☀️ Dia';
                    this.changeAvatarExpression('😊');
                } else {
                    body.className = 'night-sky min-h-screen font-sans transition-all duration-1000';
                    timeIndicator.textContent = '🌙 Noite';
                    this.changeAvatarExpression('😴');
                }
            }
            
            startRain() {
                if (this.isRaining) return;
                
                this.isRaining = true;
                const rainContainer = document.getElementById('rain-container');
                rainContainer.classList.remove('hidden');
                
                // Criar gotas de chuva mais realistas
                const createRainDrops = () => {
                    for (let i = 0; i < 15; i++) {
                        const drop = document.createElement('div');
                        drop.className = 'rain-drop';
                        drop.style.left = Math.random() * 100 + '%';
                        drop.style.animationDelay = Math.random() * 0.5 + 's';
                        drop.style.animationDuration = (1 + Math.random() * 0.5) + 's';
                        rainContainer.appendChild(drop);
                        
                        setTimeout(() => drop.remove(), 2000);
                    }
                };
                
                // Criar ondas de chuva
                const rainInterval = setInterval(createRainDrops, 200);
                setTimeout(() => clearInterval(rainInterval), 4800);
                
                // Regar todas as plantas que precisam de água
                this.plots.forEach((plot, index) => {
                    if (plot.state === 'needs-water') {
                        this.waterPlant(index, true); // true = chuva automática
                    }
                });
                
                this.playSound('rain');
                this.showMessage('🌧️ Chuva! Todas as plantas foram regadas!', 'success');
                this.changeAvatarExpression('😌');
                
                // Parar chuva após 1 minuto
                setTimeout(() => {
                    this.isRaining = false;
                    rainContainer.classList.add('hidden');
                    rainContainer.innerHTML = '';
                }, 60000);
            }
            
            newDay() {
                // Reset diário
                this.dailyMilkCollected = false;
                this.dailyEggsProduced = false;
                this.cowsFed = false;
                this.cow1Milked = false;
                this.cow2Milked = false;
                this.chickensFed = false;
                this.pigsFed = false;
                this.pig1Harvested = false;
                this.pig2Harvested = false;
                this.sheepFed = false;
                this.sheep1Harvested = false;
                this.sheep2Harvested = false;
                this.horseFed = false;
                this.horseEnergy = 0;
                this.manureAvailable = true; // Esterco das vacas disponível no novo dia
                this.horseManureAvailable = true; // Esterco do cavalo disponível no novo dia
                this.avatarEnergy = 100; // Restaurar energia do avatar no novo dia
                this.dayCount++;
                
                // Verificar se compostagem está pronta
                if (this.isMakingCompost && (this.dayCount - this.compostStartDay) >= 1) {
                    this.fertilizer += 4;
                    this.isMakingCompost = false;
                    this.showMessage('🌿 Compostagem concluída! +4 adubos prontos!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                }
                
                // Recarregar poço
                this.waterBuckets = 4;
                
                // Gerar novos pedidos
                this.generateDailyOrders();
                
                // Chuva dia sim, dia não
                this.shouldRainToday = this.dayCount % 2 === 0;
                
                if (this.shouldRainToday) {
                    // Programar chuva para 2 minutos após o início do dia
                    setTimeout(() => {
                        this.startRain();
                    }, 120000);
                }
                
                this.showMessage('🌅 Novo dia começou! Poço recarregado!', 'success');
                this.changeAvatarExpression('😊');
                this.updateWellDisplay();
            }
            
            produceEggs() {
                // Função removida - ovos agora são produzidos 15 segundos após alimentar
                // Mantida para compatibilidade, mas não faz nada
            }
            
            produceHoney() {
                // Abelhas produzem 4 potes de mel a cada 20 minutos
                this.availableHoney += 4;
                this.updateHoneyDisplay();
                this.showMessage('🐝 Abelhas produziram mel! Clique na colmeia para coletar!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
            }
            
            produceChicks() {
                // Para cada 2 galinhas, nasce 1 pintinho
                const chickensCount = this.ownedAnimals.chickens;
                if (chickensCount >= 2) {
                    const newChicks = Math.floor(chickensCount / 2);
                    this.ownedAnimals.chicks += newChicks;
                    
                    this.showMessage(`🐣 ${newChicks} pintinhos nasceram! Total: ${this.ownedAnimals.chicks}`, 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateUI();
                }
            }
            
            updateEggDisplay() {
                const container = document.getElementById('eggs-container');
                container.innerHTML = '';
                
                for (let i = 0; i < Math.min(this.availableEggs, 8); i++) {
                    const egg = document.createElement('div');
                    egg.className = 'text-2xl egg-bounce';
                    egg.textContent = '🥚';
                    container.appendChild(egg);
                }
            }
            
            updateTimers() {
                // Timer de ordenha (uma vez por dia)
                const milkTimer = document.getElementById('milk-timer');
                
                if (!this.dailyMilkCollected) {
                    milkTimer.textContent = 'Pronto!';
                    milkTimer.className = 'text-green-600 font-bold';
                } else {
                    milkTimer.textContent = 'Amanhã';
                    milkTimer.className = 'text-red-600 font-bold';
                }
            }
            
            updateBakingTimer() {
                const bakingTimer = document.getElementById('baking-timer');
                const ovenStatus = document.getElementById('oven-status');
                
                if (this.isBaking) {
                    bakingTimer.textContent = 'Assando...';
                    bakingTimer.className = 'text-orange-600 font-bold';
                    ovenStatus.textContent = '🔥🍞';
                } else {
                    bakingTimer.textContent = 'Pronto para usar';
                    bakingTimer.className = 'text-green-600 font-bold';
                    ovenStatus.textContent = '🔥';
                }
            }
            
            updateCheeseTimer() {
                const cheeseTimer = document.getElementById('cheese-timer');
                const cheeseStatus = document.getElementById('cheese-status');
                
                if (this.isMakingCheese) {
                    cheeseTimer.textContent = 'Prensando...';
                    cheeseTimer.className = 'text-orange-600 font-bold';
                    cheeseStatus.textContent = '🧀';
                } else {
                    cheeseTimer.textContent = 'Pronto para usar';
                    cheeseTimer.className = 'text-green-600 font-bold';
                    cheeseStatus.textContent = '🧀';
                }
            }
            
            updateAxeDisplay() {
                const axeStatus = document.getElementById('axe-status');
                const buyAxeBtn = document.getElementById('buy-axe');
                
                if (this.hasAxe) {
                    const usesLeft = this.maxAxeUses - this.axeUses;
                    axeStatus.textContent = `Machado (${usesLeft}/${this.maxAxeUses} usos)`;
                    axeStatus.className = usesLeft > 5 ? 'text-green-600 font-bold' : 'text-orange-600 font-bold';
                    buyAxeBtn.style.display = 'none';
                } else {
                    axeStatus.textContent = 'Sem machado';
                    axeStatus.className = 'text-red-600 font-bold';
                    buyAxeBtn.style.display = 'block';
                }
            }
            
            updateTreeDisplay() {
                const treeElement = document.getElementById('tree');
                const treeStatus = document.getElementById('tree-status');
                const treeArea = document.getElementById('tree-area');
                
                if (this.treeAlive) {
                    const woodLeft = this.maxTreeWood - this.treeWoodCount;
                    treeElement.textContent = '🌳';
                    treeElement.className = 'absolute bottom-4 left-1/2 transform -translate-x-1/2 text-6xl cursor-pointer hover:scale-110 transition-transform';
                    treeElement.style.display = 'block';
                    treeStatus.textContent = `Árvore saudável (${woodLeft}/${this.maxTreeWood})`;
                    treeStatus.className = 'text-green-700 font-bold';
                } else {
                    // Árvore completamente invisível
                    treeElement.style.display = 'none';
                    treeStatus.textContent = 'Nova árvore crescendo... (5 min)';
                    treeStatus.className = 'text-orange-700 font-bold';
                }
            }
            
            updateOvenDisplay() {
                const ovenStatus = document.getElementById('oven-status');
                const ovenWoodContainer = document.getElementById('oven-wood');
                const bakingTimer = document.getElementById('baking-timer');
                
                // Limpar lenhas visuais
                ovenWoodContainer.innerHTML = '';
                
                // Mostrar lenhas no forno
                for (let i = 0; i < this.ovenWood; i++) {
                    const wood = document.createElement('div');
                    wood.textContent = '🪵';
                    wood.className = 'text-lg';
                    ovenWoodContainer.appendChild(wood);
                }
                
                // Status do forno
                if (this.isBaking) {
                    ovenStatus.textContent = '🔥🍞';
                    bakingTimer.textContent = 'Assando...';
                    bakingTimer.className = 'text-orange-600 font-bold';
                } else if (this.ovenLit) {
                    ovenStatus.textContent = '🔥';
                    bakingTimer.textContent = 'Forno aceso';
                    bakingTimer.className = 'text-green-600 font-bold';
                } else {
                    ovenStatus.textContent = '❄️';
                    bakingTimer.textContent = 'Forno apagado';
                    bakingTimer.className = 'text-red-600 font-bold';
                }
            }
            
            updateEggTimer() {
                const eggTimer = document.getElementById('egg-timer');
                const timeUntilEggs = 600000 - (this.gameTime % 600000);
                const minutes = Math.floor(timeUntilEggs / 60000);
                const seconds = Math.floor((timeUntilEggs % 60000) / 1000);
                
                if (minutes > 0) {
                    eggTimer.textContent = `${minutes} min`;
                } else {
                    eggTimer.textContent = `${seconds}s`;
                }
            }
            
            updateWellDisplay() {
                const wellStatus = document.getElementById('well-status');
                const waterBuckets = document.getElementById('water-buckets');
                
                waterBuckets.textContent = this.waterBuckets;
                
                if (this.waterBuckets > 0) {
                    wellStatus.textContent = 'Clique para coletar água';
                    wellStatus.className = 'text-green-600 font-bold';
                } else {
                    wellStatus.textContent = 'Poço vazio - recarrega a cada dia';
                    wellStatus.className = 'text-red-600 font-bold';
                }
            }
            
            updateCowDisplay() {
                const cowStatus = document.getElementById('cow-status');
                const cowFeeder = document.getElementById('cow-feeder');
                
                // Limpar comedouro
                cowFeeder.innerHTML = '';
                
                // Mostrar feno no comedouro se as vacas foram alimentadas
                if (this.cowsFed) {
                    for (let i = 0; i < 2; i++) {
                        const hay = document.createElement('div');
                        hay.textContent = '🟫';
                        hay.className = 'text-lg';
                        cowFeeder.appendChild(hay);
                    }
                }
                
                // Mostrar esterco das vacas se disponível
                if (this.manureAvailable) {
                    const manureElement = document.createElement('div');
                    manureElement.textContent = '💩';
                    manureElement.className = 'absolute bottom-2 left-8 text-2xl cursor-pointer hover:scale-110 transition-transform';
                    manureElement.title = 'Clique para coletar esterco das vacas!';
                    manureElement.id = 'cow-manure-pile';
                    manureElement.addEventListener('click', () => this.collectManure());
                    
                    // Adicionar ao pasto se não existir
                    const pasture = document.querySelector('.bg-green-800');
                    const existingManure = document.getElementById('cow-manure-pile');
                    if (!existingManure) {
                        pasture.appendChild(manureElement);
                    }
                }
                
                // Atualizar status das vacas
                if (!this.cowsFed) {
                    cowStatus.textContent = 'Famintas - sem leite';
                    cowStatus.className = 'text-red-600 font-bold';
                } else {
                    const cow1Status = this.cow1Milked ? '🥛' : '🐄';
                    const cow2Status = this.cow2Milked ? '🥛' : '🐄';
                    cowStatus.textContent = `Alimentadas ${cow1Status} ${cow2Status}`;
                    cowStatus.className = 'text-green-600 font-bold';
                }
            }
            
            updateChickenDisplay() {
                const chickenStatus = document.getElementById('chicken-status');
                const chickenFeeder = document.getElementById('chicken-feeder');
                
                // Limpar comedouro
                chickenFeeder.innerHTML = '';
                
                // Mostrar ração no comedouro se as galinhas foram alimentadas
                if (this.chickensFed) {
                    for (let i = 0; i < 2; i++) {
                        const feed = document.createElement('div');
                        feed.textContent = '🥣';
                        feed.className = 'text-sm';
                        chickenFeeder.appendChild(feed);
                    }
                }
                
                // Atualizar status das galinhas
                if (!this.chickensFed) {
                    chickenStatus.textContent = 'Famintas - sem ovos';
                    chickenStatus.className = 'text-red-600 font-bold';
                } else {
                    chickenStatus.textContent = 'Alimentadas - botando ovos';
                    chickenStatus.className = 'text-green-600 font-bold';
                }
            }
            
            updatePigDisplay() {
                const pigStatus = document.getElementById('pig-status');
                const pigFeeder = document.getElementById('pig-feeder');
                
                // Limpar comedouro
                pigFeeder.innerHTML = '';
                
                // Mostrar ração no comedouro se os porcos foram alimentados
                if (this.pigsFed) {
                    for (let i = 0; i < 2; i++) {
                        const feed = document.createElement('div');
                        feed.textContent = '🍲';
                        feed.className = 'text-sm';
                        pigFeeder.appendChild(feed);
                    }
                }
                
                // Atualizar status dos porcos
                if (!this.pigsFed) {
                    pigStatus.textContent = 'Famintos - sem carne';
                    pigStatus.className = 'text-red-600 font-bold';
                } else {
                    const pig1Status = this.pig1Harvested ? '🥩' : '🐷';
                    const pig2Status = this.pig2Harvested ? '🥩' : '🐷';
                    pigStatus.textContent = `Alimentados ${pig1Status} ${pig2Status}`;
                    pigStatus.className = 'text-green-600 font-bold';
                }
            }
            
            updateSheepDisplay() {
                const sheepStatus = document.getElementById('sheep-status');
                const sheepFeeder = document.getElementById('sheep-feeder');
                
                // Limpar comedouro
                sheepFeeder.innerHTML = '';
                
                // Mostrar feno no comedouro se as ovelhas foram alimentadas
                if (this.sheepFed) {
                    for (let i = 0; i < 2; i++) {
                        const hay = document.createElement('div');
                        hay.textContent = '🟫';
                        hay.className = 'text-sm';
                        sheepFeeder.appendChild(hay);
                    }
                }
                
                // Atualizar status das ovelhas
                if (!this.sheepFed) {
                    sheepStatus.textContent = 'Famintas - sem lã';
                    sheepStatus.className = 'text-red-600 font-bold';
                } else {
                    const sheep1Status = this.sheep1Harvested ? '🧶' : '🐑';
                    const sheep2Status = this.sheep2Harvested ? '🧶' : '🐑';
                    sheepStatus.textContent = `Alimentadas ${sheep1Status} ${sheep2Status}`;
                    sheepStatus.className = 'text-green-600 font-bold';
                }
            }
            
            collectManure() {
                if (!this.manureAvailable) {
                    this.showMessage('Nenhum esterco disponível hoje!', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.manure += 1;
                this.manureAvailable = false;
                
                // Remover esterco visual das vacas
                const cowManurePile = document.getElementById('cow-manure-pile');
                if (cowManurePile) {
                    cowManurePile.remove();
                }
                
                this.playSound('harvest');
                this.showMessage('💩 +1 esterco coletado!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateUI();
            }
            
            collectHoney() {
                if (this.availableHoney > 0) {
                    const collectedHoney = this.availableHoney;
                    this.honey += this.availableHoney;
                    this.availableHoney = 0;
                    this.updateHoneyDisplay();
                    this.playSound('harvest');
                    this.showMessage(`🍯 +${collectedHoney} potes de mel coletados!`, 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateUI();
                } else {
                    this.showMessage('Nenhum mel disponível! Aguarde as abelhas trabalharem!', 'error');
                    this.changeAvatarExpression('😔');
                }
            }
            
            harvestGrass(tuftIndex) {
                const tuft = this.grassTufts[tuftIndex];
                
                if (!tuft.available) {
                    this.showMessage('Grama ainda crescendo! Aguarde 30 segundos!', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                // Colher grama
                this.grass += 1;
                this.grassCollected += 1;
                tuft.available = false;
                tuft.element.innerHTML = '🟫';
                tuft.element.className = 'bg-amber-600 rounded-full flex items-center justify-center text-lg border-2 border-amber-700';
                tuft.element.title = 'Grama crescendo... (30s)';
                
                this.playSound('harvest');
                this.showMessage('🌱 +1 tufo de grama colhido!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Verificar se deve soltar florzinha amarela (a cada 6 gramas)
                if (this.grassCollected % 6 === 0) {
                    this.yellowFlowers += 1;
                    this.showMessage('🌼 Florzinha amarela apareceu! +1 coletada!', 'success');
                    this.changeAvatarExpression('🌼');
                    this.celebrateAvatar();
                }
                
                // Grama renasce em 30 segundos
                setTimeout(() => {
                    tuft.available = true;
                    tuft.element.innerHTML = '🌱';
                    tuft.element.className = 'bg-green-600 rounded-full flex items-center justify-center text-lg cursor-pointer hover:scale-110 transition-transform border-2 border-green-700';
                    tuft.element.title = 'Clique para colher grama!';
                }, 30000);
                
                this.updateUI();
            }
            
            makeHay() {
                // Verificar se tem os ingredientes necessários
                if (this.grass < 4) {
                    this.showMessage('Precisa de 4 tufos de grama para fazer feno! 🌱', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingHay) {
                    this.showMessage('Máquina ocupada! Aguarde o feno ficar pronto! ⚙️', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.grass -= 4;
                
                // Iniciar processo de fazer feno
                this.isMakingHay = true;
                this.playSound('baking');
                this.showMessage('🌱 Grama na máquina! Processando feno...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Feno fica pronto em 10 segundos
                setTimeout(() => {
                    this.hay += 1;
                    this.isMakingHay = false;
                    this.playSound('oven');
                    this.showMessage('🟫 Bloco de feno pronto! Perfeito para alimentar vacas!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateHayDisplay();
                    this.updateUI();
                }, 10000);
                
                this.updateHayDisplay();
                this.updateUI();
            }
            
            makeYarn() {
                // Verificar se tem os ingredientes necessários
                if (this.wool < 2) {
                    this.showMessage('Precisa de 2 tufos de lã para fazer novelos! ☁️', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingYarn) {
                    this.showMessage('Fiandeira ocupada! Aguarde os novelos ficarem prontos! 🧶', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.wool -= 2;
                
                // Iniciar processo de fazer novelos
                this.isMakingYarn = true;
                this.playSound('baking');
                this.showMessage('☁️ Lã na fiandeira! Fazendo novelos...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Novelos ficam prontos em 20 segundos
                setTimeout(() => {
                    this.yarn += 4;
                    this.isMakingYarn = false;
                    this.playSound('oven');
                    this.showMessage('🧶 4 novelos de lã prontos! Perfeitos para vender!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateYarnDisplay();
                    this.updateUI();
                }, 20000);
                
                this.updateYarnDisplay();
                this.updateUI();
            }
            
            updateHayDisplay() {
                const hayTimer = document.getElementById('hay-timer');
                const hayGrass = document.getElementById('hay-grass');
                
                // Limpar grama visual
                hayGrass.innerHTML = '';
                
                if (this.isMakingHay) {
                    // Mostrar 4 tufos sendo processados
                    for (let i = 0; i < 4; i++) {
                        const grass = document.createElement('div');
                        grass.textContent = '🌱';
                        grass.className = 'text-xs';
                        hayGrass.appendChild(grass);
                    }
                    
                    hayTimer.textContent = 'Processando...';
                    hayTimer.className = 'text-orange-600 font-bold';
                } else {
                    hayTimer.textContent = 'Pronto para usar';
                    hayTimer.className = 'text-green-600 font-bold';
                }
            }
            
            updateYarnDisplay() {
                const yarnTimer = document.getElementById('yarn-timer');
                const yarnWool = document.getElementById('yarn-wool');
                
                // Limpar lã visual
                yarnWool.innerHTML = '';
                
                if (this.isMakingYarn) {
                    // Mostrar 2 tufos de lã sendo processados
                    for (let i = 0; i < 2; i++) {
                        const wool = document.createElement('div');
                        wool.textContent = '☁️';
                        wool.className = 'text-xs';
                        yarnWool.appendChild(wool);
                    }
                    
                    yarnTimer.textContent = 'Fiando...';
                    yarnTimer.className = 'text-orange-600 font-bold';
                } else {
                    yarnTimer.textContent = 'Pronto para usar';
                    yarnTimer.className = 'text-green-600 font-bold';
                }
            }
            
            updateHoneyDisplay() {
                const honeyPots = document.getElementById('honey-pots');
                const hiveStatus = document.getElementById('hive-status');
                
                // Limpar potes visuais
                honeyPots.innerHTML = '';
                
                // Mostrar potes de mel disponíveis
                for (let i = 0; i < Math.min(this.availableHoney, 8); i++) {
                    const pot = document.createElement('div');
                    pot.textContent = '🍯';
                    pot.className = 'text-2xl';
                    honeyPots.appendChild(pot);
                }
                
                // Atualizar status da colmeia
                if (this.availableHoney > 0) {
                    hiveStatus.textContent = `${this.availableHoney} potes prontos!`;
                    hiveStatus.className = 'text-green-600 font-bold';
                } else {
                    hiveStatus.textContent = 'Abelhas trabalhando...';
                    hiveStatus.className = 'text-yellow-600 font-bold';
                }
            }
            
            makeChickenFeed() {
                // Verificar se tem os ingredientes necessários
                if (this.harvestInventory.corn < 2) {
                    this.showMessage('Precisa de 2 milhos para fazer ração de galinha! 🌽', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.harvestInventory.wheat < 1) {
                    this.showMessage('Precisa de 1 trigo para fazer ração de galinha! 🌾', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingFeed) {
                    this.showMessage('Fábrica ocupada! Aguarde a ração ficar pronta! ⚙️', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.harvestInventory.corn -= 2;
                this.harvestInventory.wheat -= 1;
                
                // Iniciar processo de fazer ração
                this.isMakingFeed = true;
                this.currentFeedType = 'chicken';
                this.playSound('baking');
                this.showMessage('🐔 Misturando ração para galinhas...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Ração fica pronta em 30 segundos
                setTimeout(() => {
                    this.chickenFeed += 4;
                    this.isMakingFeed = false;
                    this.currentFeedType = null;
                    this.playSound('oven');
                    this.showMessage('🌾 4 rações para galinhas prontas!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateFeedDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 30000);
                
                this.updateFeedDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            makePigFeed() {
                // Verificar se tem os ingredientes necessários
                if (this.harvestInventory.tomato < 1) {
                    this.showMessage('Precisa de 1 tomate para fazer ração de porco! 🍅', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.harvestInventory.corn < 1) {
                    this.showMessage('Precisa de 1 milho para fazer ração de porco! 🌽', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.harvestInventory.potato < 1) {
                    this.showMessage('Precisa de 1 batata para fazer ração de porco! 🥔', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.harvestInventory.lettuce < 1) {
                    this.showMessage('Precisa de 1 alface para fazer ração de porco! 🥬', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingFeed) {
                    this.showMessage('Fábrica ocupada! Aguarde a ração ficar pronta! ⚙️', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.harvestInventory.tomato -= 1;
                this.harvestInventory.corn -= 1;
                this.harvestInventory.potato -= 1;
                this.harvestInventory.lettuce -= 1;
                
                // Iniciar processo de fazer ração
                this.isMakingFeed = true;
                this.currentFeedType = 'pig';
                this.playSound('baking');
                this.showMessage('🐷 Misturando ração para porcos...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Ração fica pronta em 30 segundos
                setTimeout(() => {
                    this.pigFeed += 4;
                    this.isMakingFeed = false;
                    this.currentFeedType = null;
                    this.playSound('oven');
                    this.showMessage('🥕 4 rações para porcos prontas!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateFeedDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 30000);
                
                this.updateFeedDisplay();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            updateFeedDisplay() {
                const feedTimer = document.getElementById('feed-timer');
                const feedIngredients = document.getElementById('feed-ingredients');
                const feedOutput = document.getElementById('feed-output');
                
                // Limpar ingredientes visuais
                feedIngredients.innerHTML = '';
                
                if (this.isMakingFeed) {
                    if (this.currentFeedType === 'chicken') {
                        // Mostrar ingredientes da ração de galinha
                        const ingredients = ['🌽', '🌽', '🌾'];
                        ingredients.forEach(ingredient => {
                            const item = document.createElement('div');
                            item.textContent = ingredient;
                            item.className = 'text-xs';
                            feedIngredients.appendChild(item);
                        });
                        feedOutput.textContent = '🥣';
                    } else if (this.currentFeedType === 'pig') {
                        // Mostrar ingredientes da ração de porco
                        const ingredients = ['🍅', '🌽', '🥔', '🥬'];
                        ingredients.forEach(ingredient => {
                            const item = document.createElement('div');
                            item.textContent = ingredient;
                            item.className = 'text-xs';
                            feedIngredients.appendChild(item);
                        });
                        feedOutput.textContent = '🍲';
                    }
                    
                    feedTimer.textContent = 'Misturando...';
                    feedTimer.className = 'text-orange-600 font-bold';
                } else {
                    feedTimer.textContent = 'Pronto para usar';
                    feedTimer.className = 'text-green-600 font-bold';
                    feedOutput.textContent = '🥣';
                }
            }
            
            createFarmGrid() {
                const farmGrid = document.getElementById('farm-grid');
                
                // Criar 40 canteiros (10 linhas x 4 colunas)
                for (let i = 0; i < 40; i++) {
                    const plot = document.createElement('div');
                    
                    // Primeiros 8 canteiros desbloqueados (2 linhas)
                    if (i < this.unlockedPlots) {
                        plot.className = 'farm-plot w-20 h-20 bg-amber-800 border-2 border-amber-900 rounded-lg flex items-center justify-center text-2xl font-bold shadow-md cursor-pointer';
                        plot.dataset.state = 'empty';
                        plot.addEventListener('click', () => this.handlePlotClick(i));
                    } else {
                        // Canteiros bloqueados
                        plot.className = 'farm-plot w-20 h-20 bg-gray-600 border-2 border-gray-800 rounded-lg flex items-center justify-center text-2xl font-bold shadow-md cursor-pointer opacity-50';
                        plot.innerHTML = '🔒';
                        plot.title = `Canteiro bloqueado - Expanda por ${this.plotExpansionCost} moedas`;
                        plot.dataset.state = 'locked';
                        plot.addEventListener('click', () => this.expandPlots());
                    }
                    
                    plot.dataset.plotId = i;
                    
                    farmGrid.appendChild(plot);
                    this.plots.push({
                        element: plot,
                        state: i < this.unlockedPlots ? 'empty' : 'locked',
                        seedType: null,
                        timer: null
                    });
                }
            }
            
            createGrassField() {
                if (!this.unlockedSectors.grassField) return;
                
                const grassGrid = document.getElementById('grass-grid');
                if (!grassGrid) return;
                
                // Criar 24 tufos de grama (4 linhas x 6 colunas)
                for (let i = 0; i < 24; i++) {
                    const tuft = document.createElement('div');
                    tuft.className = 'bg-green-600 rounded-full flex items-center justify-center text-lg cursor-pointer hover:scale-110 transition-transform border-2 border-green-700';
                    tuft.innerHTML = '🌱';
                    tuft.title = 'Clique para colher grama!';
                    
                    tuft.addEventListener('click', () => this.harvestGrass(i));
                    
                    grassGrid.appendChild(tuft);
                    this.grassTufts.push({
                        element: tuft,
                        available: true,
                        timer: null
                    });
                }
            }
            
            expandPlots() {
                if (this.unlockedPlots >= this.maxPlots) {
                    this.showMessage('Todos os canteiros já foram desbloqueados! 🌾', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                if (this.coins < this.plotExpansionCost) {
                    this.showMessage(`Precisa de ${this.plotExpansionCost} moedas para expandir! 💸`, 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                this.coins -= this.plotExpansionCost;
                const oldUnlocked = this.unlockedPlots;
                this.unlockedPlots = Math.min(this.unlockedPlots + 4, this.maxPlots);
                
                // Desbloquear canteiros
                for (let i = oldUnlocked; i < this.unlockedPlots; i++) {
                    const plot = this.plots[i];
                    plot.state = 'empty';
                    plot.element.className = 'farm-plot w-20 h-20 bg-amber-800 border-2 border-amber-900 rounded-lg flex items-center justify-center text-2xl font-bold shadow-md cursor-pointer';
                    plot.element.innerHTML = '';
                    plot.element.title = '';
                    plot.element.removeEventListener('click', this.expandPlots);
                    plot.element.addEventListener('click', () => this.handlePlotClick(i));
                }
                
                this.playSound('coin');
                this.showMessage(`🌾 +4 canteiros desbloqueados! Total: ${this.unlockedPlots}`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateUI();
            }
            
            buySector(sectorName, cost) {
                if (this.unlockedSectors[sectorName]) {
                    this.showMessage('Este setor já foi comprado! 🏗️', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                if (this.coins < cost) {
                    this.showMessage(`Precisa de ${cost} moedas para comprar este setor! 💸`, 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                this.coins -= cost;
                this.unlockedSectors[sectorName] = true;
                
                this.playSound('coin');
                this.showMessage(`🏗️ Setor desbloqueado! Agora você pode usar esta área!`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Recriar áreas se necessário
                if (sectorName === 'grassField') {
                    this.createGrassField();
                }
                
                this.updateSectorVisibility();
                this.updateUI();
            }
            
            buyAnimal(animalType, cost) {
                // Verificar se o setor necessário está desbloqueado
                const requiredSectors = {
                    chickens: 'chickenCoop',
                    cows: 'cowPasture',
                    pigs: 'pigPen',
                    sheep: 'sheepPen',
                    horses: 'horseStable'
                };
                
                const requiredSector = requiredSectors[animalType];
                if (!this.unlockedSectors[requiredSector]) {
                    this.showMessage(`Precisa comprar o setor ${requiredSector} primeiro! 🏗️`, 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.coins < cost) {
                    this.showMessage(`Precisa de ${cost} moedas para comprar este animal! 💸`, 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                this.coins -= cost;
                this.ownedAnimals[animalType] += 1;
                
                this.playSound('coin');
                this.showMessage(`🐄 Animal comprado! Agora você tem ${this.ownedAnimals[animalType]} ${animalType}!`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateUI();
            }
            
            sacrificeChicken() {
                if (this.ownedAnimals.chickens < 1) {
                    this.showMessage('Precisa ter pelo menos 1 galinha! 🐔', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.ownedAnimals.chickens -= 1;
                this.rawChicken += 1;
                
                this.playSound('harvest');
                this.showMessage('🔪 Galinha sacrificada! +1 frango cru obtido!', 'success');
                this.changeAvatarExpression('😐');
                this.updateUI();
            }
            
            growChick() {
                if (this.ownedAnimals.chicks < 1) {
                    this.showMessage('Precisa ter pelo menos 1 pintinho! 🐣', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.ownedAnimals.chicks -= 1;
                
                this.showMessage('🐣 Pintinho crescendo... Será galinha em 24 horas!', 'success');
                this.changeAvatarExpression('😊');
                
                // Pintinho vira galinha em 24 horas (1 dia de jogo)
                setTimeout(() => {
                    this.ownedAnimals.chickens += 1;
                    this.showMessage('🐔 Pintinho cresceu e virou galinha!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateUI();
                }, 600000); // 10 minutos = 1 dia de jogo
                
                this.updateUI();
            }
            
            updateSectorVisibility() {
                // Ocultar/mostrar setores baseado no que foi comprado
                const productionAreas = document.getElementById('production-areas');
                const resourceAreas = document.getElementById('resource-areas');
                const animalAreas = document.getElementById('animal-areas');
                
                // Limpar áreas
                if (productionAreas) productionAreas.innerHTML = '';
                if (resourceAreas) resourceAreas.innerHTML = '';
                if (animalAreas) animalAreas.innerHTML = '';
                
                // Mostrar apenas setores desbloqueados
                this.createVisibleSectors();
                this.updateExpansionButtons();
            }
            
            createVisibleSectors() {
                // Esta função será implementada para criar apenas os setores desbloqueados
                // Por enquanto, vamos manter a funcionalidade básica
            }
            
            updateExpansionButtons() {
                // Atualizar botões de expansão
                document.querySelectorAll('.sector-btn').forEach(btn => {
                    const sector = btn.dataset.sector;
                    if (this.unlockedSectors[sector]) {
                        btn.style.display = 'none';
                    }
                });
                
                // Atualizar botão de expansão de canteiros
                const expandBtn = document.getElementById('expand-plots');
                if (expandBtn) {
                    if (this.unlockedPlots >= this.maxPlots) {
                        expandBtn.style.display = 'none';
                    } else {
                        expandBtn.innerHTML = `🌾 Expandir Canteiros<br><span class="text-xs">+4 canteiros (${this.plotExpansionCost} moedas)</span><br><span class="text-xs">Atual: ${this.unlockedPlots}/${this.maxPlots}</span>`;
                    }
                }
            }
            
            setupEventListeners() {
                document.querySelectorAll('.seed-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const seedType = e.target.dataset.seed;
                        const cost = parseInt(e.target.dataset.cost);
                        
                        if (this.coins >= cost) {
                            this.selectedSeed = seedType;
                            this.updateSeedSelection();
                            this.changeAvatarExpression('🤔');
                        } else {
                            this.showMessage('Moedas insuficientes! 💸', 'error');
                            this.changeAvatarExpression('😟');
                        }
                    });
                });
                

                
                // Botão de compra de adubo removido - agora vem da compostagem
                
                // Loja - vender produtos
                document.getElementById('sell-milk').addEventListener('click', () => {
                    if (this.milk > 0) {
                        const soldMilk = this.milk;
                        this.coins += this.milk * 15;
                        this.milk = 0;
                        this.showMessage(`🥛 ${soldMilk} leite vendido por ${soldMilk * 15} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum leite para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                document.getElementById('sell-eggs').addEventListener('click', () => {
                    if (this.eggs > 0) {
                        const soldEggs = this.eggs;
                        this.coins += this.eggs * 8;
                        this.eggs = 0;
                        this.showMessage(`🥚 ${soldEggs} ovos vendidos por ${soldEggs * 8} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum ovo para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                document.getElementById('sell-roasted-coffee').addEventListener('click', () => {
                    if (this.roastedCoffee > 0) {
                        const soldCoffee = this.roastedCoffee;
                        this.coins += this.roastedCoffee * 80;
                        this.roastedCoffee = 0;
                        this.showMessage(`☕ ${soldCoffee} café torrado vendido por ${soldCoffee * 80} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum café torrado para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Alimentar vacas
                document.getElementById('feed-cows').addEventListener('click', () => {
                    this.feedCows();
                });
                
                // Ordenhar vacas
                document.getElementById('cow1').addEventListener('click', () => {
                    this.milkCow(1);
                });
                
                document.getElementById('cow2').addEventListener('click', () => {
                    this.milkCow(2);
                });
                
                // Alimentar galinhas
                document.getElementById('feed-chickens').addEventListener('click', () => {
                    this.feedChickens();
                });
                
                // Coletar ovos
                document.getElementById('collect-eggs').addEventListener('click', () => {
                    this.collectEggs();
                });
                
                // Alimentar porcos
                document.getElementById('feed-pigs').addEventListener('click', () => {
                    this.feedPigs();
                });
                
                // Colher carne dos porcos
                document.getElementById('pig1').addEventListener('click', () => {
                    this.harvestPork(1);
                });
                
                document.getElementById('pig2').addEventListener('click', () => {
                    this.harvestPork(2);
                });
                
                // Fazer pão
                document.getElementById('make-bread').addEventListener('click', () => {
                    this.makeBread();
                });
                
                // Fazer queijo
                document.getElementById('make-cheese').addEventListener('click', () => {
                    this.makeCheese();
                });
                
                // Torrar café
                document.getElementById('roast-coffee').addEventListener('click', () => {
                    this.roastCoffee();
                });
                
                // Comprar machado
                document.getElementById('buy-axe').addEventListener('click', () => {
                    this.buyAxe();
                });
                
                // Cortar árvore
                document.getElementById('tree').addEventListener('click', () => {
                    this.chopWood();
                });
                
                // Adicionar lenha ao forno
                document.getElementById('add-wood').addEventListener('click', () => {
                    this.addWoodToOven();
                });
                
                // Adicionar lenha à torradora
                document.getElementById('add-wood-roaster').addEventListener('click', () => {
                    this.addWoodToRoaster();
                });
                
                // Vender pão
                document.getElementById('sell-bread').addEventListener('click', () => {
                    if (this.bread > 0) {
                        const soldBread = this.bread;
                        this.coins += this.bread * 50;
                        this.bread = 0;
                        this.showMessage(`🍞 ${soldBread} pães vendidos por ${soldBread * 50} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum pão para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Vender queijo
                document.getElementById('sell-cheese').addEventListener('click', () => {
                    if (this.cheese > 0) {
                        const soldCheese = this.cheese;
                        this.coins += this.cheese * 35;
                        this.cheese = 0;
                        this.showMessage(`🧀 ${soldCheese} queijos vendidos por ${soldCheese * 35} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum queijo para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Vender suco de uva
                document.getElementById('sell-grape-juice').addEventListener('click', () => {
                    if (this.grapeJuice > 0) {
                        const soldJuice = this.grapeJuice;
                        this.coins += this.grapeJuice * 60;
                        this.grapeJuice = 0;
                        this.showMessage(`🧃 ${soldJuice} garrafas de suco vendidas por ${soldJuice * 60} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum suco de uva para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Vender carne suína
                document.getElementById('sell-pork-meat').addEventListener('click', () => {
                    if (this.porkMeat > 0) {
                        const soldMeat = this.porkMeat;
                        this.coins += this.porkMeat * 120;
                        this.porkMeat = 0;
                        this.showMessage(`🥩 ${soldMeat} carnes suínas vendidas por ${soldMeat * 120} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhuma carne suína para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Fazer suco de uva
                document.getElementById('make-grape-juice').addEventListener('click', () => {
                    this.makeGrapeJuice();
                });
                
                // Fazer feno
                document.getElementById('make-hay').addEventListener('click', () => {
                    this.makeHay();
                });
                
                // Fazer ração para galinhas
                document.getElementById('make-chicken-feed').addEventListener('click', () => {
                    this.makeChickenFeed();
                });
                
                // Fazer ração para porcos
                document.getElementById('make-pig-feed').addEventListener('click', () => {
                    this.makePigFeed();
                });
                
                // Fazer novelos
                document.getElementById('make-yarn').addEventListener('click', () => {
                    this.makeYarn();
                });
                
                // Vender novelos
                document.getElementById('sell-yarn').addEventListener('click', () => {
                    if (this.yarn > 0) {
                        const soldYarn = this.yarn;
                        this.coins += this.yarn * 60;
                        this.yarn = 0;
                        this.showMessage(`🧶 ${soldYarn} novelos vendidos por ${soldYarn * 60} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum novelo para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Alimentar ovelhas
                document.getElementById('feed-sheep').addEventListener('click', () => {
                    this.feedSheep();
                });
                
                // Colher lã das ovelhas
                document.getElementById('sheep1').addEventListener('click', () => {
                    this.harvestWool(1);
                });
                
                document.getElementById('sheep2').addEventListener('click', () => {
                    this.harvestWool(2);
                });
                
                // Fazer compostagem
                document.getElementById('make-compost').addEventListener('click', () => {
                    this.makeCompost();
                });
                
                // Poço
                document.getElementById('well').addEventListener('click', () => {
                    this.collectWater();
                });
                
                // Colmeia
                document.getElementById('hive').addEventListener('click', () => {
                    this.collectHoney();
                });
                
                // Vender mel
                document.getElementById('sell-honey').addEventListener('click', () => {
                    if (this.honey > 0) {
                        const soldHoney = this.honey;
                        this.coins += this.honey * 40;
                        this.honey = 0;
                        this.showMessage(`🍯 ${soldHoney} potes de mel vendidos por ${soldHoney * 40} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhum mel para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Fazer farinha
                document.getElementById('make-flour').addEventListener('click', () => {
                    this.makeFlour();
                });
                
                // Vender farinha
                document.getElementById('sell-flour').addEventListener('click', () => {
                    if (this.flour > 0) {
                        const soldFlour = this.flour;
                        this.coins += this.flour * 25;
                        this.flour = 0;
                        this.showMessage(`🌾 ${soldFlour} pacotes de farinha vendidos por ${soldFlour * 25} moedas!`, 'success');
                        this.changeAvatarExpression('🤑');
                        this.celebrateAvatar();
                        this.updateUI();
                    } else {
                        this.showMessage('Nenhuma farinha para vender!', 'error');
                        this.changeAvatarExpression('😔');
                    }
                });
                
                // Alimentar cavalo
                document.getElementById('feed-horse').addEventListener('click', () => {
                    this.feedHorse();
                });
                
                // Montar cavalo
                document.getElementById('horse1').addEventListener('click', () => {
                    this.rideHorse();
                });
                
                // Entregar pedidos
                document.getElementById('deliver-orders').addEventListener('click', () => {
                    this.deliverOrders();
                });
                
                // Fogão a lenha
                document.getElementById('add-wood-stove').addEventListener('click', () => {
                    this.addWoodToStove();
                });
                
                document.getElementById('cook-meal').addEventListener('click', () => {
                    this.cookMeal();
                });
                
                document.getElementById('eat-meal').addEventListener('click', () => {
                    this.eatMeal();
                });
                
                // Expansão de canteiros
                document.getElementById('expand-plots').addEventListener('click', () => {
                    this.expandPlots();
                });
                
                // Compra de setores
                document.querySelectorAll('.sector-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const sector = e.target.dataset.sector;
                        const cost = parseInt(e.target.dataset.cost);
                        this.buySector(sector, cost);
                    });
                });
                
                // Compra de animais
                document.querySelectorAll('.animal-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const animal = e.target.dataset.animal;
                        const cost = parseInt(e.target.dataset.cost);
                        this.buyAnimal(animal, cost);
                    });
                });
                
                // Ações com animais
                document.getElementById('sacrifice-chicken').addEventListener('click', () => {
                    this.sacrificeChicken();
                });
                
                document.getElementById('grow-chick').addEventListener('click', () => {
                    this.growChick();
                });
            }
            
            updateHarvestShop() {
                const harvestShop = document.getElementById('harvest-shop');
                harvestShop.innerHTML = '';
                
                Object.keys(this.harvestInventory).forEach(crop => {
                    const quantity = this.harvestInventory[crop];
                    if (quantity > 0) {
                        const seedInfo = this.seedTypes[crop];
                        const sellPrice = Math.floor(seedInfo.reward * 0.8); // 80% do valor da recompensa
                        
                        const button = document.createElement('button');
                        button.className = 'bg-green-500 hover:bg-green-600 text-white px-2 py-2 rounded-lg font-bold text-xs transition-colors';
                        button.innerHTML = `${seedInfo.icon}<br>${quantity}<br>${sellPrice}💰`;
                        button.title = `Vender ${crop} por ${sellPrice} moedas cada`;
                        
                        button.addEventListener('click', () => {
                            this.sellHarvest(crop);
                        });
                        
                        harvestShop.appendChild(button);
                    }
                });
                
                if (harvestShop.children.length === 0) {
                    harvestShop.innerHTML = '<p class="text-gray-500 text-sm col-span-3 text-center">Nenhuma colheita disponível</p>';
                }
            }
            
            sellHarvest(cropType) {
                const quantity = this.harvestInventory[cropType];
                if (quantity > 0) {
                    const seedInfo = this.seedTypes[cropType];
                    const sellPrice = Math.floor(seedInfo.reward * 0.8);
                    const totalEarned = quantity * sellPrice;
                    
                    this.coins += totalEarned;
                    this.harvestInventory[cropType] = 0;
                    
                    this.playSound('coin');
                    this.showMessage(`${seedInfo.icon} ${quantity} vendidas por ${totalEarned} moedas!`, 'success');
                    this.changeAvatarExpression('🤑');
                    this.celebrateAvatar();
                    this.updateUI();
                    this.updateHarvestShop();
                }
            }
            
            feedCows() {
                if (this.hay < 2) {
                    this.showMessage('Precisa de 2 blocos de feno para alimentar as vacas! 🟫', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.cowsFed) {
                    this.showMessage('Vacas já foram alimentadas hoje! 🐄', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.hay -= 2;
                this.cowsFed = true;
                this.playSound('cow');
                this.showMessage('🐄 Vacas alimentadas! Leite pronto em 15 segundos!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Produzir leite após 15 segundos
                setTimeout(() => {
                    this.showMessage('🥛 Vacas produziram leite! Clique nelas para ordenhar!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateCowDisplay();
                }, 15000);
                
                this.updateCowDisplay();
                this.updateUI();
            }
            
            feedChickens() {
                if (this.chickenFeed < 2) {
                    this.showMessage('Precisa de 2 rações para alimentar as galinhas! 🌾', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.chickensFed) {
                    this.showMessage('Galinhas já foram alimentadas hoje! 🐔', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.chickenFeed -= 2;
                this.chickensFed = true;
                this.playSound('chicken');
                this.showMessage('🐔 Galinhas alimentadas! Ovos prontos em 15 segundos!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Produzir ovos após 15 segundos
                setTimeout(() => {
                    this.availableEggs += 4; // 2 galinhas x 2 ovos cada
                    this.updateEggDisplay();
                    this.showMessage('🥚 Galinhas botaram ovos! Clique para coletar!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateChickenDisplay();
                }, 15000);
                
                this.updateChickenDisplay();
                this.updateUI();
            }
            
            feedPigs() {
                if (this.pigFeed < 2) {
                    this.showMessage('Precisa de 2 rações para alimentar os porcos! 🍲', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.pigsFed) {
                    this.showMessage('Porcos já foram alimentados hoje! 🐷', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.pigFeed -= 2;
                this.pigsFed = true;
                this.playSound('cow'); // Som similar para porcos
                this.showMessage('🐷 Porcos alimentados! Carne pronta em 15 segundos!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Produzir carne após 15 segundos
                setTimeout(() => {
                    this.showMessage('🥩 Porcos produziram carne! Clique neles para colher!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updatePigDisplay();
                }, 15000);
                
                this.updatePigDisplay();
                this.updateUI();
            }
            
            feedSheep() {
                if (this.hay < 2) {
                    this.showMessage('Precisa de 2 blocos de feno para alimentar as ovelhas! 🟫', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.sheepFed) {
                    this.showMessage('Ovelhas já foram alimentadas hoje! 🐑', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.hay -= 2;
                this.sheepFed = true;
                this.playSound('cow'); // Som similar para ovelhas
                this.showMessage('🐑 Ovelhas alimentadas! Lã pronta em 15 segundos!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Produzir lã após 15 segundos
                setTimeout(() => {
                    this.showMessage('☁️ Ovelhas produziram lã! Clique nelas para tosquiar!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateSheepDisplay();
                }, 15000);
                
                this.updateSheepDisplay();
                this.updateUI();
            }
            
            harvestPork(pigNumber) {
                if (!this.pigsFed) {
                    this.showMessage('Porcos precisam ser alimentados primeiro! 🍲', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                const isPig1 = pigNumber === 1;
                const pigHarvested = isPig1 ? this.pig1Harvested : this.pig2Harvested;
                
                if (pigHarvested) {
                    this.showMessage(`Porco ${pigNumber} já foi colhido hoje! 🐷`, 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.porkMeat += 1;
                if (isPig1) {
                    this.pig1Harvested = true;
                } else {
                    this.pig2Harvested = true;
                }
                
                this.playSound('harvest');
                this.showMessage(`🐷 Porco ${pigNumber} colhido! +1 carne suína!`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updatePigDisplay();
                this.updateUI();
            }
            
            harvestWool(sheepNumber) {
                if (!this.sheepFed) {
                    this.showMessage('Ovelhas precisam ser alimentadas primeiro! 🟫', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                const isSheep1 = sheepNumber === 1;
                const sheepHarvested = isSheep1 ? this.sheep1Harvested : this.sheep2Harvested;
                
                if (sheepHarvested) {
                    this.showMessage(`Ovelha ${sheepNumber} já foi tosquiada hoje! 🐑`, 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.wool += 1;
                if (isSheep1) {
                    this.sheep1Harvested = true;
                } else {
                    this.sheep2Harvested = true;
                }
                
                this.playSound('harvest');
                this.showMessage(`🐑 Ovelha ${sheepNumber} tosquiada! +1 tufo de lã (☁️)!`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateSheepDisplay();
                this.updateUI();
            }
            
            milkCow(cowNumber) {
                if (!this.cowsFed) {
                    this.showMessage('Vacas precisam ser alimentadas primeiro! 🟫', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                const isCow1 = cowNumber === 1;
                const cowMilked = isCow1 ? this.cow1Milked : this.cow2Milked;
                
                if (cowMilked) {
                    this.showMessage(`Vaca ${cowNumber} já foi ordenhada hoje! 🐄`, 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.milk += 3; // Cada vaca dá 3 leites
                if (isCow1) {
                    this.cow1Milked = true;
                } else {
                    this.cow2Milked = true;
                }
                
                this.playSound('cow');
                this.showMessage(`🐄 Vaca ${cowNumber} ordenhada! +3 leite coletado!`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateCowDisplay();
                this.updateUI();
            }
            
            collectEggs() {
                if (this.availableEggs > 0) {
                    const collectedEggs = this.availableEggs;
                    this.eggs += this.availableEggs;
                    this.availableEggs = 0;
                    this.updateEggDisplay();
                    this.playSound('chicken');
                    this.showMessage(`🥚 +${collectedEggs} ovos coletados!`, 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateUI();
                } else {
                    this.showMessage('Nenhum ovo disponível!', 'error');
                    this.changeAvatarExpression('😔');
                }
            }
            
            makeCompost() {
                // Verificar se tem os ingredientes necessários
                if (this.manure < 2) {
                    this.showMessage('Precisa de 2 estercos para fazer compostagem! 💩', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.branches < 1) {
                    this.showMessage('Precisa de 1 galho com folhas para fazer compostagem! 🌿', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.yellowFlowers < 1) {
                    this.showMessage('Precisa de 1 flor amarela para fazer compostagem! 🌼', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingCompost) {
                    this.showMessage('Composteira ocupada! Aguarde o adubo ficar pronto! 🗑️', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.manure -= 2;
                this.branches -= 1;
                this.yellowFlowers -= 1;
                
                // Iniciar processo de compostagem
                this.isMakingCompost = true;
                this.compostStartDay = this.dayCount;
                this.playSound('baking');
                this.showMessage('🗑️ Materiais na composteira! Adubo pronto em 1 dia!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                this.updateCompostDisplay();
                this.updateUI();
            }
            
            updateCompostDisplay() {
                const compostTimer = document.getElementById('compost-timer');
                const compostMaterials = document.getElementById('compost-materials');
                const compostSteam = document.getElementById('compost-steam');
                
                // Limpar materiais visuais
                compostMaterials.innerHTML = '';
                
                if (this.isMakingCompost) {
                    // Mostrar materiais sendo compostados
                    const materials = ['💩', '💩', '🌿', '🌼'];
                    materials.forEach(material => {
                        const item = document.createElement('div');
                        item.textContent = material;
                        item.className = 'text-xs';
                        compostMaterials.appendChild(item);
                    });
                    
                    const daysLeft = Math.max(0, 1 - (this.dayCount - this.compostStartDay));
                    if (daysLeft > 0) {
                        compostTimer.textContent = `Compostando... (${daysLeft} dia restante)`;
                        compostTimer.className = 'text-orange-600 font-bold';
                        compostSteam.textContent = '💨';
                    } else {
                        compostTimer.textContent = 'Adubo pronto! Clique para coletar';
                        compostTimer.className = 'text-green-600 font-bold';
                        compostSteam.textContent = '✨';
                    }
                } else {
                    compostTimer.textContent = 'Pronto para usar';
                    compostTimer.className = 'text-green-600 font-bold';
                    compostSteam.textContent = '💨';
                }
            }
            
            collectWater() {
                if (this.waterBuckets > 0) {
                    this.waterBuckets -= 1;
                    this.water += 12;
                    this.playSound('water');
                    this.showMessage('💧 +1 balde coletado! (12 regas)', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                    this.updateWellDisplay();
                    this.updateUI();
                } else {
                    this.showMessage('Poço vazio! Aguarde recarregar!', 'error');
                    this.changeAvatarExpression('😔');
                }
            }
            
            buyAxe() {
                if (this.hasAxe) {
                    this.showMessage('Você já tem um machado! 🪓', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                if (this.coins < 50) {
                    this.showMessage('Precisa de 50 moedas para comprar o machado! 💸', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                this.coins -= 50;
                this.hasAxe = true;
                this.axeUses = 0;
                this.playSound('coin');
                this.showMessage('🪓 Machado comprado! Agora pode cortar lenha!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateAxeDisplay();
                this.updateUI();
            }
            
            chopWood() {
                if (!this.hasAxe) {
                    this.showMessage('Precisa comprar um machado primeiro! 🪓', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (!this.treeAlive) {
                    this.showMessage('Árvore não existe! Aguarde 5 minutos para renascer! 🌱', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                // Usar machado
                this.axeUses += 1;
                this.treeWoodCount += 1;
                this.wood += 3; // Cada corte dá 3 lenhas
                this.woodChopped += 3; // Contador total de lenhas cortadas
                
                this.playSound('harvest');
                this.showMessage('🪵 +3 lenhas coletadas!', 'success');
                this.changeAvatarExpression('💪');
                this.celebrateAvatar();
                
                // Verificar se deve soltar galho com folhas (a cada 4 lenhas)
                if (this.woodChopped % 4 === 0) {
                    this.branches += 1;
                    this.showMessage('🌿 Galho com folhas caiu! +1 coletado!', 'success');
                    this.changeAvatarExpression('🌿');
                    this.celebrateAvatar();
                }
                
                // Verificar se machado quebrou
                if (this.axeUses >= this.maxAxeUses) {
                    this.hasAxe = false;
                    this.axeUses = 0;
                    this.showMessage('💥 Machado quebrou! Compre um novo!', 'error');
                    this.changeAvatarExpression('😱');
                }
                
                // Verificar se árvore morreu
                if (this.treeWoodCount >= this.maxTreeWood) {
                    this.treeAlive = false;
                    this.showMessage('🌳 Árvore desapareceu! Nova árvore em 5 minutos!', 'error');
                    this.changeAvatarExpression('😮');
                    
                    // Árvore renasce em 5 minutos
                    setTimeout(() => {
                        this.treeAlive = true;
                        this.treeWoodCount = 0;
                        this.showMessage('🌳 Nova árvore cresceu!', 'success');
                        this.changeAvatarExpression('😊');
                        this.celebrateAvatar();
                        this.updateTreeDisplay();
                    }, 300000); // 5 minutos
                }
                
                this.updateAxeDisplay();
                this.updateTreeDisplay();
                this.updateUI();
            }
            
            addWoodToOven() {
                if (this.wood < 1) {
                    this.showMessage('Precisa de lenha! Corte a árvore primeiro! 🪵', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.ovenWood >= 2) {
                    this.showMessage('Forno já tem lenha suficiente! 🔥', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.wood -= 1;
                this.ovenWood += 1;
                
                if (this.ovenWood >= 2 && !this.ovenLit) {
                    this.ovenLit = true;
                    this.playSound('baking');
                    this.showMessage('🔥 Forno aceso! Agora pode assar pão!', 'success');
                    this.changeAvatarExpression('😊');
                    this.celebrateAvatar();
                } else {
                    this.showMessage(`🪵 Lenha adicionada! (${this.ovenWood}/2)`, 'success');
                    this.changeAvatarExpression('😊');
                }
                
                this.updateOvenDisplay();
                this.updateUI();
            }
            
            addWoodToRoaster() {
                if (this.wood < 1) {
                    this.showMessage('Precisa de lenha! Corte a árvore primeiro! 🪵', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.roasterWood >= 2) {
                    this.showMessage('Torradora já tem lenha suficiente! 🔥', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.wood -= 1;
                this.roasterWood += 1;
                
                this.showMessage(`🪵 Lenha adicionada à torradora! (${this.roasterWood}/2)`, 'success');
                this.changeAvatarExpression('😊');
                
                this.updateRoasterDisplay();
                this.updateUI();
            }
            
            makeBread() {
                // Verificar se tem os ingredientes necessários
                if (this.eggs < 1) {
                    this.showMessage('Precisa de 1 ovo para fazer pão! 🥚', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.milk < 1) {
                    this.showMessage('Precisa de 1 leite para fazer pão! 🥛', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.flour < 1) {
                    this.showMessage('Precisa de 1 farinha para fazer pão! ⚪', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (!this.ovenLit) {
                    this.showMessage('Forno precisa estar aceso! Adicione 2 lenhas! 🔥', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.isBaking) {
                    this.showMessage('Forno ocupado! Aguarde o pão ficar pronto! 🔥', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.eggs -= 1;
                this.milk -= 1;
                this.flour -= 1;
                
                // Iniciar processo de assar
                this.isBaking = true;
                this.playSound('baking');
                this.showMessage('🍞 Massa preparada! Assando no forno...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Pão fica pronto em 20 segundos
                setTimeout(() => {
                    this.bread += 1;
                    this.isBaking = false;
                    // Consumir lenha do forno após assar
                    this.ovenWood = 0;
                    this.ovenLit = false;
                    this.playSound('oven');
                    this.showMessage('🍞 Pão assado! Forno apagou, precisa de mais lenha.', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateOvenDisplay();
                    this.updateUI();
                    this.updateHarvestShop();
                }, 20000);
                
                this.updateUI();
                this.updateHarvestShop();
            }
            
            makeCheese() {
                // Verificar se tem os ingredientes necessários
                if (this.milk < 2) {
                    this.showMessage('Precisa de 2 leites para fazer queijo! 🥛', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                if (this.isMakingCheese) {
                    this.showMessage('Prensa ocupada! Aguarde o queijo ficar pronto! 🗜️', 'error');
                    this.changeAvatarExpression('⏰');
                    return;
                }
                
                // Consumir ingredientes
                this.milk -= 2;
                
                // Iniciar processo de prensar
                this.isMakingCheese = true;
                this.playSound('baking');
                this.showMessage('🧀 Leite coalhado! Prensando queijo...', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                // Queijo fica pronto em 30 segundos
                setTimeout(() => {
                    this.cheese += 1;
                    this.isMakingCheese = false;
                    this.playSound('oven');
                    this.showMessage('🧀 Queijo prensado e pronto! Delicioso!', 'success');
                    this.changeAvatarExpression('😋');
                    this.celebrateAvatar();
                    this.updateUI();
                }, 30000);
                
                this.updateUI();
            }
            
            updateSeedSelection() {
                document.querySelectorAll('.seed-btn').forEach(btn => {
                    btn.classList.remove('ring-4', 'ring-white');
                });
                
                if (this.selectedSeed) {
                    document.querySelector(`[data-seed="${this.selectedSeed}"]`).classList.add('ring-4', 'ring-white');
                }
            }
            
            handlePlotClick(plotIndex) {
                const plot = this.plots[plotIndex];
                
                if (plot.state === 'locked') {
                    this.expandPlots();
                    return;
                }
                
                if (plot.state === 'empty') {
                    this.fertilizePlot(plotIndex);
                } else if (plot.state === 'fertilized' && this.selectedSeed) {
                    this.plantSeed(plotIndex);
                } else if (plot.state === 'needs-water') {
                    this.waterPlant(plotIndex);
                } else if (plot.state === 'ready') {
                    this.harvestPlot(plotIndex);
                }
            }
            
            fertilizePlot(plotIndex) {
                const plot = this.plots[plotIndex];
                
                if (this.fertilizer < 1) {
                    this.showMessage('Adubo insuficiente! 🌿', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.avatarEnergy <= 0) {
                    this.showMessage('😴 Sem energia! Coma uma refeição para continuar!', 'error');
                    this.changeAvatarExpression('😵');
                    return;
                }
                
                this.fertilizer -= 1;
                this.reduceAvatarEnergy(3); // Reduzir energia por adubar
                plot.state = 'fertilized';
                plot.element.className = 'farm-plot w-20 h-20 fertilized rounded-lg flex items-center justify-center text-2xl font-bold shadow-md cursor-pointer';
                plot.element.innerHTML = '🍂';
                plot.element.title = 'Solo adubado! Selecione uma semente para plantar.';
                
                this.playSound('fertilize');
                this.showMessage('Solo adubado! Agora pode plantar! 🍃', 'success');
                this.changeAvatarExpression('😊');
                this.updateUI();
            }
            
            plantSeed(plotIndex) {
                const plot = this.plots[plotIndex];
                const seedInfo = this.seedTypes[this.selectedSeed];
                
                if (this.coins < seedInfo.cost) {
                    this.showMessage('Moedas insuficientes! 💸', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.avatarEnergy <= 0) {
                    this.showMessage('😴 Sem energia! Coma uma refeição para continuar!', 'error');
                    this.changeAvatarExpression('😵');
                    return;
                }
                
                this.coins -= seedInfo.cost;
                this.reduceAvatarEnergy(4); // Reduzir energia por plantar
                plot.state = 'needs-water';
                plot.seedType = this.selectedSeed;
                plot.element.className = 'farm-plot w-20 h-20 needs-water rounded-lg flex items-center justify-center text-2xl font-bold shadow-md cursor-pointer';
                plot.element.innerHTML = '🌱💧';
                plot.element.title = `Clique para regar! Precisa de ${seedInfo.waterNeeded} água`;
                
                this.playSound('plant');
                this.showMessage(`${seedInfo.icon} plantado! Clique para regar! 💧`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                this.selectedSeed = null;
                this.updateSeedSelection();
                this.updateUI();
            }
            
            waterPlant(plotIndex, isRain = false) {
                const plot = this.plots[plotIndex];
                const seedInfo = this.seedTypes[plot.seedType];
                
                if (!isRain) {
                    if (this.water < seedInfo.waterNeeded) {
                        this.showMessage(`Precisa de ${seedInfo.waterNeeded} água! 💧`, 'error');
                        this.changeAvatarExpression('😟');
                        return;
                    }
                    
                    if (this.avatarEnergy <= 0) {
                        this.showMessage('😴 Sem energia! Coma uma refeição para continuar!', 'error');
                        this.changeAvatarExpression('😵');
                        return;
                    }
                    
                    this.water -= seedInfo.waterNeeded;
                    this.reduceAvatarEnergy(2); // Reduzir energia por regar
                }
                
                plot.state = 'growing';
                plot.element.className = 'farm-plot w-20 h-20 growing border-2 border-green-600 rounded-lg flex items-center justify-center text-2xl font-bold shadow-md';
                
                // Sistema especial para café com estágios
                if (plot.seedType === 'coffee') {
                    this.coffeeStages[plotIndex] = 0;
                    plot.element.innerHTML = seedInfo.stages[0];
                    this.growCoffeeStages(plotIndex);
                } else {
                    plot.element.innerHTML = '🍂';
                }
                
                plot.element.title = 'Crescendo...';
                
                if (!isRain) {
                    this.playSound('water');
                    this.showMessage(`${seedInfo.icon} regado! Crescendo... 🌿`, 'success');
                    this.changeAvatarExpression('😊');
                }
                
                // Planta pronta para colheita
                setTimeout(() => {
                    if (plot.state === 'growing') {
                        plot.state = 'ready';
                        plot.element.className = 'farm-plot w-20 h-20 ready border-2 border-yellow-500 rounded-lg flex items-center justify-center text-2xl font-bold shadow-md cursor-pointer';
                        
                        if (plot.seedType === 'coffee') {
                            plot.element.innerHTML = `<span class="plant-icon">🔴</span>`;
                        } else {
                            plot.element.innerHTML = `<span class="plant-icon">${seedInfo.icon}</span>`;
                        }
                        
                        plot.element.title = 'Clique para colher!';
                        this.showMessage(`${plot.seedType === 'coffee' ? '☕ Café' : seedInfo.icon} pronto para colher! ✨`, 'success');
                        this.changeAvatarExpression('😊');
                    }
                }, seedInfo.growTime);
                
                this.updateUI();
            }
            
            growCoffeeStages(plotIndex) {
                const plot = this.plots[plotIndex];
                const seedInfo = this.seedTypes.coffee;
                const stageInterval = seedInfo.growTime / seedInfo.stages.length;
                
                const growStage = () => {
                    if (plot.state === 'growing' && this.coffeeStages[plotIndex] < seedInfo.stages.length - 1) {
                        this.coffeeStages[plotIndex]++;
                        plot.element.innerHTML = seedInfo.stages[this.coffeeStages[plotIndex]];
                        
                        if (this.coffeeStages[plotIndex] < seedInfo.stages.length - 1) {
                            setTimeout(growStage, stageInterval);
                        }
                    }
                };
                
                setTimeout(growStage, stageInterval);
            }
            
            harvestPlot(plotIndex) {
                const plot = this.plots[plotIndex];
                const seedInfo = this.seedTypes[plot.seedType];
                const cropType = plot.seedType;
                
                if (this.avatarEnergy <= 0) {
                    this.showMessage('😴 Sem energia! Coma uma refeição para continuar!', 'error');
                    this.changeAvatarExpression('😵');
                    return;
                }
                
                // Adicionar ao inventário de colheitas - todas as plantações dão 2 frutos
                this.harvestInventory[cropType] += 2;
                this.reduceAvatarEnergy(5); // Reduzir energia por colher
                
                plot.state = 'empty';
                plot.seedType = null;
                plot.element.className = 'farm-plot w-20 h-20 bg-amber-800 border-2 border-amber-900 rounded-lg flex items-center justify-center text-2xl font-bold shadow-md';
                plot.element.innerHTML = '';
                
                // Animação de moedas
                plot.element.classList.add('coin-animation');
                setTimeout(() => {
                    plot.element.classList.remove('coin-animation');
                }, 600);
                
                this.playSound('harvest');
                this.showMessage(`${seedInfo.icon} +2 frutos colhidos! Venda na loja! 🌾`, 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.checkLevelUp();
                this.updateUI();
                this.updateHarvestShop();
            }
            
            checkLevelUp() {
                const newLevel = Math.floor(this.coins / 200) + 1;
                if (newLevel > this.level) {
                    this.level = newLevel;
                    this.showMessage(`🎉 Nível ${this.level} alcançado!`, 'success');
                    this.changeAvatarExpression('🎉');
                    this.celebrateAvatar();
                }
            }
            
            showMessage(text, type) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `fixed top-20 right-4 px-6 py-3 rounded-lg font-bold text-white z-50 ${
                    type === 'success' ? 'bg-green-500' : 'bg-red-500'
                }`;
                messageDiv.textContent = text;
                
                document.body.appendChild(messageDiv);
                
                setTimeout(() => {
                    messageDiv.remove();
                }, 3000);
            }
            
            feedHorse() {
                if (this.hay < 1) {
                    this.showMessage('Precisa de 1 bloco de feno para alimentar o cavalo! 🟫', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.horseFed) {
                    this.showMessage('Cavalo já foi alimentado hoje! 🐴', 'error');
                    this.changeAvatarExpression('🤔');
                    return;
                }
                
                this.hay -= 1;
                this.horseFed = true;
                this.horseEnergy = 100;
                this.playSound('cow'); // Som similar para cavalo
                this.showMessage('🐴 Cavalo alimentado! Agora tem energia para cavalgar!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                
                this.updateHorseDisplay();
                this.updateUI();
            }
            
            rideHorse() {
                if (!this.horseFed) {
                    this.showMessage('Cavalo precisa ser alimentado primeiro! 🟫', 'error');
                    this.changeAvatarExpression('😟');
                    return;
                }
                
                if (this.horseEnergy <= 0) {
                    this.showMessage('Cavalo sem energia! Alimente-o novamente amanhã! 🐴', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                // Cavalgar dá bonus de moedas
                const bonus = Math.floor(Math.random() * 20) + 10; // 10-30 moedas
                this.coins += bonus;
                this.horseEnergy -= 25; // Cada cavalgada consome 25 energia
                
                this.playSound('harvest');
                this.showMessage(`🐴 Cavalgada! +${bonus} moedas encontradas! Energia: ${this.horseEnergy}%`, 'success');
                this.changeAvatarExpression('🤠');
                this.celebrateAvatar();
                
                this.updateHorseDisplay();
                this.updateUI();
            }
            
            collectHorseManure() {
                if (!this.horseManureAvailable) {
                    this.showMessage('Nenhum esterco do cavalo disponível hoje!', 'error');
                    this.changeAvatarExpression('😔');
                    return;
                }
                
                this.manure += 1;
                this.horseManureAvailable = false;
                
                // Remover esterco visual do cavalo
                const horseManurePile = document.getElementById('horse-manure-pile');
                if (horseManurePile) {
                    horseManurePile.remove();
                }
                
                this.playSound('harvest');
                this.showMessage('💩 +1 esterco do cavalo coletado!', 'success');
                this.changeAvatarExpression('😊');
                this.celebrateAvatar();
                this.updateUI();
            }
            
            updateHorseDisplay() {
                const horseStatus = document.getElementById('horse-status');
                const horseFeeder = document.getElementById('horse-feeder');
                
                // Limpar comedouro
                horseFeeder.innerHTML = '';
                
                // Mostrar feno no comedouro se o cavalo foi alimentado
                if (this.horseFed) {
                    const hay = document.createElement('div');
                    hay.textContent = '🟫';
                    hay.className = 'text-sm';
                    horseFeeder.appendChild(hay);
                }
                
                // Mostrar esterco do cavalo se disponível
                if (this.horseManureAvailable) {
                    const manureElement = document.createElement('div');
                    manureElement.textContent = '💩';
                    manureElement.className = 'absolute bottom-2 right-8 text-2xl cursor-pointer hover:scale-110 transition-transform';
                    manureElement.title = 'Clique para coletar esterco do cavalo!';
                    manureElement.id = 'horse-manure-pile';
                    manureElement.addEventListener('click', () => this.collectHorseManure());
                    
                    // Adicionar ao estábulo se não existir
                    const stable = document.querySelector('.bg-amber-200');
                    const existingManure = document.getElementById('horse-manure-pile');
                    if (!existingManure && stable) {
                        stable.appendChild(manureElement);
                    }
                }
                
                // Atualizar status do cavalo
                if (!this.horseFed) {
                    horseStatus.textContent = 'Faminto - sem energia';
                    horseStatus.className = 'text-red-600 font-bold';
                } else {
                    horseStatus.textContent = `Alimentado - Energia: ${this.horseEnergy}%`;
                    if (this.horseEnergy > 50) {
                        horseStatus.className = 'text-green-600 font-bold';
                    } else if (this.horseEnergy > 0) {
                        horseStatus.className = 'text-orange-600 font-bold';
                    } else {
                        horseStatus.className = 'text-red-600 font-bold';
                    }
                }
            }

            updateUI() {
                document.getElementById('coins').textContent = this.coins;
                document.getElementById('water').textContent = this.water;
                document.getElementById('milk').textContent = this.milk;
                document.getElementById('eggs').textContent = this.eggs;
                document.getElementById('bread').textContent = this.bread;
                document.getElementById('cheese').textContent = this.cheese;
                document.getElementById('wood').textContent = this.wood;
                document.getElementById('roasted-coffee').textContent = this.roastedCoffee;
                document.getElementById('grape-juice').textContent = this.grapeJuice;
                document.getElementById('grass').textContent = this.grass;
                document.getElementById('hay').textContent = this.hay;
                document.getElementById('chicken-feed').textContent = this.chickenFeed;
                document.getElementById('pig-feed').textContent = this.pigFeed;
                document.getElementById('pork-meat').textContent = this.porkMeat;
                document.getElementById('wool').textContent = this.wool;
                document.getElementById('yarn').textContent = this.yarn;
                document.getElementById('manure').textContent = this.manure;
                document.getElementById('yellow-flowers').textContent = this.yellowFlowers;
                document.getElementById('branches').textContent = this.branches;
                document.getElementById('fertilizer').textContent = this.fertilizer;
                document.getElementById('flour').textContent = this.flour;
                document.getElementById('raw-chicken').textContent = this.rawChicken;
                document.getElementById('chicks').textContent = this.ownedAnimals.chicks;
                document.getElementById('cooked-meals').textContent = this.cookedMeals;
                document.getElementById('avatar-energy').textContent = this.avatarEnergy;
                document.getElementById('level').textContent = this.level;
                
                // Atualizar contadores de animais
                document.getElementById('owned-chickens').textContent = this.ownedAnimals.chickens;
                document.getElementById('owned-cows').textContent = this.ownedAnimals.cows;
                document.getElementById('owned-sheep').textContent = this.ownedAnimals.sheep;
                document.getElementById('owned-pigs').textContent = this.ownedAnimals.pigs;
                document.getElementById('owned-horses').textContent = this.ownedAnimals.horses;
                
                this.updateAxeDisplay();
                this.updateTreeDisplay();
                this.updateOvenDisplay();
                this.updateStoveDisplay();
                this.updateRoasterDisplay();
                this.updateHayDisplay();
                this.updateYarnDisplay();
                this.updateFeedDisplay();
                this.updateFlourDisplay();
                this.updateCompostDisplay();
                this.updateWellDisplay();
                this.updateCowDisplay();
                this.updateChickenDisplay();
                this.updatePigDisplay();
                this.updateSheepDisplay();
                this.updateHorseDisplay();
            }
        }
        
        // Iniciar o jogo
        const game = new FarmGame();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'967f79682748007b',t:'MTc1Mzk4OTg0OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
