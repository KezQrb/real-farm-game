<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day by Day - Cafeteria & Bar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        
        .slot {
            transition: all 0.3s ease;
            border: 2px dashed #d1d5db;
        }
        
        .slot:hover {
            border-color: #f59e0b;
            background-color: #fef3c7;
        }
        
        .growing {
            animation: grow 30s linear forwards;
        }
        
        @keyframes grow {
            0% { transform: scale(0.5); opacity: 0.7; }
            50% { transform: scale(0.8); opacity: 0.9; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .customer {
            animation: walkIn 2s ease-in-out;
        }
        
        @keyframes walkIn {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .coin-animation {
            animation: coinFlip 0.5s ease-in-out;
        }
        
        @keyframes coinFlip {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.2); }
            100% { transform: rotateY(360deg) scale(1); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 to-orange-100 min-h-screen">
    <!-- Cabeçalho -->
    <header class="bg-gradient-to-r from-amber-800 to-orange-700 text-white p-4 shadow-lg">
        <div class="flex justify-between items-center max-w-7xl mx-auto">
            <div class="flex items-center space-x-4">
                <h1 class="text-3xl font-bold">☕ Day by Day</h1>
                <div class="flex items-center bg-yellow-500 text-black px-4 py-2 rounded-full font-semibold">
                    <span class="text-xl mr-2">🪙</span>
                    <span id="coins">300</span>
                </div>
            </div>
            <div class="flex space-x-4">
                <button id="openBtn" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg">
                    🟢 OPEN
                </button>
                <button id="closedBtn" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg">
                    🔴 CLOSED
                </button>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto p-6 grid grid-cols-12 gap-6">
        <!-- Mercado (Esquerda) -->
        <div class="col-span-3">
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-amber-800">🏪 MERCADO</h2>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <button class="market-item bg-amber-100 hover:bg-amber-200 p-2 rounded-lg transition-all" data-item="cafe" data-price="20">
                        ☕ Café<br><span class="text-xs text-gray-600">20🪙</span>
                    </button>
                    <button class="market-item bg-green-100 hover:bg-green-200 p-2 rounded-lg transition-all" data-item="lupulo" data-price="25">
                        🌿 Lúpulo<br><span class="text-xs text-gray-600">25🪙</span>
                    </button>
                    <button class="market-item bg-yellow-100 hover:bg-yellow-200 p-2 rounded-lg transition-all" data-item="cevada" data-price="15">
                        🌾 Cevada<br><span class="text-xs text-gray-600">15🪙</span>
                    </button>
                    <button class="market-item bg-purple-100 hover:bg-purple-200 p-2 rounded-lg transition-all" data-item="uva" data-price="30">
                        🍇 Uva<br><span class="text-xs text-gray-600">30🪙</span>
                    </button>
                    <button class="market-item bg-red-100 hover:bg-red-200 p-2 rounded-lg transition-all" data-item="maca" data-price="18">
                        🍎 Maçã<br><span class="text-xs text-gray-600">18🪙</span>
                    </button>
                    <button class="market-item bg-orange-100 hover:bg-orange-200 p-2 rounded-lg transition-all" data-item="laranja" data-price="22">
                        🍊 Laranja<br><span class="text-xs text-gray-600">22🪙</span>
                    </button>
                    <button class="market-item bg-pink-100 hover:bg-pink-200 p-2 rounded-lg transition-all" data-item="morango" data-price="35">
                        🍓 Morango<br><span class="text-xs text-gray-600">35🪙</span>
                    </button>
                    <button class="market-item bg-amber-100 hover:bg-amber-200 p-2 rounded-lg transition-all" data-item="chocolate" data-price="40">
                        🍫 Chocolate<br><span class="text-xs text-gray-600">40🪙</span>
                    </button>
                    <button class="market-item bg-blue-100 hover:bg-blue-200 p-2 rounded-lg transition-all" data-item="agua" data-price="5">
                        💧 Água<br><span class="text-xs text-gray-600">5🪙</span>
                    </button>
                    <button class="market-item bg-gray-100 hover:bg-gray-200 p-2 rounded-lg transition-all" data-item="gas" data-price="10">
                        💨 Gás<br><span class="text-xs text-gray-600">10🪙</span>
                    </button>
                    <button class="market-item bg-yellow-100 hover:bg-yellow-200 p-2 rounded-lg transition-all" data-item="trigo" data-price="12">
                        🌾 Trigo<br><span class="text-xs text-gray-600">12🪙</span>
                    </button>
                    <button class="market-item bg-brown-100 hover:bg-brown-200 p-2 rounded-lg transition-all" data-item="racao" data-price="10">
                        🥜 Ração<br><span class="text-xs text-gray-600">10🪙</span>
                    </button>

                </div>
            </div>

            <!-- Prateleira -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h3 class="text-lg font-bold text-center mb-3 text-amber-800">📚 PRATELEIRA</h3>
                <div id="prateleira" class="grid grid-cols-2 gap-2 min-h-[200px]">
                    <!-- Itens da prateleira aparecerão aqui -->
                </div>
            </div>

            <!-- Estoque -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h3 class="text-lg font-bold text-center mb-3 text-amber-800">📦 ESTOQUE</h3>
                <div id="estoque" class="space-y-2 max-h-[300px] overflow-y-auto">
                    <!-- Itens do estoque aparecerão aqui -->
                </div>
            </div>

            <!-- Banco -->
            <div class="bg-white rounded-xl shadow-lg p-4">
                <h3 class="text-lg font-bold text-center mb-3 text-blue-800">🏦 BANCO</h3>
                <div class="space-y-3">
                    <!-- Status da Dívida -->
                    <div class="bg-gray-50 p-3 rounded-lg text-center">
                        <div class="text-sm text-gray-600 mb-1">Dívida Atual</div>
                        <div id="divida-atual" class="text-xl font-bold text-red-600">🪙 0</div>
                    </div>
                    
                    <!-- Empréstimo -->
                    <div id="emprestimo-section" class="space-y-2">
                        <div class="text-center">
                            <input type="number" id="valor-emprestimo" placeholder="Valor" min="1" max="1000" 
                                   class="w-full p-2 border border-gray-300 rounded-lg text-center font-semibold">
                        </div>
                        <button id="emprestar-btn" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-semibold transition-all transform hover:scale-105">
                            💰 EMPRESTAR
                        </button>
                    </div>
                    
                    <!-- Pagamento -->
                    <div id="pagamento-section" class="space-y-2 hidden">
                        <div class="text-center">
                            <input type="number" id="valor-pagamento" placeholder="Valor" min="1" 
                                   class="w-full p-2 border border-gray-300 rounded-lg text-center font-semibold">
                        </div>
                        <button id="pagar-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold transition-all transform hover:scale-105">
                            💳 PAGAR
                        </button>
                    </div>
                    
                    <div class="text-xs text-gray-500 text-center">
                        <p>💡 Empréstimo máximo: 1000🪙</p>
                        <p>📝 Pague aos poucos quando puder</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Área Central -->
        <div class="col-span-6">
            <!-- Curral das Vacas -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-green-800">🐄 CURRAL DAS VACAS</h2>
                <div class="flex items-center justify-center space-x-8">
                    <!-- Vaca -->
                    <div class="text-center">
                        <div id="vaca-status" class="text-6xl mb-2">🐄</div>
                        <div id="vaca-text" class="text-sm text-gray-600">Esperando ração</div>
                        <div id="leites-produzidos" class="mt-2 hidden">
                            <div class="flex space-x-1 justify-center">
                                <span class="text-2xl cursor-pointer hover:scale-110 transition-transform" onclick="coletarLeite(0)">🥛</span>
                                <span class="text-2xl cursor-pointer hover:scale-110 transition-transform" onclick="coletarLeite(1)">🥛</span>
                                <span class="text-2xl cursor-pointer hover:scale-110 transition-transform" onclick="coletarLeite(2)">🥛</span>
                            </div>
                            <div class="text-xs text-green-600 mt-1">Clique para coletar!</div>
                        </div>
                    </div>
                    
                    <!-- Slot de Ração -->
                    <div class="text-center">
                        <div id="racao-slot" class="slot bg-yellow-50 border-2 border-dashed border-yellow-300 rounded-lg w-20 h-20 flex items-center justify-center cursor-pointer hover:bg-yellow-100 transition-all mb-2">
                            <span class="text-yellow-400 text-xs">🥜</span>
                        </div>
                        <div class="text-xs text-gray-600">Slot de Ração</div>
                    </div>
                </div>
            </div>

            <!-- Galinheiro -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-orange-800">🐔 GALINHEIRO</h2>
                <div class="flex items-center justify-center space-x-8">
                    <!-- Galinha -->
                    <div class="text-center">
                        <div id="galinha-status" class="text-6xl mb-2">🐔</div>
                        <div id="galinha-text" class="text-sm text-gray-600">Esperando ração</div>
                        <div id="ovos-produzidos" class="mt-2 hidden">
                            <div class="flex space-x-1 justify-center">
                                <span class="text-2xl cursor-pointer hover:scale-110 transition-transform" onclick="coletarOvo(0)">🥚</span>
                                <span class="text-2xl cursor-pointer hover:scale-110 transition-transform" onclick="coletarOvo(1)">🥚</span>
                                <span class="text-2xl cursor-pointer hover:scale-110 transition-transform" onclick="coletarOvo(2)">🥚</span>
                            </div>
                            <div class="text-xs text-orange-600 mt-1">Clique para coletar!</div>
                        </div>
                    </div>
                    
                    <!-- Slot de Ração -->
                    <div class="text-center">
                        <div id="galinha-racao-slot" class="slot bg-yellow-50 border-2 border-dashed border-yellow-300 rounded-lg w-20 h-20 flex items-center justify-center cursor-pointer hover:bg-yellow-100 transition-all mb-2">
                            <span class="text-yellow-400 text-xs">🥜</span>
                        </div>
                        <div class="text-xs text-gray-600">Slot de Ração</div>
                    </div>
                </div>
            </div>

            <!-- Canteiros -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-green-800">🌱 CANTEIROS</h2>
                <div class="grid grid-cols-3 gap-4">
                    <div class="canteiro slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg p-4 h-24 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all" data-canteiro="0">
                        <span class="text-gray-500">Canteiro 1</span>
                    </div>
                    <div class="canteiro slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg p-4 h-24 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all" data-canteiro="1">
                        <span class="text-gray-500">Canteiro 2</span>
                    </div>
                    <div class="canteiro slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg p-4 h-24 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all" data-canteiro="2">
                        <span class="text-gray-500">Canteiro 3</span>
                    </div>
                    <div class="canteiro slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg p-4 h-24 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all" data-canteiro="3">
                        <span class="text-gray-500">Canteiro 4</span>
                    </div>
                    <div class="canteiro slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg p-4 h-24 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all" data-canteiro="4">
                        <span class="text-gray-500">Canteiro 5</span>
                    </div>
                    <div class="canteiro slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg p-4 h-24 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all" data-canteiro="5">
                        <span class="text-gray-500">Canteiro 6</span>
                    </div>
                </div>
            </div>

            <!-- Balcão -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-amber-800">🍽️ BALCÃO</h2>
                <div class="flex space-x-4 justify-center">
                    <div class="balcao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-24 h-24 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="0">
                        <span class="text-gray-400 text-sm">Slot 1</span>
                    </div>
                    <div class="balcao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-24 h-24 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="1">
                        <span class="text-gray-400 text-sm">Slot 2</span>
                    </div>
                    <div class="balcao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-24 h-24 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="2">
                        <span class="text-gray-400 text-sm">Slot 3</span>
                    </div>
                    <div class="balcao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-24 h-24 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="3">
                        <span class="text-gray-400 text-sm">Slot 4</span>
                    </div>
                </div>
            </div>

            <!-- Área de Clientes -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-blue-800">👥 CLIENTES (máx. 3)</h2>
                <div id="clientes-area" class="min-h-[150px] flex items-center justify-center">
                    <p class="text-gray-500 text-center">Clique em "OPEN" para começar a receber clientes!</p>
                </div>
            </div>

            <!-- Caixa Registradora -->
            <div class="bg-white rounded-xl shadow-lg p-4">
                <h2 class="text-xl font-bold text-center mb-4 text-green-800">💰 CAIXA REGISTRADORA</h2>
                <div id="caixa-area" class="min-h-[120px] space-y-2">
                    <p class="text-gray-500 text-center text-sm">Clientes que terminaram de comer aparecerão aqui para pagamento</p>
                </div>
            </div>
        </div>

        <!-- Moinho e Fogão (Direita) -->
        <div class="col-span-3">
            <!-- Moinho -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-amber-800">⚙️ MOINHO</h2>
                <div class="text-center mb-4">
                    <div id="moinho-slot" class="slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-24 h-24 mx-auto flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all mb-4">
                        <span class="text-gray-400 text-sm">Vazio</span>
                    </div>
                    <button id="moer-btn" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        ⚙️ MOER
                    </button>
                </div>
                <div class="text-xs text-gray-600 text-center">
                    <p>Coloque 3 itens iguais:</p>
                    <p>🔴 Café → 🟤 Café moído</p>
                    <p>🌿 Lúpulo → 🟩 Lúpulo moído</p>
                    <p>🌾 Cevada → 🟡 Cevada moída</p>
                    <p>🌾 Trigo → 🌾 Farinha</p>
                </div>
            </div>

            <!-- Fogão -->
            <div class="bg-white rounded-xl shadow-lg p-4">
                <h2 class="text-xl font-bold text-center mb-4 text-red-800">🔥 FOGÃO</h2>
                <div class="grid grid-cols-2 gap-2 mb-4">
                    <div class="fogao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="0">
                        <span class="text-gray-400 text-xs">1</span>
                    </div>
                    <div class="fogao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="1">
                        <span class="text-gray-400 text-xs">2</span>
                    </div>
                    <div class="fogao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="2">
                        <span class="text-gray-400 text-xs">3</span>
                    </div>
                    <div class="fogao-slot slot bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition-all" data-slot="3">
                        <span class="text-gray-400 text-xs">4</span>
                    </div>
                </div>
                <div class="text-center mb-4">
                    <button id="cozinhar-btn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        🔥 COZINHAR
                    </button>
                </div>
                <div class="text-xs text-gray-600 text-center">
                    <p><strong>Receitas (precisa 💨):</strong></p>
                    <p>☕ Café: 1🟤 + 1💧 = 4☕</p>
                    <p>🍳 Ovo frito: 1🥚 = 1🍳</p>
                    <p>🍞 Pão: 1🥚 + 1🥛 + 1🌾 = 3🍞</p>
                    <p class="text-red-600 mt-1">💨 Gás: <span id="gas-uses">0</span>/10 usos</p>
                </div>
            </div>

            <!-- Queijeira -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-yellow-800">🧀 QUEIJEIRA</h2>
                <div class="text-center mb-4">
                    <div id="queijeira-slot" class="slot bg-yellow-50 border-2 border-dashed border-yellow-300 rounded-lg w-24 h-24 mx-auto flex items-center justify-center cursor-pointer hover:bg-yellow-100 transition-all mb-4">
                        <span class="text-yellow-400 text-sm">0/2 🥛</span>
                    </div>
                    <button id="curar-btn" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        🧀 CURAR
                    </button>
                </div>
                <div class="text-xs text-gray-600 text-center">
                    <p><strong>Receita:</strong></p>
                    <p>🧀 Queijo: 2🥛 = 1🧀</p>
                    <p class="text-xs text-yellow-600 mt-1">1 minuto • vai para prateleira</p>
                </div>
            </div>

            <!-- Máquina de Suco -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-purple-800">🧃 MÁQUINA DE SUCO</h2>
                <div class="flex justify-center space-x-4 mb-4">
                    <div class="text-center">
                        <div id="suco-agua-slot" class="slot bg-blue-50 border-2 border-dashed border-blue-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-blue-100 transition-all mb-2">
                            <span class="text-blue-400 text-xs">💧</span>
                        </div>
                        <span class="text-xs text-gray-600">Água</span>
                    </div>
                    <div class="text-center">
                        <div id="suco-fruta-slot" class="slot bg-orange-50 border-2 border-dashed border-orange-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-orange-100 transition-all mb-2">
                            <span class="text-orange-400 text-xs">🍊</span>
                        </div>
                        <span class="text-xs text-gray-600">Fruta</span>
                    </div>
                </div>
                <div class="text-center mb-4">
                    <button id="fazer-suco-btn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        🧃 FAZER
                    </button>
                </div>
                <div class="text-xs text-gray-600 text-center">
                    <p><strong>Receitas:</strong></p>
                    <p>🍊 Suco Laranja: 1💧 + 1🍊</p>
                    <p>🍓 Suco Morango: 1💧 + 3🍓</p>
                    <p>🍇 Suco Uva: 1💧 + 2🍇</p>
                    <p class="text-xs text-purple-600 mt-1">15 segundos • 1 copo</p>
                </div>
            </div>

            <!-- Destiladora -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                <h2 class="text-xl font-bold text-center mb-4 text-amber-800">🥃 DESTILADORA</h2>
                <div class="text-center mb-4">
                    <div id="destiladora-slot" class="slot bg-red-50 border-2 border-dashed border-red-300 rounded-lg w-20 h-20 mx-auto flex items-center justify-center cursor-pointer hover:bg-red-100 transition-all mb-4">
                        <span class="text-red-400 text-xs">🍎</span>
                    </div>
                    <button id="destilar-btn" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        🥃 DESTILAR
                    </button>
                </div>
                <div class="text-xs text-gray-600 text-center">
                    <p><strong>Receita:</strong></p>
                    <p>🥃 Álcool: 3🍎 = 2🥃</p>
                    <p class="text-xs text-amber-600 mt-1">1 minuto • vai para estoque</p>
                </div>
            </div>

            <!-- Barril -->
            <div class="bg-white rounded-xl shadow-lg p-4">
                <h2 class="text-xl font-bold text-center mb-4 text-amber-900">🛢️ BARRIL</h2>
                <div class="flex justify-center space-x-2 mb-4">
                    <div id="barril-slot-0" class="slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all">
                        <span class="text-amber-400 text-xs">1</span>
                    </div>
                    <div id="barril-slot-1" class="slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all">
                        <span class="text-amber-400 text-xs">2</span>
                    </div>
                    <div id="barril-slot-2" class="slot bg-amber-50 border-2 border-dashed border-amber-300 rounded-lg w-16 h-16 flex items-center justify-center cursor-pointer hover:bg-amber-100 transition-all">
                        <span class="text-amber-400 text-xs">3</span>
                    </div>
                </div>
                <div class="text-center mb-4">
                    <button id="maturar-btn" class="bg-amber-800 hover:bg-amber-900 text-white px-4 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        🛢️ MATURAR
                    </button>
                </div>
                <div class="text-xs text-gray-600 text-center">
                    <p><strong>Receitas:</strong></p>
                    <p>🍺 Cerveja: 1🟩 + 1🟡 + 1🥃 = 2🍺</p>
                    <p>🍷 Vinho: 1🍇 + 1🥃 = 2🍷</p>
                    <p class="text-xs text-amber-600 mt-1">1 minuto • vai para prateleira</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado do jogo
        let gameState = {
            coins: 300,
            isOpen: false,
            estoque: {},
            prateleira: {},
            canteiros: Array(6).fill(null),
            balcao: Array(4).fill(null),
            selectedItem: null,
            customers: [],
            customerInterval: null,
            banco: {
                divida: 0
            },
            moinho: {
                item: null,
                quantity: 0,
                grinding: false
            },
            fogao: {
                slots: Array(4).fill(null),
                cooking: false,
                gasUses: 0
            },
            maquinaSuco: {
                aguaSlot: null,
                frutaSlot: null,
                frutaQuantity: 0,
                making: false
            },
            destiladora: {
                slot: null,
                quantity: 0,
                distilling: false
            },
            barril: {
                slots: Array(3).fill(null),
                maturing: false
            },
            vaca: {
                status: 'waiting', // waiting, eating, producing, resting
                racaoSlot: null,
                leitesDisponiveis: [],
                tempoRestante: 0
            },
            galinha: {
                status: 'waiting', // waiting, eating, producing, ready, resting
                racaoSlot: null,
                ovosDisponiveis: [],
                tempoRestante: 0
            },
            queijeira: {
                leiteQuantity: 0,
                curing: false
            }
        };

        // Emojis dos itens
        const itemEmojis = {
            cafe: '🔴', lupulo: '🌿', cevada: '🌾', uva: '🍇',
            maca: '🍎', laranja: '🍊', morango: '🍓', chocolate: '🍫',
            agua: '💧', gas: '💨', trigo: '🌾', racao: '🥜', ovo: '🥚', leite: '🥛',
            farinha: '🌾', cafe_moido: '🟤', lupulo_moido: '🟩', cevada_moida: '🟡',
            xicara_cafe: '☕', ovo_frito: '🍳', pao: '🍞', queijo: '🧀',
            suco_laranja: '🍊', suco_morango: '🍓', suco_uva: '🍇',
            alcool: '🥃', cerveja: '🍺', vinho: '🍷'
        };

        // Preços dos itens
        const itemPrices = {
            cafe: 20, lupulo: 25, cevada: 15, uva: 30,
            maca: 18, laranja: 22, morango: 35, chocolate: 40,
            agua: 5, gas: 10, trigo: 12, racao: 10, leite: 15
        };

        // Elementos DOM
        const coinsDisplay = document.getElementById('coins');
        const openBtn = document.getElementById('openBtn');
        const closedBtn = document.getElementById('closedBtn');
        const estoqueDiv = document.getElementById('estoque');
        const prateleiraDiv = document.getElementById('prateleira');
        const clientesArea = document.getElementById('clientes-area');
        const moinhoSlot = document.getElementById('moinho-slot');
        const moerBtn = document.getElementById('moer-btn');
        const cozinharBtn = document.getElementById('cozinhar-btn');
        const sucoAguaSlot = document.getElementById('suco-agua-slot');
        const sucoFrutaSlot = document.getElementById('suco-fruta-slot');
        const fazerSucoBtn = document.getElementById('fazer-suco-btn');
        const gasUsesDisplay = document.getElementById('gas-uses');
        const destiladoraSlot = document.getElementById('destiladora-slot');
        const destilarBtn = document.getElementById('destilar-btn');
        const maturarBtn = document.getElementById('maturar-btn');
        const vacaStatus = document.getElementById('vaca-status');
        const vacaText = document.getElementById('vaca-text');
        const leitesDiv = document.getElementById('leites-produzidos');
        const racaoSlot = document.getElementById('racao-slot');
        const queijeiraSlot = document.getElementById('queijeira-slot');
        const curarBtn = document.getElementById('curar-btn');
        const galinhaStatus = document.getElementById('galinha-status');
        const galinhaText = document.getElementById('galinha-text');
        const ovosDiv = document.getElementById('ovos-produzidos');
        const galinhaRacaoSlot = document.getElementById('galinha-racao-slot');
        const dividaAtualDisplay = document.getElementById('divida-atual');
        const valorEmprestimoInput = document.getElementById('valor-emprestimo');
        const emprestimoSection = document.getElementById('emprestimo-section');
        const pagamentoSection = document.getElementById('pagamento-section');
        const valorPagamentoInput = document.getElementById('valor-pagamento');
        const emprestarBtn = document.getElementById('emprestar-btn');
        const pagarBtn = document.getElementById('pagar-btn');

        // Atualizar display de moedas
        function updateCoinsDisplay() {
            coinsDisplay.textContent = gameState.coins;
            coinsDisplay.classList.add('coin-animation');
            setTimeout(() => coinsDisplay.classList.remove('coin-animation'), 500);
        }

        // Comprar item do mercado
        document.querySelectorAll('.market-item').forEach(btn => {
            btn.addEventListener('click', () => {
                const item = btn.dataset.item;
                const price = parseInt(btn.dataset.price);
                
                if (gameState.coins >= price) {
                    gameState.coins -= price;
                    
                    // Se for semente plantável, seleciona diretamente
                    if (['cafe', 'lupulo', 'cevada', 'uva', 'maca', 'laranja', 'morango', 'trigo'].includes(item)) {
                        gameState.selectedItem = item;
                        // Destacar visualmente que foi selecionado
                        document.querySelectorAll('.market-item').forEach(b => b.classList.remove('bg-green-300', 'border-2', 'border-green-500'));
                        btn.classList.add('bg-green-300', 'border-2', 'border-green-500');
                    } else {
                        // Outros itens vão para o estoque
                        addToEstoque(item, 1);
                        updateEstoqueDisplay();
                    }
                    
                    updateCoinsDisplay();
                    
                    // Feedback visual
                    btn.classList.add('bg-green-200');
                    setTimeout(() => btn.classList.remove('bg-green-200'), 300);
                } else {
                    // Feedback de dinheiro insuficiente
                    btn.classList.add('bg-red-200');
                    setTimeout(() => btn.classList.remove('bg-red-200'), 300);
                }
            });
        });

        // Adicionar item ao estoque
        function addToEstoque(item, quantity) {
            if (!gameState.estoque[item]) {
                gameState.estoque[item] = 0;
            }
            gameState.estoque[item] += quantity;
        }

        // Adicionar item à prateleira
        function addToPrateleira(item, quantity) {
            if (!gameState.prateleira[item]) {
                gameState.prateleira[item] = 0;
            }
            gameState.prateleira[item] += quantity;
            updatePrateleiraDisplay();
        }

        // Atualizar display da prateleira
        function updatePrateleiraDisplay() {
            prateleiraDiv.innerHTML = '';
            for (const [item, quantity] of Object.entries(gameState.prateleira)) {
                if (quantity > 0) {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'bg-yellow-50 p-3 rounded-lg cursor-pointer hover:bg-yellow-100 transition-all text-center aspect-square flex flex-col items-center justify-center';
                    itemDiv.innerHTML = `
                        <div class="text-2xl mb-1">${itemEmojis[item]}</div>
                        <div class="text-xs text-gray-600 mb-1">${item.charAt(0).toUpperCase() + item.slice(1)}</div>
                        <div class="font-semibold text-sm">${quantity}</div>
                    `;
                    itemDiv.addEventListener('click', () => selectItem(item));
                    prateleiraDiv.appendChild(itemDiv);
                }
            }
        }

        // Atualizar display do estoque
        function updateEstoqueDisplay() {
            estoqueDiv.innerHTML = '';
            for (const [item, quantity] of Object.entries(gameState.estoque)) {
                if (quantity > 0) {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'flex items-center justify-between bg-gray-50 p-2 rounded-lg cursor-pointer hover:bg-gray-100 transition-all';
                    itemDiv.innerHTML = `
                        <span>${itemEmojis[item]} ${item.charAt(0).toUpperCase() + item.slice(1)}</span>
                        <span class="font-semibold">${quantity}</span>
                    `;
                    itemDiv.addEventListener('click', () => selectItem(item));
                    estoqueDiv.appendChild(itemDiv);
                }
            }
        }

        // Selecionar item do estoque ou prateleira
        function selectItem(item) {
            gameState.selectedItem = item;
            // Destacar item selecionado no estoque
            document.querySelectorAll('#estoque > div').forEach(div => {
                div.classList.remove('bg-blue-200', 'border-2', 'border-blue-400');
            });
            // Destacar item selecionado na prateleira
            document.querySelectorAll('#prateleira > div').forEach(div => {
                div.classList.remove('bg-blue-200', 'border-2', 'border-blue-400');
            });
            
            if (event && event.target) {
                event.target.closest('div').classList.add('bg-blue-200', 'border-2', 'border-blue-400');
            }
            
            updateMoinhoDisplay();
            updateFogaoDisplay();
        }

        // Plantar nos canteiros
        document.querySelectorAll('.canteiro').forEach(canteiro => {
            canteiro.addEventListener('click', () => {
                const canteiroIndex = parseInt(canteiro.dataset.canteiro);
                
                if (gameState.selectedItem && gameState.canteiros[canteiroIndex] === null) {
                    // Plantar semente selecionada
                    gameState.canteiros[canteiroIndex] = {
                        item: gameState.selectedItem,
                        plantedAt: Date.now(),
                        growing: true
                    };
                    
                    // Atualizar visual do canteiro
                    canteiro.innerHTML = `
                        <div class="growing text-2xl">${itemEmojis[gameState.selectedItem]}</div>
                        <div class="text-xs text-gray-600 mt-1">Crescendo...</div>
                    `;
                    canteiro.classList.add('bg-green-100', 'border-green-400');
                    
                    // Crescer em 30 segundos
                    setTimeout(() => {
                        if (gameState.canteiros[canteiroIndex]) {
                            gameState.canteiros[canteiroIndex].growing = false;
                            canteiro.innerHTML = `
                                <div class="text-3xl">${itemEmojis[gameState.selectedItem]}</div>
                                <div class="text-xs text-green-600 mt-1">Pronto!</div>
                            `;
                            canteiro.classList.remove('bg-green-100');
                            canteiro.classList.add('bg-green-200');
                        }
                    }, 30000);
                }
                
                // Colher se estiver pronto
                else if (gameState.canteiros[canteiroIndex] && !gameState.canteiros[canteiroIndex].growing) {
                    const item = gameState.canteiros[canteiroIndex].item;
                    addToEstoque(item, 1); // Colheita rende 1 fruto
                    gameState.canteiros[canteiroIndex] = null;
                    
                    // Resetar canteiro
                    canteiro.innerHTML = '<span class="text-gray-500">Canteiro ' + (canteiroIndex + 1) + '</span>';
                    canteiro.classList.remove('bg-green-200', 'border-green-400');
                    canteiro.classList.add('bg-amber-50', 'border-amber-300');
                    
                    updateEstoqueDisplay();
                }
            });
        });

        // Funções do moinho
        function updateMoinhoDisplay() {
            if (gameState.moinho.grinding) {
                moinhoSlot.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl animate-spin">⚙️</div>
                        <div class="text-xs text-gray-600 mt-1">Moendo...</div>
                    </div>
                `;
                moerBtn.disabled = true;
            } else if (gameState.moinho.item) {
                moinhoSlot.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl">${itemEmojis[gameState.moinho.item]}</div>
                        <div class="text-xs text-gray-600 mt-1">${gameState.moinho.quantity}/3</div>
                    </div>
                `;
                moerBtn.disabled = gameState.moinho.quantity < 3;
            } else {
                moinhoSlot.innerHTML = '<span class="text-gray-400 text-sm">Vazio</span>';
                moerBtn.disabled = true;
            }
        }

        function canGrind(item) {
            return ['cafe', 'lupulo', 'cevada', 'trigo'].includes(item);
        }

        function getGroundProduct(item) {
            const products = {
                cafe: 'cafe_moido',
                lupulo: 'lupulo_moido',
                cevada: 'cevada_moida',
                trigo: 'farinha'
            };
            return products[item];
        }

        // Clique no slot do moinho
        moinhoSlot.addEventListener('click', () => {
            if (gameState.moinho.grinding) return;
            
            if (gameState.selectedItem && canGrind(gameState.selectedItem) && gameState.estoque[gameState.selectedItem] > 0) {
                if (!gameState.moinho.item) {
                    // Primeiro item
                    gameState.moinho.item = gameState.selectedItem;
                    gameState.moinho.quantity = 1;
                } else if (gameState.moinho.item === gameState.selectedItem && gameState.moinho.quantity < 3) {
                    // Adicionar mais do mesmo item
                    gameState.moinho.quantity++;
                } else {
                    return; // Item diferente ou já cheio
                }
                
                gameState.estoque[gameState.selectedItem]--;
                updateEstoqueDisplay();
                updateMoinhoDisplay();
            }
        });

        // Botão moer
        moerBtn.addEventListener('click', () => {
            if (gameState.moinho.quantity === 3 && !gameState.moinho.grinding) {
                gameState.moinho.grinding = true;
                updateMoinhoDisplay();
                
                setTimeout(() => {
                    const product = getGroundProduct(gameState.moinho.item);
                    addToEstoque(product, 1); // Produz 1 item moído
                    
                    // Resetar moinho
                    gameState.moinho = { item: null, quantity: 0, grinding: false };
                    updateMoinhoDisplay();
                    updateEstoqueDisplay();
                }, 40000); // 40 segundos
            }
        });

        // Clique nos slots do balcão
        document.querySelectorAll('.balcao-slot').forEach((slot, index) => {
            slot.addEventListener('click', () => {
                if (gameState.selectedItem && hasItemInStock(gameState.selectedItem) && !gameState.balcao[index]) {
                    // Adicionar item ao balcão
                    gameState.balcao[index] = gameState.selectedItem;
                    removeFromStock(gameState.selectedItem, 1);
                    updateEstoqueDisplay();
                    updatePrateleiraDisplay();
                    updateBalcaoDisplay();
                } else if (gameState.balcao[index]) {
                    // Remover item do balcão
                    const item = gameState.balcao[index];
                    gameState.balcao[index] = null;
                    addToPrateleira(item, 1);
                    updatePrateleiraDisplay();
                    updateBalcaoDisplay();
                }
            });
        });

        // Sistema de clientes
        const customerTypes = [
            { name: 'João', emoji: '👨', order: ['xicara_cafe', 'pao'], payment: 45 },
            { name: 'Maria', emoji: '👩', order: ['suco_laranja', 'queijo'], payment: 35 },
            { name: 'Pedro', emoji: '👨‍💼', order: ['cerveja', 'ovo_frito'], payment: 55 },
            { name: 'Ana', emoji: '👩‍🦰', order: ['vinho', 'queijo'], payment: 65 },
            { name: 'Carlos', emoji: '👨‍🦲', order: ['suco_morango', 'pao'], payment: 40 },
            { name: 'Lucia', emoji: '👩‍🦳', order: ['xicara_cafe', 'ovo_frito'], payment: 38 },
            { name: 'Roberto', emoji: '👨‍🦱', order: ['cerveja', 'queijo'], payment: 50 },
            { name: 'Sofia', emoji: '👧', order: ['suco_uva', 'pao'], payment: 42 }
        ];

        function createCustomer() {
            if (!gameState.isOpen || gameState.customers.length >= 3) return;
            
            const customer = customerTypes[Math.floor(Math.random() * customerTypes.length)];
            const customerId = Date.now() + Math.random();
            
            const customerDiv = document.createElement('div');
            customerDiv.className = 'customer bg-blue-100 p-3 rounded-lg m-2 border-2 border-blue-300 relative';
            customerDiv.innerHTML = `
                <div class="text-center">
                    <div class="text-3xl mb-2">${customer.emoji}</div>
                    <div class="font-semibold text-sm">${customer.name}</div>
                    <div class="text-xs text-gray-600 mt-1">Pedido:</div>
                    <div class="flex space-x-1 justify-center mt-1">
                        ${customer.order.map(item => `<span class="text-lg">${itemEmojis[item]}</span>`).join('')}
                    </div>
                    <div class="text-green-600 font-semibold text-sm mt-1">💰 ${customer.payment}</div>
                    <div class="mt-2">
                        <div class="text-xs text-blue-600 font-semibold" id="timer-${customerId}">⏰ 7:00</div>
                        <div class="flex space-x-2 justify-center mt-1">
                            <button class="bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1 rounded-lg transition-all z-10" onclick="removeCustomer('${customerId}')">✕</button>
                            <button class="bg-green-500 hover:bg-green-600 text-white text-xs px-3 py-1 rounded-lg transition-all" onclick="serveCustomer('${customerId}')">SERVIR</button>
                        </div>
                    </div>
                </div>
            `;
            
            clientesArea.appendChild(customerDiv);
            
            const customerData = { 
                id: customerId,
                element: customerDiv, 
                status: 'waiting', // waiting, eating, ready_to_pay
                timeLeft: 420, // 7 minutos em segundos
                eatingTimeLeft: 0,
                ...customer 
            };
            
            gameState.customers.push(customerData);
            
            // Timer de espera
            const waitingInterval = setInterval(() => {
                const customer = gameState.customers.find(c => c.id === customerId);
                if (!customer || customer.status !== 'waiting') {
                    clearInterval(waitingInterval);
                    return;
                }
                
                customer.timeLeft--;
                const minutes = Math.floor(customer.timeLeft / 60);
                const seconds = customer.timeLeft % 60;
                const timerElement = document.getElementById(`timer-${customerId}`);
                
                if (timerElement) {
                    timerElement.textContent = `⏰ ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    // Mudar cor conforme o tempo
                    if (customer.timeLeft <= 60) {
                        timerElement.className = 'text-xs text-red-600 font-semibold animate-pulse';
                    } else if (customer.timeLeft <= 120) {
                        timerElement.className = 'text-xs text-orange-600 font-semibold';
                    }
                }
                
                if (customer.timeLeft <= 0) {
                    // Cliente vai embora frustrado
                    customerDiv.classList.add('bg-red-200', 'border-red-400');
                    setTimeout(() => {
                        removeCustomerById(customerId);
                    }, 1000);
                    clearInterval(waitingInterval);
                }
            }, 1000);
        }

        // Servir cliente - MÉTODO SIMPLIFICADO
        window.serveCustomer = function(customerId) {
            const customer = gameState.customers.find(c => c.id === customerId);
            if (!customer || customer.status !== 'waiting') return;
            
            // Método simples: verificar se TODOS os itens do pedido estão no balcão
            let canServe = true;
            const missingItems = [];
            
            // Para cada item do pedido, verificar se existe no balcão
            for (const neededItem of customer.order) {
                let found = false;
                for (let i = 0; i < gameState.balcao.length; i++) {
                    if (gameState.balcao[i] === neededItem) {
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    canServe = false;
                    missingItems.push(neededItem);
                }
            }
            
            if (!canServe) {
                // Mostrar erro visual
                customer.element.classList.add('bg-red-200', 'border-red-500');
                
                const originalHTML = customer.element.innerHTML;
                customer.element.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl mb-2">❌</div>
                        <div class="font-semibold text-sm text-red-700">FALTAM NO BALCÃO:</div>
                        <div class="flex space-x-1 justify-center mt-1">
                            ${missingItems.map(item => `<span class="text-lg">${itemEmojis[item]}</span>`).join('')}
                        </div>
                        <div class="text-xs text-gray-600 mt-2">Coloque os itens no balcão primeiro!</div>
                    </div>
                `;
                
                setTimeout(() => {
                    if (customer.element && customer.element.parentNode) {
                        customer.element.innerHTML = originalHTML;
                        customer.element.classList.remove('bg-red-200', 'border-red-500');
                    }
                }, 3000);
                return;
            }
            
            // SUCESSO! Remover itens do balcão
            for (const item of customer.order) {
                for (let i = 0; i < gameState.balcao.length; i++) {
                    if (gameState.balcao[i] === item) {
                        gameState.balcao[i] = null; // Remove o primeiro item encontrado
                        break; // Para de procurar este item
                    }
                }
            }
            updateBalcaoDisplay();
            
            // Cliente começa a comer
            customer.status = 'eating';
            customer.eatingTimeLeft = 30; // 30 segundos para teste rápido
            
            customer.element.innerHTML = `
                <div class="text-center">
                    <div class="text-3xl mb-2">${customer.emoji}</div>
                    <div class="font-semibold text-sm">${customer.name}</div>
                    <div class="text-xs text-green-600 mt-1">😋 Comendo...</div>
                    <div class="flex space-x-1 justify-center mt-1">
                        ${customer.order.map(item => `<span class="text-lg">${itemEmojis[item]}</span>`).join('')}
                    </div>
                    <div class="text-xs text-blue-600 font-semibold mt-2" id="eating-timer-${customerId}">🍽️ 0:30</div>
                </div>
            `;
            customer.element.className = 'customer bg-yellow-100 p-3 rounded-lg m-2 border-2 border-yellow-400';
            
            // Timer de comer
            const eatingInterval = setInterval(() => {
                const currentCustomer = gameState.customers.find(c => c.id === customerId);
                if (!currentCustomer || currentCustomer.status !== 'eating') {
                    clearInterval(eatingInterval);
                    return;
                }
                
                currentCustomer.eatingTimeLeft--;
                const minutes = Math.floor(currentCustomer.eatingTimeLeft / 60);
                const seconds = currentCustomer.eatingTimeLeft % 60;
                const timerElement = document.getElementById(`eating-timer-${customerId}`);
                
                if (timerElement) {
                    timerElement.textContent = `🍽️ ${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
                
                if (currentCustomer.eatingTimeLeft <= 0) {
                    // Cliente terminou de comer - vai para o caixa
                    currentCustomer.status = 'ready_to_pay';
                    moveCustomerToCaixa(currentCustomer);
                    clearInterval(eatingInterval);
                }
            }, 1000);
        };

        // Remover cliente manualmente
        window.removeCustomer = function(customerId) {
            removeCustomerById(customerId);
        };

        function removeCustomerById(customerId) {
            const customerIndex = gameState.customers.findIndex(c => c.id === customerId);
            if (customerIndex !== -1) {
                const customer = gameState.customers[customerIndex];
                if (customer.element.parentNode) {
                    customer.element.remove();
                }
                gameState.customers.splice(customerIndex, 1);
            }
        }

        // Mover cliente para o caixa
        function moveCustomerToCaixa(customer) {
            // Remover da área de clientes
            customer.element.remove();
            
            // Adicionar ao caixa
            const caixaCustomerDiv = document.createElement('div');
            caixaCustomerDiv.className = 'bg-green-100 p-3 rounded-lg border-2 border-green-400 mb-2';
            caixaCustomerDiv.innerHTML = `
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="text-2xl">${customer.emoji}</div>
                        <div>
                            <div class="font-semibold text-sm">${customer.name}</div>
                            <div class="text-xs text-gray-600">Consumiu:</div>
                            <div class="flex space-x-1 mt-1">
                                ${customer.order.map(item => `<span class="text-sm">${itemEmojis[item]}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-green-600 font-bold">💰 ${customer.payment}</div>
                        <button class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded-lg mt-1 transition-all" onclick="processPayment('${customer.id}', ${customer.payment})">COBRAR</button>
                    </div>
                </div>
            `;
            
            document.getElementById('caixa-area').appendChild(caixaCustomerDiv);
            customer.caixaElement = caixaCustomerDiv;
        }

        // Processar pagamento
        window.processPayment = function(customerId, amount) {
            const customer = gameState.customers.find(c => c.id === customerId);
            if (!customer) return;
            
            // Receber pagamento
            gameState.coins += amount;
            updateCoinsDisplay();
            
            // Remover cliente do caixa
            if (customer.caixaElement && customer.caixaElement.parentNode) {
                customer.caixaElement.remove();
            }
            
            // Remover cliente da lista
            removeCustomerById(customerId);
            
            // Feedback visual no caixa
            const caixaArea = document.getElementById('caixa-area');
            caixaArea.classList.add('bg-green-200');
            setTimeout(() => caixaArea.classList.remove('bg-green-200'), 300);
        };

        // Botões Open/Closed
        openBtn.addEventListener('click', () => {
            gameState.isOpen = true;
            openBtn.classList.add('bg-green-800');
            closedBtn.classList.remove('bg-red-800');
            clientesArea.innerHTML = '<p class="text-green-600 text-center">Cafeteria ABERTA! Aguardando clientes...</p>';
            
            // Criar clientes a cada 5-10 segundos
            gameState.customerInterval = setInterval(() => {
                if (Math.random() < 0.7) { // 70% chance de cliente aparecer
                    createCustomer();
                }
            }, Math.random() * 5000 + 5000);
        });

        closedBtn.addEventListener('click', () => {
            gameState.isOpen = false;
            closedBtn.classList.add('bg-red-800');
            openBtn.classList.remove('bg-green-800');
            clientesArea.innerHTML = '<p class="text-red-600 text-center">Cafeteria FECHADA</p>';
            
            if (gameState.customerInterval) {
                clearInterval(gameState.customerInterval);
            }
            
            // Remover clientes existentes
            gameState.customers.forEach(customer => {
                if (customer.element.parentNode) {
                    customer.element.remove();
                }
            });
            gameState.customers = [];
        });

        // Sistema do Fogão
        function updateFogaoDisplay() {
            document.querySelectorAll('.fogao-slot').forEach((slot, index) => {
                if (gameState.fogao.cooking) {
                    slot.innerHTML = `
                        <div class="text-center">
                            <div class="text-lg animate-pulse">🔥</div>
                        </div>
                    `;
                } else if (gameState.fogao.slots[index]) {
                    slot.innerHTML = `<div class="text-lg">${itemEmojis[gameState.fogao.slots[index]]}</div>`;
                } else {
                    slot.innerHTML = `<span class="text-gray-400 text-xs">${index + 1}</span>`;
                }
            });
            
            const hasGas = gameState.estoque.gas && gameState.estoque.gas > 0;
            cozinharBtn.disabled = gameState.fogao.cooking || !canCook() || !hasGas;
            
            // Atualizar texto do botão baseado no gás
            if (!hasGas && !gameState.fogao.cooking) {
                cozinharBtn.innerHTML = '🔥 SEM GÁS';
                cozinharBtn.classList.add('bg-gray-500');
                cozinharBtn.classList.remove('bg-red-600');
            } else {
                cozinharBtn.innerHTML = '🔥 COZINHAR';
                cozinharBtn.classList.remove('bg-gray-500');
                cozinharBtn.classList.add('bg-red-600');
            }
            
            // Atualizar contador de gás
            if (gasUsesDisplay) {
                gasUsesDisplay.textContent = gameState.fogao.gasUses;
            }
        }

        function canCook() {
            const slots = gameState.fogao.slots.filter(slot => slot !== null);
            
            // Receita Café: 1 café moído + 1 água
            if (slots.length === 2 && slots.includes('cafe_moido') && slots.includes('agua')) {
                return 'xicara_cafe';
            }
            
            // Receita Ovo frito: 1 ovo
            if (slots.length === 1 && slots.includes('ovo')) {
                return 'ovo_frito';
            }
            
            // Receita Pão: 1 ovo + 1 leite + 1 farinha
            if (slots.length === 3 && slots.includes('ovo') && slots.includes('leite') && slots.includes('farinha')) {
                return 'pao';
            }
            
            return false;
        }

        function getRecipeQuantity(recipe) {
            const quantities = {
                'xicara_cafe': 4,
                'ovo_frito': 1,
                'pao': 3
            };
            return quantities[recipe] || 1;
        }

        // Clique nos slots do fogão
        document.querySelectorAll('.fogao-slot').forEach((slot, index) => {
            slot.addEventListener('click', () => {
                if (gameState.fogao.cooking) return;
                
                if (gameState.selectedItem && hasItemInStock(gameState.selectedItem) && !gameState.fogao.slots[index]) {
                    // Adicionar item ao slot
                    gameState.fogao.slots[index] = gameState.selectedItem;
                    removeFromStock(gameState.selectedItem, 1);
                    updateEstoqueDisplay();
                    updatePrateleiraDisplay();
                    updateFogaoDisplay();
                } else if (gameState.fogao.slots[index]) {
                    // Remover item do slot
                    const item = gameState.fogao.slots[index];
                    gameState.fogao.slots[index] = null;
                    addToEstoque(item, 1);
                    updateEstoqueDisplay();
                    updateFogaoDisplay();
                }
            });
        });

        function hasItemInStock(item) {
            return (gameState.estoque[item] && gameState.estoque[item] > 0) || 
                   (gameState.prateleira[item] && gameState.prateleira[item] > 0);
        }

        function removeFromStock(item, quantity) {
            if (gameState.estoque[item] && gameState.estoque[item] >= quantity) {
                gameState.estoque[item] -= quantity;
            } else if (gameState.prateleira[item] && gameState.prateleira[item] >= quantity) {
                gameState.prateleira[item] -= quantity;
            }
        }

        // Botão cozinhar
        cozinharBtn.addEventListener('click', () => {
            const recipe = canCook();
            const hasGas = gameState.estoque.gas && gameState.estoque.gas > 0;
            
            if (recipe && !gameState.fogao.cooking && hasGas) {
                // Consumir gás (1 gás = 10 usos)
                gameState.fogao.gasUses++;
                
                // Se usou 10 vezes, consumir 1 gás e resetar contador
                if (gameState.fogao.gasUses >= 10) {
                    gameState.estoque.gas--;
                    gameState.fogao.gasUses = 0;
                }
                
                gameState.fogao.cooking = true;
                updateFogaoDisplay();
                updateEstoqueDisplay();
                
                setTimeout(() => {
                    const quantity = getRecipeQuantity(recipe);
                    addToPrateleira(recipe, quantity);
                    
                    // Limpar fogão
                    gameState.fogao.slots = Array(4).fill(null);
                    gameState.fogao.cooking = false;
                    updateFogaoDisplay();
                }, 30000); // 30 segundos
            }
        });

        // Sistema da Máquina de Suco
        function updateMaquinaSucoDisplay() {
            // Slot da água
            if (gameState.maquinaSuco.making) {
                sucoAguaSlot.innerHTML = `<div class="text-lg animate-pulse">🧃</div>`;
                sucoFrutaSlot.innerHTML = `<div class="text-lg animate-pulse">🧃</div>`;
            } else {
                if (gameState.maquinaSuco.aguaSlot) {
                    sucoAguaSlot.innerHTML = `<div class="text-lg">${itemEmojis[gameState.maquinaSuco.aguaSlot]}</div>`;
                } else {
                    sucoAguaSlot.innerHTML = `<span class="text-blue-400 text-xs">💧</span>`;
                }
                
                // Slot da fruta
                if (gameState.maquinaSuco.frutaSlot) {
                    sucoFrutaSlot.innerHTML = `
                        <div class="text-center">
                            <div class="text-lg">${itemEmojis[gameState.maquinaSuco.frutaSlot]}</div>
                            <div class="text-xs">${gameState.maquinaSuco.frutaQuantity}</div>
                        </div>
                    `;
                } else {
                    sucoFrutaSlot.innerHTML = `<span class="text-orange-400 text-xs">🍊</span>`;
                }
            }
            
            fazerSucoBtn.disabled = gameState.maquinaSuco.making || !canMakeJuice();
        }

        function canMakeJuice() {
            if (!gameState.maquinaSuco.aguaSlot || gameState.maquinaSuco.aguaSlot !== 'agua') {
                return false;
            }
            
            const fruta = gameState.maquinaSuco.frutaSlot;
            const quantity = gameState.maquinaSuco.frutaQuantity;
            
            // Suco de laranja: 1 laranja
            if (fruta === 'laranja' && quantity === 1) return 'suco_laranja';
            
            // Suco de morango: 3 morangos
            if (fruta === 'morango' && quantity === 3) return 'suco_morango';
            
            // Suco de uva: 2 uvas
            if (fruta === 'uva' && quantity === 2) return 'suco_uva';
            
            return false;
        }

        // Clique no slot da água
        sucoAguaSlot.addEventListener('click', () => {
            if (gameState.maquinaSuco.making) return;
            
            if (gameState.selectedItem === 'agua' && hasItemInStock('agua') && !gameState.maquinaSuco.aguaSlot) {
                gameState.maquinaSuco.aguaSlot = 'agua';
                removeFromStock('agua', 1);
                updateEstoqueDisplay();
                updatePrateleiraDisplay();
                updateMaquinaSucoDisplay();
            } else if (gameState.maquinaSuco.aguaSlot) {
                // Remover água do slot
                addToEstoque(gameState.maquinaSuco.aguaSlot, 1);
                gameState.maquinaSuco.aguaSlot = null;
                updateEstoqueDisplay();
                updateMaquinaSucoDisplay();
            }
        });

        // Clique no slot da fruta
        sucoFrutaSlot.addEventListener('click', () => {
            if (gameState.maquinaSuco.making) return;
            
            const validFruits = ['laranja', 'morango', 'uva'];
            
            if (gameState.selectedItem && validFruits.includes(gameState.selectedItem) && hasItemInStock(gameState.selectedItem)) {
                if (!gameState.maquinaSuco.frutaSlot) {
                    // Primeira fruta
                    gameState.maquinaSuco.frutaSlot = gameState.selectedItem;
                    gameState.maquinaSuco.frutaQuantity = 1;
                } else if (gameState.maquinaSuco.frutaSlot === gameState.selectedItem) {
                    // Adicionar mais da mesma fruta
                    const maxQuantity = gameState.selectedItem === 'morango' ? 3 : 2;
                    if (gameState.maquinaSuco.frutaQuantity < maxQuantity) {
                        gameState.maquinaSuco.frutaQuantity++;
                    } else {
                        return; // Já está no máximo
                    }
                } else {
                    return; // Fruta diferente
                }
                
                removeFromStock(gameState.selectedItem, 1);
                updateEstoqueDisplay();
                updatePrateleiraDisplay();
                updateMaquinaSucoDisplay();
            } else if (gameState.maquinaSuco.frutaSlot) {
                // Remover frutas do slot
                addToEstoque(gameState.maquinaSuco.frutaSlot, gameState.maquinaSuco.frutaQuantity);
                gameState.maquinaSuco.frutaSlot = null;
                gameState.maquinaSuco.frutaQuantity = 0;
                updateEstoqueDisplay();
                updateMaquinaSucoDisplay();
            }
        });

        // Botão fazer suco
        fazerSucoBtn.addEventListener('click', () => {
            const juice = canMakeJuice();
            if (juice && !gameState.maquinaSuco.making) {
                gameState.maquinaSuco.making = true;
                updateMaquinaSucoDisplay();
                
                setTimeout(() => {
                    // Suco de uva vai para estoque, outros para prateleira
                    if (juice === 'suco_uva') {
                        addToEstoque(juice, 1);
                    } else {
                        addToPrateleira(juice, 1);
                    }
                    
                    // Limpar máquina
                    gameState.maquinaSuco = {
                        aguaSlot: null,
                        frutaSlot: null,
                        frutaQuantity: 0,
                        making: false
                    };
                    updateMaquinaSucoDisplay();
                }, 15000); // 15 segundos
            }
        });

        // Sistema da Destiladora
        function updateDestiladoraDisplay() {
            if (gameState.destiladora.distilling) {
                destiladoraSlot.innerHTML = `
                    <div class="text-center">
                        <div class="text-lg animate-pulse">🔥</div>
                        <div class="text-xs text-gray-600 mt-1">Destilando...</div>
                    </div>
                `;
            } else if (gameState.destiladora.slot) {
                destiladoraSlot.innerHTML = `
                    <div class="text-center">
                        <div class="text-lg">${itemEmojis[gameState.destiladora.slot]}</div>
                        <div class="text-xs text-gray-600 mt-1">${gameState.destiladora.quantity}/3</div>
                    </div>
                `;
            } else {
                destiladoraSlot.innerHTML = `<span class="text-red-400 text-xs">🍎</span>`;
            }
            
            destilarBtn.disabled = gameState.destiladora.distilling || gameState.destiladora.quantity < 3;
        }

        // Clique no slot da destiladora
        destiladoraSlot.addEventListener('click', () => {
            if (gameState.destiladora.distilling) return;
            
            if (gameState.selectedItem === 'maca' && hasItemInStock('maca')) {
                if (!gameState.destiladora.slot) {
                    // Primeira maçã
                    gameState.destiladora.slot = 'maca';
                    gameState.destiladora.quantity = 1;
                } else if (gameState.destiladora.quantity < 3) {
                    // Adicionar mais maçãs
                    gameState.destiladora.quantity++;
                } else {
                    return; // Já está cheio
                }
                
                removeFromStock('maca', 1);
                updateEstoqueDisplay();
                updatePrateleiraDisplay();
                updateDestiladoraDisplay();
            } else if (gameState.destiladora.slot) {
                // Remover maçãs do slot
                addToEstoque('maca', gameState.destiladora.quantity);
                gameState.destiladora.slot = null;
                gameState.destiladora.quantity = 0;
                updateEstoqueDisplay();
                updateDestiladoraDisplay();
            }
        });

        // Botão destilar
        destilarBtn.addEventListener('click', () => {
            if (gameState.destiladora.quantity === 3 && !gameState.destiladora.distilling) {
                gameState.destiladora.distilling = true;
                updateDestiladoraDisplay();
                
                setTimeout(() => {
                    // Produzir 2 álcoois
                    addToEstoque('alcool', 2);
                    
                    // Limpar destiladora
                    gameState.destiladora = {
                        slot: null,
                        quantity: 0,
                        distilling: false
                    };
                    updateDestiladoraDisplay();
                    updateEstoqueDisplay();
                }, 60000); // 1 minuto
            }
        });

        // Sistema do Barril
        function updateBarrilDisplay() {
            document.querySelectorAll('[id^="barril-slot-"]').forEach((slot, index) => {
                if (gameState.barril.maturing) {
                    slot.innerHTML = `<div class="text-lg animate-pulse">🛢️</div>`;
                } else if (gameState.barril.slots[index]) {
                    slot.innerHTML = `<div class="text-lg">${itemEmojis[gameState.barril.slots[index]]}</div>`;
                } else {
                    slot.innerHTML = `<span class="text-amber-400 text-xs">${index + 1}</span>`;
                }
            });
            
            maturarBtn.disabled = gameState.barril.maturing || !canMature();
        }

        function canMature() {
            const slots = gameState.barril.slots.filter(slot => slot !== null);
            
            // Receita Cerveja: 1 lúpulo moído + 1 cevada moída + 1 álcool
            if (slots.length === 3 && slots.includes('lupulo_moido') && slots.includes('cevada_moida') && slots.includes('alcool')) {
                return 'cerveja';
            }
            
            // Receita Vinho: 1 suco de uva + 1 álcool
            if (slots.length === 2 && slots.includes('suco_uva') && slots.includes('alcool')) {
                return 'vinho';
            }
            
            return false;
        }

        // Clique nos slots do barril
        document.querySelectorAll('[id^="barril-slot-"]').forEach((slot, index) => {
            slot.addEventListener('click', () => {
                if (gameState.barril.maturing) return;
                
                if (gameState.selectedItem && hasItemInStock(gameState.selectedItem) && !gameState.barril.slots[index]) {
                    // Verificar se o item é válido para o barril
                    const validItems = ['lupulo_moido', 'cevada_moida', 'alcool', 'suco_uva'];
                    if (validItems.includes(gameState.selectedItem)) {
                        gameState.barril.slots[index] = gameState.selectedItem;
                        removeFromStock(gameState.selectedItem, 1);
                        updateEstoqueDisplay();
                        updatePrateleiraDisplay();
                        updateBarrilDisplay();
                    }
                } else if (gameState.barril.slots[index]) {
                    // Remover item do slot
                    const item = gameState.barril.slots[index];
                    gameState.barril.slots[index] = null;
                    addToEstoque(item, 1);
                    updateEstoqueDisplay();
                    updateBarrilDisplay();
                }
            });
        });

        // Botão maturar
        maturarBtn.addEventListener('click', () => {
            const recipe = canMature();
            if (recipe && !gameState.barril.maturing) {
                gameState.barril.maturing = true;
                updateBarrilDisplay();
                
                setTimeout(() => {
                    // Produzir 2 bebidas na prateleira
                    addToPrateleira(recipe, 2);
                    
                    // Limpar barril
                    gameState.barril.slots = Array(3).fill(null);
                    gameState.barril.maturing = false;
                    updateBarrilDisplay();
                }, 60000); // 1 minuto
            }
        });

        // Sistema da Queijeira
        function updateQueijeiraDisplay() {
            if (gameState.queijeira.curing) {
                queijeiraSlot.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl animate-pulse">🧀</div>
                        <div class="text-xs text-gray-600 mt-1">Curando...</div>
                    </div>
                `;
            } else {
                queijeiraSlot.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl">🥛</div>
                        <div class="text-xs text-gray-600 mt-1">${gameState.queijeira.leiteQuantity}/2</div>
                    </div>
                `;
            }
            
            curarBtn.disabled = gameState.queijeira.curing || gameState.queijeira.leiteQuantity < 2;
        }

        // Clique no slot da queijeira
        queijeiraSlot.addEventListener('click', () => {
            if (gameState.queijeira.curing) return;
            
            if (gameState.selectedItem === 'leite' && hasItemInStock('leite') && gameState.queijeira.leiteQuantity < 2) {
                gameState.queijeira.leiteQuantity++;
                removeFromStock('leite', 1);
                updateEstoqueDisplay();
                updatePrateleiraDisplay();
                updateQueijeiraDisplay();
            } else if (gameState.queijeira.leiteQuantity > 0) {
                // Remover leites do slot
                addToEstoque('leite', gameState.queijeira.leiteQuantity);
                gameState.queijeira.leiteQuantity = 0;
                updateEstoqueDisplay();
                updateQueijeiraDisplay();
            }
        });

        // Botão curar
        curarBtn.addEventListener('click', () => {
            if (gameState.queijeira.leiteQuantity === 2 && !gameState.queijeira.curing) {
                gameState.queijeira.curing = true;
                updateQueijeiraDisplay();
                
                setTimeout(() => {
                    // Produzir 1 queijo na prateleira
                    addToPrateleira('queijo', 1);
                    
                    // Limpar queijeira
                    gameState.queijeira.leiteQuantity = 0;
                    gameState.queijeira.curing = false;
                    updateQueijeiraDisplay();
                }, 60000); // 1 minuto
            }
        });

        // Sistema da Vaca
        function updateVacaDisplay() {
            switch (gameState.vaca.status) {
                case 'waiting':
                    vacaStatus.textContent = '🐄';
                    vacaText.textContent = 'Esperando ração';
                    leitesDiv.classList.add('hidden');
                    break;
                case 'eating':
                    vacaStatus.textContent = '🐄';
                    vacaText.textContent = 'Comendo... (10s)';
                    leitesDiv.classList.add('hidden');
                    break;
                case 'producing':
                    vacaStatus.textContent = '🐄';
                    vacaText.textContent = 'Produzindo leite... (15s)';
                    leitesDiv.classList.add('hidden');
                    break;
                case 'ready':
                    vacaStatus.textContent = '🐄';
                    vacaText.textContent = 'Leite pronto para coleta!';
                    leitesDiv.classList.remove('hidden');
                    break;
                case 'resting':
                    vacaStatus.textContent = '😴';
                    vacaText.textContent = `Descansando... (${Math.ceil(gameState.vaca.tempoRestante / 60)}min)`;
                    leitesDiv.classList.add('hidden');
                    break;
            }
            
            // Atualizar slot de ração
            if (gameState.vaca.racaoSlot) {
                racaoSlot.innerHTML = `<div class="text-lg">${itemEmojis[gameState.vaca.racaoSlot]}</div>`;
            } else {
                racaoSlot.innerHTML = `<span class="text-yellow-400 text-xs">🥜</span>`;
            }
        }

        // Sistema da Galinha
        function updateGalinhaDisplay() {
            switch (gameState.galinha.status) {
                case 'waiting':
                    galinhaStatus.textContent = '🐔';
                    galinhaText.textContent = 'Esperando ração';
                    ovosDiv.classList.add('hidden');
                    break;
                case 'eating':
                    galinhaStatus.textContent = '🐔';
                    galinhaText.textContent = 'Comendo... (7s)';
                    ovosDiv.classList.add('hidden');
                    break;
                case 'producing':
                    galinhaStatus.textContent = '🐔';
                    galinhaText.textContent = 'Botando ovos... (12s)';
                    ovosDiv.classList.add('hidden');
                    break;
                case 'ready':
                    galinhaStatus.textContent = '🐔';
                    galinhaText.textContent = 'Ovos prontos para coleta!';
                    ovosDiv.classList.remove('hidden');
                    break;
                case 'resting':
                    galinhaStatus.textContent = '😴';
                    galinhaText.textContent = `Descansando... (${Math.ceil(gameState.galinha.tempoRestante / 60)}min)`;
                    ovosDiv.classList.add('hidden');
                    break;
            }
            
            // Atualizar slot de ração
            if (gameState.galinha.racaoSlot) {
                galinhaRacaoSlot.innerHTML = `<div class="text-lg">${itemEmojis[gameState.galinha.racaoSlot]}</div>`;
            } else {
                galinhaRacaoSlot.innerHTML = `<span class="text-yellow-400 text-xs">🥜</span>`;
            }
        }

        // Clique no slot de ração da vaca
        racaoSlot.addEventListener('click', () => {
            if (gameState.vaca.status !== 'waiting') return;
            
            if (gameState.selectedItem === 'racao' && hasItemInStock('racao') && !gameState.vaca.racaoSlot) {
                gameState.vaca.racaoSlot = 'racao';
                removeFromStock('racao', 1);
                updateEstoqueDisplay();
                updatePrateleiraDisplay();
                
                // Iniciar processo de alimentação
                gameState.vaca.status = 'eating';
                updateVacaDisplay();
                
                // Após 10 segundos, vaca termina de comer e começa a produzir
                setTimeout(() => {
                    gameState.vaca.racaoSlot = null;
                    gameState.vaca.status = 'producing';
                    updateVacaDisplay();
                    
                    // Após 15 segundos, produz 3 leites
                    setTimeout(() => {
                        gameState.vaca.status = 'ready';
                        gameState.vaca.leitesDisponiveis = [true, true, true];
                        updateVacaDisplay();
                    }, 15000);
                }, 10000);
            }
        });

        // Clique no slot de ração da galinha
        galinhaRacaoSlot.addEventListener('click', () => {
            if (gameState.galinha.status !== 'waiting') return;
            
            if (gameState.selectedItem === 'racao' && hasItemInStock('racao') && !gameState.galinha.racaoSlot) {
                gameState.galinha.racaoSlot = 'racao';
                removeFromStock('racao', 1);
                updateEstoqueDisplay();
                updatePrateleiraDisplay();
                
                // Iniciar processo de alimentação
                gameState.galinha.status = 'eating';
                updateGalinhaDisplay();
                
                // Após 7 segundos, galinha termina de comer e começa a produzir
                setTimeout(() => {
                    gameState.galinha.racaoSlot = null;
                    gameState.galinha.status = 'producing';
                    updateGalinhaDisplay();
                    
                    // Após 12 segundos, produz 3 ovos
                    setTimeout(() => {
                        gameState.galinha.status = 'ready';
                        gameState.galinha.ovosDisponiveis = [true, true, true];
                        updateGalinhaDisplay();
                    }, 12000);
                }, 7000);
            }
        });

        // Função para coletar leite
        window.coletarLeite = function(index) {
            if (gameState.vaca.leitesDisponiveis[index]) {
                gameState.vaca.leitesDisponiveis[index] = false;
                addToEstoque('leite', 1);
                updateEstoqueDisplay();
                
                // Atualizar visual do leite coletado
                const leiteSpans = leitesDiv.querySelectorAll('span');
                leiteSpans[index].style.opacity = '0.3';
                leiteSpans[index].style.pointerEvents = 'none';
                
                // Verificar se todos os leites foram coletados
                const todosColetados = gameState.vaca.leitesDisponiveis.every(leite => !leite);
                if (todosColetados) {
                    // Iniciar período de descanso (10 minutos)
                    gameState.vaca.status = 'resting';
                    gameState.vaca.tempoRestante = 600; // 10 minutos em segundos
                    updateVacaDisplay();
                    
                    // Resetar leites visuais
                    setTimeout(() => {
                        leiteSpans.forEach(span => {
                            span.style.opacity = '1';
                            span.style.pointerEvents = 'auto';
                        });
                    }, 1000);
                    
                    // Countdown do descanso
                    const restInterval = setInterval(() => {
                        gameState.vaca.tempoRestante--;
                        updateVacaDisplay();
                        
                        if (gameState.vaca.tempoRestante <= 0) {
                            clearInterval(restInterval);
                            gameState.vaca.status = 'waiting';
                            updateVacaDisplay();
                        }
                    }, 1000);
                }
            }
        };

        // Função para coletar ovo
        window.coletarOvo = function(index) {
            if (gameState.galinha.ovosDisponiveis[index]) {
                gameState.galinha.ovosDisponiveis[index] = false;
                addToEstoque('ovo', 1);
                updateEstoqueDisplay();
                
                // Atualizar visual do ovo coletado
                const ovoSpans = ovosDiv.querySelectorAll('span');
                ovoSpans[index].style.opacity = '0.3';
                ovoSpans[index].style.pointerEvents = 'none';
                
                // Verificar se todos os ovos foram coletados
                const todosColetados = gameState.galinha.ovosDisponiveis.every(ovo => !ovo);
                if (todosColetados) {
                    // Iniciar período de descanso (8 minutos)
                    gameState.galinha.status = 'resting';
                    gameState.galinha.tempoRestante = 480; // 8 minutos em segundos
                    updateGalinhaDisplay();
                    
                    // Resetar ovos visuais
                    setTimeout(() => {
                        ovoSpans.forEach(span => {
                            span.style.opacity = '1';
                            span.style.pointerEvents = 'auto';
                        });
                    }, 1000);
                    
                    // Countdown do descanso
                    const restInterval = setInterval(() => {
                        gameState.galinha.tempoRestante--;
                        updateGalinhaDisplay();
                        
                        if (gameState.galinha.tempoRestante <= 0) {
                            clearInterval(restInterval);
                            gameState.galinha.status = 'waiting';
                            updateGalinhaDisplay();
                        }
                    }, 1000);
                }
            }
        };

        // Sistema do Banco
        function updateBancoDisplay() {
            dividaAtualDisplay.textContent = `🪙 ${gameState.banco.divida}`;
            
            if (gameState.banco.divida > 0) {
                // Tem dívida - mostrar seção de pagamento
                emprestimoSection.classList.add('hidden');
                pagamentoSection.classList.remove('hidden');
                dividaAtualDisplay.classList.add('text-red-600');
                dividaAtualDisplay.classList.remove('text-green-600');
                
                // Definir valor máximo de pagamento
                valorPagamentoInput.max = Math.min(gameState.coins, gameState.banco.divida);
            } else {
                // Sem dívida - mostrar seção de empréstimo
                emprestimoSection.classList.remove('hidden');
                pagamentoSection.classList.add('hidden');
                dividaAtualDisplay.classList.remove('text-red-600');
                dividaAtualDisplay.classList.add('text-green-600');
            }
        }

        // Botão emprestar
        emprestarBtn.addEventListener('click', () => {
            const valor = parseInt(valorEmprestimoInput.value);
            
            if (valor && valor > 0 && valor <= 1000 && gameState.banco.divida === 0) {
                gameState.coins += valor;
                gameState.banco.divida = valor;
                
                updateCoinsDisplay();
                updateBancoDisplay();
                
                // Limpar input
                valorEmprestimoInput.value = '';
                
                // Feedback visual
                emprestarBtn.classList.add('bg-green-800');
                setTimeout(() => emprestarBtn.classList.remove('bg-green-800'), 300);
            } else {
                // Feedback de erro
                emprestarBtn.classList.add('bg-red-500');
                setTimeout(() => emprestarBtn.classList.remove('bg-red-500'), 300);
            }
        });

        // Botão pagar
        pagarBtn.addEventListener('click', () => {
            const valor = parseInt(valorPagamentoInput.value);
            
            if (valor && valor > 0 && valor <= gameState.coins && valor <= gameState.banco.divida) {
                gameState.coins -= valor;
                gameState.banco.divida -= valor;
                
                updateCoinsDisplay();
                updateBancoDisplay();
                
                // Limpar input
                valorPagamentoInput.value = '';
                
                // Feedback visual
                pagarBtn.classList.add('bg-blue-800');
                setTimeout(() => pagarBtn.classList.remove('bg-blue-800'), 300);
                
                // Se quitou a dívida
                if (gameState.banco.divida === 0) {
                    dividaAtualDisplay.classList.add('coin-animation');
                    setTimeout(() => dividaAtualDisplay.classList.remove('coin-animation'), 500);
                }
            } else {
                // Feedback de erro
                pagarBtn.classList.add('bg-red-500');
                setTimeout(() => pagarBtn.classList.remove('bg-red-500'), 300);
            }
        });

        // Função para atualizar display do balcão
        function updateBalcaoDisplay() {
            document.querySelectorAll('.balcao-slot').forEach((slot, index) => {
                if (gameState.balcao[index]) {
                    slot.innerHTML = `
                        <div class="text-center">
                            <div class="text-2xl">${itemEmojis[gameState.balcao[index]]}</div>
                            <div class="text-xs text-gray-600 mt-1">${gameState.balcao[index]}</div>
                        </div>
                    `;
                    slot.classList.remove('bg-gray-50', 'border-gray-300');
                    slot.classList.add('bg-green-50', 'border-green-400');
                } else {
                    slot.innerHTML = `<span class="text-gray-400 text-sm">Slot ${index + 1}</span>`;
                    slot.classList.remove('bg-green-50', 'border-green-400');
                    slot.classList.add('bg-gray-50', 'border-gray-300');
                }
            });
        }

        // Inicializar display
        updateEstoqueDisplay();
        updatePrateleiraDisplay();
        updateBalcaoDisplay();
        updateMoinhoDisplay();
        updateFogaoDisplay();
        updateMaquinaSucoDisplay();
        updateDestiladoraDisplay();
        updateBarrilDisplay();
        updateVacaDisplay();
        updateGalinhaDisplay();
        updateQueijeiraDisplay();
        updateBancoDisplay();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9720025bc06b007f',t:'MTc1NTY3MzE3OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
