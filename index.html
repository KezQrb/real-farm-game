<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Farm - Jogo de Fazendinha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            transition: background-color 0.5s ease;
        }
        
        .farm-title {
            font-family: 'Fredoka One', cursive;
        }
        
        .canteiro {
            width: 80px;
            height: 80px;
            border: 3px solid #8B4513;
            background: linear-gradient(45deg, #D2691E, #CD853F);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .canteiro:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .canteiro.fertilized {
            background: linear-gradient(45deg, #654321, #8B4513);
        }
        
        .canteiro.planted {
            background: linear-gradient(45deg, #228B22, #32CD32);
        }
        
        .canteiro.watered {
            background: linear-gradient(45deg, #006400, #228B22);
            box-shadow: inset 0 0 10px rgba(0,100,255,0.3);
        }
        
        .canteiro.ready {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px #FFD700; }
            to { box-shadow: 0 0 20px #FFD700, 0 0 30px #FFD700; }
        }
        
        .seed-item, .inventory-slot, .shop-slot {
            width: 60px;
            height: 60px;
            border: 2px solid #8B4513;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background: #F5DEB3;
        }
        
        .seed-item:hover, .inventory-slot:hover, .shop-slot:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .raindrop {
            position: absolute;
            background: linear-gradient(transparent, #87CEEB);
            width: 2px;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            from { transform: translateY(-100vh); }
            to { transform: translateY(100vh); }
        }
        
        .well {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #4682B4, #2F4F4F);
            border: 4px solid #696969;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }
        
        .well:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(70, 130, 180, 0.5);
        }
        
        .flower-slot {
            width: 50px;
            height: 50px;
            border: 2px solid #8B4513;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: #F0F8FF;
        }
        
        .flower-slot:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .flower-slot.growing {
            background: #E6E6FA;
            opacity: 0.5;
        }
        
        .tree-slot {
            width: 80px;
            height: 80px;
            border: 3px solid #8B4513;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            background: #F0F8FF;
            margin: 0 auto;
        }
        
        .tree-slot:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .grass-slot {
            width: 60px;
            height: 60px;
            border: 2px solid #22C55E;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background: #F0FDF4;
        }
        
        .grass-slot:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        
        .grass-slot.growing {
            background: #E5E7EB;
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-green-200 to-green-400 min-h-screen p-4">
    <div id="rain-container"></div>
    
    <!-- Header -->
    <div class="text-center mb-6">
        <h1 class="farm-title text-4xl text-green-800 mb-4">ğŸŒ¾ Real Farm ğŸŒ¾</h1>
        
        <!-- Avatar do Fazendeiro -->
        <div class="bg-white/90 rounded-lg p-4 max-w-md mx-auto mb-4">
            <div class="flex items-center gap-4">
                <div class="text-6xl" id="farmer-avatar">ğŸ‘¨â€ğŸŒ¾</div>
                <div class="flex-1">
                    <div class="font-bold text-lg text-green-800">VocÃª</div>
                    <div class="text-sm text-gray-600" id="farmer-status">SaudÃ¡vel</div>
                    
                    <!-- Barra de Energia -->
                    <div class="mt-2">
                        <div class="flex justify-between text-xs mb-1">
                            <span>Energia</span>
                            <span id="energy-text">200/200</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-green-500 h-3 rounded-full transition-all duration-300" id="energy-bar" style="width: 100%"></div>
                        </div>
                    </div>
                    
                    <!-- BotÃµes do Avatar -->
                    <div class="flex gap-2 mt-3">
                        <button id="rest-btn" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded transition-colors">
                            ğŸ˜´ Descansar
                        </button>
                        <button id="eat-btn" class="bg-orange-500 hover:bg-orange-600 text-white text-xs px-3 py-1 rounded transition-colors">
                            ğŸ½ï¸ Comer
                        </button>
                        <button id="drink-tea-btn" class="bg-green-500 hover:bg-green-600 text-white text-xs px-3 py-1 rounded transition-colors hidden">
                            ğŸµ Tomar ChÃ¡
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bg-white/90 rounded-lg p-3 max-w-lg mx-auto mb-4">
            <div class="text-center">
                <div class="text-2xl mb-2" id="season-icon">ğŸŒ¸</div>
                <div class="font-bold text-lg" id="season-name">Primavera</div>
                <div class="text-sm text-gray-600" id="season-bonus">PlantaÃ§Ãµes valem 10% a mais</div>
                <div class="text-xs text-gray-500" id="season-timer">59:59</div>
            </div>
        </div>
        <div class="flex justify-center gap-8 bg-white/80 rounded-lg p-4 max-w-md mx-auto">
            <div class="text-center">
                <div class="text-2xl">ğŸ’°</div>
                <div class="font-bold text-yellow-600" id="coins">200</div>
            </div>
            <div class="text-center">
                <div class="text-2xl">ğŸ’§</div>
                <div class="font-bold text-blue-600" id="water">10</div>
            </div>
            <div class="text-center">
                <div class="text-2xl">ğŸ‚</div>
                <div class="font-bold text-green-600" id="fertilizer">50</div>
            </div>
        </div>
    </div>

    <div class="flex gap-6 max-w-7xl mx-auto">
        <!-- Sementes (Esquerda) -->
        <div class="bg-white/90 rounded-lg p-4 w-80">
            <h2 class="text-xl font-bold text-green-800 mb-4 text-center">ğŸŒ± Sementes</h2>
            <div class="grid grid-cols-2 gap-3">
                <div class="seed-item" data-seed="abobora" data-price="10" title="AbÃ³bora - 10 moedas">ğŸƒ</div>
                <div class="seed-item" data-seed="alface" data-price="10" title="Alface - 10 moedas">ğŸ¥¬</div>
                <div class="seed-item" data-seed="batata" data-price="10" title="Batata - 10 moedas">ğŸ¥”</div>
                <div class="seed-item" data-seed="brocolis" data-price="10" title="BrÃ³colis - 10 moedas">ğŸ¥¦</div>
                <div class="seed-item" data-seed="cafe" data-price="10" title="CafÃ© - 10 moedas">ğŸ”´</div>
                <div class="seed-item" data-seed="cenoura" data-price="10" title="Cenoura - 10 moedas">ğŸ¥•</div>
                <div class="seed-item" data-seed="milho" data-price="10" title="Milho - 10 moedas">ğŸŒ½</div>
                <div class="seed-item" data-seed="tomate" data-price="10" title="Tomate - 10 moedas">ğŸ…</div>
                <div class="seed-item" data-seed="trigo" data-price="10" title="Trigo - 10 moedas">ğŸŒ¾</div>
                <div class="seed-item" data-seed="uva" data-price="10" title="Uva - 10 moedas">ğŸ‡</div>
            </div>
            
            <!-- Celeiro -->
            <div class="mt-6">
                <h3 class="text-lg font-bold text-green-800 mb-3 text-center">ğŸšï¸ Celeiro</h3>
                <div class="grid grid-cols-4 gap-2 max-h-40 overflow-y-auto" id="barn">
                    <!-- Slots do celeiro serÃ£o adicionados dinamicamente -->
                </div>
            </div>
            
            <!-- Mercadinho -->
            <div class="mt-6">
                <h3 class="text-lg font-bold text-green-800 mb-3 text-center">ğŸª Mercadinho</h3>
                <div class="grid grid-cols-2 gap-2" id="shop">
                    <div class="shop-slot" data-item="poco" data-price="100" title="PoÃ§o de Ãgua - 100 moedas">ğŸª£</div>
                    <div class="shop-slot" data-item="bosque" data-price="500" title="Bosque - 500 moedas">ğŸŒ²</div>
                    <div class="shop-slot hidden" data-item="machado" data-price="200" title="Machado - 200 moedas" id="axe-shop">ğŸª“</div>
                    <div class="shop-slot" data-item="cozinha" data-price="300" title="Cozinha (FogÃ£o + Forno) - 300 moedas">ğŸ³</div>
                    <div class="shop-slot" data-item="maquina_suco" data-price="250" title="MÃ¡quina de Suco - 250 moedas">ğŸ§ƒ</div>
                    <div class="shop-slot" data-item="torra_cafe" data-price="400" title="Torra de CafÃ© - 400 moedas">â˜•</div>
                    <div class="shop-slot" data-item="moinho" data-price="350" title="Moinho - 350 moedas">ğŸ­</div>
                    <div class="shop-slot" data-item="campo_grama" data-price="200" title="Campo de Grama - 200 moedas">ğŸŒ¿</div>
                    <div class="shop-slot" data-item="secador_feno" data-price="300" title="Secador/Feno - 300 moedas">ğŸŒ¾</div>
                    <div class="shop-slot" data-item="pasto_vacas" data-price="800" title="Pasto das Vacas - 800 moedas">ğŸ„</div>
                    <div class="shop-slot hidden" data-item="vaca" data-price="150" title="Vaca - 150 moedas" id="cow-shop">ğŸ„</div>
                    <div class="shop-slot" data-item="queijeira" data-price="350" title="Queijeira - 350 moedas">ğŸ§€</div>
                    <div class="shop-slot" data-item="composteira" data-price="250" title="Composteira - 250 moedas">ğŸ‚</div>
                    <div class="shop-slot" data-item="curral_ovelhas" data-price="600" title="Curral das Ovelhas - 600 moedas">ğŸ‘</div>
                    <div class="shop-slot hidden" data-item="ovelha" data-price="120" title="Ovelha - 120 moedas" id="sheep-shop">ğŸ‘</div>
                    <div class="shop-slot hidden" data-item="tesoura" data-price="80" title="Tesoura de Tosquiar - 80 moedas" id="shears-shop">âœ‚ï¸</div>
                    <div class="shop-slot hidden" data-item="maquina_fiar" data-price="400" title="MÃ¡quina de Fiar - 400 moedas" id="spinning-machine-shop">ğŸ§µ</div>
                    <div class="shop-slot" data-item="galinheiro" data-price="400" title="Galinheiro - 400 moedas">ğŸ”</div>
                    <div class="shop-slot hidden" data-item="galinha" data-price="80" title="Galinha - 80 moedas" id="chicken-shop">ğŸ”</div>
                    <div class="shop-slot" data-item="misturador" data-price="300" title="Misturador - 300 moedas">ğŸ¥„</div>
                </div>
            </div>
        </div>

        <!-- Ãrea Central -->
        <div class="flex-1">
            <!-- Canteiros -->
            <div class="bg-white/90 rounded-lg p-6 mb-6">
                <h2 class="text-xl font-bold text-green-800 mb-4 text-center">ğŸŒ± Canteiros</h2>
                <div class="grid grid-cols-4 gap-4 justify-center" id="farm">
                    <!-- 8 canteiros -->
                </div>
            </div>
            
            <!-- PoÃ§o (aparece apÃ³s compra) -->
            <div id="well-container" class="text-center mb-6 hidden">
                <div class="well mx-auto" id="water-well" title="Coletar Ã¡gua (4 baldes por clique)">ğŸª£</div>
            </div>
            
            <!-- Galinheiro -->
            <div id="chicken-coop" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-yellow-600 mb-4 text-center">ğŸ” Galinheiro</h2>
                <div class="grid grid-cols-2 gap-6">
                    <!-- 4 slots de galinhas -->
                    <div class="chicken-slot border-4 border-yellow-400 rounded-lg p-4 bg-yellow-50" data-index="0">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="chicken-0">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="chicken-status-0">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="chicken-feed-slot-0" title="Coloque raÃ§Ã£o para galinhas aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="egg-slots-0">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                        </div>
                        <div class="flex justify-center mt-2">
                            <button class="bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1 rounded transition-colors hidden" id="sacrifice-btn-0">
                                ğŸ”ª Sacrificar
                            </button>
                        </div>
                    </div>
                    
                    <div class="chicken-slot border-4 border-yellow-400 rounded-lg p-4 bg-yellow-50" data-index="1">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="chicken-1">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="chicken-status-1">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="chicken-feed-slot-1" title="Coloque raÃ§Ã£o para galinhas aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="egg-slots-1">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                        </div>
                        <div class="flex justify-center mt-2">
                            <button class="bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1 rounded transition-colors hidden" id="sacrifice-btn-1">
                                ğŸ”ª Sacrificar
                            </button>
                        </div>
                    </div>
                    
                    <div class="chicken-slot border-4 border-yellow-400 rounded-lg p-4 bg-yellow-50" data-index="2">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="chicken-2">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="chicken-status-2">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="chicken-feed-slot-2" title="Coloque raÃ§Ã£o para galinhas aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="egg-slots-2">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                        </div>
                        <div class="flex justify-center mt-2">
                            <button class="bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1 rounded transition-colors hidden" id="sacrifice-btn-2">
                                ğŸ”ª Sacrificar
                            </button>
                        </div>
                    </div>
                    
                    <div class="chicken-slot border-4 border-yellow-400 rounded-lg p-4 bg-yellow-50" data-index="3">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="chicken-3">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="chicken-status-3">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="chicken-feed-slot-3" title="Coloque raÃ§Ã£o para galinhas aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="egg-slots-3">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Ovo"></div>
                        </div>
                        <div class="flex justify-center mt-2">
                            <button class="bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1 rounded transition-colors hidden" id="sacrifice-btn-3">
                                ğŸ”ª Sacrificar
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center mt-4">
                    <button id="feed-all-chickens" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                        ğŸŒ¾ Alimentar Todas
                    </button>
                </div>
                <div class="text-xs text-center text-gray-600 mt-4">
                    Coloque raÃ§Ã£o para alimentar as galinhas â€¢ 10s para comer + 5s para botar â€¢ 3 ovos â€¢ Descanso: 5 minutos<br>
                    2-3 galinhas: 10% chance de pintinho (30 min para crescer)
                </div>
            </div>
            
            <!-- Campo de Flores (sÃ³ na primavera) -->
            <div id="flower-field" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-pink-600 mb-4 text-center">ğŸŒ¸ Campo de Flores</h2>
                <div class="flex justify-center gap-6">
                    <div class="text-center">
                        <h3 class="font-bold text-red-600 mb-2">ğŸŒ¹ Rosas</h3>
                        <div class="grid grid-cols-3 gap-2" id="rosa-flowers">
                            <div class="flower-slot" data-type="rosa" data-index="0">ğŸŒ¹</div>
                            <div class="flower-slot" data-type="rosa" data-index="1">ğŸŒ¹</div>
                            <div class="flower-slot" data-type="rosa" data-index="2">ğŸŒ¹</div>
                        </div>
                    </div>
                    <div class="text-center">
                        <h3 class="font-bold text-yellow-600 mb-2">ğŸŒ» GirassÃ³is</h3>
                        <div class="grid grid-cols-3 gap-2" id="girassol-flowers">
                            <div class="flower-slot" data-type="girassol" data-index="0">ğŸŒ»</div>
                            <div class="flower-slot" data-type="girassol" data-index="1">ğŸŒ»</div>
                            <div class="flower-slot" data-type="girassol" data-index="2">ğŸŒ»</div>
                        </div>
                    </div>
                    <div class="text-center">
                        <h3 class="font-bold text-white-600 mb-2">ğŸŒ¼ Margaridas</h3>
                        <div class="grid grid-cols-3 gap-2" id="margarida-flowers">
                            <div class="flower-slot" data-type="margarida" data-index="0">ğŸŒ¼</div>
                            <div class="flower-slot" data-type="margarida" data-index="1">ğŸŒ¼</div>
                            <div class="flower-slot" data-type="margarida" data-index="2">ğŸŒ¼</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Curral das Ovelhas -->
            <div id="sheep-pen" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-gray-600 mb-4 text-center">ğŸ‘ Curral das Ovelhas</h2>
                <div class="grid grid-cols-2 gap-6">
                    <!-- 4 slots de ovelhas -->
                    <div class="sheep-slot border-4 border-gray-400 rounded-lg p-4 bg-gray-50" data-index="0">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="sheep-0">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="sheep-status-0">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="sheep-hay-slot-0" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="wool-slots-0">
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                        </div>
                    </div>
                    
                    <div class="sheep-slot border-4 border-gray-400 rounded-lg p-4 bg-gray-50" data-index="1">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="sheep-1">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="sheep-status-1">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="sheep-hay-slot-1" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="wool-slots-1">
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                        </div>
                    </div>
                    
                    <div class="sheep-slot border-4 border-gray-400 rounded-lg p-4 bg-gray-50" data-index="2">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="sheep-2">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="sheep-status-2">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="sheep-hay-slot-2" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="wool-slots-2">
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                        </div>
                    </div>
                    
                    <div class="sheep-slot border-4 border-gray-400 rounded-lg p-4 bg-gray-50" data-index="3">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="sheep-3">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="sheep-status-3">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="sheep-hay-slot-3" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="wool-slots-3">
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="LÃ£"></div>
                        </div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-4">
                    Coloque feno para alimentar as ovelhas â€¢ 15s para comer + 5s para produzir â€¢ 2 lÃ£s â€¢ Precisa de tesoura para coletar â€¢ Descanso: 10 minutos
                </div>
            </div>
            
            <!-- Bosque -->
            <div id="forest" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-green-800 mb-4 text-center">ğŸŒ² Bosque</h2>
                <div class="flex justify-center gap-6">
                    <div class="text-center">
                        <h3 class="font-bold text-brown-600 mb-2">ğŸŒ³ Ãrvore Comum</h3>
                        <div class="tree-slot" data-type="comum" title="Clique para coletar tronco (precisa de machado)">ğŸŒ³</div>
                        <div class="text-xs mt-1">Troncos: âˆ</div>
                    </div>
                    <div class="text-center">
                        <h3 class="font-bold text-red-600 mb-2">ğŸ Macieira</h3>
                        <div class="tree-slot" data-type="macieira" title="Clique para coletar maÃ§Ã£">ğŸŒ³</div>
                        <div class="text-xs mt-1" id="maca-count">MaÃ§Ã£s: 4</div>
                    </div>
                    <div class="text-center">
                        <h3 class="font-bold text-orange-600 mb-2">ğŸŠ Laranjeira</h3>
                        <div class="tree-slot" data-type="laranjeira" title="Clique para coletar laranja">ğŸŒ³</div>
                        <div class="text-xs mt-1" id="laranja-count">Laranjas: 4</div>
                    </div>
                    <div class="text-center">
                        <h3 class="font-bold text-yellow-600 mb-2">ğŸŒ Bananeira</h3>
                        <div class="tree-slot" data-type="bananeira" title="Clique para coletar banana">ğŸŒ´</div>
                        <div class="text-xs mt-1" id="banana-count">Bananas: 4</div>
                    </div>
                </div>
                <div class="text-center mt-4" id="axe-status">
                    <div class="text-sm text-gray-600">Machado: <span id="axe-uses">40</span> usos restantes</div>
                </div>
            </div>
            
            <!-- Ãrea Cortar Lenha -->
            <div id="wood-cutting" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-brown-600 mb-4 text-center">ğŸª“ Cortar Lenha</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="wood-slot" title="Coloque um tronco aqui">
                            <span class="text-gray-400">ğŸªµ</span>
                        </div>
                        <div class="text-xs mt-1">Tronco</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="cut-wood" class="bg-brown-600 hover:bg-brown-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸª“ Cortar
                        </button>
                        <div class="text-xs mt-1">3 segundos</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸª“</div>
                        <div class="text-xs mt-1">4 Lenhas</div>
                    </div>
                </div>
            </div>
            
            <!-- MÃ¡quina de Suco -->
            <div id="juice-machine" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-purple-600 mb-4 text-center">ğŸ§ƒ MÃ¡quina de Suco</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="juice-slot" title="Coloque 3 uvas aqui">
                            <span class="text-gray-400">ğŸ‡</span>
                        </div>
                        <div class="text-xs mt-1">3 Uvas</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="produce-juice" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ§ƒ Produzir
                        </button>
                        <div class="text-xs mt-1" id="juice-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸ§ƒ</div>
                        <div class="text-xs mt-1">Garrafa de Suco</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 3 uvas = 1 garrafa de suco (20 segundos)
                </div>
            </div>
            
            <!-- Torra de CafÃ© -->
            <div id="coffee-roaster" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-amber-700 mb-4 text-center">â˜• Torra de CafÃ©</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="coffee-beans-slot" title="Coloque 4 grÃ£os de cafÃ© aqui">
                            <span class="text-gray-400">â˜•</span>
                        </div>
                        <div class="text-xs mt-1">4 GrÃ£os de CafÃ©</div>
                    </div>
                    <div class="text-center">
                        <div class="inventory-slot" id="coffee-fuel-slot" title="Coloque 3 lenhas aqui">
                            <span class="text-gray-400">ğŸª“</span>
                        </div>
                        <div class="text-xs mt-1">3 Lenhas</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="roast-coffee" class="bg-amber-700 hover:bg-amber-800 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            â˜• Torrar
                        </button>
                        <div class="text-xs mt-1" id="roast-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">â˜•</div>
                        <div class="text-xs mt-1">Saco de CafÃ©</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 4 grÃ£os de cafÃ© + 3 lenhas = 1 saco de cafÃ© (1 minuto)
                </div>
            </div>
            
            <!-- Moinho -->
            <div id="windmill" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-yellow-700 mb-4 text-center">ğŸ­ Moinho</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="wheat-slot" title="Coloque 4 trigos aqui">
                            <span class="text-gray-400">ğŸŒ¾</span>
                        </div>
                        <div class="text-xs mt-1">4 Trigos</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="grind-wheat" class="bg-yellow-700 hover:bg-yellow-800 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ­ Moer
                        </button>
                        <div class="text-xs mt-1" id="grind-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸŒ¾</div>
                        <div class="text-xs mt-1">Saco de Farinha</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 4 trigos = 1 saco de farinha (30 segundos)
                </div>
            </div>
            
            <!-- Secador/Feno -->
            <div id="hay-dryer" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-amber-600 mb-4 text-center">ğŸŒ¾ Secador/Feno</h2>
                
                <!-- Secador de Grama -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-yellow-600 mb-3 text-center">â˜€ï¸ Secador de Grama</h3>
                    <div class="flex justify-center items-center gap-4">
                        <div class="text-center">
                            <div class="inventory-slot" id="dryer-slot" title="Coloque 8 gramas aqui">
                                <span class="text-gray-400">ğŸŒ¿</span>
                            </div>
                            <div class="text-xs mt-1">8 Gramas</div>
                        </div>
                        <div class="text-2xl">â†’</div>
                        <div class="text-center">
                            <button id="dry-grass" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                                â˜€ï¸ Secar
                            </button>
                            <div class="text-xs mt-1" id="dry-timer"></div>
                        </div>
                        <div class="text-2xl">â†’</div>
                        <div class="text-center">
                            <div class="text-3xl">ğŸŒ¾</div>
                            <div class="text-xs mt-1">8 Gramas Secas</div>
                        </div>
                    </div>
                    <div class="text-xs text-center text-gray-600 mt-2">
                        Receita: 8 gramas = 8 gramas secas (30 segundos)
                    </div>
                </div>
                
                <!-- Fazer Feno -->
                <div>
                    <h3 class="text-lg font-bold text-amber-700 mb-3 text-center">ğŸŒ¾ Fazer Feno</h3>
                    <div class="flex justify-center items-center gap-4">
                        <div class="text-center">
                            <div class="inventory-slot" id="hay-slot" title="Coloque 4 gramas secas aqui">
                                <span class="text-gray-400">ğŸŒ¾</span>
                            </div>
                            <div class="text-xs mt-1">4 Gramas Secas</div>
                        </div>
                        <div class="text-2xl">â†’</div>
                        <div class="text-center">
                            <button id="make-hay" class="bg-amber-700 hover:bg-amber-800 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                                ğŸŒ¾ Fazer
                            </button>
                            <div class="text-xs mt-1" id="hay-timer"></div>
                        </div>
                        <div class="text-2xl">â†’</div>
                        <div class="text-center">
                            <div class="text-3xl">ğŸŒ¾</div>
                            <div class="text-xs mt-1">1 Feno</div>
                        </div>
                    </div>
                    <div class="text-xs text-center text-gray-600 mt-2">
                        Receita: 4 gramas secas = 1 feno (10 segundos)
                    </div>
                </div>
            </div>
            
            <!-- Campo de Grama -->
            <div id="grass-field" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-green-600 mb-4 text-center">ğŸŒ¿ Campo de Grama</h2>
                <div class="grid grid-cols-5 gap-3 justify-center" id="grass-slots">
                    <!-- 20 slots de grama serÃ£o criados dinamicamente -->
                </div>
                <div class="text-xs text-center text-gray-600 mt-4">
                    Clique na grama para coletar â€¢ A cada 8 gramas coletadas ganha 1 flor â€¢ Grama renasce em 1 minuto
                </div>
            </div>
            
            <!-- Pasto das Vacas -->
            <div id="cow-pasture" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-amber-700 mb-4 text-center">ğŸ„ Pasto das Vacas</h2>
                <div class="grid grid-cols-2 gap-6">
                    <!-- 4 slots de vacas -->
                    <div class="cow-slot border-4 border-green-600 rounded-lg p-4 bg-green-50" data-index="0">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="cow-0">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="cow-status-0">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="hay-slot-0" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="milk-slots-0">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Esterco"></div>
                        </div>
                    </div>
                    
                    <div class="cow-slot border-4 border-green-600 rounded-lg p-4 bg-green-50" data-index="1">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="cow-1">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="cow-status-1">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="hay-slot-1" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="milk-slots-1">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Esterco"></div>
                        </div>
                    </div>
                    
                    <div class="cow-slot border-4 border-green-600 rounded-lg p-4 bg-green-50" data-index="2">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="cow-2">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="cow-status-2">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="hay-slot-2" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="milk-slots-2">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Esterco"></div>
                        </div>
                    </div>
                    
                    <div class="cow-slot border-4 border-green-600 rounded-lg p-4 bg-green-50" data-index="3">
                        <div class="text-center mb-3">
                            <div class="text-6xl mb-2" id="cow-3">ğŸŸ«</div>
                            <div class="text-xs text-gray-600" id="cow-status-3">Slot vazio</div>
                        </div>
                        <div class="flex justify-center gap-2 mb-3">
                            <div class="inventory-slot w-12 h-12" id="hay-slot-3" title="Coloque feno aqui">
                                <span class="text-gray-400 text-sm">ğŸŒ¾</span>
                            </div>
                        </div>
                        <div class="flex justify-center gap-1" id="milk-slots-3">
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Leite"></div>
                            <div class="inventory-slot w-8 h-8 text-xs" title="Esterco"></div>
                        </div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-4">
                    Coloque feno para alimentar as vacas â€¢ 15s para comer + 10s para produzir â€¢ 3 leites + 1 esterco â€¢ Descanso: 10 minutos
                </div>
            </div>
            
            <!-- Queijeira -->
            <div id="cheese-maker" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-yellow-600 mb-4 text-center">ğŸ§€ Queijeira</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="cheese-milk-slot" title="Coloque 2 leites aqui">
                            <span class="text-gray-400">ğŸ¥›</span>
                        </div>
                        <div class="text-xs mt-1">2 Leites</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="cure-cheese" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ§€ Curar
                        </button>
                        <div class="text-xs mt-1" id="cheese-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸ§€</div>
                        <div class="text-xs mt-1">1 Queijo</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 2 leites = 1 queijo (1 minuto)
                </div>
            </div>
            
            <!-- Composteira -->
            <div id="composter" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-amber-600 mb-4 text-center">ğŸ‚ Composteira</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="compost-organic-slot" title="Coloque 5 materiais orgÃ¢nicos aqui">
                            <span class="text-gray-400">ğŸ‚</span>
                        </div>
                        <div class="text-xs mt-1">5 OrgÃ¢nicos</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="make-compost" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ‚ Compostar
                        </button>
                        <div class="text-xs mt-1" id="compost-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸ‚</div>
                        <div class="text-xs mt-1">10 Adubos</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 5 orgÃ¢nicos (galho, erva, esterco) = 10 adubos (2 minutos)
                </div>
            </div>
            
            <!-- MÃ¡quina de Fiar -->
            <div id="spinning-machine" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-purple-600 mb-4 text-center">ğŸ§µ MÃ¡quina de Fiar</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="spinning-wool-slot" title="Coloque 3 lÃ£s aqui">
                            <span class="text-gray-400">ğŸ§¶</span>
                        </div>
                        <div class="text-xs mt-1">3 LÃ£s</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="spin-wool" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ§µ Fiar
                        </button>
                        <div class="text-xs mt-1" id="spinning-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸ§¶</div>
                        <div class="text-xs mt-1">Novelo de LÃ£</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 3 lÃ£s = 1 novelo de lÃ£ (30 segundos)
                </div>
            </div>
            
            <!-- Misturador -->
            <div id="mixer" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-orange-600 mb-4 text-center">ğŸ¥„ Misturador</h2>
                <div class="flex justify-center items-center gap-3 mb-4">
                    <div class="grid grid-cols-2 gap-2">
                        <div class="inventory-slot" id="mixer-slot-1" title="Ingrediente 1"></div>
                        <div class="inventory-slot" id="mixer-slot-2" title="Ingrediente 2"></div>
                        <div class="inventory-slot" id="mixer-slot-3" title="Ingrediente 3"></div>
                        <div class="inventory-slot" id="mixer-slot-4" title="Ingrediente 4"></div>
                    </div>
                    <div class="text-center">
                        <button id="mix-feed" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ¥„ Misturar
                        </button>
                        <div class="text-xs mt-1" id="mixer-timer"></div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600">
                    Receitas: RaÃ§Ã£o p/ Galinhas (1 trigo + 2 milhos) | RaÃ§Ã£o p/ Porcos (1 batata + 1 brÃ³colis + 1 cenoura + 1 milho)
                </div>
            </div>
            
            <!-- MÃ¡quina de Fiar -->
            <div id="spinning-machine" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-purple-600 mb-4 text-center">ğŸ§µ MÃ¡quina de Fiar</h2>
                <div class="flex justify-center items-center gap-4">
                    <div class="text-center">
                        <div class="inventory-slot" id="spinning-wool-slot" title="Coloque 3 lÃ£s aqui">
                            <span class="text-gray-400">ğŸ§¶</span>
                        </div>
                        <div class="text-xs mt-1">3 LÃ£s</div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <button id="spin-wool" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                            ğŸ§µ Fiar
                        </button>
                        <div class="text-xs mt-1" id="spinning-timer"></div>
                    </div>
                    <div class="text-2xl">â†’</div>
                    <div class="text-center">
                        <div class="text-3xl">ğŸ§¶</div>
                        <div class="text-xs mt-1">Novelo de LÃ£</div>
                    </div>
                </div>
                <div class="text-xs text-center text-gray-600 mt-2">
                    Receita: 3 lÃ£s = 1 novelo de lÃ£ (30 segundos)
                </div>
            </div>

            <!-- Cozinha (FogÃ£o + Forno) -->
            <div id="kitchen" class="bg-white/90 rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-bold text-orange-600 mb-4 text-center">ğŸ³ Cozinha</h2>
                
                <!-- FogÃ£o -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-red-600 mb-3 text-center">ğŸ”¥ FogÃ£o</h3>
                    <div class="flex justify-center items-center gap-3 mb-4">
                        <div class="text-center">
                            <div class="inventory-slot" id="stove-fuel" title="Coloque 2 lenhas aqui">
                                <span class="text-gray-400">ğŸª“</span>
                            </div>
                            <div class="text-xs mt-1">2 Lenhas</div>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="inventory-slot" id="stove-slot-1" title="Ingrediente 1"></div>
                            <div class="inventory-slot" id="stove-slot-2" title="Ingrediente 2"></div>
                            <div class="inventory-slot" id="stove-slot-3" title="Ingrediente 3"></div>
                            <div class="inventory-slot" id="stove-slot-4" title="Ingrediente 4"></div>
                        </div>
                        <div class="text-center">
                            <button id="cook-stove" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                                ğŸ”¥ Cozinhar
                            </button>
                            <div class="text-xs mt-1" id="stove-timer"></div>
                        </div>
                    </div>
                    <div class="text-xs text-center text-gray-600">
                        Receitas: ChÃ¡ (1 Ã¡gua + 2 ervas) | Salada (1 alface + 1 tomate + 1 cenoura) | Ensopado (1 brÃ³colis + 1 abÃ³bora + 2 ovos) | Bife (1 carne)
                    </div>
                </div>
                
                <!-- Forno -->
                <div>
                    <h3 class="text-lg font-bold text-orange-600 mb-3 text-center">ğŸ”¥ Forno</h3>
                    <div class="flex justify-center items-center gap-3 mb-4">
                        <div class="text-center">
                            <div class="inventory-slot" id="oven-fuel" title="Coloque 3 lenhas aqui">
                                <span class="text-gray-400">ğŸª“</span>
                            </div>
                            <div class="text-xs mt-1">3 Lenhas</div>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="inventory-slot" id="oven-slot-1" title="Ingrediente 1"></div>
                            <div class="inventory-slot" id="oven-slot-2" title="Ingrediente 2"></div>
                            <div class="inventory-slot" id="oven-slot-3" title="Ingrediente 3"></div>
                            <div class="inventory-slot" id="oven-slot-4" title="Ingrediente 4"></div>
                        </div>
                        <div class="text-center">
                            <button id="cook-oven" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50" disabled>
                                ğŸ”¥ Assar
                            </button>
                            <div class="text-xs mt-1" id="oven-timer"></div>
                        </div>
                    </div>
                    <div class="text-xs text-center text-gray-600">
                        Receitas: Peixe Assado (1 peixe) | Frango Assado (1 frango cru) | PÃ£o (1 ovo + 1 leite + 1 saco farinha)
                    </div>
                </div>
            </div>
            
            <!-- Quitanda -->
            <div class="bg-white/90 rounded-lg p-6">
                <h2 class="text-xl font-bold text-green-800 mb-4 text-center">ğŸª Quitanda</h2>
                <div class="grid grid-cols-5 gap-3 mb-4" id="market">
                    <!-- 20 slots da quitanda -->
                </div>
                <button id="sell-all" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                    ğŸ’° Vender Tudo
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Ingredientes -->
    <div id="ingredient-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold text-green-800 mb-4 text-center" id="modal-title">Escolher Ingrediente</h3>
            <div class="grid grid-cols-3 gap-3 mb-4" id="modal-ingredients">
                <!-- Ingredientes serÃ£o adicionados dinamicamente -->
            </div>
            <button id="close-modal" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                Fechar
            </button>
        </div>
    </div>

    <script>
        // Estado do jogo
        let gameState = {
            coins: 200,
            water: 10,
            fertilizer: 50,
            selectedSeed: null,
            barn: { erva: 3, ovo: 2, carne: 1 },
            market: {},
            hasWell: false,
            canteirosColhidos: 0,
            currentSeason: 0, // 0=Primavera, 1=VerÃ£o, 2=Outono, 3=Inverno
            seasonStartTime: Date.now(),
            flowerField: {
                rosa: { count: 3, lastCollected: [] },
                girassol: { count: 3, lastCollected: [] },
                margarida: { count: 3, lastCollected: [] }
            },
            flowersCollected: 0,
            hasForest: false,
            hasAxe: false,
            axeUses: 40,
            trunksCollected: 0,
            trees: {
                comum: { type: 'comum', fruits: 0 },
                macieira: { type: 'macieira', fruits: 4 },
                laranjeira: { type: 'laranjeira', fruits: 4 },
                bananeira: { type: 'bananeira', fruits: 4 }
            },
            woodCutting: {
                trunk: null,
                cutting: false
            },
            hasKitchen: false,
            stove: {
                fuel: 0,
                ingredients: {},
                cooking: false
            },
            oven: {
                fuel: 0,
                ingredients: {},
                cooking: false
            },
            hasJuiceMachine: false,
            juiceMachine: {
                grapes: 0,
                producing: false
            },
            hasCoffeeRoaster: false,
            coffeeRoaster: {
                coffeeBeans: 0,
                fuel: 0,
                roasting: false
            },
            hasWindmill: false,
            windmill: {
                wheat: 0,
                grinding: false
            },
            hasGrassField: false,
            grassField: {
                slots: Array(20).fill(true), // true = tem grama, false = crescendo
                grassCollected: 0
            },
            hasHayDryer: false,
            hayDryer: {
                grass: 0,
                drying: false
            },
            hayMaker: {
                driedGrass: 0,
                making: false
            },
            hasCowPasture: false,
            cowPasture: {
                cows: [
                    { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                    { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                    { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                    { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null }
                ]
            },
            farmer: {
                energy: 200,
                maxEnergy: 200,
                isSick: false,
                isResting: false,
                sickStartTime: null,
                restStartTime: null
            }
        };

        // PreÃ§os dos itens
        const itemPrices = {
            abobora: 25, alface: 20, batata: 22, brocolis: 28, cafe: 35,
            cenoura: 18, milho: 24, tomate: 26, trigo: 20, uva: 30,
            maca: 15, laranja: 12, banana: 10, tronco: 8, lenha: 3, galho: 20,
            cha: 50, salada: 60, ensopado: 80, bife: 100, peixe_assado: 90, frango_assado: 120, pao: 70,
            garrafa_suco: 85, saco_cafe: 150, saco_farinha: 120, queijo: 95, la: 40, novelo_la: 120,
            racao_galinhas: 60, racao_porcos: 80
        };

        // Emojis das sementes
        const seedEmojis = {
            abobora: 'ğŸƒ', alface: 'ğŸ¥¬', batata: 'ğŸ¥”', brocolis: 'ğŸ¥¦', cafe: 'ğŸ”´',
            cenoura: 'ğŸ¥•', milho: 'ğŸŒ½', tomate: 'ğŸ…', trigo: 'ğŸŒ¾', uva: 'ğŸ‡',
            rosa: 'ğŸŒ¹', girassol: 'ğŸŒ»', margarida: 'ğŸŒ¼', maca: 'ğŸ', laranja: 'ğŸŠ', 
            banana: 'ğŸŒ', tronco: 'ğŸªµ', lenha: 'ğŸª“', galho: 'ğŸŒ¿', agua: 'ğŸ’§',
            cha: 'ğŸµ', salada: 'ğŸ¥—', ensopado: 'ğŸ²', bife: 'ğŸ¥©', peixe_assado: 'ğŸŸ',
            frango_assado: 'ğŸ—', pao: 'ğŸ', ovo: 'ğŸ¥š', carne: 'ğŸ¥©', peixe: 'ğŸŸ',
            frango_cru: 'ğŸ”', leite: 'ğŸ¥›', farinha: 'ğŸŒ¾', garrafa_suco: 'ğŸ§ƒ', saco_cafe: 'â˜•', saco_farinha: 'ğŸŒ¾',
            grama: 'ğŸŒ¿', flor: 'ğŸŒ¸', grama_seca: 'ğŸŒ¾', feno: 'ğŸŒ¾', esterco: 'ğŸ’©', erva: 'ğŸƒ', fertilizer: 'ğŸ‚', queijo: 'ğŸ§€', la: 'ğŸ§¶',
            novelo_la: 'ğŸ§¶', racao_galinhas: 'ğŸŒ¾', racao_porcos: 'ğŸ¥•', galinha: 'ğŸ”', frango_cru: 'ğŸ”'
        };

        // Receitas do fogÃ£o
        const stoveRecipes = {
            cha: { ingredients: { agua: 1, erva: 2 }, time: 0, result: 'cha', emoji: 'ğŸµ' },
            salada: { ingredients: { alface: 1, tomate: 1, cenoura: 1 }, time: 15, result: 'salada', emoji: 'ğŸ¥—' },
            ensopado: { ingredients: { brocolis: 1, abobora: 1, ovo: 2 }, time: 60, result: 'ensopado', emoji: 'ğŸ²' },
            bife: { ingredients: { carne: 1 }, time: 30, result: 'bife', emoji: 'ğŸ¥©' }
        };

        // Receitas do forno
        const ovenRecipes = {
            peixe_assado: { ingredients: { peixe: 1 }, time: 30, result: 'peixe_assado', emoji: 'ğŸŸ' },
            frango_assado: { ingredients: { frango_cru: 1 }, time: 60, result: 'frango_assado', emoji: 'ğŸ—' },
            pao: { ingredients: { ovo: 1, leite: 1, saco_farinha: 1 }, time: 60, result: 'pao', emoji: 'ğŸ' }
        };

        // Receitas do misturador
        const mixerRecipes = {
            racao_galinhas: { ingredients: { trigo: 1, milho: 2 }, time: 30, result: 'racao_galinhas', emoji: 'ğŸŒ¾' },
            racao_porcos: { ingredients: { batata: 1, brocolis: 1, cenoura: 1, milho: 1 }, time: 30, result: 'racao_porcos', emoji: 'ğŸ¥•' }
        };

        // ConfiguraÃ§Ãµes das estaÃ§Ãµes
        const seasons = [
            { name: 'Primavera', icon: 'ğŸŒ¸', bonus: 'PlantaÃ§Ãµes valem 10% a mais', color: 'from-pink-200 to-green-300' },
            { name: 'VerÃ£o', icon: 'â˜€ï¸', bonus: 'Cada canteiro dÃ¡ 2 frutos', color: 'from-yellow-200 to-orange-300' },
            { name: 'Outono', icon: 'ğŸ‚', bonus: 'Produtos animais valem 15% a mais', color: 'from-orange-200 to-red-300' },
            { name: 'Inverno', icon: 'â„ï¸', bonus: 'Produtos fabricados valem 15% a mais', color: 'from-blue-200 to-gray-300' }
        ];

        // Emojis das flores
        const flowerEmojis = {
            rosa: 'ğŸŒ¹', girassol: 'ğŸŒ»', margarida: 'ğŸŒ¼'
        };

        // Inicializar jogo
        function initGame() {
            createFarm();
            createMarket();
            updateDisplay();
            updateSeasonDisplay();
            startRainCycle();
            startSeasonCycle();
            initFlowerField();
            initFarmer();
            startFarmerSystem();
        }

        // Inicializar sistema do fazendeiro
        function initFarmer() {
            document.getElementById('rest-btn').addEventListener('click', () => startResting());
            document.getElementById('eat-btn').addEventListener('click', () => showEatMenu());
            document.getElementById('drink-tea-btn').addEventListener('click', () => drinkTea());
            updateFarmerDisplay();
        }

        // Iniciar sistema do fazendeiro (timers)
        function startFarmerSystem() {
            // Verificar doenÃ§a aleatÃ³ria a cada 2-5 minutos
            setInterval(() => {
                if (!gameState.farmer.isSick && Math.random() < 0.3) {
                    makeFarmerSick();
                }
            }, Math.random() * 180000 + 120000); // 2-5 minutos

            // Atualizar sistema do fazendeiro a cada segundo
            setInterval(updateFarmerSystem, 1000);
        }

        // Atualizar sistema do fazendeiro
        function updateFarmerSystem() {
            // Se estiver descansando
            if (gameState.farmer.isResting) {
                const elapsed = Date.now() - gameState.farmer.restStartTime;
                if (elapsed >= 5 * 60 * 1000) { // 5 minutos
                    stopResting();
                }
                return;
            }

            // Se estiver doente, energia cai mais rÃ¡pido
            if (gameState.farmer.isSick) {
                const elapsed = Date.now() - gameState.farmer.sickStartTime;
                if (elapsed >= 30000) { // A cada 30 segundos quando doente
                    gameState.farmer.energy = Math.max(0, gameState.farmer.energy - 2);
                    gameState.farmer.sickStartTime = Date.now();
                    updateFarmerDisplay();
                    
                    if (gameState.farmer.energy <= 0) {
                        farmerDies();
                    }
                }
            }
        }

        // Usar energia
        function useEnergy(amount = 1) {
            if (gameState.farmer.isResting) {
                showMessage('VocÃª estÃ¡ descansando! ğŸ˜´');
                return false;
            }

            gameState.farmer.energy = Math.max(0, gameState.farmer.energy - amount);
            updateFarmerDisplay();

            if (gameState.farmer.energy <= 0) {
                if (gameState.farmer.isSick) {
                    farmerDies();
                } else {
                    showMessage('VocÃª estÃ¡ sem energia! Descanse ou coma algo. ğŸ˜´');
                }
                return false;
            }
            return true;
        }

        // Fazer fazendeiro ficar doente
        function makeFarmerSick() {
            gameState.farmer.isSick = true;
            gameState.farmer.sickStartTime = Date.now();
            updateFarmerDisplay();
            showMessage('VocÃª ficou doente! Tome chÃ¡ para se curar. ğŸ¤’');
        }

        // ComeÃ§ar a descansar
        function startResting() {
            if (gameState.farmer.isResting) {
                showMessage('VocÃª jÃ¡ estÃ¡ descansando! ğŸ˜´');
                return;
            }

            gameState.farmer.isResting = true;
            gameState.farmer.restStartTime = Date.now();
            updateFarmerDisplay();
            showMessage('VocÃª comeÃ§ou a descansar por 5 minutos... ğŸ˜´');

            // Mostrar timer de descanso
            const restTimer = setInterval(() => {
                if (!gameState.farmer.isResting) {
                    clearInterval(restTimer);
                    return;
                }

                const elapsed = Date.now() - gameState.farmer.restStartTime;
                const remaining = (5 * 60 * 1000) - elapsed;
                const minutes = Math.floor(remaining / 60000);
                const seconds = Math.floor((remaining % 60000) / 1000);
                
                document.getElementById('farmer-status').textContent = 
                    `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Parar de descansar
        function stopResting() {
            gameState.farmer.isResting = false;
            gameState.farmer.energy = gameState.farmer.maxEnergy; // Recupera energia total
            updateFarmerDisplay();
            showMessage('VocÃª terminou de descansar! Energia restaurada! âœ¨');
        }

        // Mostrar menu de comida
        function showEatMenu() {
            const foods = [
                { name: 'salada', recovery: 30, emoji: 'ğŸ¥—' },
                { name: 'ensopado', recovery: 40, emoji: 'ğŸ²' },
                { name: 'bife', recovery: 100, emoji: 'ğŸ¥©' },
                { name: 'peixe_assado', recovery: 50, emoji: 'ğŸŸ' },
                { name: 'frango_assado', recovery: 70, emoji: 'ğŸ—' }
            ];

            const availableFoods = foods.filter(food => gameState.barn[food.name] > 0);
            
            if (availableFoods.length === 0) {
                showMessage('VocÃª nÃ£o tem comida! Cozinhe algo primeiro. ğŸ½ï¸');
                return;
            }

            // Por simplicidade, comer a primeira comida disponÃ­vel
            const food = availableFoods[0];
            eatFood(food.name, food.recovery);
        }

        // Comer comida
        function eatFood(foodName, recoveryPercent) {
            if (gameState.barn[foodName] <= 0) {
                showMessage(`VocÃª nÃ£o tem ${foodName}! ğŸ½ï¸`);
                return;
            }

            gameState.barn[foodName]--;
            const recoveryAmount = Math.floor(gameState.farmer.maxEnergy * (recoveryPercent / 100));
            gameState.farmer.energy = Math.min(gameState.farmer.maxEnergy, gameState.farmer.energy + recoveryAmount);
            
            updateDisplay();
            updateFarmerDisplay();
            showMessage(`VocÃª comeu ${foodName}! +${recoveryAmount} energia! ğŸ½ï¸`);
        }

        // Tomar chÃ¡
        function drinkTea() {
            if (!gameState.farmer.isSick) {
                showMessage('VocÃª nÃ£o estÃ¡ doente! ğŸµ');
                return;
            }

            if (!gameState.barn.cha || gameState.barn.cha <= 0) {
                showMessage('VocÃª nÃ£o tem chÃ¡! Prepare um no fogÃ£o. ğŸµ');
                return;
            }

            gameState.barn.cha--;
            gameState.farmer.isSick = false;
            gameState.farmer.sickStartTime = null;
            
            updateDisplay();
            updateFarmerDisplay();
            showMessage('VocÃª tomou chÃ¡ e se curou! ğŸµâœ¨');
        }

        // Fazendeiro morre
        function farmerDies() {
            showMessage('VocÃª morreu! O jogo serÃ¡ reiniciado... ğŸ’€');
            
            setTimeout(() => {
                // Reiniciar jogo
                gameState = {
                    coins: 200,
                    water: 10,
                    fertilizer: 50,
                    selectedSeed: null,
                    barn: { erva: 3, ovo: 2, carne: 1 },
                    market: {},
                    hasWell: false,
                    canteirosColhidos: 0,
                    currentSeason: 0,
                    seasonStartTime: Date.now(),
                    flowerField: {
                        rosa: { count: 3, lastCollected: [] },
                        girassol: { count: 3, lastCollected: [] },
                        margarida: { count: 3, lastCollected: [] }
                    },
                    flowersCollected: 0,
                    hasForest: false,
                    hasAxe: false,
                    axeUses: 40,
                    trunksCollected: 0,
                    trees: {
                        comum: { type: 'comum', fruits: 0 },
                        macieira: { type: 'macieira', fruits: 4 },
                        laranjeira: { type: 'laranjeira', fruits: 4 },
                        bananeira: { type: 'bananeira', fruits: 4 }
                    },
                    woodCutting: {
                        trunk: null,
                        cutting: false
                    },
                    hasKitchen: false,
                    stove: {
                        fuel: 0,
                        ingredients: {},
                        cooking: false
                    },
                    oven: {
                        fuel: 0,
                        ingredients: {},
                        cooking: false
                    },
                    hasJuiceMachine: false,
                    juiceMachine: {
                        grapes: 0,
                        producing: false
                    },
                    hasCoffeeRoaster: false,
                    coffeeRoaster: {
                        coffeeBeans: 0,
                        fuel: 0,
                        roasting: false
                    },
                    hasWindmill: false,
                    windmill: {
                        wheat: 0,
                        grinding: false
                    },
                    hasGrassField: false,
                    grassField: {
                        slots: Array(20).fill(true),
                        grassCollected: 0
                    },
                    hasHayDryer: false,
                    hayDryer: {
                        grass: 0,
                        drying: false
                    },
                    hayMaker: {
                        driedGrass: 0,
                        making: false
                    },
                    hasCowPasture: false,
                    cowPasture: {
                        cows: [
                            { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                            { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                            { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                            { hasCow: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null }
                        ]
                    },
                    hasCheeseMaker: false,
                    cheeseMaker: {
                        milk: 0,
                        curing: false
                    },
                    hasComposter: false,
                    composter: {
                        organics: 0,
                        composting: false
                    },
                    hasSheepPen: false,
                    hasShears: false,
                    sheepPen: {
                        sheep: [
                            { hasSheep: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                            { hasSheep: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                            { hasSheep: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null },
                            { hasSheep: false, hasHay: false, eating: false, producing: false, resting: false, restStartTime: null }
                        ]
                    },
                    farmer: {
                        energy: 200,
                        maxEnergy: 200,
                        isSick: false,
                        isResting: false,
                        sickStartTime: null,
                        restStartTime: null
                    },
                    hasSpinningMachine: false,
                    spinningMachine: {
                        wool: 0,
                        spinning: false
                    },
                    hasMixer: false,
                    mixer: {
                        ingredients: {},
                        mixing: false
                    },
                    hasChickenCoop: false,
                    chickenCoop: {
                        chickens: [
                            { hasChicken: false, hasFeed: false, eating: false, laying: false, resting: false, restStartTime: null, isChick: false, chickStartTime: null },
                            { hasChicken: false, hasFeed: false, eating: false, laying: false, resting: false, restStartTime: null, isChick: false, chickStartTime: null },
                            { hasChicken: false, hasFeed: false, eating: false, laying: false, resting: false, restStartTime: null, isChick: false, chickStartTime: null },
                            { hasChicken: false, hasFeed: false, eating: false, laying: false, resting: false, restStartTime: null, isChick: false, chickStartTime: null }
                        ]
                    }
                };

                // Resetar interface
                document.querySelectorAll('.canteiro').forEach(canteiro => {
                    canteiro.dataset.stage = 'empty';
                    canteiro.dataset.seed = '';
                    canteiro.className = 'canteiro';
                    canteiro.innerHTML = '';
                });

                document.querySelectorAll('#market .inventory-slot').forEach(slot => {
                    slot.innerHTML = '';
                    slot.title = '';
                });

                // Esconder elementos comprados
                document.getElementById('well-container').classList.add('hidden');
                document.getElementById('forest').classList.add('hidden');
                document.getElementById('wood-cutting').classList.add('hidden');
                document.getElementById('kitchen').classList.add('hidden');
                document.getElementById('juice-machine').classList.add('hidden');
                document.getElementById('coffee-roaster').classList.add('hidden');
                document.getElementById('windmill').classList.add('hidden');
                document.getElementById('grass-field').classList.add('hidden');
                document.getElementById('hay-dryer').classList.add('hidden');
                document.getElementById('cow-pasture').classList.add('hidden');
                document.getElementById('cheese-maker').classList.add('hidden');
                document.getElementById('composter').classList.add('hidden');
                document.getElementById('sheep-pen').classList.add('hidden');
                document.getElementById('spinning-machine').classList.add('hidden');
                document.getElementById('mixer').classList.add('hidden');
                document.getElementById('chicken-coop').classList.add('hidden');

                updateDisplay();
                updateSeasonDisplay();
                updateFarmerDisplay();
                showMessage('Jogo reiniciado! Boa sorte! ğŸŒ±');
            }, 3000);
        }

        // Atualizar display do fazendeiro
        function updateFarmerDisplay() {
            const energyPercent = (gameState.farmer.energy / gameState.farmer.maxEnergy) * 100;
            document.getElementById('energy-bar').style.width = energyPercent + '%';
            document.getElementById('energy-text').textContent = `${gameState.farmer.energy}/${gameState.farmer.maxEnergy}`;

            // Mudar cor da barra baseado na energia
            const energyBar = document.getElementById('energy-bar');
            if (energyPercent > 60) {
                energyBar.className = 'bg-green-500 h-3 rounded-full transition-all duration-300';
            } else if (energyPercent > 30) {
                energyBar.className = 'bg-yellow-500 h-3 rounded-full transition-all duration-300';
            } else {
                energyBar.className = 'bg-red-500 h-3 rounded-full transition-all duration-300';
            }

            // Atualizar status
            let status = 'SaudÃ¡vel';
            if (gameState.farmer.isResting) {
                status = 'Descansando...';
            } else if (gameState.farmer.isSick) {
                status = 'Doente ğŸ¤’';
                document.getElementById('farmer-avatar').textContent = 'ğŸ¤’';
            } else {
                document.getElementById('farmer-avatar').textContent = 'ğŸ‘¨â€ğŸŒ¾';
            }

            document.getElementById('farmer-status').textContent = status;

            // Mostrar/esconder botÃ£o de chÃ¡
            if (gameState.farmer.isSick) {
                document.getElementById('drink-tea-btn').classList.remove('hidden');
            } else {
                document.getElementById('drink-tea-btn').classList.add('hidden');
            }
        }

        // Atualizar display da estaÃ§Ã£o
        function updateSeasonDisplay() {
            const season = seasons[gameState.currentSeason];
            document.getElementById('season-icon').textContent = season.icon;
            document.getElementById('season-name').textContent = season.name;
            document.getElementById('season-bonus').textContent = season.bonus;
            
            // Atualizar cor de fundo
            document.body.className = `bg-gradient-to-b ${season.color} min-h-screen p-4`;
            
            // Mostrar/esconder campo de flores
            const flowerField = document.getElementById('flower-field');
            if (gameState.currentSeason === 0) { // Primavera
                flowerField.classList.remove('hidden');
            } else {
                flowerField.classList.add('hidden');
            }
        }

        // Atualizar timer da estaÃ§Ã£o
        function updateSeasonTimer() {
            const elapsed = Date.now() - gameState.seasonStartTime;
            const remaining = (60 * 60 * 1000) - elapsed; // 1 hora em ms
            
            if (remaining <= 0) {
                changeSeason();
                return;
            }
            
            const minutes = Math.floor(remaining / (60 * 1000));
            const seconds = Math.floor((remaining % (60 * 1000)) / 1000);
            document.getElementById('season-timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Mudar estaÃ§Ã£o
        function changeSeason() {
            gameState.currentSeason = (gameState.currentSeason + 1) % 4;
            gameState.seasonStartTime = Date.now();
            updateSeasonDisplay();
            showMessage(`${seasons[gameState.currentSeason].name} chegou! ${seasons[gameState.currentSeason].icon}`);
        }

        // Iniciar ciclo das estaÃ§Ãµes
        function startSeasonCycle() {
            setInterval(updateSeasonTimer, 1000);
        }

        // Criar canteiros
        function createFarm() {
            const farm = document.getElementById('farm');
            for (let i = 0; i < 8; i++) {
                const canteiro = document.createElement('div');
                canteiro.className = 'canteiro';
                canteiro.dataset.id = i;
                canteiro.dataset.stage = 'empty';
                canteiro.addEventListener('click', () => handleCanteiro(i));
                farm.appendChild(canteiro);
            }
        }

        // Criar quitanda
        function createMarket() {
            const market = document.getElementById('market');
            for (let i = 0; i < 20; i++) {
                const slot = document.createElement('div');
                slot.className = 'inventory-slot';
                slot.dataset.id = i;
                slot.addEventListener('click', () => moveToMarket(i));
                market.appendChild(slot);
            }
        }

        // Atualizar display
        function updateDisplay() {
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('water').textContent = gameState.water;
            document.getElementById('fertilizer').textContent = gameState.fertilizer;
            updateBarn();
        }

        // Atualizar celeiro
        function updateBarn() {
            const barn = document.getElementById('barn');
            barn.innerHTML = '';
            
            Object.entries(gameState.barn).forEach(([item, quantity]) => {
                if (quantity > 0) {
                    const slot = document.createElement('div');
                    slot.className = 'inventory-slot';
                    let emoji = seedEmojis[item] || 
                               (item === 'minhoca' ? 'ğŸª±' : 
                                item === 'barro' ? 'ğŸŸ¤' : 'â“');
                    slot.innerHTML = `${emoji}<br><small>${quantity}</small>`;
                    slot.title = `${item}: ${quantity}`;
                    slot.addEventListener('click', () => moveToMarket(null, item));
                    barn.appendChild(slot);
                }
            });
        }

        // Inicializar campo de flores
        function initFlowerField() {
            document.querySelectorAll('.flower-slot').forEach(slot => {
                slot.addEventListener('click', () => collectFlower(slot));
            });
        }

        // Inicializar mÃ¡quina de suco
        function initJuiceMachine() {
            document.getElementById('juice-slot').addEventListener('click', () => addGrapesToJuiceMachine());
            document.getElementById('produce-juice').addEventListener('click', () => produceJuice());
        }

        // Inicializar torra de cafÃ©
        function initCoffeeRoaster() {
            document.getElementById('coffee-beans-slot').addEventListener('click', () => addCoffeeBeansToRoaster());
            document.getElementById('coffee-fuel-slot').addEventListener('click', () => addFuelToRoaster());
            document.getElementById('roast-coffee').addEventListener('click', () => roastCoffee());
        }

        // Inicializar moinho
        function initWindmill() {
            document.getElementById('wheat-slot').addEventListener('click', () => addWheatToWindmill());
            document.getElementById('grind-wheat').addEventListener('click', () => grindWheat());
        }

        // Inicializar campo de grama
        function initGrassField() {
            const grassContainer = document.getElementById('grass-slots');
            grassContainer.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const grassSlot = document.createElement('div');
                grassSlot.className = 'grass-slot';
                grassSlot.dataset.index = i;
                grassSlot.innerHTML = 'ğŸŒ¿';
                grassSlot.title = 'Clique para coletar grama';
                grassSlot.addEventListener('click', () => collectGrass(i));
                grassContainer.appendChild(grassSlot);
            }
        }

        // Inicializar secador/feno
        function initHayDryer() {
            document.getElementById('dryer-slot').addEventListener('click', () => addGrassToDryer());
            document.getElementById('dry-grass').addEventListener('click', () => dryGrass());
            document.getElementById('hay-slot').addEventListener('click', () => addDriedGrassToHayMaker());
            document.getElementById('make-hay').addEventListener('click', () => makeHay());
        }

        // Inicializar queijeira
        function initCheeseMaker() {
            document.getElementById('cheese-milk-slot').addEventListener('click', () => addMilkToCheeseMaker());
            document.getElementById('cure-cheese').addEventListener('click', () => cureCheese());
        }

        // Inicializar composteira
        function initComposter() {
            document.getElementById('compost-organic-slot').addEventListener('click', () => addOrganicsToComposter());
            document.getElementById('make-compost').addEventListener('click', () => makeCompost());
        }

        // Adicionar orgÃ¢nicos Ã  composteira
        function addOrganicsToComposter() {
            const organicItems = ['galho', 'erva', 'esterco'];
            let totalOrganics = organicItems.reduce((sum, item) => sum + (gameState.barn[item] || 0), 0);
            
            if (totalOrganics >= 5 && gameState.composter.organics < 5) {
                const needed = 5 - gameState.composter.organics;
                let added = 0;
                
                for (const item of organicItems) {
                    if (added >= needed) break;
                    const available = gameState.barn[item] || 0;
                    const toTake = Math.min(available, needed - added);
                    if (toTake > 0) {
                        gameState.barn[item] -= toTake;
                        added += toTake;
                    }
                }
                
                gameState.composter.organics += added;
                updateDisplay();
                updateComposterDisplay();
                showMessage(`${added} material${added > 1 ? 'is' : ''} orgÃ¢nico${added > 1 ? 's' : ''} adicionado Ã  composteira! ğŸ‚`);
            } else if (gameState.composter.organics >= 5) {
                showMessage('Composteira jÃ¡ tem material suficiente! ğŸ‚');
            } else {
                showMessage('VocÃª precisa de materiais orgÃ¢nicos (galho, erva, esterco)! ğŸ‚');
            }
        }

        // Fazer compostagem
        function makeCompost() {
            if (gameState.composter.organics < 5) {
                showMessage('Adicione 5 materiais orgÃ¢nicos Ã  composteira! ğŸ‚');
                return;
            }

            if (gameState.composter.composting) {
                showMessage('JÃ¡ estÃ¡ compostando! â°');
                return;
            }

            gameState.composter.composting = true;
            gameState.composter.organics = 0; // Consumir orgÃ¢nicos
            document.getElementById('make-compost').disabled = true;

            document.getElementById('compost-timer').textContent = '120s';
            let timeLeft = 120;
            const timer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('compost-timer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishComposting();
                }
            }, 1000);
        }

        // Finalizar compostagem
        function finishComposting() {
            gameState.fertilizer += 10;
            gameState.composter.composting = false;
            
            document.getElementById('make-compost').disabled = false;
            document.getElementById('compost-timer').textContent = '';
            
            updateDisplay();
            updateComposterDisplay();
            showMessage('10 adubos prontos! ğŸ‚');
        }

        // Atualizar display da composteira
        function updateComposterDisplay() {
            const organicSlot = document.getElementById('compost-organic-slot');
            if (gameState.composter.organics >= 5) {
                organicSlot.innerHTML = 'ğŸ‚ğŸ‚ğŸ‚ğŸ‚ğŸ‚';
            } else if (gameState.composter.organics > 0) {
                organicSlot.innerHTML = 'ğŸ‚'.repeat(gameState.composter.organics);
            } else {
                organicSlot.innerHTML = '<span class="text-gray-400">ğŸ‚</span>';
            }

            const canCompost = gameState.composter.organics >= 5 && !gameState.composter.composting;
            document.getElementById('make-compost').disabled = !canCompost;
        }

        // Adicionar leite Ã  queijeira
        function addMilkToCheeseMaker() {
            if (gameState.barn.leite >= 2 && gameState.cheeseMaker.milk < 2) {
                const needed = 2 - gameState.cheeseMaker.milk;
                const toAdd = Math.min(needed, gameState.barn.leite);
                gameState.barn.leite -= toAdd;
                gameState.cheeseMaker.milk += toAdd;
                updateDisplay();
                updateCheeseMakerDisplay();
                showMessage(`${toAdd} leite${toAdd > 1 ? 's' : ''} adicionado Ã  queijeira! ğŸ¥›`);
            } else if (gameState.cheeseMaker.milk >= 2) {
                showMessage('Queijeira jÃ¡ tem leite suficiente! ğŸ¥›');
            } else {
                showMessage('VocÃª precisa de leite! ğŸ¥›');
            }
        }

        // Curar queijo
        function cureCheese() {
            if (gameState.cheeseMaker.milk < 2) {
                showMessage('Adicione 2 leites Ã  queijeira! ğŸ¥›');
                return;
            }

            if (gameState.cheeseMaker.curing) {
                showMessage('JÃ¡ estÃ¡ curando queijo! â°');
                return;
            }

            gameState.cheeseMaker.curing = true;
            gameState.cheeseMaker.milk = 0; // Consumir leite
            document.getElementById('cure-cheese').disabled = true;

            document.getElementById('cheese-timer').textContent = '60s';
            let timeLeft = 60;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('cheese-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishCheeseCuring();
                }
            }, 1000);
        }

        // Finalizar cura do queijo
        function finishCheeseCuring() {
            gameState.barn.queijo = (gameState.barn.queijo || 0) + 1;
            gameState.cheeseMaker.curing = false;
            
            document.getElementById('cure-cheese').disabled = false;
            document.getElementById('cheese-timer').textContent = '';
            
            updateDisplay();
            updateCheeseMakerDisplay();
            showMessage('Queijo pronto! ğŸ§€');
        }

        // Atualizar display da queijeira
        function updateCheeseMakerDisplay() {
            const milkSlot = document.getElementById('cheese-milk-slot');
            if (gameState.cheeseMaker.milk >= 2) {
                milkSlot.innerHTML = 'ğŸ¥›ğŸ¥›';
            } else if (gameState.cheeseMaker.milk > 0) {
                milkSlot.innerHTML = 'ğŸ¥›'.repeat(gameState.cheeseMaker.milk);
            } else {
                milkSlot.innerHTML = '<span class="text-gray-400">ğŸ¥›</span>';
            }

            const canCure = gameState.cheeseMaker.milk >= 2 && !gameState.cheeseMaker.curing;
            document.getElementById('cure-cheese').disabled = !canCure;
        }

        // Inicializar pasto das vacas
        function initCowPasture() {
            for (let i = 0; i < 4; i++) {
                // Slot da vaca
                document.getElementById(`cow-${i}`).addEventListener('click', () => placeCow(i));
                
                // Slot do feno
                document.getElementById(`hay-slot-${i}`).addEventListener('click', () => addHayToCow(i));
                
                // Slots de coleta (leite e esterco)
                const milkSlots = document.querySelectorAll(`#milk-slots-${i} .inventory-slot`);
                milkSlots.forEach((slot, slotIndex) => {
                    slot.addEventListener('click', () => collectFromCow(i, slotIndex));
                });
            }
            
            // Iniciar sistema de descanso das vacas
            setInterval(updateCowResting, 1000);
        }

        // Inicializar curral das ovelhas
        function initSheepPen() {
            for (let i = 0; i < 4; i++) {
                // Slot da ovelha
                document.getElementById(`sheep-${i}`).addEventListener('click', () => placeSheep(i));
                
                // Slot do feno
                document.getElementById(`sheep-hay-slot-${i}`).addEventListener('click', () => addHayToSheep(i));
                
                // Slots de coleta (lÃ£)
                const woolSlots = document.querySelectorAll(`#wool-slots-${i} .inventory-slot`);
                woolSlots.forEach((slot, slotIndex) => {
                    slot.addEventListener('click', () => collectWoolFromSheep(i, slotIndex));
                });
            }
            
            // Iniciar sistema de descanso das ovelhas
            setInterval(updateSheepResting, 1000);
        }

        // Colocar ovelha no slot
        function placeSheep(index) {
            const sheep = gameState.sheepPen.sheep[index];
            
            if (sheep.hasSheep) {
                showMessage('JÃ¡ tem uma ovelha neste slot! ğŸ‘');
                return;
            }

            if (!gameState.barn.ovelha || gameState.barn.ovelha <= 0) {
                showMessage('VocÃª precisa comprar uma ovelha no mercadinho! ğŸ‘');
                return;
            }

            // Colocar ovelha
            gameState.barn.ovelha--;
            sheep.hasSheep = true;
            
            document.getElementById(`sheep-${index}`).textContent = 'ğŸ‘';
            document.getElementById(`sheep-status-${index}`).textContent = 'Esperando feno';
            
            updateDisplay();
            showMessage('Ovelha colocada no curral! ğŸ‘');
        }

        // Adicionar feno Ã  ovelha
        function addHayToSheep(index) {
            const sheep = gameState.sheepPen.sheep[index];
            
            if (!sheep.hasSheep) {
                showMessage('Coloque uma ovelha primeiro! ğŸ‘');
                return;
            }

            if (sheep.hasHay) {
                showMessage('Esta ovelha jÃ¡ tem feno! ğŸŒ¾');
                return;
            }

            if (sheep.eating || sheep.producing || sheep.resting) {
                showMessage('Esta ovelha estÃ¡ ocupada! â°');
                return;
            }

            if (!gameState.barn.feno || gameState.barn.feno <= 0) {
                showMessage('VocÃª precisa de feno! ğŸŒ¾');
                return;
            }

            // Adicionar feno
            gameState.barn.feno--;
            sheep.hasHay = true;
            
            document.getElementById(`sheep-hay-slot-${index}`).innerHTML = 'ğŸŒ¾';
            document.getElementById(`sheep-status-${index}`).textContent = 'Pronta para comer';
            
            updateDisplay();
            showMessage('Feno adicionado! A ovelha vai comer automaticamente. ğŸŒ¾');
            
            // Iniciar processo de comer automaticamente
            setTimeout(() => startSheepEating(index), 1000);
        }

        // Iniciar processo de comer (ovelha)
        function startSheepEating(index) {
            const sheep = gameState.sheepPen.sheep[index];
            
            if (!sheep.hasSheep || !sheep.hasHay || sheep.eating) return;

            sheep.eating = true;
            sheep.hasHay = false;
            
            document.getElementById(`sheep-hay-slot-${index}`).innerHTML = '<span class="text-gray-400 text-sm">ğŸŒ¾</span>';
            document.getElementById(`sheep-status-${index}`).textContent = 'Comendo... 15s';
            
            let timeLeft = 15;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById(`sheep-status-${index}`).textContent = `Comendo... ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    startSheepProducing(index);
                }
            }, 1000);
        }

        // Iniciar produÃ§Ã£o de lÃ£
        function startSheepProducing(index) {
            const sheep = gameState.sheepPen.sheep[index];
            
            sheep.eating = false;
            sheep.producing = true;
            
            document.getElementById(`sheep-status-${index}`).textContent = 'Produzindo lÃ£... 5s';
            
            let timeLeft = 5;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById(`sheep-status-${index}`).textContent = `Produzindo lÃ£... ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishSheepProducing(index);
                }
            }, 1000);
        }

        // Finalizar produÃ§Ã£o de lÃ£
        function finishSheepProducing(index) {
            const sheep = gameState.sheepPen.sheep[index];
            
            sheep.producing = false;
            sheep.resting = true;
            sheep.restStartTime = Date.now();
            
            // Mostrar lÃ£ nos slots
            const woolSlots = document.querySelectorAll(`#wool-slots-${index} .inventory-slot`);
            woolSlots[0].innerHTML = 'ğŸ§¶';
            woolSlots[1].innerHTML = 'ğŸ§¶';
            
            document.getElementById(`sheep-status-${index}`).textContent = 'LÃ£ pronta! Use tesoura para coletar';
            
            showMessage('Ovelha produziu 2 lÃ£s! Use a tesoura para coletar! ğŸ§¶');
        }

        // Coletar lÃ£ da ovelha
        function collectWoolFromSheep(sheepIndex, slotIndex) {
            if (!gameState.hasShears) {
                showMessage('VocÃª precisa de uma tesoura para coletar lÃ£! âœ‚ï¸');
                return;
            }

            if (!useEnergy()) return;

            const woolSlots = document.querySelectorAll(`#wool-slots-${sheepIndex} .inventory-slot`);
            const slot = woolSlots[slotIndex];
            
            if (!slot.innerHTML || slot.innerHTML.includes('text-gray-400')) {
                showMessage('Nada para coletar aqui! ğŸ§¶');
                return;
            }

            // Adicionar lÃ£ ao celeiro
            gameState.barn.la = (gameState.barn.la || 0) + 1;
            
            // Limpar slot
            slot.innerHTML = '';
            
            updateDisplay();
            showMessage('LÃ£ coletada! ğŸ§¶');
            
            // Verificar se toda a lÃ£ foi coletada
            const allEmpty = Array.from(woolSlots).every(s => !s.innerHTML || s.innerHTML.includes('text-gray-400'));
            if (allEmpty) {
                document.getElementById(`sheep-status-${sheepIndex}`).textContent = 'Descansando... 10:00';
            }
        }

        // Atualizar descanso das ovelhas
        function updateSheepResting() {
            gameState.sheepPen.sheep.forEach((sheep, index) => {
                if (sheep.resting && sheep.restStartTime) {
                    const elapsed = Date.now() - sheep.restStartTime;
                    const remaining = (10 * 60 * 1000) - elapsed; // 10 minutos
                    
                    if (remaining <= 0) {
                        // Terminar descanso
                        sheep.resting = false;
                        sheep.restStartTime = null;
                        document.getElementById(`sheep-status-${index}`).textContent = 'Esperando feno';
                        showMessage(`Ovelha ${index + 1} terminou de descansar! ğŸ‘`);
                    } else {
                        // Mostrar tempo restante
                        const minutes = Math.floor(remaining / 60000);
                        const seconds = Math.floor((remaining % 60000) / 1000);
                        document.getElementById(`sheep-status-${index}`).textContent = 
                            `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Adicionar grama ao secador
        function addGrassToDryer() {
            if (gameState.barn.grama >= 8 && gameState.hayDryer.grass < 8) {
                const needed = 8 - gameState.hayDryer.grass;
                const toAdd = Math.min(needed, gameState.barn.grama);
                gameState.barn.grama -= toAdd;
                gameState.hayDryer.grass += toAdd;
                updateDisplay();
                updateHayDryerDisplay();
                showMessage(`${toAdd} grama${toAdd > 1 ? 's' : ''} adicionada ao secador! ğŸŒ¿`);
            } else if (gameState.hayDryer.grass >= 8) {
                showMessage('Secador jÃ¡ tem grama suficiente! ğŸŒ¿');
            } else {
                showMessage('VocÃª precisa de grama! ğŸŒ¿');
            }
        }

        // Secar grama
        function dryGrass() {
            if (gameState.hayDryer.grass < 8) {
                showMessage('Adicione 8 gramas ao secador! ğŸŒ¿');
                return;
            }

            if (gameState.hayDryer.drying) {
                showMessage('JÃ¡ estÃ¡ secando grama! â°');
                return;
            }

            gameState.hayDryer.drying = true;
            gameState.hayDryer.grass = 0; // Consumir grama
            document.getElementById('dry-grass').disabled = true;

            document.getElementById('dry-timer').textContent = '30s';
            let timeLeft = 30;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('dry-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishDrying();
                }
            }, 1000);
        }

        // Finalizar secagem
        function finishDrying() {
            gameState.barn.grama_seca = (gameState.barn.grama_seca || 0) + 8;
            gameState.hayDryer.drying = false;
            
            document.getElementById('dry-grass').disabled = false;
            document.getElementById('dry-timer').textContent = '';
            
            updateDisplay();
            updateHayDryerDisplay();
            showMessage('8 gramas secas prontas! ğŸŒ¾');
        }

        // Adicionar grama seca ao fazedor de feno
        function addDriedGrassToHayMaker() {
            if (gameState.barn.grama_seca >= 4 && gameState.hayMaker.driedGrass < 4) {
                const needed = 4 - gameState.hayMaker.driedGrass;
                const toAdd = Math.min(needed, gameState.barn.grama_seca);
                gameState.barn.grama_seca -= toAdd;
                gameState.hayMaker.driedGrass += toAdd;
                updateDisplay();
                updateHayMakerDisplay();
                showMessage(`${toAdd} grama${toAdd > 1 ? 's' : ''} seca${toAdd > 1 ? 's' : ''} adicionada ao fazedor de feno! ğŸŒ¾`);
            } else if (gameState.hayMaker.driedGrass >= 4) {
                showMessage('Fazedor jÃ¡ tem grama seca suficiente! ğŸŒ¾');
            } else {
                showMessage('VocÃª precisa de grama seca! ğŸŒ¾');
            }
        }

        // Fazer feno
        function makeHay() {
            if (gameState.hayMaker.driedGrass < 4) {
                showMessage('Adicione 4 gramas secas ao fazedor! ğŸŒ¾');
                return;
            }

            if (gameState.hayMaker.making) {
                showMessage('JÃ¡ estÃ¡ fazendo feno! â°');
                return;
            }

            gameState.hayMaker.making = true;
            gameState.hayMaker.driedGrass = 0; // Consumir grama seca
            document.getElementById('make-hay').disabled = true;

            document.getElementById('hay-timer').textContent = '10s';
            let timeLeft = 10;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('hay-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishMakingHay();
                }
            }, 1000);
        }

        // Finalizar produÃ§Ã£o de feno
        function finishMakingHay() {
            gameState.barn.feno = (gameState.barn.feno || 0) + 1;
            gameState.hayMaker.making = false;
            
            document.getElementById('make-hay').disabled = false;
            document.getElementById('hay-timer').textContent = '';
            
            updateDisplay();
            updateHayMakerDisplay();
            showMessage('1 feno pronto! ğŸŒ¾');
        }

        // Atualizar display do secador
        function updateHayDryerDisplay() {
            const dryerSlot = document.getElementById('dryer-slot');
            if (gameState.hayDryer.grass >= 8) {
                dryerSlot.innerHTML = 'ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿<br>ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿';
            } else if (gameState.hayDryer.grass > 0) {
                dryerSlot.innerHTML = 'ğŸŒ¿'.repeat(gameState.hayDryer.grass);
            } else {
                dryerSlot.innerHTML = '<span class="text-gray-400">ğŸŒ¿</span>';
            }

            const canDry = gameState.hayDryer.grass >= 8 && !gameState.hayDryer.drying;
            document.getElementById('dry-grass').disabled = !canDry;
        }

        // Atualizar display do fazedor de feno
        function updateHayMakerDisplay() {
            const haySlot = document.getElementById('hay-slot');
            if (gameState.hayMaker.driedGrass >= 4) {
                haySlot.innerHTML = 'ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾';
            } else if (gameState.hayMaker.driedGrass > 0) {
                haySlot.innerHTML = 'ğŸŒ¾'.repeat(gameState.hayMaker.driedGrass);
            } else {
                haySlot.innerHTML = '<span class="text-gray-400">ğŸŒ¾</span>';
            }

            const canMake = gameState.hayMaker.driedGrass >= 4 && !gameState.hayMaker.making;
            document.getElementById('make-hay').disabled = !canMake;
        }

        // Colocar vaca no slot
        function placeCow(index) {
            const cow = gameState.cowPasture.cows[index];
            
            if (cow.hasCow) {
                showMessage('JÃ¡ tem uma vaca neste slot! ğŸ„');
                return;
            }

            // Verificar se tem vaca no celeiro (serÃ¡ implementado quando comprar)
            if (!gameState.barn.vaca || gameState.barn.vaca <= 0) {
                showMessage('VocÃª precisa comprar uma vaca no mercadinho! ğŸ„');
                return;
            }

            // Colocar vaca
            gameState.barn.vaca--;
            cow.hasCow = true;
            
            document.getElementById(`cow-${index}`).textContent = 'ğŸ„';
            document.getElementById(`cow-status-${index}`).textContent = 'Esperando feno';
            
            updateDisplay();
            showMessage('Vaca colocada no pasto! ğŸ„');
        }

        // Adicionar feno Ã  vaca
        function addHayToCow(index) {
            const cow = gameState.cowPasture.cows[index];
            
            if (!cow.hasCow) {
                showMessage('Coloque uma vaca primeiro! ğŸ„');
                return;
            }

            if (cow.hasHay) {
                showMessage('Esta vaca jÃ¡ tem feno! ğŸŒ¾');
                return;
            }

            if (cow.eating || cow.producing || cow.resting) {
                showMessage('Esta vaca estÃ¡ ocupada! â°');
                return;
            }

            if (!gameState.barn.feno || gameState.barn.feno <= 0) {
                showMessage('VocÃª precisa de feno! ğŸŒ¾');
                return;
            }

            // Adicionar feno
            gameState.barn.feno--;
            cow.hasHay = true;
            
            document.getElementById(`hay-slot-${index}`).innerHTML = 'ğŸŒ¾';
            document.getElementById(`cow-status-${index}`).textContent = 'Pronta para comer';
            
            updateDisplay();
            showMessage('Feno adicionado! Clique na vaca para ela comer. ğŸŒ¾');
            
            // Iniciar processo de comer automaticamente
            setTimeout(() => startEating(index), 1000);
        }

        // Iniciar processo de comer
        function startEating(index) {
            const cow = gameState.cowPasture.cows[index];
            
            if (!cow.hasCow || !cow.hasHay || cow.eating) return;

            cow.eating = true;
            cow.hasHay = false;
            
            document.getElementById(`hay-slot-${index}`).innerHTML = '<span class="text-gray-400 text-sm">ğŸŒ¾</span>';
            document.getElementById(`cow-status-${index}`).textContent = 'Comendo... 15s';
            
            let timeLeft = 15;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById(`cow-status-${index}`).textContent = `Comendo... ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    startProducing(index);
                }
            }, 1000);
        }

        // Iniciar produÃ§Ã£o de leite
        function startProducing(index) {
            const cow = gameState.cowPasture.cows[index];
            
            cow.eating = false;
            cow.producing = true;
            
            document.getElementById(`cow-status-${index}`).textContent = 'Produzindo... 10s';
            
            let timeLeft = 10;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById(`cow-status-${index}`).textContent = `Produzindo... ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishProducing(index);
                }
            }, 1000);
        }

        // Finalizar produÃ§Ã£o
        function finishProducing(index) {
            const cow = gameState.cowPasture.cows[index];
            
            cow.producing = false;
            cow.resting = true;
            cow.restStartTime = Date.now();
            
            // Mostrar produtos nos slots
            const milkSlots = document.querySelectorAll(`#milk-slots-${index} .inventory-slot`);
            milkSlots[0].innerHTML = 'ğŸ¥›';
            milkSlots[1].innerHTML = 'ğŸ¥›';
            milkSlots[2].innerHTML = 'ğŸ¥›';
            milkSlots[3].innerHTML = 'ğŸ’©';
            
            document.getElementById(`cow-status-${index}`).textContent = 'Produtos prontos! Colete-os';
            
            showMessage('Vaca produziu 3 leites e 1 esterco! Colete-os! ğŸ¥›');
        }

        // Coletar produtos da vaca
        function collectFromCow(cowIndex, slotIndex) {
            if (!useEnergy()) return;

            const milkSlots = document.querySelectorAll(`#milk-slots-${cowIndex} .inventory-slot`);
            const slot = milkSlots[slotIndex];
            
            if (!slot.innerHTML || slot.innerHTML.includes('text-gray-400')) {
                showMessage('Nada para coletar aqui! ğŸ¥›');
                return;
            }

            // Determinar o que coletar
            let item = '';
            if (slotIndex < 3) {
                item = 'leite';
            } else {
                item = 'esterco';
            }

            // Adicionar ao celeiro
            gameState.barn[item] = (gameState.barn[item] || 0) + 1;
            
            // Limpar slot
            slot.innerHTML = '';
            
            updateDisplay();
            showMessage(`${item} coletado! ğŸ¥›`);
            
            // Verificar se todos os produtos foram coletados
            const allEmpty = Array.from(milkSlots).every(s => !s.innerHTML || s.innerHTML.includes('text-gray-400'));
            if (allEmpty) {
                document.getElementById(`cow-status-${cowIndex}`).textContent = 'Descansando... 10:00';
            }
        }

        // Atualizar descanso das vacas
        function updateCowResting() {
            gameState.cowPasture.cows.forEach((cow, index) => {
                if (cow.resting && cow.restStartTime) {
                    const elapsed = Date.now() - cow.restStartTime;
                    const remaining = (10 * 60 * 1000) - elapsed; // 10 minutos
                    
                    if (remaining <= 0) {
                        // Terminar descanso
                        cow.resting = false;
                        cow.restStartTime = null;
                        document.getElementById(`cow-status-${index}`).textContent = 'Esperando feno';
                        showMessage(`Vaca ${index + 1} terminou de descansar! ğŸ„`);
                    } else {
                        // Mostrar tempo restante
                        const minutes = Math.floor(remaining / 60000);
                        const seconds = Math.floor((remaining % 60000) / 1000);
                        document.getElementById(`cow-status-${index}`).textContent = 
                            `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Coletar grama
        function collectGrass(index) {
            if (!useEnergy()) return;

            if (!gameState.grassField.slots[index]) {
                showMessage('Esta grama ainda estÃ¡ crescendo! ğŸŒ±');
                return;
            }

            // Coletar grama
            gameState.barn.grama = (gameState.barn.grama || 0) + 1;
            gameState.grassField.grassCollected++;
            gameState.grassField.slots[index] = false;

            // Atualizar visual
            const grassSlot = document.querySelector(`[data-index="${index}"]`);
            grassSlot.classList.add('growing');
            grassSlot.innerHTML = 'ğŸŒ±';
            grassSlot.title = 'Grama crescendo... (1 minuto)';

            updateDisplay();
            showMessage('Grama coletada! ğŸŒ¿');

            // Verificar se deve soltar flor
            if (gameState.grassField.grassCollected % 8 === 0) {
                gameState.barn.flor = (gameState.barn.flor || 0) + 1;
                showMessage('Uma flor apareceu! ğŸŒ¸');
                updateDisplay();
            }

            // Grama renasce em 1 minuto
            setTimeout(() => {
                gameState.grassField.slots[index] = true;
                grassSlot.classList.remove('growing');
                grassSlot.innerHTML = 'ğŸŒ¿';
                grassSlot.title = 'Clique para coletar grama';
            }, 60000); // 1 minuto
        }

        // Adicionar uvas Ã  mÃ¡quina de suco
        function addGrapesToJuiceMachine() {
            if (gameState.barn.uva >= 3 && gameState.juiceMachine.grapes < 3) {
                const needed = 3 - gameState.juiceMachine.grapes;
                const toAdd = Math.min(needed, gameState.barn.uva);
                gameState.barn.uva -= toAdd;
                gameState.juiceMachine.grapes += toAdd;
                updateDisplay();
                updateJuiceMachineDisplay();
                showMessage(`${toAdd} uva${toAdd > 1 ? 's' : ''} adicionada Ã  mÃ¡quina! ğŸ‡`);
            } else if (gameState.juiceMachine.grapes >= 3) {
                showMessage('MÃ¡quina jÃ¡ tem uvas suficientes! ğŸ‡');
            } else {
                showMessage('VocÃª precisa de uvas! ğŸ‡');
            }
        }

        // Produzir suco
        function produceJuice() {
            if (gameState.juiceMachine.grapes < 3) {
                showMessage('Adicione 3 uvas Ã  mÃ¡quina! ğŸ‡');
                return;
            }

            if (gameState.juiceMachine.producing) {
                showMessage('JÃ¡ estÃ¡ produzindo suco! â°');
                return;
            }

            gameState.juiceMachine.producing = true;
            gameState.juiceMachine.grapes = 0; // Consumir uvas
            document.getElementById('produce-juice').disabled = true;

            document.getElementById('juice-timer').textContent = '20s';
            let timeLeft = 20;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('juice-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishJuiceProduction();
                }
            }, 1000);
        }

        // Finalizar produÃ§Ã£o de suco
        function finishJuiceProduction() {
            gameState.barn.garrafa_suco = (gameState.barn.garrafa_suco || 0) + 1;
            gameState.juiceMachine.producing = false;
            
            document.getElementById('produce-juice').disabled = false;
            document.getElementById('juice-timer').textContent = '';
            
            updateDisplay();
            updateJuiceMachineDisplay();
            showMessage('Garrafa de suco pronta! ğŸ§ƒ');
        }

        // Atualizar display da mÃ¡quina de suco
        function updateJuiceMachineDisplay() {
            const slot = document.getElementById('juice-slot');
            if (gameState.juiceMachine.grapes >= 3) {
                slot.innerHTML = 'ğŸ‡ğŸ‡ğŸ‡';
            } else if (gameState.juiceMachine.grapes > 0) {
                slot.innerHTML = 'ğŸ‡'.repeat(gameState.juiceMachine.grapes);
            } else {
                slot.innerHTML = '<span class="text-gray-400">ğŸ‡</span>';
            }

            const canProduce = gameState.juiceMachine.grapes >= 3 && !gameState.juiceMachine.producing;
            document.getElementById('produce-juice').disabled = !canProduce;
        }

        // Adicionar grÃ£os de cafÃ© Ã  torra
        function addCoffeeBeansToRoaster() {
            if (gameState.barn.cafe >= 4 && gameState.coffeeRoaster.coffeeBeans < 4) {
                const needed = 4 - gameState.coffeeRoaster.coffeeBeans;
                const toAdd = Math.min(needed, gameState.barn.cafe);
                gameState.barn.cafe -= toAdd;
                gameState.coffeeRoaster.coffeeBeans += toAdd;
                updateDisplay();
                updateCoffeeRoasterDisplay();
                showMessage(`${toAdd} grÃ£o${toAdd > 1 ? 's' : ''} de cafÃ© adicionado Ã  torra! â˜•`);
            } else if (gameState.coffeeRoaster.coffeeBeans >= 4) {
                showMessage('Torra jÃ¡ tem grÃ£os suficientes! â˜•');
            } else {
                showMessage('VocÃª precisa de grÃ£os de cafÃ©! â˜•');
            }
        }

        // Adicionar lenha Ã  torra
        function addFuelToRoaster() {
            if (gameState.barn.lenha >= 3 && gameState.coffeeRoaster.fuel < 3) {
                const needed = 3 - gameState.coffeeRoaster.fuel;
                const toAdd = Math.min(needed, gameState.barn.lenha);
                gameState.barn.lenha -= toAdd;
                gameState.coffeeRoaster.fuel += toAdd;
                updateDisplay();
                updateCoffeeRoasterDisplay();
                showMessage(`${toAdd} lenha${toAdd > 1 ? 's' : ''} adicionada Ã  torra! ğŸ”¥`);
            } else if (gameState.coffeeRoaster.fuel >= 3) {
                showMessage('Torra jÃ¡ tem lenha suficiente! ğŸ”¥');
            } else {
                showMessage('VocÃª precisa de lenhas! ğŸª“');
            }
        }

        // Torrar cafÃ©
        function roastCoffee() {
            if (gameState.coffeeRoaster.coffeeBeans < 4) {
                showMessage('Adicione 4 grÃ£os de cafÃ© Ã  torra! â˜•');
                return;
            }

            if (gameState.coffeeRoaster.fuel < 3) {
                showMessage('Adicione 3 lenhas Ã  torra! ğŸ”¥');
                return;
            }

            if (gameState.coffeeRoaster.roasting) {
                showMessage('JÃ¡ estÃ¡ torrando cafÃ©! â°');
                return;
            }

            gameState.coffeeRoaster.roasting = true;
            gameState.coffeeRoaster.coffeeBeans = 0; // Consumir grÃ£os
            gameState.coffeeRoaster.fuel = 0; // Consumir lenha
            document.getElementById('roast-coffee').disabled = true;

            document.getElementById('roast-timer').textContent = '60s';
            let timeLeft = 60;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('roast-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishCoffeeRoasting();
                }
            }, 1000);
        }

        // Finalizar torrefaÃ§Ã£o
        function finishCoffeeRoasting() {
            gameState.barn.saco_cafe = (gameState.barn.saco_cafe || 0) + 1;
            gameState.coffeeRoaster.roasting = false;
            
            document.getElementById('roast-coffee').disabled = false;
            document.getElementById('roast-timer').textContent = '';
            
            updateDisplay();
            updateCoffeeRoasterDisplay();
            showMessage('Saco de cafÃ© pronto! â˜•');
        }

        // Atualizar display da torra de cafÃ©
        function updateCoffeeRoasterDisplay() {
            // Slot de grÃ£os de cafÃ©
            const beansSlot = document.getElementById('coffee-beans-slot');
            if (gameState.coffeeRoaster.coffeeBeans >= 4) {
                beansSlot.innerHTML = 'â˜•â˜•â˜•â˜•';
            } else if (gameState.coffeeRoaster.coffeeBeans > 0) {
                beansSlot.innerHTML = 'â˜•'.repeat(gameState.coffeeRoaster.coffeeBeans);
            } else {
                beansSlot.innerHTML = '<span class="text-gray-400">â˜•</span>';
            }

            // Slot de lenha
            const fuelSlot = document.getElementById('coffee-fuel-slot');
            if (gameState.coffeeRoaster.fuel >= 3) {
                fuelSlot.innerHTML = 'ğŸ”¥';
            } else if (gameState.coffeeRoaster.fuel > 0) {
                fuelSlot.innerHTML = 'ğŸª“'.repeat(gameState.coffeeRoaster.fuel);
            } else {
                fuelSlot.innerHTML = '<span class="text-gray-400">ğŸª“</span>';
            }

            const canRoast = gameState.coffeeRoaster.coffeeBeans >= 4 && 
                           gameState.coffeeRoaster.fuel >= 3 && 
                           !gameState.coffeeRoaster.roasting;
            document.getElementById('roast-coffee').disabled = !canRoast;
        }

        // Adicionar trigo ao moinho
        function addWheatToWindmill() {
            if (gameState.barn.trigo >= 4 && gameState.windmill.wheat < 4) {
                const needed = 4 - gameState.windmill.wheat;
                const toAdd = Math.min(needed, gameState.barn.trigo);
                gameState.barn.trigo -= toAdd;
                gameState.windmill.wheat += toAdd;
                updateDisplay();
                updateWindmillDisplay();
                showMessage(`${toAdd} trigo${toAdd > 1 ? 's' : ''} adicionado ao moinho! ğŸŒ¾`);
            } else if (gameState.windmill.wheat >= 4) {
                showMessage('Moinho jÃ¡ tem trigo suficiente! ğŸŒ¾');
            } else {
                showMessage('VocÃª precisa de trigo! ğŸŒ¾');
            }
        }

        // Moer trigo
        function grindWheat() {
            if (gameState.windmill.wheat < 4) {
                showMessage('Adicione 4 trigos ao moinho! ğŸŒ¾');
                return;
            }

            if (gameState.windmill.grinding) {
                showMessage('JÃ¡ estÃ¡ moendo trigo! â°');
                return;
            }

            gameState.windmill.grinding = true;
            gameState.windmill.wheat = 0; // Consumir trigo
            document.getElementById('grind-wheat').disabled = true;

            document.getElementById('grind-timer').textContent = '30s';
            let timeLeft = 30;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('grind-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishGrinding();
                }
            }, 1000);
        }

        // Finalizar moagem
        function finishGrinding() {
            gameState.barn.saco_farinha = (gameState.barn.saco_farinha || 0) + 1;
            gameState.windmill.grinding = false;
            
            document.getElementById('grind-wheat').disabled = false;
            document.getElementById('grind-timer').textContent = '';
            
            updateDisplay();
            updateWindmillDisplay();
            showMessage('Saco de farinha pronto! ğŸŒ¾');
        }

        // Atualizar display do moinho
        function updateWindmillDisplay() {
            const wheatSlot = document.getElementById('wheat-slot');
            if (gameState.windmill.wheat >= 4) {
                wheatSlot.innerHTML = 'ğŸŒ¾ğŸŒ¾ğŸŒ¾ğŸŒ¾';
            } else if (gameState.windmill.wheat > 0) {
                wheatSlot.innerHTML = 'ğŸŒ¾'.repeat(gameState.windmill.wheat);
            } else {
                wheatSlot.innerHTML = '<span class="text-gray-400">ğŸŒ¾</span>';
            }

            const canGrind = gameState.windmill.wheat >= 4 && !gameState.windmill.grinding;
            document.getElementById('grind-wheat').disabled = !canGrind;
        }

        // Inicializar cozinha
        function initKitchen() {
            // Slots do fogÃ£o
            document.getElementById('stove-fuel').addEventListener('click', () => addFuelToStove());
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`stove-slot-${i}`).addEventListener('click', () => addIngredientToStove(i));
            }
            document.getElementById('cook-stove').addEventListener('click', () => cookOnStove());

            // Slots do forno
            document.getElementById('oven-fuel').addEventListener('click', () => addFuelToOven());
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`oven-slot-${i}`).addEventListener('click', () => addIngredientToOven(i));
            }
            document.getElementById('cook-oven').addEventListener('click', () => cookInOven());
        }

        // Adicionar lenha ao fogÃ£o
        function addFuelToStove() {
            if (gameState.barn.lenha >= 2 && gameState.stove.fuel < 2) {
                const needed = 2 - gameState.stove.fuel;
                const toAdd = Math.min(needed, gameState.barn.lenha);
                gameState.barn.lenha -= toAdd;
                gameState.stove.fuel += toAdd;
                updateDisplay();
                updateStoveDisplay();
                showMessage(`${toAdd} lenha${toAdd > 1 ? 's' : ''} adicionada ao fogÃ£o! ğŸ”¥`);
            } else if (gameState.stove.fuel >= 2) {
                showMessage('FogÃ£o jÃ¡ tem lenha suficiente! ğŸ”¥');
            } else {
                showMessage('VocÃª precisa de lenhas! ğŸª“');
            }
        }

        // Adicionar lenha ao forno
        function addFuelToOven() {
            if (gameState.barn.lenha >= 3 && gameState.oven.fuel < 3) {
                const needed = 3 - gameState.oven.fuel;
                const toAdd = Math.min(needed, gameState.barn.lenha);
                gameState.barn.lenha -= toAdd;
                gameState.oven.fuel += toAdd;
                updateDisplay();
                updateOvenDisplay();
                showMessage(`${toAdd} lenha${toAdd > 1 ? 's' : ''} adicionada ao forno! ğŸ”¥`);
            } else if (gameState.oven.fuel >= 3) {
                showMessage('Forno jÃ¡ tem lenha suficiente! ğŸ”¥');
            } else {
                showMessage('VocÃª precisa de lenhas! ğŸª“');
            }
        }

        // Adicionar ingrediente ao fogÃ£o
        function addIngredientToStove(slotNum) {
            if (gameState.stove.ingredients[slotNum]) {
                showMessage('Slot jÃ¡ ocupado! Remova o ingrediente primeiro. ğŸ³');
                return;
            }

            const availableItems = ['agua', 'erva', 'alface', 'tomate', 'cenoura', 'brocolis', 'abobora', 'ovo', 'carne'];
            const hasIngredients = availableItems.some(item => gameState.barn[item] > 0);
            
            if (!hasIngredients) {
                showMessage('Nenhum ingrediente disponÃ­vel! ğŸ¥¬');
                return;
            }

            openIngredientModal('stove', slotNum, availableItems);
        }

        // Adicionar ingrediente ao forno
        function addIngredientToOven(slotNum) {
            if (gameState.oven.ingredients[slotNum]) {
                showMessage('Slot jÃ¡ ocupado! Remova o ingrediente primeiro. ğŸ”¥');
                return;
            }

            const availableItems = ['peixe', 'frango_cru', 'ovo', 'leite', 'saco_farinha'];
            const hasIngredients = availableItems.some(item => gameState.barn[item] > 0);
            
            if (!hasIngredients) {
                showMessage('Nenhum ingrediente disponÃ­vel! ğŸ¥¬');
                return;
            }

            openIngredientModal('oven', slotNum, availableItems);
        }

        // Cozinhar no fogÃ£o
        function cookOnStove() {
            if (gameState.stove.fuel < 2) {
                showMessage('Adicione 2 lenhas ao fogÃ£o! ğŸ”¥');
                return;
            }

            if (gameState.stove.cooking) {
                showMessage('JÃ¡ estÃ¡ cozinhando! â°');
                return;
            }

            const recipe = findStoveRecipe();
            if (!recipe) {
                showMessage('Receita nÃ£o encontrada! Verifique os ingredientes. ğŸ³');
                return;
            }

            gameState.stove.cooking = true;
            gameState.stove.fuel = 0; // Consumir lenha
            document.getElementById('cook-stove').disabled = true;

            if (recipe.time === 0) {
                // ChÃ¡ Ã© instantÃ¢neo
                finishStoveCooking(recipe);
            } else {
                document.getElementById('stove-timer').textContent = `${recipe.time}s`;
                let timeLeft = recipe.time;
                const timer = setInterval(() => {
                    timeLeft--;
                    document.getElementById('stove-timer').textContent = `${timeLeft}s`;
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        finishStoveCooking(recipe);
                    }
                }, 1000);
            }
        }

        // Cozinhar no forno
        function cookInOven() {
            if (gameState.oven.fuel < 3) {
                showMessage('Adicione 3 lenhas ao forno! ğŸ”¥');
                return;
            }

            if (gameState.oven.cooking) {
                showMessage('JÃ¡ estÃ¡ assando! â°');
                return;
            }

            const recipe = findOvenRecipe();
            if (!recipe) {
                showMessage('Receita nÃ£o encontrada! Verifique os ingredientes. ğŸ”¥');
                return;
            }

            gameState.oven.cooking = true;
            gameState.oven.fuel = 0; // Consumir lenha
            document.getElementById('cook-oven').disabled = true;

            document.getElementById('oven-timer').textContent = `${recipe.time}s`;
            let timeLeft = recipe.time;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('oven-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishOvenCooking(recipe);
                }
            }, 1000);
        }

        // Encontrar receita do fogÃ£o
        function findStoveRecipe() {
            const ingredients = Object.values(gameState.stove.ingredients).filter(Boolean);
            
            for (const [recipeName, recipe] of Object.entries(stoveRecipes)) {
                const recipeIngredients = Object.keys(recipe.ingredients);
                if (recipeIngredients.length === ingredients.length) {
                    const matches = recipeIngredients.every(ingredient => {
                        const needed = recipe.ingredients[ingredient];
                        const available = ingredients.filter(i => i === ingredient).length;
                        return available >= needed;
                    });
                    if (matches) return recipe;
                }
            }
            return null;
        }

        // Encontrar receita do forno
        function findOvenRecipe() {
            const ingredients = Object.values(gameState.oven.ingredients).filter(Boolean);
            
            for (const [recipeName, recipe] of Object.entries(ovenRecipes)) {
                const recipeIngredients = Object.keys(recipe.ingredients);
                if (recipeIngredients.length === ingredients.length) {
                    const matches = recipeIngredients.every(ingredient => {
                        const needed = recipe.ingredients[ingredient];
                        const available = ingredients.filter(i => i === ingredient).length;
                        return available >= needed;
                    });
                    if (matches) return recipe;
                }
            }
            return null;
        }

        // Finalizar cozimento no fogÃ£o
        function finishStoveCooking(recipe) {
            gameState.barn[recipe.result] = (gameState.barn[recipe.result] || 0) + 1;
            gameState.stove.ingredients = {};
            gameState.stove.cooking = false;
            
            document.getElementById('cook-stove').disabled = false;
            document.getElementById('stove-timer').textContent = '';
            
            updateDisplay();
            updateStoveDisplay();
            showMessage(`${recipe.result} pronto! ${recipe.emoji}`);
        }

        // Finalizar cozimento no forno
        function finishOvenCooking(recipe) {
            gameState.barn[recipe.result] = (gameState.barn[recipe.result] || 0) + 1;
            gameState.oven.ingredients = {};
            gameState.oven.cooking = false;
            
            document.getElementById('cook-oven').disabled = false;
            document.getElementById('oven-timer').textContent = '';
            
            updateDisplay();
            updateOvenDisplay();
            showMessage(`${recipe.result} pronto! ${recipe.emoji}`);
        }

        // Atualizar display do fogÃ£o
        function updateStoveDisplay() {
            // Atualizar combustÃ­vel
            const fuelSlot = document.getElementById('stove-fuel');
            if (gameState.stove.fuel >= 2) {
                fuelSlot.innerHTML = 'ğŸ”¥';
            } else {
                fuelSlot.innerHTML = '<span class="text-gray-400">ğŸª“</span>';
            }

            // Atualizar ingredientes
            for (let i = 1; i <= 4; i++) {
                const slot = document.getElementById(`stove-slot-${i}`);
                const ingredient = gameState.stove.ingredients[i];
                if (ingredient) {
                    slot.innerHTML = seedEmojis[ingredient] || 'â“';
                } else {
                    slot.innerHTML = '';
                }
            }

            // Atualizar botÃ£o
            const canCook = gameState.stove.fuel >= 2 && 
                           Object.keys(gameState.stove.ingredients).length > 0 && 
                           !gameState.stove.cooking;
            document.getElementById('cook-stove').disabled = !canCook;
        }

        // Atualizar display do forno
        function updateOvenDisplay() {
            // Atualizar combustÃ­vel
            const fuelSlot = document.getElementById('oven-fuel');
            if (gameState.oven.fuel >= 3) {
                fuelSlot.innerHTML = 'ğŸ”¥';
            } else {
                fuelSlot.innerHTML = '<span class="text-gray-400">ğŸª“</span>';
            }

            // Atualizar ingredientes
            for (let i = 1; i <= 4; i++) {
                const slot = document.getElementById(`oven-slot-${i}`);
                const ingredient = gameState.oven.ingredients[i];
                if (ingredient) {
                    slot.innerHTML = seedEmojis[ingredient] || 'â“';
                } else {
                    slot.innerHTML = '';
                }
            }

            // Atualizar botÃ£o
            const canCook = gameState.oven.fuel >= 3 && 
                           Object.keys(gameState.oven.ingredients).length > 0 && 
                           !gameState.oven.cooking;
            document.getElementById('cook-oven').disabled = !canCook;
        }

        // Inicializar bosque
        function initForest() {
            document.querySelectorAll('.tree-slot').forEach(slot => {
                slot.addEventListener('click', () => collectFromTree(slot));
            });
            
            // Inicializar Ã¡rea de cortar lenha
            document.getElementById('wood-slot').addEventListener('click', () => {
                if (gameState.barn.tronco > 0 && !gameState.woodCutting.trunk) {
                    gameState.barn.tronco--;
                    gameState.woodCutting.trunk = true;
                    document.getElementById('wood-slot').innerHTML = 'ğŸªµ';
                    document.getElementById('cut-wood').disabled = false;
                    updateDisplay();
                    showMessage('Tronco colocado! ğŸªµ');
                }
            });
            
            document.getElementById('cut-wood').addEventListener('click', () => {
                if (gameState.woodCutting.trunk && !gameState.woodCutting.cutting) {
                    cutWood();
                }
            });
        }

        // Coletar flor
        function collectFlower(slot) {
            if (!useEnergy()) return;

            const type = slot.dataset.type;
            const index = parseInt(slot.dataset.index);
            
            if (slot.classList.contains('growing')) {
                showMessage('Esta flor ainda estÃ¡ crescendo! ğŸŒ±');
                return;
            }
            
            // Adicionar flor ao celeiro
            gameState.barn[type] = (gameState.barn[type] || 0) + 1;
            gameState.flowersCollected++;
            
            // Marcar como crescendo
            slot.classList.add('growing');
            slot.innerHTML = 'ğŸŒ±';
            
            // Registrar tempo de coleta
            gameState.flowerField[type].lastCollected[index] = Date.now();
            
            updateDisplay();
            showMessage(`${type} coletada! ğŸŒ¸`);
            
            // Verificar se deve soltar erva
            if (gameState.flowersCollected % 4 === 0) {
                gameState.barn['erva'] = (gameState.barn['erva'] || 0) + 1;
                showMessage('Uma erva apareceu! ğŸŒ¿');
                updateDisplay();
            }
            
            // Flor cresce novamente em 5 minutos
            setTimeout(() => {
                slot.classList.remove('growing');
                slot.innerHTML = flowerEmojis[type];
            }, 5 * 60 * 1000);
        }

        // Coletar das Ã¡rvores
        function collectFromTree(slot) {
            if (!useEnergy()) return;

            const type = slot.dataset.type;
            
            if (type === 'comum') {
                // Ãrvore comum precisa de machado
                if (!gameState.hasAxe) {
                    showMessage('VocÃª precisa de um machado! ğŸª“');
                    return;
                }
                
                if (gameState.axeUses <= 0) {
                    showMessage('Seu machado quebrou! ğŸ’”');
                    return;
                }
                
                // Coletar tronco
                gameState.barn.tronco = (gameState.barn.tronco || 0) + 1;
                gameState.trunksCollected++;
                gameState.axeUses--;
                
                updateDisplay();
                updateAxeDisplay();
                showMessage('Tronco coletado! ğŸªµ');
                
                // A cada 3 troncos, soltar galho
                if (gameState.trunksCollected % 3 === 0) {
                    gameState.barn.galho = (gameState.barn.galho || 0) + 1;
                    showMessage('Um galho apareceu! ğŸŒ¿');
                    updateDisplay();
                }
                
                // Verificar se machado quebrou
                if (gameState.axeUses <= 0) {
                    gameState.hasAxe = false;
                    document.getElementById('axe-shop').classList.remove('hidden');
                    showMessage('Seu machado quebrou! Compre outro no mercadinho. ğŸ’”');
                }
                
            } else {
                // Ãrvores frutÃ­feras
                const tree = gameState.trees[type];
                if (tree.fruits <= 0) {
                    showMessage('Esta Ã¡rvore nÃ£o tem mais frutas! ğŸƒ');
                    return;
                }
                
                let fruitName = type === 'macieira' ? 'maca' : 
                               type === 'laranjeira' ? 'laranja' : 'banana';
                
                gameState.barn[fruitName] = (gameState.barn[fruitName] || 0) + 1;
                tree.fruits--;
                
                updateDisplay();
                updateTreeDisplay();
                showMessage(`${fruitName} coletada! ğŸ`);
            }
        }

        // Cortar lenha
        function cutWood() {
            if (!gameState.woodCutting.trunk || gameState.woodCutting.cutting) return;
            
            gameState.woodCutting.cutting = true;
            document.getElementById('cut-wood').disabled = true;
            document.getElementById('cut-wood').textContent = 'Cortando...';
            
            setTimeout(() => {
                // Produzir 4 lenhas
                gameState.barn.lenha = (gameState.barn.lenha || 0) + 4;
                gameState.woodCutting.trunk = null;
                gameState.woodCutting.cutting = false;
                
                document.getElementById('wood-slot').innerHTML = '<span class="text-gray-400">ğŸªµ</span>';
                document.getElementById('cut-wood').disabled = true;
                document.getElementById('cut-wood').textContent = 'ğŸª“ Cortar';
                
                updateDisplay();
                showMessage('4 lenhas produzidas! ğŸª“');
            }, 3000);
        }

        // Atualizar display do machado
        function updateAxeDisplay() {
            if (gameState.hasAxe) {
                document.getElementById('axe-uses').textContent = gameState.axeUses;
                document.getElementById('axe-status').style.display = 'block';
            } else {
                document.getElementById('axe-status').style.display = 'none';
            }
        }

        // Atualizar display das Ã¡rvores
        function updateTreeDisplay() {
            document.getElementById('maca-count').textContent = `MaÃ§Ã£s: ${gameState.trees.macieira.fruits}`;
            document.getElementById('laranja-count').textContent = `Laranjas: ${gameState.trees.laranjeira.fruits}`;
            document.getElementById('banana-count').textContent = `Bananas: ${gameState.trees.bananeira.fruits}`;
        }

        // Selecionar semente
        document.querySelectorAll('.seed-item').forEach(seed => {
            seed.addEventListener('click', () => {
                const seedType = seed.dataset.seed;
                
                // Se jÃ¡ tem essa semente selecionada, apenas confirma
                if (gameState.selectedSeed === seedType) {
                    showMessage(`Semente de ${seedType} jÃ¡ selecionada! ğŸŒ±`);
                    return;
                }
                
                const price = parseInt(seed.dataset.price);
                
                if (gameState.coins >= price) {
                    gameState.coins -= price;
                    gameState.selectedSeed = seedType;
                    updateDisplay();
                    
                    // Feedback visual
                    document.querySelectorAll('.seed-item').forEach(s => s.classList.remove('ring-4', 'ring-green-500'));
                    seed.classList.add('ring-4', 'ring-green-500');
                    
                    showMessage(`Semente de ${seedType} selecionada! SerÃ¡ usada atÃ© trocar. ğŸŒ±`);
                } else {
                    showMessage('Moedas insuficientes! ğŸ’°');
                }
            });
        });

        // Lidar com canteiro
        function handleCanteiro(id) {
            if (!useEnergy()) return; // Usar energia para cada aÃ§Ã£o

            const canteiro = document.querySelector(`[data-id="${id}"]`);
            const stage = canteiro.dataset.stage;

            switch (stage) {
                case 'empty':
                    if (gameState.fertilizer > 0) {
                        gameState.fertilizer--;
                        canteiro.dataset.stage = 'fertilized';
                        canteiro.classList.add('fertilized');
                        updateDisplay();
                        showMessage('Canteiro adubado! ğŸŒ±');
                    } else {
                        showMessage('Sem adubo! ğŸŒ±');
                    }
                    break;
                    
                case 'fertilized':
                    if (gameState.selectedSeed) {
                        canteiro.dataset.stage = 'planted';
                        canteiro.dataset.seed = gameState.selectedSeed;
                        canteiro.classList.remove('fertilized');
                        canteiro.classList.add('planted');
                        canteiro.innerHTML = seedEmojis[gameState.selectedSeed];
                        showMessage('Semente plantada! ğŸŒ±');
                    } else {
                        showMessage('Selecione uma semente primeiro! ğŸŒ±');
                    }
                    break;
                    
                case 'planted':
                    if (gameState.water > 0) {
                        gameState.water--;
                        canteiro.dataset.stage = 'watered';
                        canteiro.classList.remove('planted');
                        canteiro.classList.add('watered');
                        updateDisplay();
                        showMessage('Canteiro regado! ğŸ’§');
                        
                        // Crescer apÃ³s 30 segundos
                        setTimeout(() => {
                            canteiro.dataset.stage = 'ready';
                            canteiro.classList.remove('watered');
                            canteiro.classList.add('ready');
                            showMessage('Planta pronta para colher! âœ¨');
                        }, 30000);
                    } else {
                        showMessage('Sem Ã¡gua! ğŸ’§');
                    }
                    break;
                    
                case 'ready':
                    const seedType = canteiro.dataset.seed;
                    let harvestAmount = 1;
                    
                    // VerÃ£o: cada canteiro dÃ¡ 2 frutos
                    if (gameState.currentSeason === 1) {
                        harvestAmount = 2;
                    }
                    
                    gameState.barn[seedType] = (gameState.barn[seedType] || 0) + harvestAmount;
                    gameState.canteirosColhidos++;
                    
                    // Resetar canteiro
                    canteiro.dataset.stage = 'empty';
                    canteiro.dataset.seed = '';
                    canteiro.className = 'canteiro';
                    canteiro.innerHTML = '';
                    
                    updateDisplay();
                    showMessage(`${harvestAmount} ${seedType}${harvestAmount > 1 ? 's' : ''} colhido${harvestAmount > 1 ? 's' : ''}! ğŸŒ¾`);
                    
                    // Minhoca a cada 2 canteiros
                    if (gameState.canteirosColhidos % 2 === 0) {
                        gameState.barn['minhoca'] = (gameState.barn['minhoca'] || 0) + 1;
                        showMessage('Uma minhoca apareceu! ğŸª±');
                        updateDisplay();
                    }
                    break;
            }
        }

        // Mover para quitanda
        function moveToMarket(slotId, item) {
            // Itens que nÃ£o podem ser vendidos
            const nonSellableItems = ['minhoca', 'barro', 'erva', 'galho', 'lenha'];
            
            if (item && gameState.barn[item] > 0 && !nonSellableItems.includes(item)) {
                // Verificar se jÃ¡ existe um slot com este item
                const existingSlot = Array.from(document.querySelectorAll('#market .inventory-slot'))
                    .find(slot => {
                        const slotItem = Object.entries(gameState.market)
                            .find(([slotIndex, marketItem]) => slot.dataset.id === slotIndex && marketItem.item === item);
                        return slotItem;
                    });
                
                if (existingSlot) {
                    // Adicionar ao slot existente
                    const slotIndex = existingSlot.dataset.id;
                    gameState.market[slotIndex].quantity++;
                    gameState.barn[item]--;
                    
                    let emoji = seedEmojis[item] || 'â“';
                    existingSlot.innerHTML = `${emoji}<br><small>${gameState.market[slotIndex].quantity}</small>`;
                    existingSlot.title = `${item} (${gameState.market[slotIndex].quantity}) - ${getItemPrice(item)} moedas cada`;
                    
                    updateDisplay();
                    showMessage(`${item} adicionado ao slot existente! ğŸª`);
                } else {
                    // Encontrar slot vazio na quitanda
                    const emptySlot = Array.from(document.querySelectorAll('#market .inventory-slot'))
                        .find(slot => !slot.innerHTML);
                    
                    if (emptySlot) {
                        const slotIndex = emptySlot.dataset.id;
                        gameState.market[slotIndex] = { item: item, quantity: 1 };
                        gameState.barn[item]--;
                        
                        let emoji = seedEmojis[item] || 'â“';
                        
                        emptySlot.innerHTML = `${emoji}<br><small>1</small>`;
                        emptySlot.title = `${item} (1) - ${getItemPrice(item)} moedas cada`;
                        
                        updateDisplay();
                        showMessage(`${item} movido para quitanda! ğŸª`);
                    } else {
                        showMessage('Quitanda cheia! Venda alguns itens primeiro. ğŸª');
                    }
                }
            } else if (nonSellableItems.includes(item)) {
                showMessage(`${item} nÃ£o pode ser vendido! âŒ`);
            }
        }

        // Calcular preÃ§o do item com bÃ´nus da estaÃ§Ã£o
        function getItemPrice(item) {
            let basePrice = itemPrices[item] || 10;
            
            // Primavera: plantaÃ§Ãµes valem 10% a mais
            if (gameState.currentSeason === 0 && itemPrices[item]) {
                basePrice = Math.floor(basePrice * 1.1);
            }
            // Outono: produtos animais valem 15% a mais (minhoca seria produto animal)
            else if (gameState.currentSeason === 2 && item === 'minhoca') {
                basePrice = Math.floor(basePrice * 1.15);
            }
            // Inverno: produtos fabricados valem 15% a mais
            else if (gameState.currentSeason === 3) {
                // Aqui vocÃª pode adicionar produtos fabricados no futuro
                basePrice = Math.floor(basePrice * 1.15);
            }
            
            return basePrice;
        }

        // Vender tudo
        document.getElementById('sell-all').addEventListener('click', () => {
            let totalEarned = 0;
            
            Object.entries(gameState.market).forEach(([slotId, marketItem]) => {
                if (marketItem && marketItem.item) {
                    const itemPrice = getItemPrice(marketItem.item);
                    const itemTotal = itemPrice * marketItem.quantity;
                    totalEarned += itemTotal;
                    delete gameState.market[slotId];
                    
                    const slot = document.querySelector(`#market [data-id="${slotId}"]`);
                    slot.innerHTML = '';
                    slot.title = '';
                }
            });
            
            if (totalEarned > 0) {
                gameState.coins += totalEarned;
                updateDisplay();
                showMessage(`Vendeu tudo por ${totalEarned} moedas! ğŸ’°`);
            } else {
                showMessage('Nada para vender! ğŸª');
            }
        });

        // Mercadinho
        document.querySelectorAll('.shop-slot').forEach(slot => {
            slot.addEventListener('click', () => {
                const item = slot.dataset.item;
                const price = parseInt(slot.dataset.price);
                
                if (gameState.coins >= price) {
                    gameState.coins -= price;
                    
                    if (item === 'poco' && !gameState.hasWell) {
                        gameState.hasWell = true;
                        document.getElementById('well-container').classList.remove('hidden');
                        slot.remove();
                        showMessage('PoÃ§o de Ã¡gua comprado! ğŸª£');

                    } else if (item === 'bosque' && !gameState.hasForest) {
                        gameState.hasForest = true;
                        document.getElementById('forest').classList.remove('hidden');
                        document.getElementById('axe-shop').classList.remove('hidden');
                        slot.remove();
                        showMessage('Bosque comprado! ğŸŒ²');
                        initForest();
                        updateTreeDisplay();
                    } else if (item === 'machado') {
                        gameState.hasAxe = true;
                        gameState.axeUses = 40;
                        document.getElementById('wood-cutting').classList.remove('hidden');
                        slot.classList.add('hidden');
                        showMessage('Machado comprado! Ãrea de cortar lenha desbloqueada! ğŸª“');
                        updateAxeDisplay();
                    } else if (item === 'cozinha' && !gameState.hasKitchen) {
                        gameState.hasKitchen = true;
                        document.getElementById('kitchen').classList.remove('hidden');
                        slot.remove();
                        showMessage('Cozinha comprada! FogÃ£o e Forno desbloqueados! ğŸ³');
                        initKitchen();
                        updateStoveDisplay();
                        updateOvenDisplay();
                    } else if (item === 'maquina_suco' && !gameState.hasJuiceMachine) {
                        gameState.hasJuiceMachine = true;
                        document.getElementById('juice-machine').classList.remove('hidden');
                        slot.remove();
                        showMessage('MÃ¡quina de Suco comprada! ğŸ§ƒ');
                        initJuiceMachine();
                        updateJuiceMachineDisplay();
                    } else if (item === 'torra_cafe' && !gameState.hasCoffeeRoaster) {
                        gameState.hasCoffeeRoaster = true;
                        document.getElementById('coffee-roaster').classList.remove('hidden');
                        slot.remove();
                        showMessage('Torra de CafÃ© comprada! â˜•');
                        initCoffeeRoaster();
                        updateCoffeeRoasterDisplay();
                    } else if (item === 'moinho' && !gameState.hasWindmill) {
                        gameState.hasWindmill = true;
                        document.getElementById('windmill').classList.remove('hidden');
                        slot.remove();
                        showMessage('Moinho comprado! ğŸ­');
                        initWindmill();
                        updateWindmillDisplay();
                    } else if (item === 'campo_grama' && !gameState.hasGrassField) {
                        gameState.hasGrassField = true;
                        document.getElementById('grass-field').classList.remove('hidden');
                        slot.remove();
                        showMessage('Campo de Grama comprado! ğŸŒ¿');
                        initGrassField();
                    } else if (item === 'secador_feno' && !gameState.hasHayDryer) {
                        gameState.hasHayDryer = true;
                        document.getElementById('hay-dryer').classList.remove('hidden');
                        slot.remove();
                        showMessage('Secador/Feno comprado! ğŸŒ¾');
                        initHayDryer();
                        updateHayDryerDisplay();
                        updateHayMakerDisplay();
                    } else if (item === 'pasto_vacas' && !gameState.hasCowPasture) {
                        gameState.hasCowPasture = true;
                        document.getElementById('cow-pasture').classList.remove('hidden');
                        document.getElementById('cow-shop').classList.remove('hidden');
                        slot.remove();
                        showMessage('Pasto das Vacas comprado! Agora vocÃª pode comprar vacas! ğŸ„');
                        initCowPasture();
                    } else if (item === 'vaca') {
                        gameState.barn.vaca = (gameState.barn.vaca || 0) + 1;
                        showMessage('Vaca comprada! Coloque-a no pasto! ğŸ„');
                    } else if (item === 'queijeira' && !gameState.hasCheeseMaker) {
                        gameState.hasCheeseMaker = true;
                        document.getElementById('cheese-maker').classList.remove('hidden');
                        slot.remove();
                        showMessage('Queijeira comprada! ğŸ§€');
                        initCheeseMaker();
                        updateCheeseMakerDisplay();
                    } else if (item === 'composteira' && !gameState.hasComposter) {
                        gameState.hasComposter = true;
                        document.getElementById('composter').classList.remove('hidden');
                        slot.remove();
                        showMessage('Composteira comprada! ğŸ‚');
                        initComposter();
                        updateComposterDisplay();
                    } else if (item === 'curral_ovelhas' && !gameState.hasSheepPen) {
                        gameState.hasSheepPen = true;
                        document.getElementById('sheep-pen').classList.remove('hidden');
                        document.getElementById('sheep-shop').classList.remove('hidden');
                        document.getElementById('shears-shop').classList.remove('hidden');
                        document.getElementById('spinning-machine-shop').classList.remove('hidden');
                        slot.remove();
                        showMessage('Curral das Ovelhas comprado! Agora vocÃª pode comprar ovelhas e tesoura! ğŸ‘');
                        initSheepPen();
                    } else if (item === 'ovelha') {
                        gameState.barn.ovelha = (gameState.barn.ovelha || 0) + 1;
                        showMessage('Ovelha comprada! Coloque-a no curral! ğŸ‘');
                    } else if (item === 'tesoura' && !gameState.hasShears) {
                        gameState.hasShears = true;
                        showMessage('Tesoura de tosquiar comprada! Agora vocÃª pode coletar lÃ£ das ovelhas! âœ‚ï¸');
                        slot.classList.add('hidden');
                    } else if (item === 'maquina_fiar' && !gameState.hasSpinningMachine) {
                        gameState.hasSpinningMachine = true;
                        document.getElementById('spinning-machine').classList.remove('hidden');
                        slot.classList.add('hidden');
                        showMessage('MÃ¡quina de Fiar comprada! ğŸ§µ');
                        initSpinningMachine();
                        updateSpinningMachineDisplay();
                    } else if (item === 'galinheiro' && !gameState.hasChickenCoop) {
                        gameState.hasChickenCoop = true;
                        document.getElementById('chicken-coop').classList.remove('hidden');
                        document.getElementById('chicken-shop').classList.remove('hidden');
                        slot.remove();
                        showMessage('Galinheiro comprado! Agora vocÃª pode comprar galinhas! ğŸ”');
                        initChickenCoop();
                    } else if (item === 'galinha') {
                        gameState.barn.galinha = (gameState.barn.galinha || 0) + 1;
                        showMessage('Galinha comprada! Coloque-a no galinheiro! ğŸ”');
                    } else if (item === 'misturador' && !gameState.hasMixer) {
                        gameState.hasMixer = true;
                        document.getElementById('mixer').classList.remove('hidden');
                        slot.remove();
                        showMessage('Misturador comprado! ğŸ¥„');
                        initMixer();
                        updateMixerDisplay();
                    }
                    
                    updateDisplay();
                } else {
                    showMessage('Moedas insuficientes! ğŸ’°');
                }
            });
        });

        // PoÃ§o de Ã¡gua
        document.getElementById('water-well').addEventListener('click', () => {
            if (gameState.hasWell && useEnergy()) {
                gameState.water += 4;
                updateDisplay();
                showMessage('Coletou 4 baldes de Ã¡gua! ğŸ’§');
            }
        });

        // Sistema de chuva
        function startRainCycle() {
            setInterval(() => {
                startRain();
            }, 15 * 60 * 1000); // 15 minutos
        }

        function startRain() {
            document.body.style.backgroundColor = '#6B7280';
            showMessage('ComeÃ§ou a chover! ğŸŒ§ï¸');
            
            // Criar gotas de chuva
            const rainContainer = document.getElementById('rain-container');
            rainContainer.classList.add('rain');
            
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'raindrop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                drop.style.height = (Math.random() * 50 + 10) + 'px';
                rainContainer.appendChild(drop);
            }
            
            // Regar plantaÃ§Ã£o automaticamente
            document.querySelectorAll('.canteiro[data-stage="planted"]').forEach(canteiro => {
                canteiro.dataset.stage = 'watered';
                canteiro.classList.remove('planted');
                canteiro.classList.add('watered');
                
                setTimeout(() => {
                    canteiro.dataset.stage = 'ready';
                    canteiro.classList.remove('watered');
                    canteiro.classList.add('ready');
                }, 30000);
            });
            
            // Adicionar barro
            gameState.barn['barro'] = (gameState.barn['barro'] || 0) + 1;
            updateDisplay();
            
            // Parar chuva apÃ³s 10 segundos
            setTimeout(() => {
                document.body.style.backgroundColor = '';
                rainContainer.innerHTML = '';
                rainContainer.classList.remove('rain');
                showMessage('A chuva parou! â˜€ï¸');
            }, 10000);
        }

        // Mostrar mensagem
        function showMessage(text) {
            const message = document.createElement('div');
            message.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300';
            message.textContent = text;
            document.body.appendChild(message);
            
            setTimeout(() => {
                message.style.opacity = '0';
                setTimeout(() => message.remove(), 300);
            }, 3000);
        }

        // Inicializar mÃ¡quina de fiar
        function initSpinningMachine() {
            document.getElementById('spinning-wool-slot').addEventListener('click', () => addWoolToSpinningMachine());
            document.getElementById('spin-wool').addEventListener('click', () => spinWool());
        }

        // Inicializar misturador
        function initMixer() {
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`mixer-slot-${i}`).addEventListener('click', () => addIngredientToMixer(i));
            }
            document.getElementById('mix-feed').addEventListener('click', () => mixFeed());
        }

        // Adicionar lÃ£ Ã  mÃ¡quina de fiar
        function addWoolToSpinningMachine() {
            if (gameState.barn.la >= 3 && gameState.spinningMachine.wool < 3) {
                const needed = 3 - gameState.spinningMachine.wool;
                const toAdd = Math.min(needed, gameState.barn.la);
                gameState.barn.la -= toAdd;
                gameState.spinningMachine.wool += toAdd;
                updateDisplay();
                updateSpinningMachineDisplay();
                showMessage(`${toAdd} lÃ£${toAdd > 1 ? 's' : ''} adicionada Ã  mÃ¡quina! ğŸ§¶`);
            } else if (gameState.spinningMachine.wool >= 3) {
                showMessage('MÃ¡quina jÃ¡ tem lÃ£ suficiente! ğŸ§¶');
            } else {
                showMessage('VocÃª precisa de lÃ£! ğŸ§¶');
            }
        }

        // Fiar lÃ£
        function spinWool() {
            if (gameState.spinningMachine.wool < 3) {
                showMessage('Adicione 3 lÃ£s Ã  mÃ¡quina! ğŸ§¶');
                return;
            }

            if (gameState.spinningMachine.spinning) {
                showMessage('JÃ¡ estÃ¡ fiando! â°');
                return;
            }

            gameState.spinningMachine.spinning = true;
            gameState.spinningMachine.wool = 0; // Consumir lÃ£
            document.getElementById('spin-wool').disabled = true;

            document.getElementById('spinning-timer').textContent = '30s';
            let timeLeft = 30;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('spinning-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishSpinning();
                }
            }, 1000);
        }

        // Finalizar fiaÃ§Ã£o
        function finishSpinning() {
            gameState.barn.novelo_la = (gameState.barn.novelo_la || 0) + 1;
            gameState.spinningMachine.spinning = false;
            
            document.getElementById('spin-wool').disabled = false;
            document.getElementById('spinning-timer').textContent = '';
            
            updateDisplay();
            updateSpinningMachineDisplay();
            showMessage('Novelo de lÃ£ pronto! ğŸ§¶');
        }

        // Atualizar display da mÃ¡quina de fiar
        function updateSpinningMachineDisplay() {
            const woolSlot = document.getElementById('spinning-wool-slot');
            if (gameState.spinningMachine.wool >= 3) {
                woolSlot.innerHTML = 'ğŸ§¶ğŸ§¶ğŸ§¶';
            } else if (gameState.spinningMachine.wool > 0) {
                woolSlot.innerHTML = 'ğŸ§¶'.repeat(gameState.spinningMachine.wool);
            } else {
                woolSlot.innerHTML = '<span class="text-gray-400">ğŸ§¶</span>';
            }

            const canSpin = gameState.spinningMachine.wool >= 3 && !gameState.spinningMachine.spinning;
            document.getElementById('spin-wool').disabled = !canSpin;
        }

        // Adicionar ingrediente ao misturador
        function addIngredientToMixer(slotNum) {
            if (gameState.mixer.ingredients[slotNum]) {
                showMessage('Slot jÃ¡ ocupado! Remova o ingrediente primeiro. ğŸ¥„');
                return;
            }

            const availableItems = ['trigo', 'milho', 'batata', 'brocolis', 'cenoura'];
            const hasIngredients = availableItems.some(item => gameState.barn[item] > 0);
            
            if (!hasIngredients) {
                showMessage('Nenhum ingrediente disponÃ­vel! ğŸ¥„');
                return;
            }

            openIngredientModal('mixer', slotNum, availableItems);
        }

        // Misturar raÃ§Ã£o
        function mixFeed() {
            if (gameState.mixer.mixing) {
                showMessage('JÃ¡ estÃ¡ misturando! â°');
                return;
            }

            const recipe = findMixerRecipe();
            if (!recipe) {
                showMessage('Receita nÃ£o encontrada! Verifique os ingredientes. ğŸ¥„');
                return;
            }

            gameState.mixer.mixing = true;
            document.getElementById('mix-feed').disabled = true;

            document.getElementById('mixer-timer').textContent = `${recipe.time}s`;
            let timeLeft = recipe.time;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('mixer-timer').textContent = `${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishMixing(recipe);
                }
            }, 1000);
        }

        // Encontrar receita do misturador
        function findMixerRecipe() {
            const ingredients = Object.values(gameState.mixer.ingredients).filter(Boolean);
            
            for (const [recipeName, recipe] of Object.entries(mixerRecipes)) {
                const recipeIngredients = Object.keys(recipe.ingredients);
                if (recipeIngredients.length === ingredients.length) {
                    const matches = recipeIngredients.every(ingredient => {
                        const needed = recipe.ingredients[ingredient];
                        const available = ingredients.filter(i => i === ingredient).length;
                        return available >= needed;
                    });
                    if (matches) return recipe;
                }
            }
            return null;
        }

        // Finalizar mistura
        function finishMixing(recipe) {
            gameState.barn[recipe.result] = (gameState.barn[recipe.result] || 0) + 1;
            gameState.mixer.ingredients = {};
            gameState.mixer.mixing = false;
            
            document.getElementById('mix-feed').disabled = false;
            document.getElementById('mixer-timer').textContent = '';
            
            updateDisplay();
            updateMixerDisplay();
            showMessage(`${recipe.result} pronta! ${recipe.emoji}`);
        }

        // Atualizar display do misturador
        function updateMixerDisplay() {
            // Atualizar ingredientes
            for (let i = 1; i <= 4; i++) {
                const slot = document.getElementById(`mixer-slot-${i}`);
                const ingredient = gameState.mixer.ingredients[i];
                if (ingredient) {
                    slot.innerHTML = seedEmojis[ingredient] || 'â“';
                } else {
                    slot.innerHTML = '';
                }
            }

            // Atualizar botÃ£o
            const canMix = Object.keys(gameState.mixer.ingredients).length > 0 && !gameState.mixer.mixing;
            document.getElementById('mix-feed').disabled = !canMix;
        }

        // Modal de ingredientes
        let currentSlotInfo = null;

        function openIngredientModal(slotType, slotNum, availableIngredients) {
            currentSlotInfo = { slotType, slotNum };
            
            document.getElementById('modal-title').textContent = 
                slotType === 'stove' ? 'Escolher Ingrediente - FogÃ£o' : 'Escolher Ingrediente - Forno';
            
            const modalIngredients = document.getElementById('modal-ingredients');
            modalIngredients.innerHTML = '';
            
            availableIngredients.forEach(ingredient => {
                if (gameState.barn[ingredient] > 0) {
                    const ingredientSlot = document.createElement('div');
                    ingredientSlot.className = 'inventory-slot cursor-pointer hover:bg-green-100 transition-colors';
                    ingredientSlot.innerHTML = `${seedEmojis[ingredient]}<br><small>${gameState.barn[ingredient]}</small>`;
                    ingredientSlot.title = `${ingredient} (${gameState.barn[ingredient]} disponÃ­vel)`;
                    ingredientSlot.addEventListener('click', () => selectIngredient(ingredient));
                    modalIngredients.appendChild(ingredientSlot);
                }
            });
            
            if (modalIngredients.children.length === 0) {
                modalIngredients.innerHTML = '<div class="col-span-3 text-center text-gray-500">Nenhum ingrediente disponÃ­vel</div>';
            }
            
            document.getElementById('ingredient-modal').classList.remove('hidden');
        }

        function selectIngredient(ingredient) {
            const { slotType, slotNum } = currentSlotInfo;
            
            if (slotType === 'stove') {
                if (!gameState.stove.ingredients[slotNum]) {
                    gameState.barn[ingredient]--;
                    gameState.stove.ingredients[slotNum] = ingredient;
                    updateDisplay();
                    updateStoveDisplay();
                    showMessage(`${ingredient} adicionado ao fogÃ£o! ğŸ³`);
                }
            } else if (slotType === 'oven') {
                if (!gameState.oven.ingredients[slotNum]) {
                    gameState.barn[ingredient]--;
                    gameState.oven.ingredients[slotNum] = ingredient;
                    updateDisplay();
                    updateOvenDisplay();
                    showMessage(`${ingredient} adicionado ao forno! ğŸ”¥`);
                }
            } else if (slotType === 'mixer') {
                if (!gameState.mixer.ingredients[slotNum]) {
                    gameState.barn[ingredient]--;
                    gameState.mixer.ingredients[slotNum] = ingredient;
                    updateDisplay();
                    updateMixerDisplay();
                    showMessage(`${ingredient} adicionado ao misturador! ğŸ¥„`);
                }
            }
            
            closeIngredientModal();
        }

        function closeIngredientModal() {
            document.getElementById('ingredient-modal').classList.add('hidden');
            currentSlotInfo = null;
        }

        // Event listeners do modal
        document.getElementById('close-modal').addEventListener('click', closeIngredientModal);
        document.getElementById('ingredient-modal').addEventListener('click', (e) => {
            if (e.target.id === 'ingredient-modal') {
                closeIngredientModal();
            }
        });

        // Inicializar galinheiro
        function initChickenCoop() {
            for (let i = 0; i < 4; i++) {
                // Slot da galinha
                document.getElementById(`chicken-${i}`).addEventListener('click', () => placeChicken(i));
                
                // Slot da raÃ§Ã£o
                document.getElementById(`chicken-feed-slot-${i}`).addEventListener('click', () => addFeedToChicken(i));
                
                // Slots de coleta (ovos)
                const eggSlots = document.querySelectorAll(`#egg-slots-${i} .inventory-slot`);
                eggSlots.forEach((slot, slotIndex) => {
                    slot.addEventListener('click', () => collectEggFromChicken(i, slotIndex));
                });
                
                // BotÃ£o de sacrificar
                document.getElementById(`sacrifice-btn-${i}`).addEventListener('click', () => sacrificeChicken(i));
            }
            
            // BotÃ£o alimentar todas
            document.getElementById('feed-all-chickens').addEventListener('click', () => feedAllChickens());
            
            // Iniciar sistema de descanso das galinhas
            setInterval(updateChickenResting, 1000);
        }

        // Colocar galinha no slot
        function placeChicken(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            if (chicken.hasChicken) {
                showMessage('JÃ¡ tem uma galinha neste slot! ğŸ”');
                return;
            }

            if (!gameState.barn.galinha || gameState.barn.galinha <= 0) {
                showMessage('VocÃª precisa comprar uma galinha no mercadinho! ğŸ”');
                return;
            }

            // Colocar galinha
            gameState.barn.galinha--;
            chicken.hasChicken = true;
            
            document.getElementById(`chicken-${index}`).textContent = 'ğŸ”';
            document.getElementById(`chicken-status-${index}`).textContent = 'Esperando raÃ§Ã£o';
            document.getElementById(`sacrifice-btn-${index}`).classList.remove('hidden');
            
            updateDisplay();
            updateFeedAllButton();
            showMessage('Galinha colocada no galinheiro! ğŸ”');
        }

        // Adicionar raÃ§Ã£o Ã  galinha
        function addFeedToChicken(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            if (!chicken.hasChicken) {
                showMessage('Coloque uma galinha primeiro! ğŸ”');
                return;
            }

            if (chicken.isChick) {
                showMessage('Pintinhos nÃ£o precisam de raÃ§Ã£o! ğŸ£');
                return;
            }

            if (chicken.hasFeed) {
                showMessage('Esta galinha jÃ¡ tem raÃ§Ã£o! ğŸŒ¾');
                return;
            }

            if (chicken.eating || chicken.laying || chicken.resting) {
                showMessage('Esta galinha estÃ¡ ocupada! â°');
                return;
            }

            if (!gameState.barn.racao_galinhas || gameState.barn.racao_galinhas <= 0) {
                showMessage('VocÃª precisa de raÃ§Ã£o para galinhas! ğŸŒ¾');
                return;
            }

            // Adicionar raÃ§Ã£o
            gameState.barn.racao_galinhas--;
            chicken.hasFeed = true;
            
            document.getElementById(`chicken-feed-slot-${index}`).innerHTML = 'ğŸŒ¾';
            document.getElementById(`chicken-status-${index}`).textContent = 'Pronta para comer';
            
            updateDisplay();
            updateFeedAllButton();
            showMessage('RaÃ§Ã£o adicionada! A galinha vai comer automaticamente. ğŸŒ¾');
            
            // Iniciar processo de comer automaticamente
            setTimeout(() => startChickenEating(index), 1000);
        }

        // Iniciar processo de comer (galinha)
        function startChickenEating(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            if (!chicken.hasChicken || !chicken.hasFeed || chicken.eating || chicken.isChick) return;

            chicken.eating = true;
            chicken.hasFeed = false;
            
            document.getElementById(`chicken-feed-slot-${index}`).innerHTML = '<span class="text-gray-400 text-sm">ğŸŒ¾</span>';
            document.getElementById(`chicken-status-${index}`).textContent = 'Comendo... 10s';
            
            let timeLeft = 10;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById(`chicken-status-${index}`).textContent = `Comendo... ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    startChickenLaying(index);
                }
            }, 1000);
        }

        // Iniciar processo de botar ovos
        function startChickenLaying(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            chicken.eating = false;
            chicken.laying = true;
            
            document.getElementById(`chicken-status-${index}`).textContent = 'Botando ovos... 5s';
            
            let timeLeft = 5;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById(`chicken-status-${index}`).textContent = `Botando ovos... ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishChickenLaying(index);
                }
            }, 1000);
        }

        // Finalizar processo de botar ovos
        function finishChickenLaying(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            chicken.laying = false;
            chicken.resting = true;
            chicken.restStartTime = Date.now();
            
            // Mostrar ovos nos slots
            const eggSlots = document.querySelectorAll(`#egg-slots-${index} .inventory-slot`);
            eggSlots[0].innerHTML = 'ğŸ¥š';
            eggSlots[1].innerHTML = 'ğŸ¥š';
            eggSlots[2].innerHTML = 'ğŸ¥š';
            
            document.getElementById(`chicken-status-${index}`).textContent = 'Ovos prontos! Colete-os';
            
            showMessage('Galinha botou 3 ovos! Colete-os! ğŸ¥š');
            
            // Verificar chance de pintinho (10% se tiver 2-3 galinhas)
            checkChickChance();
        }

        // Verificar chance de pintinho
        function checkChickChance() {
            const adultChickens = gameState.chickenCoop.chickens.filter(c => c.hasChicken && !c.isChick).length;
            
            if (adultChickens >= 2 && adultChickens <= 3) {
                if (Math.random() < 0.1) { // 10% de chance
                    // Encontrar slot vazio para o pintinho
                    const emptySlot = gameState.chickenCoop.chickens.findIndex(c => !c.hasChicken);
                    if (emptySlot !== -1) {
                        spawnChick(emptySlot);
                    }
                }
            }
        }

        // Criar pintinho
        function spawnChick(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            chicken.hasChicken = true;
            chicken.isChick = true;
            chicken.chickStartTime = Date.now();
            
            document.getElementById(`chicken-${index}`).textContent = 'ğŸ£';
            document.getElementById(`chicken-status-${index}`).textContent = 'Pintinho crescendo... 30:00';
            
            showMessage('Um pintinho apareceu! Ele crescerÃ¡ em 30 minutos! ğŸ£');
        }

        // Coletar ovo da galinha
        function collectEggFromChicken(chickenIndex, slotIndex) {
            if (!useEnergy()) return;

            const eggSlots = document.querySelectorAll(`#egg-slots-${chickenIndex} .inventory-slot`);
            const slot = eggSlots[slotIndex];
            
            if (!slot.innerHTML || slot.innerHTML.includes('text-gray-400')) {
                showMessage('Nada para coletar aqui! ğŸ¥š');
                return;
            }

            // Adicionar ovo ao celeiro
            gameState.barn.ovo = (gameState.barn.ovo || 0) + 1;
            
            // Limpar slot
            slot.innerHTML = '';
            
            updateDisplay();
            showMessage('Ovo coletado! ğŸ¥š');
            
            // Verificar se todos os ovos foram coletados
            const allEmpty = Array.from(eggSlots).every(s => !s.innerHTML || s.innerHTML.includes('text-gray-400'));
            if (allEmpty) {
                document.getElementById(`chicken-status-${chickenIndex}`).textContent = 'Descansando... 5:00';
            }
        }

        // Sacrificar galinha
        function sacrificeChicken(index) {
            const chicken = gameState.chickenCoop.chickens[index];
            
            if (!chicken.hasChicken) {
                showMessage('NÃ£o hÃ¡ galinha neste slot! ğŸ”');
                return;
            }

            if (chicken.isChick) {
                showMessage('NÃ£o Ã© possÃ­vel sacrificar pintinhos! ğŸ£');
                return;
            }

            if (confirm('Tem certeza que deseja sacrificar esta galinha?')) {
                // Adicionar frango cru ao celeiro
                gameState.barn.frango_cru = (gameState.barn.frango_cru || 0) + 1;
                
                // Resetar slot
                chicken.hasChicken = false;
                chicken.hasFeed = false;
                chicken.eating = false;
                chicken.laying = false;
                chicken.resting = false;
                chicken.restStartTime = null;
                chicken.isChick = false;
                chicken.chickStartTime = null;
                
                // Limpar visual
                document.getElementById(`chicken-${index}`).textContent = 'ğŸŸ«';
                document.getElementById(`chicken-status-${index}`).textContent = 'Slot vazio';
                document.getElementById(`chicken-feed-slot-${index}`).innerHTML = '<span class="text-gray-400 text-sm">ğŸŒ¾</span>';
                document.getElementById(`sacrifice-btn-${index}`).classList.add('hidden');
                
                // Limpar ovos
                const eggSlots = document.querySelectorAll(`#egg-slots-${index} .inventory-slot`);
                eggSlots.forEach(slot => slot.innerHTML = '');
                
                updateDisplay();
                updateFeedAllButton();
                showMessage('Galinha sacrificada! Frango cru adicionado ao celeiro. ğŸ—');
            }
        }

        // Alimentar todas as galinhas
        function feedAllChickens() {
            let fedCount = 0;
            let neededFeed = 0;
            
            // Contar quantas galinhas precisam de raÃ§Ã£o
            gameState.chickenCoop.chickens.forEach(chicken => {
                if (chicken.hasChicken && !chicken.isChick && !chicken.hasFeed && 
                    !chicken.eating && !chicken.laying && !chicken.resting) {
                    neededFeed++;
                }
            });
            
            if (neededFeed === 0) {
                showMessage('Nenhuma galinha precisa de raÃ§Ã£o! ğŸŒ¾');
                return;
            }
            
            if (!gameState.barn.racao_galinhas || gameState.barn.racao_galinhas < neededFeed) {
                showMessage(`VocÃª precisa de ${neededFeed} raÃ§Ãµes para galinhas! ğŸŒ¾`);
                return;
            }
            
            // Alimentar todas
            gameState.chickenCoop.chickens.forEach((chicken, index) => {
                if (chicken.hasChicken && !chicken.isChick && !chicken.hasFeed && 
                    !chicken.eating && !chicken.laying && !chicken.resting) {
                    
                    gameState.barn.racao_galinhas--;
                    chicken.hasFeed = true;
                    fedCount++;
                    
                    document.getElementById(`chicken-feed-slot-${index}`).innerHTML = 'ğŸŒ¾';
                    document.getElementById(`chicken-status-${index}`).textContent = 'Pronta para comer';
                    
                    // Iniciar processo de comer automaticamente
                    setTimeout(() => startChickenEating(index), 1000 + (index * 500));
                }
            });
            
            updateDisplay();
            updateFeedAllButton();
            showMessage(`${fedCount} galinha${fedCount > 1 ? 's' : ''} alimentada${fedCount > 1 ? 's' : ''}! ğŸŒ¾`);
        }

        // Atualizar botÃ£o "Alimentar Todas"
        function updateFeedAllButton() {
            const needsFeed = gameState.chickenCoop.chickens.some(chicken => 
                chicken.hasChicken && !chicken.isChick && !chicken.hasFeed && 
                !chicken.eating && !chicken.laying && !chicken.resting
            );
            
            document.getElementById('feed-all-chickens').disabled = !needsFeed;
        }

        // Atualizar descanso das galinhas
        function updateChickenResting() {
            gameState.chickenCoop.chickens.forEach((chicken, index) => {
                // Atualizar pintinhos crescendo
                if (chicken.isChick && chicken.chickStartTime) {
                    const elapsed = Date.now() - chicken.chickStartTime;
                    const remaining = (30 * 60 * 1000) - elapsed; // 30 minutos
                    
                    if (remaining <= 0) {
                        // Pintinho virou galinha adulta
                        chicken.isChick = false;
                        chicken.chickStartTime = null;
                        document.getElementById(`chicken-${index}`).textContent = 'ğŸ”';
                        document.getElementById(`chicken-status-${index}`).textContent = 'Esperando raÃ§Ã£o';
                        document.getElementById(`sacrifice-btn-${index}`).classList.remove('hidden');
                        showMessage(`Pintinho ${index + 1} cresceu e virou galinha adulta! ğŸ”`);
                        updateFeedAllButton();
                    } else {
                        // Mostrar tempo restante
                        const minutes = Math.floor(remaining / 60000);
                        const seconds = Math.floor((remaining % 60000) / 1000);
                        document.getElementById(`chicken-status-${index}`).textContent = 
                            `Pintinho crescendo... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
                
                // Atualizar galinhas descansando
                if (chicken.resting && chicken.restStartTime && !chicken.isChick) {
                    const elapsed = Date.now() - chicken.restStartTime;
                    const remaining = (5 * 60 * 1000) - elapsed; // 5 minutos
                    
                    if (remaining <= 0) {
                        // Terminar descanso
                        chicken.resting = false;
                        chicken.restStartTime = null;
                        document.getElementById(`chicken-status-${index}`).textContent = 'Esperando raÃ§Ã£o';
                        showMessage(`Galinha ${index + 1} terminou de descansar! ğŸ”`);
                        updateFeedAllButton();
                    } else {
                        // Mostrar tempo restante
                        const minutes = Math.floor(remaining / 60000);
                        const seconds = Math.floor((remaining % 60000) / 1000);
                        document.getElementById(`chicken-status-${index}`).textContent = 
                            `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Inicializar jogo
        initGame();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96fc6ffe460b00a9',t:'MTc1NTMwMDE4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
