<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Farm - Jogo de Fazendinha</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100vh;
            overflow-x: auto;
            transition: background 1s ease;
        }
        
        body.raining {
            background: linear-gradient(135deg, #696969 0%, #808080 100%);
        }
        
        .rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }
        
        .raindrop {
            position: absolute;
            background: linear-gradient(to bottom, rgba(174, 194, 224, 0.6), rgba(174, 194, 224, 0.3));
            width: 2px;
            height: 15px;
            border-radius: 0 0 2px 2px;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            from {
                transform: translateY(-100vh);
            }
            to {
                transform: translateY(100vh);
            }
        }
        
        .header {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            padding: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><circle cx="10" cy="10" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="30" cy="5" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="15" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="70" cy="8" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="90" cy="12" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
        }
        
        .game-title {
            font-family: 'Fredoka One', cursive;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .resources {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }
        
        .season-display {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            margin: 0 auto 10px auto;
            width: fit-content;
        }
        
        .season-icon {
            font-size: 1.2rem;
        }
        
        .season-info {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .resource {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            min-width: 60px;
            min-height: 60px;
            justify-content: center;
        }
        
        .resource:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .avatar-panel {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }
        
        .avatar-panel:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .avatar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            min-width: 80px;
        }
        
        .avatar-icon {
            font-size: 1.5rem;
            margin-bottom: 2px;
        }
        
        .avatar-name {
            color: white;
            font-weight: 700;
            font-size: 1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .energy-bar {
            width: 70px;
            height: 12px;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.4);
        }
        
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #32CD32 0%, #228B22 100%);
            border-radius: 8px;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .energy-fill.low {
            background: linear-gradient(90deg, #FF6347 0%, #DC143C 100%);
        }
        
        .energy-fill.sick {
            background: linear-gradient(90deg, #9370DB 0%, #8A2BE2 100%);
        }
        
        .energy-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 0.6rem;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        .avatar-status {
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .avatar-status.sick {
            color: #FF6B6B;
        }
        
        .avatar-status.resting {
            color: #87CEEB;
        }
        
        .avatar-buttons {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .avatar-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 0.6rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
        }
        
        .avatar-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(76,175,80,0.4);
        }
        
        .avatar-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .avatar-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        .eat-menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(139,69,19,0.95);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(160,82,45,0.6);
            z-index: 1000;
            display: none;
            min-width: 300px;
        }
        
        .eat-menu-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .food-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .food-item {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .food-item:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.02);
        }
        
        .food-item.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .food-item.unavailable:hover {
            background: rgba(255,255,255,0.2);
            transform: none;
        }
        
        .food-icon {
            font-size: 1.5rem;
        }
        
        .food-info {
            flex: 1;
            text-align: left;
        }
        
        .food-name {
            font-size: 1rem;
            margin-bottom: 3px;
        }
        
        .food-effect {
            font-size: 0.8rem;
            color: #90EE90;
        }
        
        .close-menu-btn {
            background: linear-gradient(135deg, #DC143C 0%, #B22222 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            width: 100%;
        }
        
        .close-menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220,20,60,0.4);
        }
        
        .resource-icon {
            font-size: 1.2rem;
        }
        
        .resource-value {
            font-weight: 700;
            font-size: 0.9rem;
        }
        
        .farm-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 25px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .plot {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            border: 3px solid #654321;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin: 0 auto;
        }
        
        .plot::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 3px,
                rgba(0,0,0,0.1) 3px,
                rgba(0,0,0,0.1) 6px
            );
        }
        
        .plot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-color: #FFD700;
        }
        
        .plot.planted {
            background: linear-gradient(135deg, #228B22 0%, #32CD32 100%);
            border-color: #006400;
        }
        
        .plot.ready {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-color: #FF8C00;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(255,215,0,0.5); }
            to { box-shadow: 0 0 20px rgba(255,215,0,0.8); }
        }
        
        .plot-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        
        .plant-icon {
            font-size: 2rem;
            margin-bottom: 3px;
        }
        
        .plot-text {
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .game-container {
            display: flex;
            gap: 30px;
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .left-panel {
            width: 200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .right-panel {
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .seeds-panel {
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .inventory-panel {
            background: rgba(139,69,19,0.8);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(160,82,45,0.5);
        }
        
        .market-panel {
            background: rgba(34,139,34,0.8);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(50,205,50,0.5);
        }
        
        .center-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .shop-panel {
            background: rgba(255,140,0,0.8);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,165,0,0.5);
        }
        
        .seeds-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .seeds-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .seed-item {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 6px 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-weight: 600;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .seed-item:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,0.3);
        }
        
        .seed-item.selected {
            border-color: #FFD700;
            background: rgba(255,215,0,0.3);
            box-shadow: 0 0 15px rgba(255,215,0,0.5);
        }
        
        .seed-icon {
            font-size: 1.2rem;
            margin-bottom: 2px;
            display: block;
        }
        
        .seed-name {
            font-size: 0.55rem;
            margin-bottom: 1px;
        }
        
        .seed-price {
            font-size: 0.5rem;
            opacity: 0.8;
        }
        
        .inventory-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .inventory-item {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            color: white;
            font-weight: 600;
        }
        
        .inventory-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            display: block;
        }
        
        .inventory-count {
            font-size: 0.8rem;
        }
        
        .shop-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .shop-slot {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            color: white;
            font-weight: 600;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .shop-slot:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .shop-slot.empty {
            opacity: 0.5;
            cursor: default;
        }
        
        .shop-slot.empty:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .shop-icon {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }
        
        .shop-count {
            font-size: 0.7rem;
        }
        
        .sell-all-btn {
            background: linear-gradient(135deg, #32CD32 0%, #228B22 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-family: 'Nunito', sans-serif;
        }
        
        .sell-all-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(50,205,50,0.4);
        }
        
        .market-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .market-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .market-item {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .market-item:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }
        
        .market-icon {
            font-size: 1rem;
            margin-bottom: 2px;
            display: block;
        }
        
        .market-price {
            font-size: 0.6rem;
            color: #FFD700;
        }
        
        .main-area {
            flex: 1;
        }
        
        .well-panel {
            background: rgba(30,144,255,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(70,130,180,0.5);
            margin-top: 20px;
        }
        
        .well-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(30,144,255,0.3);
            border-radius: 15px;
            padding: 10px;
            border: 2px solid rgba(70,130,180,0.4);
        }
        
        .well-visual {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #1E90FF 0%, #4169E1 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 3px solid #87CEEB;
        }
        
        .well-visual:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(30,144,255,0.4);
        }
        
        .well-visual::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.3) 0%, transparent 70%);
        }
        
        .well-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .well-content {
            text-align: center;
            color: white;
        }
        
        .well-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .well-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .well-btn {
            background: linear-gradient(135deg, #1E90FF 0%, #4169E1 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
        }
        
        .well-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30,144,255,0.4);
        }
        
        .flower-field-panel {
            background: rgba(255,192,203,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,182,193,0.5);
            margin-top: 20px;
        }
        
        .flower-field-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .flower-field-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            background: rgba(255,192,203,0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(255,182,193,0.4);
        }
        
        .flower-slot {
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(255,182,193,0.6);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }
        
        .flower-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255,192,203,0.4);
        }
        
        .flower-slot.growing {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .flower-slot.growing:hover {
            transform: none;
            box-shadow: none;
        }
        
        .flower-icon {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }
        
        .flower-name {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .flower-count {
            color: white;
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .flower-timer {
            color: #FFD700;
            font-size: 0.7rem;
            margin-top: 5px;
        }

        .forest-panel {
            background: rgba(34,139,34,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(50,205,50,0.5);
            margin-top: 20px;
        }
        
        .forest-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .forest-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            background: rgba(34,139,34,0.3);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(50,205,50,0.4);
        }
        
        .tree-slot {
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(50,205,50,0.6);
            border-radius: 15px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 70px;
        }
        
        .tree-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(34,139,34,0.4);
        }
        
        .tree-slot.no-axe {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .tree-slot.no-axe:hover {
            transform: none;
            box-shadow: none;
        }
        
        .tree-slot.growing {
            opacity: 0.7;
        }
        
        .tree-icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: block;
        }
        
        .tree-name {
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        
        .tree-count {
            color: white;
            font-size: 0.7rem;
            opacity: 0.9;
        }
        
        .tree-timer {
            color: #FFD700;
            font-size: 0.6rem;
            margin-top: 5px;
        }

        .grass-field-panel {
            background: rgba(34,139,34,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(50,205,50,0.5);
            margin-top: 20px;
        }
        
        .grass-field-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .grass-field-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            background: rgba(34,139,34,0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(50,205,50,0.4);
        }
        
        .grass-slot {
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(50,205,50,0.6);
            border-radius: 15px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .grass-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(34,139,34,0.4);
        }
        
        .grass-slot.empty {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .grass-slot.empty:hover {
            transform: none;
            box-shadow: none;
        }
        
        .grass-slot.growing {
            opacity: 0.7;
        }
        
        .grass-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            display: block;
        }
        
        .grass-timer {
            color: #FFD700;
            font-size: 0.6rem;
            margin-top: 3px;
        }

        .lumber-mill-panel {
            background: rgba(139,69,19,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(160,82,45,0.5);
            margin-top: 20px;
        }
        
        .lumber-mill-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .lumber-mill-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            background: rgba(139,69,19,0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(160,82,45,0.4);
        }
        
        .lumber-slot {
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(160,82,45,0.6);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lumber-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(139,69,19,0.4);
        }
        
        .lumber-slot.empty {
            opacity: 0.6;
        }
        
        .lumber-slot.processing {
            cursor: not-allowed;
            animation: processing 1s ease-in-out infinite alternate;
        }
        
        @keyframes processing {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .lumber-btn {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
        }
        
        .lumber-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139,69,19,0.4);
        }
        
        .lumber-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .lumber-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .axe-status {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            color: white;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .stove-panel {
            background: rgba(255,69,0,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,99,71,0.5);
            margin-top: 20px;
        }
        
        .stove-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .stove-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: rgba(255,69,0,0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(255,99,71,0.4);
        }
        
        .stove-slots {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stove-slot {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(255,99,71,0.6);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .stove-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255,69,0,0.4);
        }
        
        .stove-slot.fuel {
            border-color: #FFD700;
        }
        
        .stove-slot.empty {
            opacity: 0.6;
        }
        
        .stove-slot.cooking {
            cursor: not-allowed;
            animation: cooking 1s ease-in-out infinite alternate;
        }
        
        @keyframes cooking {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .stove-recipes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .recipe-card {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .recipe-card:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.02);
        }
        
        .recipe-card.selected {
            border-color: #FFD700;
            background: rgba(255,215,0,0.3);
        }
        
        .recipe-name {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .recipe-ingredients {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .recipe-effect {
            font-size: 0.6rem;
            color: #90EE90;
        }
        
        .cook-btn {
            background: linear-gradient(135deg, #FF4500 0%, #FF6347 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            width: 100%;
        }
        
        .cook-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,69,0,0.4);
        }
        
        .cook-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .cook-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .cow-pasture-panel {
            background: rgba(34,139,34,0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(50,205,50,0.5);
            margin-top: 20px;
        }
        
        .cow-pasture-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .cow-pasture-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            background: rgba(34,139,34,0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(50,205,50,0.4);
        }
        
        .cow-slot {
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(50,205,50,0.6);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .cow-slot:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(34,139,34,0.4);
        }
        
        .cow-slot.empty {
            opacity: 0.6;
        }
        
        .cow-slot.eating {
            border-color: #FFD700;
            animation: eating 1s ease-in-out infinite alternate;
        }
        
        .cow-slot.producing {
            border-color: #87CEEB;
            animation: producing 1s ease-in-out infinite alternate;
        }
        
        .cow-slot.resting {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .cow-slot.ready-to-collect {
            border-color: #32CD32;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes eating {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        @keyframes producing {
            from { transform: scale(1); }
            to { transform: scale(1.03); }
        }
        
        .cow-icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: block;
        }
        
        .cow-name {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .cow-status {
            color: white;
            font-size: 0.7rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .cow-feed-slot {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.3);
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 5px;
        }
        
        .cow-feed-slot:hover {
            background: rgba(255,255,255,0.4);
        }
        
        .cow-feed-slot.has-food {
            border-color: #FFD700;
            background: rgba(255,215,0,0.3);
        }
        
        .cow-timer {
            color: #FFD700;
            font-size: 0.6rem;
            margin-top: 5px;
        }
        
        .cow-products {
            position: absolute;
            top: 5px;
            right: 5px;
            display: flex;
            gap: 3px;
        }
        
        .cow-product {
            background: rgba(255,255,255,0.8);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cow-product:hover {
            transform: scale(1.2);
        }

        .composter-panel {
            background: rgba(139,69,19,0.8);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(160,82,45,0.5);
            margin-bottom: 20px;
        }
        
        .composter-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.3rem;
            color: white;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .composter-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: rgba(139,69,19,0.3);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(160,82,45,0.4);
        }
        
        .composter-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .composter-slot {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(160,82,45,0.6);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .composter-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(139,69,19,0.4);
        }
        
        .composter-slot.empty {
            opacity: 0.6;
        }
        
        .composter-slot.composting {
            cursor: not-allowed;
            animation: composting 1s ease-in-out infinite alternate;
        }
        
        @keyframes composting {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .composter-btn {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            width: 100%;
        }
        
        .composter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139,69,19,0.4);
        }
        
        .composter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .composter-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .cheese-maker-panel {
            background: rgba(255,215,0,0.8);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,223,0,0.5);
            margin-bottom: 20px;
        }
        
        .cheese-maker-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.3rem;
            color: white;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .cheese-maker-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: rgba(255,215,0,0.3);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255,223,0,0.4);
        }
        
        .cheese-maker-slot {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(255,223,0,0.6);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            margin: 0 auto;
        }
        
        .cheese-maker-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255,215,0,0.4);
        }
        
        .cheese-maker-slot.empty {
            opacity: 0.6;
        }
        
        .cheese-maker-slot.curing {
            cursor: not-allowed;
            animation: curing 1s ease-in-out infinite alternate;
        }
        
        @keyframes curing {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .cheese-maker-btn {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            width: 100%;
        }
        
        .cheese-maker-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,215,0,0.4);
        }
        
        .cheese-maker-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .cheese-maker-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .juice-maker-panel {
            background: rgba(138,43,226,0.8);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(147,112,219,0.5);
            margin-bottom: 20px;
        }
        
        .juice-maker-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.3rem;
            color: white;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .juice-maker-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: rgba(138,43,226,0.3);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(147,112,219,0.4);
        }
        
        .juice-maker-slot {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(147,112,219,0.6);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            margin: 0 auto;
        }
        
        .juice-maker-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(138,43,226,0.4);
        }
        
        .juice-maker-slot.empty {
            opacity: 0.6;
        }
        
        .juice-maker-slot.producing {
            cursor: not-allowed;
            animation: producing 1s ease-in-out infinite alternate;
        }
        
        @keyframes producing {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .juice-maker-btn {
            background: linear-gradient(135deg, #8A2BE2 0%, #9370DB 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
            width: 100%;
        }
        
        .juice-maker-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138,43,226,0.4);
        }
        
        .juice-maker-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .juice-maker-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .message.show {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .left-panel, .right-panel {
                width: 100%;
            }
            
            .seeds-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .inventory-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .market-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .shop-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .farm-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                padding: 20px;
            }
            
            .plot {
                width: 100px;
                height: 100px;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .resources {
                gap: 15px;
            }
            
            .resource {
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="game-title">🌾 Real Farm 🌾</h1>
        <div class="season-display" id="seasonDisplay">
            <span class="season-icon" id="seasonIcon">🌸</span>
            <div class="season-info">
                <div id="seasonName">Primavera</div>
                <div id="seasonTime" style="font-size: 0.7rem; opacity: 0.8;">59:59</div>
            </div>
        </div>
        <div class="resources">
            <div class="avatar-panel">
                <div class="avatar-container">
                    <div class="avatar-icon">👨‍🌾</div>
                    <div class="avatar-name">Você</div>
                    <div class="energy-bar">
                        <div class="energy-fill" id="energyFill"></div>
                        <div class="energy-text" id="energyText">200/200</div>
                    </div>
                    <div class="avatar-status" id="avatarStatus">Saudável</div>
                    <div class="avatar-buttons">
                        <button class="avatar-btn" id="restBtn" onclick="startResting()">😴 Descansar</button>
                        <button class="avatar-btn" id="eatBtn" onclick="showEatMenu()">🍽️ Comer</button>
                    </div>
                </div>
            </div>
            <div class="resource">
                <span class="resource-icon">🪙</span>
                <span class="resource-value" id="coins">200</span>
            </div>
            <div class="resource">
                <span class="resource-icon">💧</span>
                <span class="resource-value" id="water">10</span>
            </div>
            <div class="resource">
                <span class="resource-icon">🍂</span>
                <span class="resource-value" id="fertilizer">50</span>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="left-panel">
            <div class="seeds-panel">
                <h3 class="seeds-title">🌱 Sementes</h3>
                <div class="seeds-grid" id="seedsGrid">
                    <!-- As sementes serão geradas pelo JavaScript -->
                </div>
            </div>
            
            <div class="inventory-panel">
                <h3 class="inventory-title">🏚️ Celeiro</h3>
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- Os itens do inventário serão mostrados aqui -->
                </div>
            </div>
            
            <div class="market-panel">
                <h3 class="market-title">🏪 Mercadinho</h3>
                <div class="market-grid" id="marketGrid">
                    <!-- Os itens do mercado serão mostrados aqui -->
                </div>
            </div>
        </div>

        <div class="center-panel">
            <div class="main-area">
                <div class="farm-grid" id="farmGrid">
                    <!-- Os canteiros serão gerados pelo JavaScript -->
                </div>
                
                <div id="wellPanel" class="well-panel" style="display: none;">
                    <h3 class="well-title">💧 Poço de Água</h3>
                    <div class="well-container">
                        <div class="well-visual" onclick="collectWater()">
                            <div style="position: relative; z-index: 1; text-align: center; color: white;">
                                <div style="font-size: 2rem; margin-bottom: 3px;">🪣</div>
                                <div style="font-size: 0.7rem; font-weight: 600;">Coletar Água</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="flowerFieldPanel" class="flower-field-panel">
                    <h3 class="flower-field-title">🌸 Campo de Flores</h3>
                    <div class="flower-field-container" id="flowerFieldContainer">
                        <!-- Os slots de flores serão gerados pelo JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="shop-panel">
                <h3 class="shop-title">🛒 Quitanda</h3>
                <div class="shop-grid" id="shopGrid">
                    <!-- Os slots da quitanda serão gerados pelo JavaScript -->
                </div>
                <button class="sell-all-btn" onclick="sellAllItems()">💰 Vender Tudo</button>
            </div>
            

            
            <div id="forestPanel" class="forest-panel" style="display: none;">
                <h3 class="forest-title">🌲 Bosque</h3>
                <div id="axeStatus" class="axe-status" style="display: none;">
                    <span id="axeUsesText">🪓 Machado: 40/40 usos</span>
                </div>
                <div class="forest-container" id="forestContainer">
                    <!-- As árvores serão geradas pelo JavaScript -->
                </div>
            </div>
            
            <div id="grassFieldPanel" class="grass-field-panel" style="display: none;">
                <h3 class="grass-field-title">🌱 Campo de Grama</h3>
                <div class="grass-field-container" id="grassFieldContainer">
                    <!-- Os slots de grama serão gerados pelo JavaScript -->
                </div>
            </div>
            
            <div id="cowPasturePanel" class="cow-pasture-panel" style="display: none;">
                <h3 class="cow-pasture-title">🐄 Pasto das Vacas</h3>
                <div class="cow-pasture-container" id="cowPastureContainer">
                    <!-- Os slots das vacas serão gerados pelo JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="right-panel">
            <div id="composterPanel" class="composter-panel" style="display: none;">
                <h3 class="composter-title">🌱 Composteira</h3>
                <div class="composter-container">
                    <div class="composter-slots" id="composterSlots">
                        <!-- Os slots da composteira serão gerados pelo JavaScript -->
                    </div>
                    <button class="composter-btn" id="composterButton" onclick="startComposting()" disabled>🌱 Fazer</button>
                </div>
            </div>
            
            <div id="cheeseMakerPanel" class="cheese-maker-panel" style="display: none;">
                <h3 class="cheese-maker-title">🧀 Queijeira</h3>
                <div class="cheese-maker-container">
                    <div class="cheese-maker-slot empty" id="cheeseMakerSlot" onclick="addMilkToCheeseMaker()">
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                        <div style="color: white; font-size: 0.55rem; opacity: 0.5;">2x 🥛</div>
                    </div>
                    <button class="cheese-maker-btn" id="cheeseMakerButton" onclick="startCuring()" disabled>🧀 Curar</button>
                </div>
            </div>
            
            <div id="juiceMakerPanel" class="juice-maker-panel" style="display: none;">
                <h3 class="juice-maker-title">🧃 Máquina de Suco</h3>
                <div class="juice-maker-container">
                    <div class="juice-maker-slot empty" id="juiceMakerSlot" onclick="addGrapesToJuiceMaker()">
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                        <div style="color: white; font-size: 0.55rem; opacity: 0.5;">3x 🍇</div>
                    </div>
                    <button class="juice-maker-btn" id="juiceMakerButton" onclick="startJuiceProduction()" disabled>🧃 Produzir</button>
                </div>
            </div>
            
            <div id="lumberMillPanel" class="lumber-mill-panel" style="display: none;">
                <h3 class="lumber-mill-title">🪓 Cortar Lenha</h3>
                <div class="lumber-mill-container">
                    <div class="lumber-slot empty" id="lumberSlot" onclick="addTrunkToMill()">
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                        <div style="color: white; font-size: 0.55rem; opacity: 0.5;">Clique para adicionar tronco</div>
                    </div>
                    <button class="lumber-btn" id="cutButton" onclick="cutLumber()" disabled>🪓 Cortar</button>
                </div>
            </div>
            
            <div id="hayMakerPanel" class="lumber-mill-panel" style="display: none;">
                <h3 class="lumber-mill-title">🌾 Secador/Feno</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Secador -->
                    <div class="lumber-mill-container">
                        <h4 style="color: white; text-align: center; margin-bottom: 10px; font-size: 0.9rem;">☀️ Secador</h4>
                        <div class="lumber-slot empty" id="dryerSlot" onclick="addGrassToDryer()">
                            <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                            <div style="color: white; font-size: 0.55rem; opacity: 0.5;">8x Grama</div>
                        </div>
                        <button class="lumber-btn" id="dryButton" onclick="startDrying()" disabled>☀️ Secar</button>
                    </div>
                    
                    <!-- Fazer Feno -->
                    <div class="lumber-mill-container">
                        <h4 style="color: white; text-align: center; margin-bottom: 10px; font-size: 0.9rem;">🌾 Fazer Feno</h4>
                        <div class="lumber-slot empty" id="haySlot" onclick="addDriedGrassToHay()">
                            <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                            <div style="color: white; font-size: 0.55rem; opacity: 0.5;">4x Grama Seca</div>
                        </div>
                        <button class="lumber-btn" id="hayButton" onclick="startHayMaking()" disabled>🌾 Fazer</button>
                    </div>
                </div>
            </div>
            
            <div id="stovePanel" class="stove-panel" style="display: none;">
                <h3 class="stove-title">🔥 Fogão & Forno</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Fogão -->
                    <div class="stove-container">
                        <h4 style="color: white; text-align: center; margin-bottom: 10px; font-size: 1rem;">🔥 Fogão</h4>
                        <div class="stove-slots" id="stoveSlots" style="grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 10px;">
                            <!-- Os slots do fogão serão gerados pelo JavaScript -->
                        </div>
                        <div class="stove-recipes" id="stoveRecipes" style="grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 10px;">
                            <!-- As receitas serão geradas pelo JavaScript -->
                        </div>
                        <button class="cook-btn" id="cookButton" onclick="startCooking()" disabled>🍳 Cozinhar</button>
                    </div>
                    
                    <!-- Forno -->
                    <div class="stove-container">
                        <h4 style="color: white; text-align: center; margin-bottom: 10px; font-size: 1rem;">🔥 Forno</h4>
                        <div class="stove-slots" id="ovenSlots" style="grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 10px;">
                            <!-- Os slots do forno serão gerados pelo JavaScript -->
                        </div>
                        <div class="stove-recipes" id="ovenRecipes" style="grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 10px;">
                            <!-- As receitas serão geradas pelo JavaScript -->
                        </div>
                        <button class="cook-btn" id="bakeButton" onclick="startBaking()" disabled>🍞 Assar</button>
                    </div>
                </div>
            </div>
        </div>
        
        </div>
    </div>

    <div class="message" id="message"></div>
    
    <div class="eat-menu" id="eatMenu">
        <h3 class="eat-menu-title">🍽️ Escolha sua Comida</h3>
        <div class="food-grid" id="foodGrid">
            <!-- Os itens de comida serão gerados pelo JavaScript -->
        </div>
        <button class="close-menu-btn" onclick="closeEatMenu()">❌ Fechar</button>
    </div>

    <script>
        // Estado do jogo
        let gameState = {
            coins: 200,
            water: 10,
            fertilizer: 50,
            plots: [],
            selectedSeed: null,
            inventory: {},
            harvestCount: 0, // Contador para minhocas
            shop: {}, // Itens na quitanda
            market: {}, // Itens disponíveis no mercado
            isRaining: false, // Estado da chuva
            currentSeason: 0, // 0=Primavera, 1=Verão, 2=Outono, 3=Inverno
            seasonStartTime: Date.now(),
            seasonTimer: null,
            avatar: {
                energy: 200,
                maxEnergy: 200,
                isSick: false,
                isResting: false,
                restTimer: null,
                sickTimer: null,
                energyDrainTimer: null
            },
            flowerField: {
                slots: [],
                flowerCollectCount: 0 // Contador para ervas
            },
            forest: {
                trees: [],
                trunkCollectCount: 0, // Contador para galhos
                hasAxe: false,
                axeUses: 0
            },
            lumberMill: {
                slot: null, // Tronco sendo processado
                processing: false
            },
            stove: {
                slots: [null, null, null, null, null], // 5 slots: [fuel, ingredient1, ingredient2, ingredient3, ingredient4]
                selectedRecipe: null,
                cooking: false,
                cookingTimer: null
            },
            oven: {
                slots: [null, null, null, null, null], // 5 slots: [fuel, ingredient1, ingredient2, ingredient3, ingredient4]
                selectedRecipe: null,
                baking: false,
                bakingTimer: null
            },
            grassField: {
                slots: [],
                grassCollectCount: 0 // Contador para flores
            },
            hayMaker: {
                dryerSlot: null, // Grama sendo secada
                drying: false,
                dryingTimer: null,
                haySlot: null, // Grama seca sendo processada
                making: false,
                makingTimer: null
            },
            cowPasture: {
                slots: [], // 4 slots para vacas
                hasPasture: false
            },
            composter: {
                slots: [null, null, null], // 3 slots: [lírio, galho, esterco]
                composting: false,
                compostingTimer: null,
                hasComposter: false
            },
            cheeseMaker: {
                slot: null, // Slot para 2 leites
                curing: false,
                curingTimer: null,
                hasCheeseMaker: false
            },
            juiceMaker: {
                slot: null, // Slot para 3 uvas
                producing: false,
                producingTimer: null,
                hasJuiceMaker: false
            }
        };

        // Definições das estações
        const seasons = [
            { name: 'Primavera', icon: '🌸', bonus: 'Plantações valem 10% a mais' },
            { name: 'Verão', icon: '☀️', bonus: 'Cada canteiro dá 2 frutos' },
            { name: 'Outono', icon: '🍂', bonus: 'Produtos animais valem 15% a mais' },
            { name: 'Inverno', icon: '❄️', bonus: 'Produtos fabricados valem 15% a mais' }
        ];

        // Tipos de flores
        const flowerTypes = [
            { icon: '🌹', name: 'Rosa', growTime: 300000 }, // 5 minutos
            { icon: '🌻', name: 'Girassol', growTime: 300000 }, // 5 minutos
            { icon: '🌼', name: 'Margarida', growTime: 300000 } // 5 minutos
        ];

        // Tipos de árvores
        const treeTypes = [
            { icon: '🌳', name: 'Árvore Comum', type: 'common', product: 'Tronco', productIcon: '🪵' },
            { icon: '🍎', name: 'Macieira', type: 'fruit', product: 'Maçã', productIcon: '🍎', maxFruits: 4, growTime: 300000 },
            { icon: '🍊', name: 'Laranjeira', type: 'fruit', product: 'Laranja', productIcon: '🍊', maxFruits: 4, growTime: 300000 },
            { icon: '🍌', name: 'Bananeira', type: 'fruit', product: 'Banana', productIcon: '🍌', maxFruits: 4, growTime: 300000 }
        ];

        // Receitas do fogão
        const recipes = [
            {
                name: 'Chá',
                icon: '🍵',
                ingredients: [
                    { name: 'Água', icon: '💧', quantity: 1 },
                    { name: 'Erva', icon: '🍃', quantity: 2 }
                ],
                cookTime: 10000, // 10 segundos
                effect: 'Cura doença'
            },
            {
                name: 'Salada',
                icon: '🥗',
                ingredients: [
                    { name: 'Alface', icon: '🥬', quantity: 1 },
                    { name: 'Tomate', icon: '🍅', quantity: 1 },
                    { name: 'Cenoura', icon: '🥕', quantity: 1 }
                ],
                cookTime: 15000, // 15 segundos
                effect: 'Aumenta 30% da energia'
            },
            {
                name: 'Ensopado',
                icon: '🍲',
                ingredients: [
                    { name: 'Brócolis', icon: '🥦', quantity: 1 },
                    { name: 'Abóbora', icon: '🎃', quantity: 1 },
                    { name: 'Ovo', icon: '🥚', quantity: 2 }
                ],
                cookTime: 60000, // 1 minuto
                effect: 'Aumenta 50% da energia'
            },
            {
                name: 'Bife',
                icon: '🥩',
                ingredients: [
                    { name: 'Carne', icon: '🥩', quantity: 1 }
                ],
                cookTime: 30000, // 30 segundos
                effect: 'Recupera 100% da energia'
            }
        ];

        // Receitas do forno
        const ovenRecipes = [
            {
                name: 'Peixe Assado',
                icon: '🐟',
                ingredients: [
                    { name: 'Peixe', icon: '🐟', quantity: 1 }
                ],
                cookTime: 30000, // 30 segundos
                effect: 'Aumenta 70% da energia'
            },
            {
                name: 'Frango Assado',
                icon: '🍗',
                ingredients: [
                    { name: 'Frango Cru', icon: '🐔', quantity: 1 }
                ],
                cookTime: 60000, // 1 minuto
                effect: 'Aumenta 80% da energia'
            },
            {
                name: 'Pão',
                icon: '🍞',
                ingredients: [
                    { name: 'Ovo', icon: '🥚', quantity: 1 },
                    { name: 'Leite', icon: '🥛', quantity: 1 },
                    { name: 'Farinha', icon: '🌾', quantity: 1 }
                ],
                cookTime: 60000, // 1 minuto
                effect: 'Aumenta 60% da energia'
            }
        ];

        // Tipos de sementes disponíveis
        const seeds = [
            { icon: '🎃', name: 'Abóbora', growTime: 30000, value: 35, cost: 10 },
            { icon: '🥬', name: 'Alface', growTime: 30000, value: 15, cost: 10 },
            { icon: '🥔', name: 'Batata', growTime: 30000, value: 20, cost: 10 },
            { icon: '🥦', name: 'Brócolis', growTime: 30000, value: 25, cost: 10 },
            { icon: '🔴', name: 'Café', growTime: 30000, value: 40, cost: 10 },
            { icon: '🥕', name: 'Cenoura', growTime: 30000, value: 18, cost: 10 },
            { icon: '🌽', name: 'Milho', growTime: 30000, value: 22, cost: 10 },
            { icon: '🍅', name: 'Tomate', growTime: 30000, value: 28, cost: 10 },
            { icon: '🌾', name: 'Trigo', growTime: 30000, value: 30, cost: 10 },
            { icon: '🍇', name: 'Uva', growTime: 30000, value: 45, cost: 10 }
        ];

        // Itens disponíveis no mercado
        const marketItems = [
            { icon: '🏗️', name: 'Poço de Água', price: 50, type: 'well' },
            { icon: '🌲', name: 'Bosque', price: 100, type: 'forest' },
            { icon: '🔥', name: 'Fogão & Forno', price: 75, type: 'stove' },
            { icon: '🌱', name: 'Campo de Grama', price: 60, type: 'grassfield' },
            { icon: '🐄', name: 'Pasto das Vacas', price: 120, type: 'cowpasture' },
            { icon: '🌱', name: 'Composteira', price: 90, type: 'composter' },
            { icon: '🧀', name: 'Queijeira', price: 70, type: 'cheesemaker' },
            { icon: '🧃', name: 'Máquina de Suco', price: 85, type: 'juicemaker' }
        ];

        // Inicializar o jogo
        function initGame() {
            createSeedsPanel();
            createFarmGrid();
            createShopGrid();
            initializeMarket();
            initializeFlowerField();
            initializeForest();
            initializeGrassField();
            initializeStove();
            initializeAvatar();
            updateDisplay();
            updateInventoryDisplay();
            updateShopDisplay();
            updateMarketDisplay();
            startRainCycle();
            startSeasonCycle();
        }
        
        // Inicializar avatar
        function initializeAvatar() {
            updateAvatarDisplay();
            startEnergyDrain();
            startSicknessCheck();
        }
        
        // Iniciar drenagem de energia
        function startEnergyDrain() {
            gameState.avatar.energyDrainTimer = setInterval(() => {
                if (!gameState.avatar.isResting && gameState.avatar.energy > 0) {
                    // Se estiver doente, energia cai mais rápido
                    const drainRate = gameState.avatar.isSick ? 2 : 1;
                    gameState.avatar.energy = Math.max(0, gameState.avatar.energy - drainRate);
                    
                    updateAvatarDisplay();
                    
                    // Verificar se morreu
                    if (gameState.avatar.energy <= 0) {
                        gameOver();
                    }
                }
            }, 60000); // A cada minuto
        }
        
        // Verificar doença aleatória
        function startSicknessCheck() {
            setInterval(() => {
                if (!gameState.avatar.isSick && Math.random() < 0.05) { // 5% de chance a cada verificação
                    gameState.avatar.isSick = true;
                    updateAvatarDisplay();
                    showMessage('Você ficou doente! Tome chá para se curar.');
                }
            }, 300000); // A cada 5 minutos
        }
        
        // Usar energia
        function useEnergy(amount = 1) {
            if (gameState.avatar.isResting) return false;
            
            gameState.avatar.energy = Math.max(0, gameState.avatar.energy - amount);
            updateAvatarDisplay();
            
            if (gameState.avatar.energy <= 0) {
                gameOver();
                return false;
            }
            
            return true;
        }
        
        // Iniciar descanso
        function startResting() {
            if (gameState.avatar.isResting) return;
            
            gameState.avatar.isResting = true;
            updateAvatarDisplay();
            
            // Descansar por 5 minutos
            gameState.avatar.restTimer = setTimeout(() => {
                gameState.avatar.energy = gameState.avatar.maxEnergy;
                gameState.avatar.isResting = false;
                updateAvatarDisplay();
                showMessage('Você descansou e recuperou toda sua energia!');
            }, 300000); // 5 minutos
        }
        
        // Mostrar menu de comida
        function showEatMenu() {
            if (gameState.avatar.isResting) return;
            
            const eatMenu = document.getElementById('eatMenu');
            const foodGrid = document.getElementById('foodGrid');
            
            // Lista de comidas e seus efeitos - agora busca do celeiro (inventário)
            const foods = [
                { name: 'Chá', icon: '🍵', effect: 'Cura doença', energyBonus: 0, curesSickness: true },
                { name: 'Salada', icon: '🥗', effect: 'Aumenta 30% da energia', energyBonus: 0.3 },
                { name: 'Ensopado', icon: '🍲', effect: 'Aumenta 40% da energia', energyBonus: 0.4 },
                { name: 'Bife', icon: '🥩', effect: 'Recupera 100% da energia', energyBonus: 1.0 },
                { name: 'Peixe Assado', icon: '🐟', effect: 'Aumenta 50% da energia', energyBonus: 0.5 }
            ];
            
            foodGrid.innerHTML = '';
            
            foods.forEach(food => {
                // Verificar se tem a comida no celeiro (inventário)
                const hasFood = gameState.inventory[food.name] && gameState.inventory[food.name].count > 0;
                
                // Chá só pode ser consumido quando doente
                const canEat = food.curesSickness ? gameState.avatar.isSick : true;
                
                const foodItem = document.createElement('div');
                foodItem.className = `food-item ${(!hasFood || !canEat) ? 'unavailable' : ''}`;
                foodItem.innerHTML = `
                    <span class="food-icon">${food.icon}</span>
                    <div class="food-info">
                        <div class="food-name">${food.name}</div>
                        <div class="food-effect">${food.effect}</div>
                    </div>
                    <div style="color: white; font-size: 0.8rem;">${hasFood ? gameState.inventory[food.name].count : 0}x</div>
                `;
                
                if (hasFood && canEat) {
                    foodItem.onclick = () => eatFood(food);
                }
                
                foodGrid.appendChild(foodItem);
            });
            
            // Adicionar mensagem se não houver comida no celeiro
            if (!foods.some(food => gameState.inventory[food.name] && gameState.inventory[food.name].count > 0)) {
                const noFoodMessage = document.createElement('div');
                noFoodMessage.style.cssText = 'grid-column: 1/-1; text-align: center; color: white; opacity: 0.7; padding: 20px;';
                noFoodMessage.textContent = 'Nenhuma comida disponível no celeiro. Cozinhe algo primeiro!';
                foodGrid.appendChild(noFoodMessage);
            }
            
            eatMenu.style.display = 'block';
        }
        
        // Comer comida
        function eatFood(food) {
            // Verificar se tem a comida no celeiro (inventário)
            if (!gameState.inventory[food.name] || gameState.inventory[food.name].count <= 0) {
                showMessage(`Você não tem ${food.name} no celeiro!`);
                return;
            }
            
            // Consumir comida do celeiro
            gameState.inventory[food.name].count -= 1;
            if (gameState.inventory[food.name].count === 0) {
                delete gameState.inventory[food.name];
            }
            
            // Aplicar efeitos
            if (food.curesSickness) {
                gameState.avatar.isSick = false;
                showMessage('Você se curou da doença bebendo chá do celeiro!');
            } else {
                const energyGain = Math.floor(gameState.avatar.maxEnergy * food.energyBonus);
                gameState.avatar.energy = Math.min(gameState.avatar.maxEnergy, gameState.avatar.energy + energyGain);
                showMessage(`Você comeu ${food.name} do celeiro e ganhou ${energyGain} pontos de energia!`);
            }
            
            updateAvatarDisplay();
            updateInventoryDisplay();
            closeEatMenu();
        }
        
        // Fechar menu de comida
        function closeEatMenu() {
            const eatMenu = document.getElementById('eatMenu');
            eatMenu.style.display = 'none';
            
            // Limpar event listeners para evitar travamento
            const foodItems = eatMenu.querySelectorAll('.food-item');
            foodItems.forEach(item => {
                item.onclick = null;
            });
        }
        
        // Atualizar display do avatar
        function updateAvatarDisplay() {
            const energyFill = document.getElementById('energyFill');
            const energyText = document.getElementById('energyText');
            const avatarStatus = document.getElementById('avatarStatus');
            const restBtn = document.getElementById('restBtn');
            const eatBtn = document.getElementById('eatBtn');
            
            // Atualizar barra de energia
            const energyPercent = (gameState.avatar.energy / gameState.avatar.maxEnergy) * 100;
            energyFill.style.width = `${energyPercent}%`;
            energyText.textContent = `${gameState.avatar.energy}/${gameState.avatar.maxEnergy}`;
            
            // Atualizar cor da barra
            energyFill.className = 'energy-fill';
            if (gameState.avatar.isSick) {
                energyFill.classList.add('sick');
            } else if (gameState.avatar.energy < 50) {
                energyFill.classList.add('low');
            }
            
            // Atualizar status
            avatarStatus.className = 'avatar-status';
            if (gameState.avatar.isResting) {
                avatarStatus.textContent = 'Descansando...';
                avatarStatus.classList.add('resting');
            } else if (gameState.avatar.isSick) {
                avatarStatus.textContent = 'Doente';
                avatarStatus.classList.add('sick');
            } else {
                avatarStatus.textContent = 'Saudável';
            }
            
            // Atualizar botões
            restBtn.disabled = gameState.avatar.isResting;
            eatBtn.disabled = gameState.avatar.isResting;
            
            if (gameState.avatar.isResting) {
                restBtn.textContent = '😴 Descansando...';
            } else {
                restBtn.textContent = '😴 Descansar';
            }
        }
        
        // Game Over
        function gameOver() {
            showMessage('Você morreu! O jogo será reiniciado...');
            
            setTimeout(() => {
                // Limpar timers
                if (gameState.avatar.restTimer) clearTimeout(gameState.avatar.restTimer);
                if (gameState.avatar.energyDrainTimer) clearInterval(gameState.avatar.energyDrainTimer);
                if (gameState.seasonTimer) clearInterval(gameState.seasonTimer);
                
                // Reiniciar jogo
                location.reload();
            }, 3000);
        }

        // Iniciar ciclo das estações
        function startSeasonCycle() {
            updateSeasonDisplay();
            
            // Atualizar timer a cada segundo
            gameState.seasonTimer = setInterval(() => {
                updateSeasonDisplay();
                
                // Verificar se passou 1 hora (3600000ms)
                const elapsed = Date.now() - gameState.seasonStartTime;
                if (elapsed >= 3600000) { // 1 hora
                    changeSeason();
                }
            }, 1000);
        }

        // Mudar estação
        function changeSeason() {
            gameState.currentSeason = (gameState.currentSeason + 1) % 4;
            gameState.seasonStartTime = Date.now();
            updateSeasonDisplay();
            
            // Campo de flores sempre visível (removido bug da primavera)
            document.getElementById('flowerFieldPanel').style.display = 'block';
        }

        // Atualizar display da estação
        function updateSeasonDisplay() {
            const season = seasons[gameState.currentSeason];
            const elapsed = Date.now() - gameState.seasonStartTime;
            const remaining = 3600000 - elapsed; // 1 hora em ms
            
            const minutes = Math.floor(remaining / 60000);
            const seconds = Math.floor((remaining % 60000) / 1000);
            
            document.getElementById('seasonIcon').textContent = season.icon;
            document.getElementById('seasonName').textContent = season.name;
            document.getElementById('seasonTime').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Iniciar ciclo de chuva
        function startRainCycle() {
            // Primeira chuva após 15 minutos
            setTimeout(() => {
                startRain();
                // Repetir a cada 15 minutos
                setInterval(startRain, 15 * 60 * 1000);
            }, 15 * 60 * 1000);
        }
        
        // Criar gotas de chuva
        function createRainDrops() {
            const rainContainer = document.createElement('div');
            rainContainer.className = 'rain';
            document.body.appendChild(rainContainer);
            
            // Criar 50 gotas de chuva
            for (let i = 0; i < 50; i++) {
                const drop = document.createElement('div');
                drop.className = 'raindrop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                drop.style.animationDelay = Math.random() * 2 + 's';
                rainContainer.appendChild(drop);
            }
            
            return rainContainer;
        }
        
        // Iniciar chuva
        function startRain() {
            if (gameState.isRaining) return;
            
            gameState.isRaining = true;
            document.body.classList.add('raining');
            
            // Criar gotas de chuva
            const rainContainer = createRainDrops();
            
            // Regar todas as plantas plantadas automaticamente
            gameState.plots.forEach((plot, index) => {
                if (plot.state === 'planted') {
                    plot.state = 'watered';
                    plot.watered = true;
                    
                    const plotElement = document.getElementById(`plot-${index}`);
                    plotElement.innerHTML = `
                        <div class="plot-content">
                            <div class="plant-icon">💧</div>
                            <div class="plot-text">Regada</div>
                        </div>
                    `;
                    
                    // Crescer após 30 segundos
                    setTimeout(() => {
                        if (plot.state === 'watered') {
                            plot.state = 'ready';
                            plotElement.className = 'plot ready';
                            plotElement.innerHTML = `
                                <div class="plot-content">
                                    <div class="plant-icon">${plot.plant.icon}</div>
                                    <div class="plot-text">Pronto!</div>
                                </div>
                            `;
                        }
                    }, 30000);
                }
            });
            
            // Adicionar barro ao inventário
            if (!gameState.inventory['Barro']) {
                gameState.inventory['Barro'] = { count: 0, icon: '🟤' };
            }
            gameState.inventory['Barro'].count += 1;
            
            updateInventoryDisplay();
            
            // Parar chuva após 10 segundos
            setTimeout(() => {
                gameState.isRaining = false;
                document.body.classList.remove('raining');
                
                // Remover gotas de chuva
                if (rainContainer && rainContainer.parentNode) {
                    rainContainer.parentNode.removeChild(rainContainer);
                }
            }, 10000);
        }

        // Criar painel de sementes
        function createSeedsPanel() {
            const seedsGrid = document.getElementById('seedsGrid');
            
            seeds.forEach((seed, index) => {
                const seedElement = document.createElement('div');
                seedElement.className = 'seed-item';
                seedElement.id = `seed-${index}`;
                seedElement.innerHTML = `
                    <span class="seed-icon">${seed.icon}</span>
                    <div class="seed-name">${seed.name}</div>
                    <div class="seed-price">${seed.cost} 🪙</div>
                `;
                seedElement.onclick = () => selectSeed(index);
                seedsGrid.appendChild(seedElement);
            });
        }

        // Criar grade da fazenda
        function createFarmGrid() {
            const farmGrid = document.getElementById('farmGrid');
            
            // Criar 8 canteiros
            for (let i = 0; i < 8; i++) {
                const plot = document.createElement('div');
                plot.className = 'plot';
                plot.id = `plot-${i}`;
                plot.innerHTML = `
                    <div class="plot-content">
                        <div class="plant-icon">🌱</div>
                        <div class="plot-text">Vazio</div>
                    </div>
                `;
                plot.onclick = () => handlePlotClick(i);
                farmGrid.appendChild(plot);
                
                gameState.plots.push({
                    id: i,
                    state: 'empty', // empty, fertilized, planted, watered, ready
                    plant: null,
                    plantTime: null,
                    fertilized: false,
                    watered: false
                });
            }
        }

        // Selecionar semente
        function selectSeed(seedIndex) {
            // Remover seleção anterior
            if (gameState.selectedSeed !== null) {
                document.getElementById(`seed-${gameState.selectedSeed}`).classList.remove('selected');
            }
            
            // Selecionar nova semente
            gameState.selectedSeed = seedIndex;
            document.getElementById(`seed-${seedIndex}`).classList.add('selected');
        }

        // Lidar com clique no canteiro
        function handlePlotClick(plotId) {
            const plot = gameState.plots[plotId];
            
            if (plot.state === 'empty') {
                fertilizePlot(plotId);
            } else if (plot.state === 'fertilized') {
                plantSeed(plotId);
            } else if (plot.state === 'planted') {
                waterPlot(plotId);
            } else if (plot.state === 'ready') {
                harvestPlot(plotId);
            }
        }

        // Adubar canteiro
        function fertilizePlot(plotId) {
            const plot = gameState.plots[plotId];
            
            if (gameState.fertilizer < 1) {
                return;
            }
            
            if (!useEnergy(1)) return;
            
            gameState.fertilizer -= 1;
            plot.state = 'fertilized';
            plot.fertilized = true;
            
            const plotElement = document.getElementById(`plot-${plotId}`);
            plotElement.className = 'plot';
            plotElement.style.background = 'linear-gradient(135deg, #8B4513 0%, #CD853F 100%)';
            plotElement.innerHTML = `
                <div class="plot-content">
                    <div class="plant-icon">🌱</div>
                    <div class="plot-text">Adubado</div>
                </div>
            `;
            
            updateDisplay();
        }

        // Plantar semente
        function plantSeed(plotId) {
            const plot = gameState.plots[plotId];
            
            if (gameState.selectedSeed === null) {
                return;
            }
            
            const selectedSeed = seeds[gameState.selectedSeed];
            
            if (gameState.coins < selectedSeed.cost) {
                return;
            }
            
            if (!useEnergy(1)) return;
            
            gameState.coins -= selectedSeed.cost;
            plot.state = 'planted';
            plot.plant = { ...selectedSeed };
            plot.plantTime = Date.now();
            
            const plotElement = document.getElementById(`plot-${plotId}`);
            plotElement.className = 'plot planted';
            plotElement.innerHTML = `
                <div class="plot-content">
                    <div class="plant-icon">🌱</div>
                    <div class="plot-text">Crescendo...</div>
                </div>
            `;
            
            updateDisplay();
        }

        // Regar planta
        function waterPlot(plotId) {
            const plot = gameState.plots[plotId];
            
            if (gameState.water < 1) {
                return;
            }
            
            if (!useEnergy(1)) return;
            
            gameState.water -= 1;
            plot.state = 'watered';
            plot.watered = true;
            
            const plotElement = document.getElementById(`plot-${plotId}`);
            plotElement.innerHTML = `
                <div class="plot-content">
                    <div class="plant-icon">💧</div>
                    <div class="plot-text">Regada</div>
                </div>
            `;
            
            // Crescer após 30 segundos
            setTimeout(() => {
                if (plot.state === 'watered') {
                    plot.state = 'ready';
                    plotElement.className = 'plot ready';
                    plotElement.innerHTML = `
                        <div class="plot-content">
                            <div class="plant-icon">${plot.plant.icon}</div>
                            <div class="plot-text">Pronto!</div>
                        </div>
                    `;
                }
            }, 30000); // 30 segundos
            
            updateDisplay();
        }

        // Colher planta
        function harvestPlot(plotId) {
            const plot = gameState.plots[plotId];
            
            if (!useEnergy(1)) return;
            
            // Adicionar ao inventário
            const plantName = plot.plant.name;
            if (!gameState.inventory[plantName]) {
                gameState.inventory[plantName] = { count: 0, icon: plot.plant.icon };
            }
            
            // No verão, cada canteiro dá 2 frutos
            let harvestAmount = 1;
            if (gameState.currentSeason === 1) { // Verão
                harvestAmount = 2;
            }
            gameState.inventory[plantName].count += harvestAmount;
            
            // Ganhar moedas (valor aumentado se foi adubado)
            let earnings = plot.plant.value * harvestAmount;
            if (plot.fertilized) {
                earnings = Math.floor(earnings * 1.5);
            }
            gameState.coins += earnings;
            
            // Incrementar contador de colheitas
            gameState.harvestCount += 1;
            
            // Verificar se deve soltar uma minhoca (a cada 2 canteiros colhidos)
            if (gameState.harvestCount % 2 === 0) {
                if (!gameState.inventory['Minhoca']) {
                    gameState.inventory['Minhoca'] = { count: 0, icon: '🪱' };
                }
                gameState.inventory['Minhoca'].count += 1;
            }
            
            // Resetar canteiro
            plot.state = 'empty';
            plot.plant = null;
            plot.plantTime = null;
            plot.fertilized = false;
            plot.watered = false;
            
            const plotElement = document.getElementById(`plot-${plotId}`);
            plotElement.className = 'plot';
            plotElement.style.background = 'linear-gradient(135deg, #8B4513 0%, #A0522D 100%)';
            plotElement.innerHTML = `
                <div class="plot-content">
                    <div class="plant-icon">🌱</div>
                    <div class="plot-text">Vazio</div>
                </div>
            `;
            
            updateDisplay();
            updateInventoryDisplay();
        }

        // Atualizar display dos recursos
        function updateDisplay() {
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('water').textContent = gameState.water;
            document.getElementById('fertilizer').textContent = gameState.fertilizer;
        }

        // Criar grade da quitanda
        function createShopGrid() {
            const shopGrid = document.getElementById('shopGrid');
            
            // Criar 20 slots vazios
            for (let i = 0; i < 20; i++) {
                const slot = document.createElement('div');
                slot.className = 'shop-slot empty';
                slot.id = `shop-slot-${i}`;
                slot.innerHTML = '<div style="opacity: 0.5;">Vazio</div>';
                slot.onclick = () => moveToShop(i);
                shopGrid.appendChild(slot);
            }
        }

        // Mover item do celeiro para a quitanda
        function moveToShop(slotIndex) {
            // Verificar se há itens no inventário para mover
            const availableItems = Object.keys(gameState.inventory).filter(item => 
                gameState.inventory[item].count > 0 && item !== 'Minhoca' && item !== 'Barro' && item !== 'Erva' && item !== 'Chá' && item !== 'Lírio'
            );
            
            if (availableItems.length === 0) {
                return;
            }
            
            // Pegar o primeiro item disponível
            const itemName = availableItems[0];
            const item = gameState.inventory[itemName];
            
            // Verificar se já existe na quitanda
            if (gameState.shop[itemName]) {
                gameState.shop[itemName].count += 1;
            } else {
                gameState.shop[itemName] = {
                    icon: item.icon,
                    count: 1,
                    value: seeds.find(s => s.name === itemName)?.value || 10
                };
            }
            
            // Remover do inventário
            gameState.inventory[itemName].count -= 1;
            if (gameState.inventory[itemName].count === 0) {
                delete gameState.inventory[itemName];
            }
            
            updateInventoryDisplay();
            updateShopDisplay();
        }

        // Atualizar display da quitanda
        function updateShopDisplay() {
            const shopGrid = document.getElementById('shopGrid');
            const slots = shopGrid.children;
            
            // Limpar todos os slots
            for (let i = 0; i < slots.length; i++) {
                slots[i].className = 'shop-slot empty';
                slots[i].innerHTML = '<div style="opacity: 0.5;">Vazio</div>';
                slots[i].onclick = () => moveToShop(i);
            }
            
            // Preencher com itens da quitanda
            let slotIndex = 0;
            Object.keys(gameState.shop).forEach(itemName => {
                const item = gameState.shop[itemName];
                if (item.count > 0 && slotIndex < 20) {
                    const slot = slots[slotIndex];
                    slot.className = 'shop-slot';
                    slot.innerHTML = `
                        <span class="shop-icon">${item.icon}</span>
                        <div class="shop-count">${item.count}x</div>
                        <div style="font-size: 0.6rem; color: #FFD700; margin-top: 2px;">${item.value} 🪙</div>
                    `;
                    slot.onclick = () => removeFromShop(itemName);
                    slotIndex++;
                }
            });
        }

        // Remover item da quitanda (voltar para o celeiro)
        function removeFromShop(itemName) {
            const shopItem = gameState.shop[itemName];
            
            // Mover de volta para o inventário
            if (gameState.inventory[itemName]) {
                gameState.inventory[itemName].count += 1;
            } else {
                gameState.inventory[itemName] = {
                    icon: shopItem.icon,
                    count: 1
                };
            }
            
            // Remover da quitanda
            shopItem.count -= 1;
            if (shopItem.count === 0) {
                delete gameState.shop[itemName];
            }
            
            updateInventoryDisplay();
            updateShopDisplay();
        }

        // Vender todos os itens da quitanda
        function sellAllItems() {
            let totalEarnings = 0;
            let itemsSold = 0;
            
            Object.keys(gameState.shop).forEach(itemName => {
                const item = gameState.shop[itemName];
                let itemValue = item.value;
                
                // Aplicar bônus das estações
                if (gameState.currentSeason === 0) { // Primavera - plantações valem 10% a mais
                    if (seeds.find(s => s.name === itemName)) {
                        itemValue = Math.floor(itemValue * 1.1);
                    }
                } else if (gameState.currentSeason === 2) { // Outono - produtos animais valem 15% a mais
                    if (['Minhoca', 'Barro'].includes(itemName)) {
                        itemValue = Math.floor(itemValue * 1.15);
                    }
                } else if (gameState.currentSeason === 3) { // Inverno - produtos fabricados valem 15% a mais
                    // Para produtos fabricados (quando implementados)
                    // itemValue = Math.floor(itemValue * 1.15);
                }
                
                const earnings = item.count * itemValue;
                totalEarnings += earnings;
                itemsSold += item.count;
            });
            
            if (itemsSold === 0) {
                return;
            }
            
            gameState.coins += totalEarnings;
            gameState.shop = {}; // Limpar quitanda
            
            updateDisplay();
            updateShopDisplay();
        }

        // Atualizar display do inventário
        function updateInventoryDisplay() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            inventoryGrid.innerHTML = '';
            
            Object.keys(gameState.inventory).forEach(plantName => {
                const item = gameState.inventory[plantName];
                if (item.count > 0) {
                    const inventoryItem = document.createElement('div');
                    inventoryItem.className = 'inventory-item';
                    inventoryItem.innerHTML = `
                        <span class="inventory-icon">${item.icon}</span>
                        <div class="inventory-count">${item.count}</div>
                    `;
                    // Só permite mover se não for minhoca, barro, erva, chá ou lírio
                    if (plantName !== 'Minhoca' && plantName !== 'Barro' && plantName !== 'Erva' && plantName !== 'Chá' && plantName !== 'Lírio') {
                        inventoryItem.onclick = () => moveItemToShop(plantName);
                        inventoryItem.style.cursor = 'pointer';
                    }
                    inventoryGrid.appendChild(inventoryItem);
                }
            });
            
            if (Object.keys(gameState.inventory).length === 0) {
                inventoryGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: white; opacity: 0.7;">Celeiro vazio</div>';
            }
        }

        // Mover item específico para a quitanda
        function moveItemToShop(itemName) {
            if (itemName === 'Minhoca') {
                return;
            }
            
            if (itemName === 'Barro') {
                return;
            }
            
            if (itemName === 'Erva') {
                return;
            }
            
            if (itemName === 'Chá') {
                return;
            }
            
            if (itemName === 'Lírio') {
                return;
            }
            
            const item = gameState.inventory[itemName];
            
            // Verificar se já existe na quitanda
            if (gameState.shop[itemName]) {
                gameState.shop[itemName].count += 1;
            } else {
                gameState.shop[itemName] = {
                    icon: item.icon,
                    count: 1,
                    value: seeds.find(s => s.name === itemName)?.value || 10
                };
            }
            
            // Remover do inventário
            gameState.inventory[itemName].count -= 1;
            if (gameState.inventory[itemName].count === 0) {
                delete gameState.inventory[itemName];
            }
            
            updateInventoryDisplay();
            updateShopDisplay();
        }

        // Inicializar mercado
        function initializeMarket() {
            gameState.market = {};
            marketItems.forEach(item => {
                gameState.market[item.name] = { ...item, available: true };
            });
        }

        // Atualizar display do mercado
        function updateMarketDisplay() {
            const marketGrid = document.getElementById('marketGrid');
            marketGrid.innerHTML = '';
            
            Object.keys(gameState.market).forEach(itemName => {
                const item = gameState.market[itemName];
                if (item.available) {
                    const marketItem = document.createElement('div');
                    marketItem.className = 'market-item';
                    marketItem.innerHTML = `
                        <span class="market-icon">${item.icon}</span>
                        <div>${item.name}</div>
                        <div class="market-price">${item.price} 🪙</div>
                    `;
                    marketItem.onclick = () => buyFromMarket(itemName);
                    marketGrid.appendChild(marketItem);
                }
            });
            
            if (Object.keys(gameState.market).filter(item => gameState.market[item].available).length === 0) {
                marketGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: white; opacity: 0.7;">Mercado vazio</div>';
            }
        }

        // Comprar do mercado
        function buyFromMarket(itemName) {
            const item = gameState.market[itemName];
            
            if (!item.available) {
                return;
            }
            
            if (gameState.coins < item.price) {
                return;
            }
            
            // Deduzir moedas
            gameState.coins -= item.price;
            
            // Adicionar recursos
            if (item.type === 'water') {
                gameState.water += item.quantity || 1;
            } else if (item.type === 'fertilizer') {
                gameState.fertilizer += item.quantity || 1;
            } else if (item.type === 'well') {
                // Mostrar painel do poço
                document.getElementById('wellPanel').style.display = 'block';
                gameState.hasWell = true;
            } else if (item.type === 'forest') {
                // Mostrar painel do bosque
                document.getElementById('forestPanel').style.display = 'block';
                gameState.hasForest = true;
                
                // Adicionar machado ao mercado
                gameState.market['Machado'] = {
                    icon: '🪓',
                    name: 'Machado',
                    price: 30,
                    type: 'axe',
                    available: true
                };
            } else if (item.type === 'axe') {
                // Comprar machado
                gameState.forest.hasAxe = true;
                gameState.forest.axeUses = 40;
                
                // Mostrar área de cortar lenha
                document.getElementById('lumberMillPanel').style.display = 'block';
                document.getElementById('axeStatus').style.display = 'block';
                
                updateAxeStatus();
                updateForestDisplay();
            } else if (item.type === 'stove') {
                // Mostrar painel do fogão e forno
                document.getElementById('stovePanel').style.display = 'block';
                gameState.hasStove = true;
                createStoveDisplay();
            } else if (item.type === 'grassfield') {
                // Mostrar painel do campo de grama
                document.getElementById('grassFieldPanel').style.display = 'block';
                gameState.hasGrassField = true;
                
                // Adicionar Secador/Feno ao mercado
                gameState.market['Secador/Feno'] = {
                    icon: '🌾',
                    name: 'Secador/Feno',
                    price: 80,
                    type: 'haymaker',
                    available: true
                };
                
                showMessage('Campo de Grama comprado! Agora você pode coletar grama.');
            } else if (item.type === 'haymaker') {
                // Mostrar painel do secador/feno
                document.getElementById('hayMakerPanel').style.display = 'block';
                gameState.hasHayMaker = true;
                showMessage('Secador/Feno comprado! Agora você pode secar grama e fazer feno.');
            } else if (item.type === 'cowpasture') {
                // Mostrar painel do pasto das vacas
                document.getElementById('cowPasturePanel').style.display = 'block';
                gameState.cowPasture.hasPasture = true;
                initializeCowPasture();
                
                // Adicionar 4 vacas ao mercado
                for (let i = 1; i <= 4; i++) {
                    gameState.market[`Vaca ${i}`] = {
                        icon: '🐄',
                        name: `Vaca ${i}`,
                        price: 50,
                        type: 'cow',
                        available: true
                    };
                }
                
                showMessage('Pasto das Vacas comprado! Agora você pode comprar vacas no mercadinho.');
            } else if (item.type === 'cow') {
                // Comprar vaca
                addCowToPasture();
            } else if (item.type === 'composter') {
                // Mostrar painel da composteira
                document.getElementById('composterPanel').style.display = 'block';
                gameState.composter.hasComposter = true;
                createComposterDisplay();
                showMessage('Composteira comprada! Agora você pode fazer adubo com lírios, galhos e esterco.');
            } else if (item.type === 'cheesemaker') {
                // Mostrar painel da queijeira
                document.getElementById('cheeseMakerPanel').style.display = 'block';
                gameState.cheeseMaker.hasCheeseMaker = true;
                updateCheeseMakerDisplay();
                showMessage('Queijeira comprada! Agora você pode fazer queijo com 2 leites.');
            } else if (item.type === 'juicemaker') {
                // Mostrar painel da máquina de suco
                document.getElementById('juiceMakerPanel').style.display = 'block';
                gameState.juiceMaker.hasJuiceMaker = true;
                updateJuiceMakerDisplay();
                showMessage('Máquina de Suco comprada! Agora você pode fazer suco com 3 uvas.');
            } else if (item.type === 'ingredient') {
                // Adicionar ingrediente ao inventário
                if (!gameState.inventory[itemName]) {
                    gameState.inventory[itemName] = { count: 0, icon: item.icon };
                }
                gameState.inventory[itemName].count += 1;
                updateInventoryDisplay();
            }
            
            // Remover item do mercado (venda única)
            item.available = false;
            
            updateDisplay();
            updateMarketDisplay();
        }

        // Coletar água do poço
        function collectWater() {
            if (!gameState.hasWell) return;
            
            if (!useEnergy(1)) return;
            
            gameState.water += 4;
            updateDisplay();
            
            // Animação visual
            const wellVisual = document.querySelector('.well-visual');
            wellVisual.style.transform = 'scale(0.95)';
            setTimeout(() => {
                wellVisual.style.transform = 'scale(1)';
            }, 150);
        }

        // Inicializar campo de flores
        function initializeFlowerField() {
            gameState.flowerField.slots = [];
            
            flowerTypes.forEach((flower, index) => {
                gameState.flowerField.slots.push({
                    id: index,
                    type: flower,
                    available: 3, // 3 flores disponíveis
                    growing: [], // Array de timers para flores crescendo
                    lastCollected: null
                });
            });
            
            createFlowerFieldDisplay();
        }

        // Criar display do campo de flores
        function createFlowerFieldDisplay() {
            const container = document.getElementById('flowerFieldContainer');
            container.innerHTML = '';
            
            gameState.flowerField.slots.forEach((slot, index) => {
                const slotElement = document.createElement('div');
                slotElement.className = 'flower-slot';
                slotElement.id = `flower-slot-${index}`;
                slotElement.onclick = () => collectFlower(index);
                
                updateFlowerSlotDisplay(index);
                container.appendChild(slotElement);
            });
        }

        // Atualizar display do slot de flor
        function updateFlowerSlotDisplay(slotIndex) {
            const slot = gameState.flowerField.slots[slotIndex];
            const slotElement = document.getElementById(`flower-slot-${slotIndex}`);
            
            if (!slotElement) return;
            
            const isGrowing = slot.growing.length > 0;
            
            slotElement.className = `flower-slot ${isGrowing ? 'growing' : ''}`;
            slotElement.innerHTML = `
                <span class="flower-icon">${slot.type.icon}</span>
                <div class="flower-name">${slot.type.name}</div>
                <div class="flower-count">${slot.available}/3</div>
                ${isGrowing ? '<div class="flower-timer">Crescendo...</div>' : ''}
            `;
        }

        // Coletar flor
        function collectFlower(slotIndex) {
            const slot = gameState.flowerField.slots[slotIndex];
            
            if (slot.available <= 0) return;
            
            if (!useEnergy(1)) return;
            
            // Reduzir flores disponíveis
            slot.available -= 1;
            
            // Adicionar flor ao inventário
            const flowerName = slot.type.name;
            if (!gameState.inventory[flowerName]) {
                gameState.inventory[flowerName] = { count: 0, icon: slot.type.icon };
            }
            gameState.inventory[flowerName].count += 1;
            
            // Incrementar contador de flores coletadas
            gameState.flowerField.flowerCollectCount += 1;
            
            // Verificar se deve soltar uma erva (a cada 4 flores)
            if (gameState.flowerField.flowerCollectCount % 4 === 0) {
                if (!gameState.inventory['Erva']) {
                    gameState.inventory['Erva'] = { count: 0, icon: '🍃' };
                }
                gameState.inventory['Erva'].count += 1;
            }
            
            // Iniciar crescimento da nova flor (5 minutos)
            const growthTimer = setTimeout(() => {
                slot.available += 1;
                // Remover este timer da lista
                slot.growing = slot.growing.filter(timer => timer !== growthTimer);
                updateFlowerSlotDisplay(slotIndex);
            }, 300000); // 5 minutos
            
            slot.growing.push(growthTimer);
            
            updateFlowerSlotDisplay(slotIndex);
            updateInventoryDisplay();
        }

        // Inicializar bosque
        function initializeForest() {
            gameState.forest.trees = [];
            
            treeTypes.forEach((tree, index) => {
                gameState.forest.trees.push({
                    id: index,
                    type: tree,
                    availableFruits: tree.type === 'fruit' ? tree.maxFruits : 0,
                    growing: [], // Array de timers para frutas crescendo
                    lastCollected: null
                });
            });
            
            createForestDisplay();
        }

        // Criar display do bosque
        function createForestDisplay() {
            const container = document.getElementById('forestContainer');
            container.innerHTML = '';
            
            gameState.forest.trees.forEach((tree, index) => {
                const treeElement = document.createElement('div');
                treeElement.className = 'tree-slot';
                treeElement.id = `tree-slot-${index}`;
                treeElement.onclick = () => collectFromTree(index);
                
                updateTreeSlotDisplay(index);
                container.appendChild(treeElement);
            });
        }

        // Atualizar display da árvore
        function updateTreeSlotDisplay(treeIndex) {
            const tree = gameState.forest.trees[treeIndex];
            const treeElement = document.getElementById(`tree-slot-${treeIndex}`);
            
            if (!treeElement) return;
            
            const hasAxe = gameState.forest.hasAxe && gameState.forest.axeUses > 0;
            const isGrowing = tree.growing.length > 0;
            
            // Para árvore comum, precisa de machado
            if (tree.type.type === 'common' && !hasAxe) {
                treeElement.className = 'tree-slot no-axe';
            } else if (isGrowing) {
                treeElement.className = 'tree-slot growing';
            } else {
                treeElement.className = 'tree-slot';
            }
            
            let content = `
                <span class="tree-icon">${tree.type.icon}</span>
                <div class="tree-name">${tree.type.name}</div>
            `;
            
            if (tree.type.type === 'fruit') {
                content += `<div class="tree-count">${tree.availableFruits}/${tree.type.maxFruits}</div>`;
                if (isGrowing) {
                    content += '<div class="tree-timer">Crescendo...</div>';
                }
            } else if (tree.type.type === 'common') {
                if (!hasAxe) {
                    content += '<div class="tree-count" style="color: #FFD700;">Precisa de machado</div>';
                } else {
                    content += '<div class="tree-count">Infinito</div>';
                }
            }
            
            treeElement.innerHTML = content;
        }

        // Coletar da árvore
        function collectFromTree(treeIndex) {
            const tree = gameState.forest.trees[treeIndex];
            
            if (tree.type.type === 'common') {
                // Árvore comum - precisa de machado
                if (!gameState.forest.hasAxe || gameState.forest.axeUses <= 0) {
                    return;
                }
                
                if (!useEnergy(1)) return;
                
                // Usar machado
                gameState.forest.axeUses -= 1;
                updateAxeStatus();
                
                // Adicionar tronco ao inventário
                if (!gameState.inventory['Tronco']) {
                    gameState.inventory['Tronco'] = { count: 0, icon: '🪵' };
                }
                gameState.inventory['Tronco'].count += 1;
                
                // Incrementar contador de troncos
                gameState.forest.trunkCollectCount += 1;
                
                // Verificar se deve soltar um galho (a cada 3 troncos)
                if (gameState.forest.trunkCollectCount % 3 === 0) {
                    if (!gameState.inventory['Galho']) {
                        gameState.inventory['Galho'] = { count: 0, icon: '🌿' };
                    }
                    gameState.inventory['Galho'].count += 1;
                }
                
                // Verificar se machado quebrou
                if (gameState.forest.axeUses <= 0) {
                    gameState.forest.hasAxe = false;
                    document.getElementById('lumberMillPanel').style.display = 'none';
                    document.getElementById('axeStatus').style.display = 'none';
                }
                
            } else if (tree.type.type === 'fruit') {
                // Árvore frutífera
                if (tree.availableFruits <= 0) return;
                
                if (!useEnergy(1)) return;
                
                // Reduzir frutas disponíveis
                tree.availableFruits -= 1;
                
                // Adicionar fruta ao inventário
                const fruitName = tree.type.product;
                if (!gameState.inventory[fruitName]) {
                    gameState.inventory[fruitName] = { count: 0, icon: tree.type.productIcon };
                }
                gameState.inventory[fruitName].count += 1;
                
                // Iniciar crescimento da nova fruta (5 minutos)
                const growthTimer = setTimeout(() => {
                    tree.availableFruits += 1;
                    // Remover este timer da lista
                    tree.growing = tree.growing.filter(timer => timer !== growthTimer);
                    updateTreeSlotDisplay(treeIndex);
                }, 300000); // 5 minutos
                
                tree.growing.push(growthTimer);
            }
            
            updateTreeSlotDisplay(treeIndex);
            updateForestDisplay();
            updateInventoryDisplay();
        }

        // Atualizar display do bosque
        function updateForestDisplay() {
            gameState.forest.trees.forEach((tree, index) => {
                updateTreeSlotDisplay(index);
            });
        }

        // Atualizar status do machado
        function updateAxeStatus() {
            const axeUsesText = document.getElementById('axeUsesText');
            if (axeUsesText) {
                axeUsesText.textContent = `🪓 Machado: ${gameState.forest.axeUses}/40 usos`;
            }
        }

        // Adicionar tronco à serraria
        function addTrunkToMill() {
            if (gameState.lumberMill.slot || gameState.lumberMill.processing) return;
            
            // Verificar se tem tronco no inventário
            if (!gameState.inventory['Tronco'] || gameState.inventory['Tronco'].count <= 0) {
                return;
            }
            
            // Remover tronco do inventário
            gameState.inventory['Tronco'].count -= 1;
            if (gameState.inventory['Tronco'].count === 0) {
                delete gameState.inventory['Tronco'];
            }
            
            // Adicionar à serraria
            gameState.lumberMill.slot = { icon: '🪵', name: 'Tronco' };
            
            updateLumberMillDisplay();
            updateInventoryDisplay();
        }

        // Cortar lenha
        function cutLumber() {
            if (!gameState.lumberMill.slot || gameState.lumberMill.processing) return;
            
            gameState.lumberMill.processing = true;
            updateLumberMillDisplay();
            
            // Processar por 3 segundos
            setTimeout(() => {
                // Adicionar 4 lenhas ao inventário
                if (!gameState.inventory['Lenha']) {
                    gameState.inventory['Lenha'] = { count: 0, icon: '🔥' };
                }
                gameState.inventory['Lenha'].count += 4;
                
                // Limpar slot
                gameState.lumberMill.slot = null;
                gameState.lumberMill.processing = false;
                
                updateLumberMillDisplay();
                updateInventoryDisplay();
            }, 3000);
        }

        // Atualizar display da serraria
        function updateLumberMillDisplay() {
            const lumberSlot = document.getElementById('lumberSlot');
            const cutButton = document.getElementById('cutButton');
            
            if (gameState.lumberMill.processing) {
                lumberSlot.className = 'lumber-slot processing';
                lumberSlot.innerHTML = `
                    <div style="font-size: 2rem;">🪵</div>
                    <div style="color: white; font-size: 0.7rem;">Cortando...</div>
                `;
                cutButton.disabled = true;
            } else if (gameState.lumberMill.slot) {
                lumberSlot.className = 'lumber-slot';
                lumberSlot.innerHTML = `
                    <div style="font-size: 2rem;">${gameState.lumberMill.slot.icon}</div>
                    <div style="color: white; font-size: 0.8rem;">${gameState.lumberMill.slot.name}</div>
                `;
                cutButton.disabled = false;
            } else {
                lumberSlot.className = 'lumber-slot empty';
                lumberSlot.innerHTML = `
                    <div style="color: white; font-size: 0.8rem; opacity: 0.7;">Slot Vazio</div>
                    <div style="color: white; font-size: 0.6rem; opacity: 0.5;">Clique para adicionar tronco</div>
                `;
                cutButton.disabled = true;
            }
        }

        // Mostrar mensagem
        function showMessage(text) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.classList.add('show');
            
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 2000);
        }

        // Inicializar campo de grama
        function initializeGrassField() {
            gameState.grassField.slots = [];
            
            // Criar 20 slots de grama
            for (let i = 0; i < 20; i++) {
                gameState.grassField.slots.push({
                    id: i,
                    hasGrass: true,
                    growing: false,
                    growthTimer: null
                });
            }
            
            createGrassFieldDisplay();
        }

        // Criar display do campo de grama
        function createGrassFieldDisplay() {
            const container = document.getElementById('grassFieldContainer');
            container.innerHTML = '';
            
            gameState.grassField.slots.forEach((slot, index) => {
                const slotElement = document.createElement('div');
                slotElement.className = 'grass-slot';
                slotElement.id = `grass-slot-${index}`;
                slotElement.onclick = () => collectGrass(index);
                
                updateGrassSlotDisplay(index);
                container.appendChild(slotElement);
            });
        }

        // Atualizar display do slot de grama
        function updateGrassSlotDisplay(slotIndex) {
            const slot = gameState.grassField.slots[slotIndex];
            const slotElement = document.getElementById(`grass-slot-${slotIndex}`);
            
            if (!slotElement) return;
            
            if (slot.hasGrass) {
                slotElement.className = 'grass-slot';
                slotElement.innerHTML = `
                    <span class="grass-icon">☘️</span>
                `;
            } else if (slot.growing) {
                slotElement.className = 'grass-slot growing';
                slotElement.innerHTML = `
                    <span class="grass-icon">🌱</span>
                    <div class="grass-timer">Crescendo...</div>
                `;
            } else {
                slotElement.className = 'grass-slot empty';
                slotElement.innerHTML = `
                    <span class="grass-icon" style="opacity: 0.3;">🟫</span>
                `;
            }
        }

        // Coletar grama
        function collectGrass(slotIndex) {
            const slot = gameState.grassField.slots[slotIndex];
            
            if (!slot.hasGrass || slot.growing) return;
            
            if (!useEnergy(1)) return;
            
            // Remover grama do slot
            slot.hasGrass = false;
            slot.growing = true;
            
            // Adicionar grama ao inventário
            if (!gameState.inventory['Grama']) {
                gameState.inventory['Grama'] = { count: 0, icon: '☘️' };
            }
            gameState.inventory['Grama'].count += 1;
            
            // Incrementar contador de gramas coletadas
            gameState.grassField.grassCollectCount += 1;
            
            // Verificar se deve soltar um lírio (a cada 8 gramas)
            if (gameState.grassField.grassCollectCount % 8 === 0) {
                if (!gameState.inventory['Lírio']) {
                    gameState.inventory['Lírio'] = { count: 0, icon: '🌺' };
                }
                gameState.inventory['Lírio'].count += 1;
                
                showMessage(`Você encontrou um Lírio!`);
            }
            
            // Iniciar crescimento da nova grama (1 minuto)
            slot.growthTimer = setTimeout(() => {
                slot.hasGrass = true;
                slot.growing = false;
                slot.growthTimer = null;
                updateGrassSlotDisplay(slotIndex);
            }, 60000); // 1 minuto
            
            updateGrassSlotDisplay(slotIndex);
            updateInventoryDisplay();
        }

        // Inicializar fogão
        function initializeStove() {
            // Fogão será inicializado quando comprado
        }

        // Criar display do fogão e forno
        function createStoveDisplay() {
            const slotsContainer = document.getElementById('stoveSlots');
            const recipesContainer = document.getElementById('stoveRecipes');
            const ovenSlotsContainer = document.getElementById('ovenSlots');
            const ovenRecipesContainer = document.getElementById('ovenRecipes');
            
            // Criar slots do fogão
            slotsContainer.innerHTML = '';
            for (let i = 0; i < 5; i++) {
                const slot = document.createElement('div');
                slot.className = 'stove-slot empty';
                slot.id = `stove-slot-${i}`;
                
                if (i === 0) {
                    slot.classList.add('fuel');
                    slot.innerHTML = `
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Lenha</div>
                        <div style="color: white; font-size: 0.6rem; opacity: 0.5;">2x 🔥</div>
                    `;
                    slot.onclick = () => addFuelToStove();
                } else {
                    slot.innerHTML = `
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Ingrediente</div>
                        <div style="color: white; font-size: 0.6rem; opacity: 0.5;">${i}</div>
                    `;
                    slot.onclick = () => addIngredientToStove(i);
                }
                
                slotsContainer.appendChild(slot);
            }
            
            // Criar slots do forno
            ovenSlotsContainer.innerHTML = '';
            for (let i = 0; i < 5; i++) {
                const slot = document.createElement('div');
                slot.className = 'stove-slot empty';
                slot.id = `oven-slot-${i}`;
                
                if (i === 0) {
                    slot.classList.add('fuel');
                    slot.innerHTML = `
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Lenha</div>
                        <div style="color: white; font-size: 0.6rem; opacity: 0.5;">3x 🔥</div>
                    `;
                    slot.onclick = () => addFuelToOven();
                } else {
                    slot.innerHTML = `
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Ingrediente</div>
                        <div style="color: white; font-size: 0.6rem; opacity: 0.5;">${i}</div>
                    `;
                    slot.onclick = () => addIngredientToOven(i);
                }
                
                ovenSlotsContainer.appendChild(slot);
            }
            
            // Criar receitas do fogão
            recipesContainer.innerHTML = '';
            recipes.forEach((recipe, index) => {
                const recipeCard = document.createElement('div');
                recipeCard.className = 'recipe-card';
                recipeCard.id = `recipe-${index}`;
                recipeCard.innerHTML = `
                    <div class="recipe-name">${recipe.icon} ${recipe.name}</div>
                    <div class="recipe-ingredients">${recipe.ingredients.map(ing => `${ing.quantity}x ${ing.icon}`).join(' ')}</div>
                    <div class="recipe-effect">${recipe.effect}</div>
                `;
                recipeCard.onclick = () => selectRecipe(index);
                recipesContainer.appendChild(recipeCard);
            });
            
            // Criar receitas do forno
            ovenRecipesContainer.innerHTML = '';
            ovenRecipes.forEach((recipe, index) => {
                const recipeCard = document.createElement('div');
                recipeCard.className = 'recipe-card';
                recipeCard.id = `oven-recipe-${index}`;
                recipeCard.innerHTML = `
                    <div class="recipe-name">${recipe.icon} ${recipe.name}</div>
                    <div class="recipe-ingredients">${recipe.ingredients.map(ing => `${ing.quantity}x ${ing.icon}`).join(' ')}</div>
                    <div class="recipe-effect">${recipe.effect}</div>
                `;
                recipeCard.onclick = () => selectOvenRecipe(index);
                ovenRecipesContainer.appendChild(recipeCard);
            });
            
            updateStoveDisplay();
            updateOvenDisplay();
        }

        // Adicionar lenha ao fogão
        function addFuelToStove() {
            if (gameState.stove.cooking) return;
            
            // Verificar se tem lenha no inventário
            if (!gameState.inventory['Lenha'] || gameState.inventory['Lenha'].count < 2) {
                return;
            }
            
            // Verificar se já tem lenha no slot
            if (gameState.stove.slots[0] && gameState.stove.slots[0].quantity >= 2) {
                return;
            }
            
            // Remover lenha do inventário
            gameState.inventory['Lenha'].count -= 2;
            if (gameState.inventory['Lenha'].count === 0) {
                delete gameState.inventory['Lenha'];
            }
            
            // Adicionar ao fogão
            gameState.stove.slots[0] = { name: 'Lenha', icon: '🔥', quantity: 2 };
            
            updateStoveDisplay();
            updateInventoryDisplay();
        }

        // Adicionar ingrediente ao fogão
        function addIngredientToStove(slotIndex) {
            if (gameState.stove.cooking) return;
            if (gameState.stove.slots[slotIndex]) return; // Slot já ocupado
            
            // Verificar se há receita selecionada
            if (gameState.stove.selectedRecipe === null) {
                showMessage('Selecione uma receita primeiro!');
                return;
            }
            
            const recipe = recipes[gameState.stove.selectedRecipe];
            const neededIngredients = recipe.ingredients;
            
            // Verificar quais ingredientes ainda são necessários
            const currentIngredients = {};
            for (let i = 1; i < 5; i++) {
                if (gameState.stove.slots[i]) {
                    const ingredient = gameState.stove.slots[i];
                    if (currentIngredients[ingredient.name]) {
                        currentIngredients[ingredient.name] += ingredient.quantity;
                    } else {
                        currentIngredients[ingredient.name] = ingredient.quantity;
                    }
                }
            }
            
            // Encontrar próximo ingrediente necessário
            let nextIngredient = null;
            for (const reqIngredient of neededIngredients) {
                const currentAmount = currentIngredients[reqIngredient.name] || 0;
                if (currentAmount < reqIngredient.quantity) {
                    nextIngredient = reqIngredient;
                    break;
                }
            }
            
            if (!nextIngredient) {
                showMessage('Todos os ingredientes já foram adicionados!');
                return;
            }
            
            // Verificar se tem o ingrediente necessário
            if (nextIngredient.name === 'Água') {
                if (gameState.water <= 0) {
                    showMessage(`Você precisa de ${nextIngredient.name} para esta receita!`);
                    return;
                }
                gameState.water -= 1;
                gameState.stove.slots[slotIndex] = { 
                    name: 'Água', 
                    icon: '💧', 
                    quantity: 1 
                };
                updateDisplay();
            } else {
                if (!gameState.inventory[nextIngredient.name] || gameState.inventory[nextIngredient.name].count <= 0) {
                    showMessage(`Você precisa de ${nextIngredient.name} para esta receita!`);
                    return;
                }
                
                const ingredient = gameState.inventory[nextIngredient.name];
                
                // Remover do inventário (celeiro)
                gameState.inventory[nextIngredient.name].count -= 1;
                if (gameState.inventory[nextIngredient.name].count === 0) {
                    delete gameState.inventory[nextIngredient.name];
                }
                
                // Adicionar ao fogão
                gameState.stove.slots[slotIndex] = { 
                    name: nextIngredient.name, 
                    icon: ingredient.icon, 
                    quantity: 1 
                };
                updateInventoryDisplay();
            }
            
            showMessage(`${nextIngredient.name} adicionado ao fogão!`);
            updateStoveDisplay();
        }

        // Selecionar receita
        function selectRecipe(recipeIndex) {
            if (gameState.stove.cooking) return;
            
            // Remover seleção anterior
            if (gameState.stove.selectedRecipe !== null) {
                document.getElementById(`recipe-${gameState.stove.selectedRecipe}`).classList.remove('selected');
            }
            
            // Selecionar nova receita
            gameState.stove.selectedRecipe = recipeIndex;
            document.getElementById(`recipe-${recipeIndex}`).classList.add('selected');
            
            updateStoveDisplay();
        }

        // Iniciar cozimento
        function startCooking() {
            if (gameState.stove.cooking) return;
            if (gameState.stove.selectedRecipe === null) return;
            
            const recipe = recipes[gameState.stove.selectedRecipe];
            
            // Verificar se tem lenha
            if (!gameState.stove.slots[0] || gameState.stove.slots[0].quantity < 2) {
                return;
            }
            
            // Verificar ingredientes
            const availableIngredients = {};
            for (let i = 1; i < 5; i++) {
                if (gameState.stove.slots[i]) {
                    const ingredient = gameState.stove.slots[i];
                    if (availableIngredients[ingredient.name]) {
                        availableIngredients[ingredient.name] += ingredient.quantity;
                    } else {
                        availableIngredients[ingredient.name] = ingredient.quantity;
                    }
                }
            }
            
            // Verificar se tem todos os ingredientes necessários
            let canCook = true;
            recipe.ingredients.forEach(reqIngredient => {
                if (!availableIngredients[reqIngredient.name] || 
                    availableIngredients[reqIngredient.name] < reqIngredient.quantity) {
                    canCook = false;
                }
            });
            
            if (!canCook) return;
            
            // Iniciar cozimento
            gameState.stove.cooking = true;
            
            // Consumir ingredientes necessários
            recipe.ingredients.forEach(reqIngredient => {
                let needed = reqIngredient.quantity;
                for (let i = 1; i < 5; i++) {
                    if (gameState.stove.slots[i] && 
                        gameState.stove.slots[i].name === reqIngredient.name && 
                        needed > 0) {
                        const consumed = Math.min(needed, gameState.stove.slots[i].quantity);
                        gameState.stove.slots[i].quantity -= consumed;
                        needed -= consumed;
                        
                        if (gameState.stove.slots[i].quantity <= 0) {
                            gameState.stove.slots[i] = null;
                        }
                    }
                }
            });
            
            updateStoveDisplay();
            
            // Cozinhar
            if (recipe.cookTime === 0) {
                // Instantâneo
                finishCooking();
            } else {
                gameState.stove.cookingTimer = setTimeout(() => {
                    finishCooking();
                }, recipe.cookTime);
            }
        }

        // Finalizar cozimento
        function finishCooking() {
            const recipe = recipes[gameState.stove.selectedRecipe];
            
            // Adicionar comida ao celeiro
            if (!gameState.inventory[recipe.name]) {
                gameState.inventory[recipe.name] = { count: 0, icon: recipe.icon };
            }
            gameState.inventory[recipe.name].count += 1;
            
            // Consumir toda a lenha
            gameState.stove.slots[0] = null;
            
            // Resetar fogão
            gameState.stove.cooking = false;
            gameState.stove.selectedRecipe = null;
            gameState.stove.cookingTimer = null;
            
            // Limpar seleção de receita
            document.querySelectorAll('.recipe-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            showMessage(`${recipe.name} pronto! Enviado para o celeiro.`);
            updateStoveDisplay();
            updateInventoryDisplay();
        }

        // Adicionar lenha ao forno
        function addFuelToOven() {
            if (gameState.oven.baking) return;
            
            // Verificar se tem lenha no inventário
            if (!gameState.inventory['Lenha'] || gameState.inventory['Lenha'].count < 3) {
                return;
            }
            
            // Verificar se já tem lenha no slot
            if (gameState.oven.slots[0] && gameState.oven.slots[0].quantity >= 3) {
                return;
            }
            
            // Remover lenha do inventário
            gameState.inventory['Lenha'].count -= 3;
            if (gameState.inventory['Lenha'].count === 0) {
                delete gameState.inventory['Lenha'];
            }
            
            // Adicionar ao forno
            gameState.oven.slots[0] = { name: 'Lenha', icon: '🔥', quantity: 3 };
            
            updateOvenDisplay();
            updateInventoryDisplay();
        }

        // Adicionar ingrediente ao forno
        function addIngredientToOven(slotIndex) {
            if (gameState.oven.baking) return;
            if (gameState.oven.slots[slotIndex]) return; // Slot já ocupado
            
            // Verificar se há receita selecionada
            if (gameState.oven.selectedRecipe === null) {
                showMessage('Selecione uma receita primeiro!');
                return;
            }
            
            const recipe = ovenRecipes[gameState.oven.selectedRecipe];
            const neededIngredients = recipe.ingredients;
            
            // Verificar quais ingredientes ainda são necessários
            const currentIngredients = {};
            for (let i = 1; i < 5; i++) {
                if (gameState.oven.slots[i]) {
                    const ingredient = gameState.oven.slots[i];
                    if (currentIngredients[ingredient.name]) {
                        currentIngredients[ingredient.name] += ingredient.quantity;
                    } else {
                        currentIngredients[ingredient.name] = ingredient.quantity;
                    }
                }
            }
            
            // Encontrar próximo ingrediente necessário
            let nextIngredient = null;
            for (const reqIngredient of neededIngredients) {
                const currentAmount = currentIngredients[reqIngredient.name] || 0;
                if (currentAmount < reqIngredient.quantity) {
                    nextIngredient = reqIngredient;
                    break;
                }
            }
            
            if (!nextIngredient) {
                showMessage('Todos os ingredientes já foram adicionados!');
                return;
            }
            
            // Verificar se tem o ingrediente necessário
            if (nextIngredient.name === 'Água') {
                if (gameState.water <= 0) {
                    showMessage(`Você precisa de ${nextIngredient.name} para esta receita!`);
                    return;
                }
                gameState.water -= 1;
                gameState.oven.slots[slotIndex] = { 
                    name: 'Água', 
                    icon: '💧', 
                    quantity: 1 
                };
                updateDisplay();
            } else {
                if (!gameState.inventory[nextIngredient.name] || gameState.inventory[nextIngredient.name].count <= 0) {
                    showMessage(`Você precisa de ${nextIngredient.name} para esta receita!`);
                    return;
                }
                
                const ingredient = gameState.inventory[nextIngredient.name];
                
                // Remover do inventário (celeiro)
                gameState.inventory[nextIngredient.name].count -= 1;
                if (gameState.inventory[nextIngredient.name].count === 0) {
                    delete gameState.inventory[nextIngredient.name];
                }
                
                // Adicionar ao forno
                gameState.oven.slots[slotIndex] = { 
                    name: nextIngredient.name, 
                    icon: ingredient.icon, 
                    quantity: 1 
                };
                updateInventoryDisplay();
            }
            
            showMessage(`${nextIngredient.name} adicionado ao forno!`);
            updateOvenDisplay();
        }

        // Selecionar receita do forno
        function selectOvenRecipe(recipeIndex) {
            if (gameState.oven.baking) return;
            
            // Remover seleção anterior
            if (gameState.oven.selectedRecipe !== null) {
                document.getElementById(`oven-recipe-${gameState.oven.selectedRecipe}`).classList.remove('selected');
            }
            
            // Selecionar nova receita
            gameState.oven.selectedRecipe = recipeIndex;
            document.getElementById(`oven-recipe-${recipeIndex}`).classList.add('selected');
            
            updateOvenDisplay();
        }

        // Iniciar assamento
        function startBaking() {
            if (gameState.oven.baking) return;
            if (gameState.oven.selectedRecipe === null) return;
            
            const recipe = ovenRecipes[gameState.oven.selectedRecipe];
            
            // Verificar se tem lenha
            if (!gameState.oven.slots[0] || gameState.oven.slots[0].quantity < 3) {
                return;
            }
            
            // Verificar ingredientes
            const availableIngredients = {};
            for (let i = 1; i < 5; i++) {
                if (gameState.oven.slots[i]) {
                    const ingredient = gameState.oven.slots[i];
                    if (availableIngredients[ingredient.name]) {
                        availableIngredients[ingredient.name] += ingredient.quantity;
                    } else {
                        availableIngredients[ingredient.name] = ingredient.quantity;
                    }
                }
            }
            
            // Verificar se tem todos os ingredientes necessários
            let canBake = true;
            recipe.ingredients.forEach(reqIngredient => {
                if (!availableIngredients[reqIngredient.name] || 
                    availableIngredients[reqIngredient.name] < reqIngredient.quantity) {
                    canBake = false;
                }
            });
            
            if (!canBake) return;
            
            // Iniciar assamento
            gameState.oven.baking = true;
            
            // Consumir ingredientes necessários
            recipe.ingredients.forEach(reqIngredient => {
                let needed = reqIngredient.quantity;
                for (let i = 1; i < 5; i++) {
                    if (gameState.oven.slots[i] && 
                        gameState.oven.slots[i].name === reqIngredient.name && 
                        needed > 0) {
                        const consumed = Math.min(needed, gameState.oven.slots[i].quantity);
                        gameState.oven.slots[i].quantity -= consumed;
                        needed -= consumed;
                        
                        if (gameState.oven.slots[i].quantity <= 0) {
                            gameState.oven.slots[i] = null;
                        }
                    }
                }
            });
            
            updateOvenDisplay();
            
            // Assar
            gameState.oven.bakingTimer = setTimeout(() => {
                finishBaking();
            }, recipe.cookTime);
        }

        // Finalizar assamento
        function finishBaking() {
            const recipe = ovenRecipes[gameState.oven.selectedRecipe];
            
            // Adicionar comida ao celeiro
            if (!gameState.inventory[recipe.name]) {
                gameState.inventory[recipe.name] = { count: 0, icon: recipe.icon };
            }
            gameState.inventory[recipe.name].count += 1;
            
            // Consumir toda a lenha
            gameState.oven.slots[0] = null;
            
            // Resetar forno
            gameState.oven.baking = false;
            gameState.oven.selectedRecipe = null;
            gameState.oven.bakingTimer = null;
            
            // Limpar seleção de receita
            document.querySelectorAll('#ovenRecipes .recipe-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            showMessage(`${recipe.name} pronto! Enviado para o celeiro.`);
            updateOvenDisplay();
            updateInventoryDisplay();
        }

        // Atualizar display do forno
        function updateOvenDisplay() {
            if (!gameState.hasStove) return;
            
            const bakeButton = document.getElementById('bakeButton');
            
            // Atualizar slots
            for (let i = 0; i < 5; i++) {
                const slotElement = document.getElementById(`oven-slot-${i}`);
                if (!slotElement) continue;
                
                if (gameState.oven.baking) {
                    slotElement.className = 'stove-slot cooking';
                } else if (gameState.oven.slots[i]) {
                    const slot = gameState.oven.slots[i];
                    slotElement.className = i === 0 ? 'stove-slot fuel' : 'stove-slot';
                    slotElement.innerHTML = `
                        <div style="font-size: 1.5rem;">${slot.icon}</div>
                        <div style="color: white; font-size: 0.7rem;">${slot.quantity}x</div>
                    `;
                } else {
                    slotElement.className = i === 0 ? 'stove-slot fuel empty' : 'stove-slot empty';
                    if (i === 0) {
                        slotElement.innerHTML = `
                            <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Lenha</div>
                            <div style="color: white; font-size: 0.6rem; opacity: 0.5;">3x 🔥</div>
                        `;
                    } else {
                        slotElement.innerHTML = `
                            <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Ingrediente</div>
                            <div style="color: white; font-size: 0.6rem; opacity: 0.5;">${i}</div>
                        `;
                    }
                }
            }
            
            // Atualizar botão de assar
            const canBake = gameState.oven.selectedRecipe !== null && 
                           gameState.oven.slots[0] && 
                           gameState.oven.slots[0].quantity >= 3 &&
                           !gameState.oven.baking;
            
            bakeButton.disabled = !canBake;
            
            if (gameState.oven.baking) {
                bakeButton.textContent = '🔥 Assando...';
            } else {
                bakeButton.textContent = '🍞 Assar';
            }
        }

        // Atualizar display do fogão
        function updateStoveDisplay() {
            if (!gameState.hasStove) return;
            
            const cookButton = document.getElementById('cookButton');
            
            // Atualizar slots
            for (let i = 0; i < 5; i++) {
                const slotElement = document.getElementById(`stove-slot-${i}`);
                if (!slotElement) continue;
                
                if (gameState.stove.cooking) {
                    slotElement.className = 'stove-slot cooking';
                } else if (gameState.stove.slots[i]) {
                    const slot = gameState.stove.slots[i];
                    slotElement.className = i === 0 ? 'stove-slot fuel' : 'stove-slot';
                    slotElement.innerHTML = `
                        <div style="font-size: 1.5rem;">${slot.icon}</div>
                        <div style="color: white; font-size: 0.7rem;">${slot.quantity}x</div>
                    `;
                } else {
                    slotElement.className = i === 0 ? 'stove-slot fuel empty' : 'stove-slot empty';
                    if (i === 0) {
                        slotElement.innerHTML = `
                            <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Lenha</div>
                            <div style="color: white; font-size: 0.6rem; opacity: 0.5;">2x 🔥</div>
                        `;
                    } else {
                        slotElement.innerHTML = `
                            <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Ingrediente</div>
                            <div style="color: white; font-size: 0.6rem; opacity: 0.5;">${i}</div>
                        `;
                    }
                }
            }
            
            // Atualizar botão de cozinhar
            const canCook = gameState.stove.selectedRecipe !== null && 
                           gameState.stove.slots[0] && 
                           gameState.stove.slots[0].quantity >= 2 &&
                           !gameState.stove.cooking;
            
            cookButton.disabled = !canCook;
            
            if (gameState.stove.cooking) {
                cookButton.textContent = '🔥 Cozinhando...';
            } else {
                cookButton.textContent = '🍳 Cozinhar';
            }
        }

        // Adicionar grama ao secador
        function addGrassToDryer() {
            if (gameState.hayMaker.dryerSlot || gameState.hayMaker.drying) return;
            
            // Verificar se tem 8 gramas no inventário
            if (!gameState.inventory['Grama'] || gameState.inventory['Grama'].count < 8) {
                showMessage('Você precisa de 8 gramas para usar o secador!');
                return;
            }
            
            // Remover 8 gramas do inventário
            gameState.inventory['Grama'].count -= 8;
            if (gameState.inventory['Grama'].count === 0) {
                delete gameState.inventory['Grama'];
            }
            
            // Adicionar ao secador
            gameState.hayMaker.dryerSlot = { icon: '☘️', name: 'Grama', quantity: 8 };
            
            updateHayMakerDisplay();
            updateInventoryDisplay();
        }

        // Iniciar secagem
        function startDrying() {
            if (!gameState.hayMaker.dryerSlot || gameState.hayMaker.drying) return;
            
            gameState.hayMaker.drying = true;
            updateHayMakerDisplay();
            
            // Secar por 30 segundos
            gameState.hayMaker.dryingTimer = setTimeout(() => {
                // Adicionar 8 gramas secas ao inventário
                if (!gameState.inventory['Grama Seca']) {
                    gameState.inventory['Grama Seca'] = { count: 0, icon: '🌾' };
                }
                gameState.inventory['Grama Seca'].count += 8;
                
                // Limpar slot do secador
                gameState.hayMaker.dryerSlot = null;
                gameState.hayMaker.drying = false;
                gameState.hayMaker.dryingTimer = null;
                
                showMessage('Grama seca pronta! Enviada para o celeiro.');
                updateHayMakerDisplay();
                updateInventoryDisplay();
            }, 30000); // 30 segundos
        }

        // Adicionar grama seca ao fazer feno
        function addDriedGrassToHay() {
            if (gameState.hayMaker.haySlot || gameState.hayMaker.making) return;
            
            // Verificar se tem 4 gramas secas no inventário
            if (!gameState.inventory['Grama Seca'] || gameState.inventory['Grama Seca'].count < 4) {
                showMessage('Você precisa de 4 gramas secas para fazer feno!');
                return;
            }
            
            // Remover 4 gramas secas do inventário
            gameState.inventory['Grama Seca'].count -= 4;
            if (gameState.inventory['Grama Seca'].count === 0) {
                delete gameState.inventory['Grama Seca'];
            }
            
            // Adicionar ao slot de fazer feno
            gameState.hayMaker.haySlot = { icon: '🌾', name: 'Grama Seca', quantity: 4 };
            
            updateHayMakerDisplay();
            updateInventoryDisplay();
        }

        // Iniciar produção de feno
        function startHayMaking() {
            if (!gameState.hayMaker.haySlot || gameState.hayMaker.making) return;
            
            gameState.hayMaker.making = true;
            updateHayMakerDisplay();
            
            // Fazer feno por 10 segundos
            gameState.hayMaker.makingTimer = setTimeout(() => {
                // Adicionar 1 feno ao inventário
                if (!gameState.inventory['Feno']) {
                    gameState.inventory['Feno'] = { count: 0, icon: '🟨' };
                }
                gameState.inventory['Feno'].count += 1;
                
                // Limpar slot de fazer feno
                gameState.hayMaker.haySlot = null;
                gameState.hayMaker.making = false;
                gameState.hayMaker.makingTimer = null;
                
                showMessage('Feno pronto! Enviado para o celeiro.');
                updateHayMakerDisplay();
                updateInventoryDisplay();
            }, 10000); // 10 segundos
        }

        // Atualizar display do secador/feno
        function updateHayMakerDisplay() {
            if (!gameState.hasHayMaker) return;
            
            const dryerSlot = document.getElementById('dryerSlot');
            const dryButton = document.getElementById('dryButton');
            const haySlot = document.getElementById('haySlot');
            const hayButton = document.getElementById('hayButton');
            
            // Atualizar secador
            if (gameState.hayMaker.drying) {
                dryerSlot.className = 'lumber-slot processing';
                dryerSlot.innerHTML = `
                    <div style="font-size: 2rem;">☘️</div>
                    <div style="color: white; font-size: 0.7rem;">Secando...</div>
                `;
                dryButton.disabled = true;
                dryButton.textContent = '☀️ Secando...';
            } else if (gameState.hayMaker.dryerSlot) {
                dryerSlot.className = 'lumber-slot';
                dryerSlot.innerHTML = `
                    <div style="font-size: 2rem;">${gameState.hayMaker.dryerSlot.icon}</div>
                    <div style="color: white; font-size: 0.8rem;">${gameState.hayMaker.dryerSlot.quantity}x</div>
                `;
                dryButton.disabled = false;
                dryButton.textContent = '☀️ Secar';
            } else {
                dryerSlot.className = 'lumber-slot empty';
                dryerSlot.innerHTML = `
                    <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                    <div style="color: white; font-size: 0.55rem; opacity: 0.5;">8x Grama</div>
                `;
                dryButton.disabled = true;
                dryButton.textContent = '☀️ Secar';
            }
            
            // Atualizar fazer feno
            if (gameState.hayMaker.making) {
                haySlot.className = 'lumber-slot processing';
                haySlot.innerHTML = `
                    <div style="font-size: 2rem;">🌾</div>
                    <div style="color: white; font-size: 0.7rem;">Fazendo...</div>
                `;
                hayButton.disabled = true;
                hayButton.textContent = '🌾 Fazendo...';
            } else if (gameState.hayMaker.haySlot) {
                haySlot.className = 'lumber-slot';
                haySlot.innerHTML = `
                    <div style="font-size: 2rem;">${gameState.hayMaker.haySlot.icon}</div>
                    <div style="color: white; font-size: 0.8rem;">${gameState.hayMaker.haySlot.quantity}x</div>
                `;
                hayButton.disabled = false;
                hayButton.textContent = '🌾 Fazer';
            } else {
                haySlot.className = 'lumber-slot empty';
                haySlot.innerHTML = `
                    <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                    <div style="color: white; font-size: 0.55rem; opacity: 0.5;">4x Grama Seca</div>
                `;
                hayButton.disabled = true;
                hayButton.textContent = '🌾 Fazer';
            }
        }

        // Inicializar pasto das vacas
        function initializeCowPasture() {
            gameState.cowPasture.slots = [];
            
            // Criar 4 slots para vacas
            for (let i = 0; i < 4; i++) {
                gameState.cowPasture.slots.push({
                    id: i,
                    hasCow: false,
                    cow: null,
                    feedSlot: null, // Feno no slot de alimentação
                    eating: false,
                    producing: false,
                    resting: false,
                    products: [], // Leites e esterco prontos para coleta
                    eatingTimer: null,
                    producingTimer: null,
                    restingTimer: null
                });
            }
            
            createCowPastureDisplay();
        }

        // Criar display do pasto das vacas
        function createCowPastureDisplay() {
            const container = document.getElementById('cowPastureContainer');
            container.innerHTML = '';
            
            gameState.cowPasture.slots.forEach((slot, index) => {
                const slotElement = document.createElement('div');
                slotElement.className = 'cow-slot empty';
                slotElement.id = `cow-slot-${index}`;
                slotElement.onclick = () => handleCowSlotClick(index);
                
                updateCowSlotDisplay(index);
                container.appendChild(slotElement);
            });
        }

        // Atualizar display do slot da vaca
        function updateCowSlotDisplay(slotIndex) {
            const slot = gameState.cowPasture.slots[slotIndex];
            const slotElement = document.getElementById(`cow-slot-${slotIndex}`);
            
            if (!slotElement) return;
            
            if (!slot.hasCow) {
                slotElement.className = 'cow-slot empty';
                slotElement.innerHTML = `
                    <div style="color: white; font-size: 0.9rem; opacity: 0.7;">Slot Vazio</div>
                    <div style="color: white; font-size: 0.7rem; opacity: 0.5;">Compre uma vaca</div>
                `;
            } else {
                let className = 'cow-slot';
                if (slot.eating) className += ' eating';
                else if (slot.producing) className += ' producing';
                else if (slot.resting) className += ' resting';
                else if (slot.products.length > 0) className += ' ready-to-collect';
                
                slotElement.className = className;
                
                let status = 'Esperando';
                if (slot.eating) status = 'Comendo...';
                else if (slot.producing) status = 'Produzindo...';
                else if (slot.resting) status = 'Descansando...';
                else if (slot.products.length > 0) status = 'Pronto para coleta!';
                else if (!slot.feedSlot) status = 'Precisa de feno';
                
                let productsHtml = '';
                if (slot.products.length > 0) {
                    productsHtml = '<div class="cow-products">';
                    slot.products.forEach((product, index) => {
                        productsHtml += `<div class="cow-product" onclick="collectCowProduct(${slotIndex}, ${index})">${product.icon}</div>`;
                    });
                    productsHtml += '</div>';
                }
                
                slotElement.innerHTML = `
                    ${productsHtml}
                    <span class="cow-icon">🐄</span>
                    <div class="cow-name">Vaca ${slotIndex + 1}</div>
                    <div class="cow-status">${status}</div>
                    <div class="cow-feed-slot ${slot.feedSlot ? 'has-food' : ''}" onclick="addFeedToCow(${slotIndex})">
                        ${slot.feedSlot ? '🟨' : ''}
                    </div>
                `;
            }
        }

        // Lidar com clique no slot da vaca
        function handleCowSlotClick(slotIndex) {
            const slot = gameState.cowPasture.slots[slotIndex];
            
            if (!slot.hasCow) {
                // Slot vazio - não faz nada (vaca deve ser comprada no mercado)
                return;
            }
            
            // Se tem produtos para coletar, coletar todos
            if (slot.products.length > 0) {
                collectAllCowProducts(slotIndex);
            }
        }

        // Adicionar vaca ao pasto
        function addCowToPasture() {
            // Encontrar primeiro slot vazio
            const emptySlot = gameState.cowPasture.slots.find(slot => !slot.hasCow);
            
            if (!emptySlot) {
                showMessage('Pasto lotado! Máximo 4 vacas.');
                return;
            }
            
            emptySlot.hasCow = true;
            emptySlot.cow = { name: `Vaca ${emptySlot.id + 1}` };
            
            updateCowSlotDisplay(emptySlot.id);
            showMessage(`Vaca adicionada ao pasto! Alimente-a com feno.`);
        }

        // Adicionar feno à vaca
        function addFeedToCow(slotIndex) {
            event.stopPropagation(); // Evitar trigger do clique do slot
            
            const slot = gameState.cowPasture.slots[slotIndex];
            
            if (!slot.hasCow || slot.feedSlot || slot.eating || slot.producing || slot.resting) {
                return;
            }
            
            // Verificar se tem feno no inventário
            if (!gameState.inventory['Feno'] || gameState.inventory['Feno'].count <= 0) {
                showMessage('Você precisa de feno para alimentar a vaca!');
                return;
            }
            
            // Remover feno do inventário
            gameState.inventory['Feno'].count -= 1;
            if (gameState.inventory['Feno'].count === 0) {
                delete gameState.inventory['Feno'];
            }
            
            // Adicionar feno ao slot da vaca
            slot.feedSlot = { icon: '🟨', name: 'Feno' };
            
            // Iniciar processo de comer (15 segundos)
            slot.eating = true;
            slot.eatingTimer = setTimeout(() => {
                finishEating(slotIndex);
            }, 15000); // 15 segundos
            
            updateCowSlotDisplay(slotIndex);
            updateInventoryDisplay();
            showMessage('Vaca começou a comer o feno!');
        }

        // Finalizar processo de comer
        function finishEating(slotIndex) {
            const slot = gameState.cowPasture.slots[slotIndex];
            
            slot.eating = false;
            slot.feedSlot = null; // Feno foi consumido
            slot.producing = true;
            
            // Iniciar produção (10 segundos)
            slot.producingTimer = setTimeout(() => {
                finishProducing(slotIndex);
            }, 10000); // 10 segundos
            
            updateCowSlotDisplay(slotIndex);
        }

        // Finalizar produção
        function finishProducing(slotIndex) {
            const slot = gameState.cowPasture.slots[slotIndex];
            
            slot.producing = false;
            
            // Adicionar produtos (3 leites + 1 esterco)
            slot.products = [
                { icon: '🥛', name: 'Leite' },
                { icon: '🥛', name: 'Leite' },
                { icon: '🥛', name: 'Leite' },
                { icon: '💩', name: 'Esterco' }
            ];
            
            updateCowSlotDisplay(slotIndex);
            showMessage('Vaca produziu leite e esterco! Clique para coletar.');
        }

        // Coletar produto específico da vaca
        function collectCowProduct(slotIndex, productIndex) {
            event.stopPropagation(); // Evitar trigger do clique do slot
            
            const slot = gameState.cowPasture.slots[slotIndex];
            const product = slot.products[productIndex];
            
            if (!product) return;
            
            // Adicionar ao inventário
            if (!gameState.inventory[product.name]) {
                gameState.inventory[product.name] = { count: 0, icon: product.icon };
            }
            gameState.inventory[product.name].count += 1;
            
            // Remover produto da vaca
            slot.products.splice(productIndex, 1);
            
            // Se coletou todos os produtos, iniciar descanso
            if (slot.products.length === 0) {
                startCowResting(slotIndex);
            }
            
            updateCowSlotDisplay(slotIndex);
            updateInventoryDisplay();
        }

        // Coletar todos os produtos da vaca
        function collectAllCowProducts(slotIndex) {
            const slot = gameState.cowPasture.slots[slotIndex];
            
            if (slot.products.length === 0) return;
            
            // Adicionar todos os produtos ao inventário
            slot.products.forEach(product => {
                if (!gameState.inventory[product.name]) {
                    gameState.inventory[product.name] = { count: 0, icon: product.icon };
                }
                gameState.inventory[product.name].count += 1;
            });
            
            const productCount = slot.products.length;
            slot.products = [];
            
            // Iniciar descanso
            startCowResting(slotIndex);
            
            updateCowSlotDisplay(slotIndex);
            updateInventoryDisplay();
            showMessage(`Coletou ${productCount} produtos da vaca!`);
        }

        // Iniciar descanso da vaca
        function startCowResting(slotIndex) {
            const slot = gameState.cowPasture.slots[slotIndex];
            
            slot.resting = true;
            
            // Descansar por 10 minutos
            slot.restingTimer = setTimeout(() => {
                slot.resting = false;
                updateCowSlotDisplay(slotIndex);
                showMessage(`Vaca ${slotIndex + 1} terminou de descansar!`);
            }, 600000); // 10 minutos
            
            updateCowSlotDisplay(slotIndex);
        }

        // Criar display da composteira
        function createComposterDisplay() {
            const slotsContainer = document.getElementById('composterSlots');
            
            // Criar 3 slots da composteira
            slotsContainer.innerHTML = '';
            const slotLabels = ['Lírio', 'Galho', 'Esterco'];
            const slotIcons = ['🌺', '🌿', '💩'];
            
            for (let i = 0; i < 3; i++) {
                const slot = document.createElement('div');
                slot.className = 'composter-slot empty';
                slot.id = `composter-slot-${i}`;
                slot.innerHTML = `
                    <div style="color: white; font-size: 0.7rem; opacity: 0.7;">${slotLabels[i]}</div>
                    <div style="color: white; font-size: 0.6rem; opacity: 0.5;">${slotIcons[i]}</div>
                `;
                slot.onclick = () => addToComposter(i);
                slotsContainer.appendChild(slot);
            }
            
            updateComposterDisplay();
        }

        // Adicionar item à composteira
        function addToComposter(slotIndex) {
            if (gameState.composter.composting) return;
            if (gameState.composter.slots[slotIndex]) return; // Slot já ocupado
            
            const itemNames = ['Lírio', 'Galho', 'Esterco'];
            const itemName = itemNames[slotIndex];
            
            // Verificar se tem o item no inventário
            if (!gameState.inventory[itemName] || gameState.inventory[itemName].count <= 0) {
                showMessage(`Você precisa de ${itemName} para a composteira!`);
                return;
            }
            
            const item = gameState.inventory[itemName];
            
            // Remover do inventário
            gameState.inventory[itemName].count -= 1;
            if (gameState.inventory[itemName].count === 0) {
                delete gameState.inventory[itemName];
            }
            
            // Adicionar à composteira
            gameState.composter.slots[slotIndex] = { 
                name: itemName, 
                icon: item.icon 
            };
            
            showMessage(`${itemName} adicionado à composteira!`);
            updateComposterDisplay();
            updateInventoryDisplay();
        }

        // Iniciar compostagem
        function startComposting() {
            if (gameState.composter.composting) return;
            
            // Verificar se todos os slots estão preenchidos
            if (!gameState.composter.slots[0] || !gameState.composter.slots[1] || !gameState.composter.slots[2]) {
                showMessage('Você precisa de Lírio, Galho e Esterco para fazer adubo!');
                return;
            }
            
            // Iniciar compostagem
            gameState.composter.composting = true;
            updateComposterDisplay();
            
            // Compostar por 30 segundos
            gameState.composter.compostingTimer = setTimeout(() => {
                finishComposting();
            }, 30000); // 30 segundos
        }

        // Finalizar compostagem
        function finishComposting() {
            // Adicionar 5 adubos ao cabeçalho
            gameState.fertilizer += 5;
            
            // Limpar slots da composteira
            gameState.composter.slots = [null, null, null];
            gameState.composter.composting = false;
            gameState.composter.compostingTimer = null;
            
            showMessage('Adubo pronto! 5 adubos adicionados ao cabeçalho.');
            updateComposterDisplay();
            updateDisplay();
        }

        // Atualizar display da composteira
        function updateComposterDisplay() {
            if (!gameState.composter.hasComposter) return;
            
            const composterButton = document.getElementById('composterButton');
            const slotLabels = ['Lírio', 'Galho', 'Esterco'];
            const slotIcons = ['🌺', '🌿', '💩'];
            
            // Atualizar slots
            for (let i = 0; i < 3; i++) {
                const slotElement = document.getElementById(`composter-slot-${i}`);
                if (!slotElement) continue;
                
                if (gameState.composter.composting) {
                    slotElement.className = 'composter-slot composting';
                } else if (gameState.composter.slots[i]) {
                    const slot = gameState.composter.slots[i];
                    slotElement.className = 'composter-slot';
                    slotElement.innerHTML = `
                        <div style="font-size: 1.5rem;">${slot.icon}</div>
                        <div style="color: white; font-size: 0.7rem;">${slot.name}</div>
                    `;
                } else {
                    slotElement.className = 'composter-slot empty';
                    slotElement.innerHTML = `
                        <div style="color: white; font-size: 0.7rem; opacity: 0.7;">${slotLabels[i]}</div>
                        <div style="color: white; font-size: 0.6rem; opacity: 0.5;">${slotIcons[i]}</div>
                    `;
                }
            }
            
            // Atualizar botão
            const canCompost = gameState.composter.slots[0] && 
                              gameState.composter.slots[1] && 
                              gameState.composter.slots[2] &&
                              !gameState.composter.composting;
            
            composterButton.disabled = !canCompost;
            
            if (gameState.composter.composting) {
                composterButton.textContent = '🌱 Fazendo...';
            } else {
                composterButton.textContent = '🌱 Fazer';
            }
        }

        // Adicionar leite à queijeira
        function addMilkToCheeseMaker() {
            if (gameState.cheeseMaker.slot || gameState.cheeseMaker.curing) return;
            
            // Verificar se tem 2 leites no inventário
            if (!gameState.inventory['Leite'] || gameState.inventory['Leite'].count < 2) {
                showMessage('Você precisa de 2 leites para fazer queijo!');
                return;
            }
            
            // Remover 2 leites do inventário
            gameState.inventory['Leite'].count -= 2;
            if (gameState.inventory['Leite'].count === 0) {
                delete gameState.inventory['Leite'];
            }
            
            // Adicionar à queijeira
            gameState.cheeseMaker.slot = { icon: '🥛', name: 'Leite', quantity: 2 };
            
            updateCheeseMakerDisplay();
            updateInventoryDisplay();
            showMessage('2 leites adicionados à queijeira!');
        }

        // Iniciar cura do queijo
        function startCuring() {
            if (!gameState.cheeseMaker.slot || gameState.cheeseMaker.curing) return;
            
            gameState.cheeseMaker.curing = true;
            updateCheeseMakerDisplay();
            
            // Curar por 1 minuto
            gameState.cheeseMaker.curingTimer = setTimeout(() => {
                finishCuring();
            }, 60000); // 1 minuto
        }

        // Finalizar cura do queijo
        function finishCuring() {
            // Adicionar 1 queijo ao celeiro
            if (!gameState.inventory['Queijo']) {
                gameState.inventory['Queijo'] = { count: 0, icon: '🧀' };
            }
            gameState.inventory['Queijo'].count += 1;
            
            // Limpar slot da queijeira
            gameState.cheeseMaker.slot = null;
            gameState.cheeseMaker.curing = false;
            gameState.cheeseMaker.curingTimer = null;
            
            showMessage('Queijo pronto! Enviado para o celeiro.');
            updateCheeseMakerDisplay();
            updateInventoryDisplay();
        }

        // Atualizar display da queijeira
        function updateCheeseMakerDisplay() {
            if (!gameState.cheeseMaker.hasCheeseMaker) return;
            
            const cheeseMakerSlot = document.getElementById('cheeseMakerSlot');
            const cheeseMakerButton = document.getElementById('cheeseMakerButton');
            
            if (gameState.cheeseMaker.curing) {
                cheeseMakerSlot.className = 'cheese-maker-slot curing';
                cheeseMakerSlot.innerHTML = `
                    <div style="font-size: 2rem;">🥛</div>
                    <div style="color: white; font-size: 0.7rem;">Curando...</div>
                `;
                cheeseMakerButton.disabled = true;
                cheeseMakerButton.textContent = '🧀 Curando...';
            } else if (gameState.cheeseMaker.slot) {
                cheeseMakerSlot.className = 'cheese-maker-slot';
                cheeseMakerSlot.innerHTML = `
                    <div style="font-size: 2rem;">${gameState.cheeseMaker.slot.icon}</div>
                    <div style="color: white; font-size: 0.8rem;">${gameState.cheeseMaker.slot.quantity}x</div>
                `;
                cheeseMakerButton.disabled = false;
                cheeseMakerButton.textContent = '🧀 Curar';
            } else {
                cheeseMakerSlot.className = 'cheese-maker-slot empty';
                cheeseMakerSlot.innerHTML = `
                    <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                    <div style="color: white; font-size: 0.55rem; opacity: 0.5;">2x 🥛</div>
                `;
                cheeseMakerButton.disabled = true;
                cheeseMakerButton.textContent = '🧀 Curar';
            }
        }

        // Adicionar uvas à máquina de suco
        function addGrapesToJuiceMaker() {
            if (gameState.juiceMaker.slot || gameState.juiceMaker.producing) return;
            
            // Verificar se tem 3 uvas no inventário
            if (!gameState.inventory['Uva'] || gameState.inventory['Uva'].count < 3) {
                showMessage('Você precisa de 3 uvas para fazer suco!');
                return;
            }
            
            // Remover 3 uvas do inventário
            gameState.inventory['Uva'].count -= 3;
            if (gameState.inventory['Uva'].count === 0) {
                delete gameState.inventory['Uva'];
            }
            
            // Adicionar à máquina de suco
            gameState.juiceMaker.slot = { icon: '🍇', name: 'Uva', quantity: 3 };
            
            updateJuiceMakerDisplay();
            updateInventoryDisplay();
            showMessage('3 uvas adicionadas à máquina de suco!');
        }

        // Iniciar produção de suco
        function startJuiceProduction() {
            if (!gameState.juiceMaker.slot || gameState.juiceMaker.producing) return;
            
            gameState.juiceMaker.producing = true;
            updateJuiceMakerDisplay();
            
            // Produzir por 20 segundos
            gameState.juiceMaker.producingTimer = setTimeout(() => {
                finishJuiceProduction();
            }, 20000); // 20 segundos
        }

        // Finalizar produção de suco
        function finishJuiceProduction() {
            // Adicionar 1 garrafa de suco ao celeiro
            if (!gameState.inventory['Garrafa de Suco']) {
                gameState.inventory['Garrafa de Suco'] = { count: 0, icon: '🧃' };
            }
            gameState.inventory['Garrafa de Suco'].count += 1;
            
            // Limpar slot da máquina de suco
            gameState.juiceMaker.slot = null;
            gameState.juiceMaker.producing = false;
            gameState.juiceMaker.producingTimer = null;
            
            showMessage('Garrafa de Suco pronta! Enviada para o celeiro.');
            updateJuiceMakerDisplay();
            updateInventoryDisplay();
        }

        // Atualizar display da máquina de suco
        function updateJuiceMakerDisplay() {
            if (!gameState.juiceMaker.hasJuiceMaker) return;
            
            const juiceMakerSlot = document.getElementById('juiceMakerSlot');
            const juiceMakerButton = document.getElementById('juiceMakerButton');
            
            if (gameState.juiceMaker.producing) {
                juiceMakerSlot.className = 'juice-maker-slot producing';
                juiceMakerSlot.innerHTML = `
                    <div style="font-size: 2rem;">🍇</div>
                    <div style="color: white; font-size: 0.7rem;">Produzindo...</div>
                `;
                juiceMakerButton.disabled = true;
                juiceMakerButton.textContent = '🧃 Produzindo...';
            } else if (gameState.juiceMaker.slot) {
                juiceMakerSlot.className = 'juice-maker-slot';
                juiceMakerSlot.innerHTML = `
                    <div style="font-size: 2rem;">${gameState.juiceMaker.slot.icon}</div>
                    <div style="color: white; font-size: 0.8rem;">${gameState.juiceMaker.slot.quantity}x</div>
                `;
                juiceMakerButton.disabled = false;
                juiceMakerButton.textContent = '🧃 Produzir';
            } else {
                juiceMakerSlot.className = 'juice-maker-slot empty';
                juiceMakerSlot.innerHTML = `
                    <div style="color: white; font-size: 0.7rem; opacity: 0.7;">Slot Vazio</div>
                    <div style="color: white; font-size: 0.55rem; opacity: 0.5;">3x 🍇</div>
                `;
                juiceMakerButton.disabled = true;
                juiceMakerButton.textContent = '🧃 Produzir';
            }
        }

        // Inicializar o jogo quando a página carregar
        window.onload = initGame;
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9716cd9f527a007b',t:'MTc1NTU3NjY0Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
