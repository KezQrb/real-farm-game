<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Farm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            transition: background-color 0.5s ease;
        }
        
        .farm-bg {
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
        }
        
        .rain-bg {
            background: linear-gradient(135deg, #708090 0%, #778899 100%);
        }
        
        .canteiro {
            width: 80px;
            height: 80px;
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .canteiro:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .canteiro.fertilized {
            background: #A0522D;
            box-shadow: inset 0 0 10px rgba(255,215,0,0.5);
        }
        
        .canteiro.planted {
            background: #228B22;
        }
        
        .canteiro.watered {
            background: #006400;
            box-shadow: inset 0 0 10px rgba(0,191,255,0.5);
        }
        
        .canteiro.ready {
            background: #32CD32;
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px #32CD32; }
            to { box-shadow: 0 0 20px #32CD32, 0 0 30px #32CD32; }
        }
        
        .seed-btn {
            width: 60px;
            height: 60px;
            border: 3px solid #8B4513;
            border-radius: 12px;
            background: #F5DEB3;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .seed-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .seed-btn.selected {
            border-color: #FFD700;
            background: #FFFACD;
            box-shadow: 0 0 15px #FFD700;
        }
        
        .rain-drop {
            position: absolute;
            color: #4169E1;
            font-size: 20px;
            animation: fall 1s linear infinite;
            pointer-events: none;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
        
        .slot {
            width: 50px;
            height: 50px;
            border: 2px solid #8B4513;
            border-radius: 8px;
            background: #F5DEB3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .slot:hover {
            background: #FFFACD;
            transform: scale(1.05);
        }
        
        .slot-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #FF6347;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .energy-bar {
            width: 200px;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #8B4513;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #44ff44);
            transition: width 0.3s ease;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            border: 4px solid #8B4513;
            background: #F5DEB3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            position: relative;
        }

        .avatar.sick {
            animation: shake 0.5s infinite;
            border-color: #ff4444;
        }

        .avatar.resting {
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body class="farm-bg min-h-screen overflow-x-auto">
    <!-- Cabe√ßalho -->
    <div class="bg-amber-100 border-b-4 border-amber-600 p-4 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-4xl font-bold text-amber-800" style="font-family: 'Fredoka One', cursive;">üöú Real Farm</h1>
            
            <!-- Avatar do Fazendeiro -->
            <div class="flex items-center gap-4 bg-green-100 border-2 border-green-600 rounded-lg px-4 py-2">
                <div class="text-center">
                    <div id="avatar" class="avatar">üë®‚Äçüåæ</div>
                    <div class="text-sm font-bold text-green-700">Voc√™</div>
                </div>
                <div class="flex flex-col gap-2">
                    <div class="flex items-center gap-2">
                        <span class="text-sm font-semibold">Energia:</span>
                        <div class="energy-bar">
                            <div id="energyFill" class="energy-fill" style="width: 100%"></div>
                        </div>
                        <span id="energyText" class="text-sm font-bold">200/200</span>
                    </div>
                    <div id="statusText" class="text-xs text-center text-green-600 font-semibold">Saud√°vel</div>
                    <div class="flex gap-2">
                        <button id="restBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold" onclick="startResting()">üò¥ Descansar</button>
                        <button id="eatBtn" class="bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs font-bold" onclick="showEatMenu()">üçΩÔ∏è Comer</button>
                    </div>
                </div>
            </div>
            
            <!-- Caixa de Correios -->
            <div class="flex items-center gap-4 bg-blue-100 border-2 border-blue-600 rounded-lg px-4 py-2">
                <div class="text-center">
                    <div id="mailbox" class="text-3xl cursor-pointer hover:scale-110 transition-transform" onclick="openMailbox()">üìÆ</div>
                    <div class="text-sm font-bold text-blue-700">Correios</div>
                </div>
                <div class="text-xs">
                    <div id="mailCount" class="text-blue-600 font-semibold">0 mensagens</div>
                    <div id="mailNotification" class="text-red-600 font-bold animate-pulse" style="display: none;">Nova mensagem!</div>
                </div>
            </div>

            <!-- Esta√ß√£o Atual -->
            <div class="flex items-center gap-4 bg-green-100 border-2 border-green-600 rounded-lg px-4 py-2">
                <div class="text-center">
                    <div id="currentSeason" class="text-2xl">üå∏</div>
                    <div id="seasonName" class="text-sm font-bold text-green-700">Primavera</div>
                </div>
                <div class="text-sm">
                    <div id="seasonTimer" class="text-gray-600">59:59</div>
                    <div id="seasonBonus" class="font-semibold text-green-600 text-xs">üå± Planta√ß√µes +10%</div>
                </div>
            </div>
            
            <div class="flex gap-6 text-xl font-bold text-amber-800">
                <div class="flex items-center gap-2">
                    <span>ü™ô</span>
                    <span id="coins">200</span>
                </div>
                <div class="flex items-center gap-2">
                    <span>üíß</span>
                    <span id="water">10</span>
                </div>
                <div class="flex items-center gap-2">
                    <span>üçÅ</span>
                    <span id="fertilizer">50</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu de Comer -->
    <div id="eatMenu" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                <h3 class="text-xl font-bold mb-4 text-center">üçΩÔ∏è Escolha o que comer</h3>
                <div id="foodOptions" class="space-y-2"></div>
                <button class="w-full mt-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded" onclick="closeEatMenu()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Telefone Modal -->
    <div id="phoneModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-blue-800">üìû Pedido Especial</h3>
                    <button class="text-gray-500 hover:text-gray-700 text-2xl" onclick="hangUpPhone()">&times;</button>
                </div>
                <div id="phoneOrderContent" class="space-y-4">
                    <!-- Conte√∫do do pedido ser√° inserido aqui -->
                </div>
                <div class="flex gap-2 mt-4">
                    <button id="acceptOrderBtn" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded" onclick="acceptOrder()">‚úÖ Aceitar</button>
                    <button class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded" onclick="rejectOrder()">‚ùå Recusar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Caixa de Correios Modal -->
    <div id="mailboxModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-blue-800">üìÆ Caixa de Correios</h3>
                    <button class="text-gray-500 hover:text-gray-700 text-2xl" onclick="closeMailbox()">&times;</button>
                </div>
                <div id="mailList" class="space-y-3">
                    <div class="text-center text-gray-500 py-8">
                        <div class="text-4xl mb-2">üì≠</div>
                        <div>Nenhuma mensagem ainda...</div>
                        <div class="text-sm mt-2">Cartas chegam a cada 40 minutos</div>
                        <div class="text-sm">Jornal chega a cada 25 minutos</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Composteira -->
    <div id="composterArea" class="max-w-7xl mx-auto px-6 pt-2" style="display: none;">
        <div class="bg-brown-100 border-4 border-brown-600 rounded-lg p-4 mb-4">
            <h3 class="text-xl font-bold text-brown-800 mb-3 text-center">üóëÔ∏è Composteira</h3>
            <div class="bg-white rounded-lg p-4 border-2 border-brown-300">
                <div class="grid grid-cols-4 gap-3 mb-3">
                    <!-- Slots de ingredientes -->
                    <div id="composterSlot1" class="slot" onclick="addIngredientToComposter(1)">
                        <div class="text-xs text-center text-gray-600 mt-1">üå∫</div>
                    </div>
                    <div id="composterSlot2" class="slot" onclick="addIngredientToComposter(2)">
                        <div class="text-xs text-center text-gray-600 mt-1">üåø</div>
                    </div>
                    <div id="composterSlot3" class="slot" onclick="addIngredientToComposter(3)">
                        <div class="text-xs text-center text-gray-600 mt-1">üí©x2</div>
                    </div>
                    <!-- Bot√£o fazer -->
                    <button id="composterButton" class="bg-brown-600 hover:bg-brown-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startComposting()" disabled>
                        üóëÔ∏è Fazer
                    </button>
                </div>
                <div id="composterRecipe" class="text-xs text-center text-gray-600">Receita: 1 l√≠rio + 1 galho + 2 estercos = 10 adubos</div>
            </div>
        </div>
    </div>

    <!-- Queijeira -->
    <div id="cheeseArea" class="max-w-7xl mx-auto px-6 pt-2" style="display: none;">
        <div class="bg-yellow-100 border-4 border-yellow-600 rounded-lg p-4 mb-4">
            <h3 class="text-xl font-bold text-yellow-800 mb-3 text-center">üßÄ Queijeira</h3>
            <div class="bg-white rounded-lg p-4 border-2 border-yellow-300">
                <div class="grid grid-cols-2 gap-3 mb-3">
                    <!-- Slot de leite -->
                    <div id="cheeseSlot" class="slot" onclick="addMilkToCheeseMaker()">
                        <div class="text-xs text-center text-gray-600 mt-1">ü•õx2</div>
                    </div>
                    <!-- Bot√£o curar -->
                    <button id="cheeseButton" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startCheeseMaking()" disabled>
                        üßÄ Curar
                    </button>
                </div>
                <div id="cheeseRecipe" class="text-xs text-center text-gray-600">Receita: 2 leites = 1 queijo</div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto p-6 grid grid-cols-12 gap-6 overflow-x-auto">
        <!-- Sementes (Coluna Esquerda) -->
        <div class="col-span-2">
            <h2 class="text-2xl font-bold text-green-800 mb-4 text-center">üå± Sementes</h2>
            <div class="grid grid-cols-2 gap-3">
                <button class="seed-btn selected" data-seed="üéÉ" data-name="Ab√≥bora">üéÉ</button>
                <button class="seed-btn" data-seed="ü•¨" data-name="Alface">ü•¨</button>
                <button class="seed-btn" data-seed="ü•î" data-name="Batata">ü•î</button>
                <button class="seed-btn" data-seed="ü•¶" data-name="Br√≥colis">ü•¶</button>
                <button class="seed-btn" data-seed="üî¥" data-name="Caf√©">üî¥</button>
                <button class="seed-btn" data-seed="ü•ï" data-name="Cenoura">ü•ï</button>
                <button class="seed-btn" data-seed="üåΩ" data-name="Milho">üåΩ</button>
                <button class="seed-btn" data-seed="üçÖ" data-name="Tomate">üçÖ</button>
                <button class="seed-btn" data-seed="üåæ" data-name="Trigo">üåæ</button>
                <button class="seed-btn" data-seed="üçá" data-name="Uva">üçá</button>
                <button class="seed-btn" data-seed="üç´" data-name="Cacau" style="display: none;">üç´</button>
                <button class="seed-btn" data-seed="üê≤" data-name="Pitaia" style="display: none;">üê≤</button>
                <button class="seed-btn" data-seed="ü•ë" data-name="Avocado" style="display: none;">ü•ë</button>
                <button class="seed-btn" data-seed="üü£" data-name="Lavanda" style="display: none;">üü£</button>
                <button class="seed-btn" data-seed="üå∏" data-name="Sakura" style="display: none;">üå∏</button>
                <button class="seed-btn" data-seed="üå∑" data-name="Tulipa" style="display: none;">üå∑</button>
            </div>
            
            <!-- Celeiro -->
            <div class="mt-6">
                <h3 class="text-xl font-bold text-amber-800 mb-3 text-center">üèöÔ∏è Celeiro</h3>
                <div class="bg-amber-100 border-4 border-amber-600 rounded-lg p-3 max-h-64 overflow-y-auto">
                    <div id="celeiro" class="flex flex-col gap-2"></div>
                </div>
            </div>
            
            <!-- Mercadinho -->
            <div class="mt-6">
                <h3 class="text-xl font-bold text-blue-800 mb-3 text-center">üè™ Mercadinho</h3>
                <div class="bg-blue-100 border-4 border-blue-600 rounded-lg p-3 max-h-64 overflow-y-auto">
                    <div id="mercadinho" class="space-y-2">
                        <div id="wellItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyWell()">
                            <span>ü™£ Po√ßo de √Ågua</span>
                            <span class="font-bold text-blue-600">100ü™ô</span>
                        </div>
                        <div id="forestItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyForest()">
                            <span>üå≤ Bosque</span>
                            <span class="font-bold text-green-600">200ü™ô</span>
                        </div>
                        <div id="axeItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyAxe()" style="display: none;">
                            <span>ü™ì Machado (40 usos)</span>
                            <span class="font-bold text-brown-600">50ü™ô</span>
                        </div>
                        <div id="grassFieldItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyGrassField()">
                            <span>üåø Campo de Grama</span>
                            <span class="font-bold text-green-600">150ü™ô</span>
                        </div>
                        <div id="pastureItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyPasture()">
                            <span>üêÑ Pasto das Vacas</span>
                            <span class="font-bold text-green-600">400ü™ô</span>
                        </div>
                        <div id="cowItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyCow()" style="display: none;">
                            <span>üêÑ Vaca</span>
                            <span class="font-bold text-brown-600">500ü™ô</span>
                        </div>
                        <div id="hayMakerItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyHayMaker()" style="display: none;">
                            <span>üü® Secador/Feno</span>
                            <span class="font-bold text-yellow-600">100ü™ô</span>
                        </div>
                        <div id="cookingAreaItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyCookingArea()">
                            <span>üç≥ Fog√£o & Forno</span>
                            <span class="font-bold text-red-600">300ü™ô</span>
                        </div>
                        <div id="composterItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyComposter()">
                            <span>üóëÔ∏è Composteira</span>
                            <span class="font-bold text-brown-600">250ü™ô</span>
                        </div>
                        <div id="cheeseItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyCheeseMaker()">
                            <span>üßÄ Queijeira</span>
                            <span class="font-bold text-yellow-600">200ü™ô</span>
                        </div>
                        <div id="juiceMakerItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyJuiceMaker()">
                            <span>üßÉ M√°quina de Suco</span>
                            <span class="font-bold text-purple-600">150ü™ô</span>
                        </div>
                        <div id="coffeeRoasterItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyCoffeeRoaster()">
                            <span>‚òï Torra de Caf√©</span>
                            <span class="font-bold text-amber-600">180ü™ô</span>
                        </div>
                        <div id="millItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyMill()">
                            <span>üè≠ Moinho</span>
                            <span class="font-bold text-gray-600">120ü™ô</span>
                        </div>
                        <div id="sheepPenItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buySheepPen()">
                            <span>üêë Curral das Ovelhas</span>
                            <span class="font-bold text-gray-600">350ü™ô</span>
                        </div>
                        <div id="sheepItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buySheep()" style="display: none;">
                            <span>üêë Ovelha</span>
                            <span class="font-bold text-brown-600">400ü™ô</span>
                        </div>
                        <div id="shearsItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyShears()" style="display: none;">
                            <span>‚úÇÔ∏è Tesoura de Tosquiar</span>
                            <span class="font-bold text-blue-600">80ü™ô</span>
                        </div>
                        <div id="spinningWheelItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buySpinningWheel()">
                            <span>üé° M√°quina de Fiar</span>
                            <span class="font-bold text-purple-600">120ü™ô</span>
                        </div>
                        <div id="chickenCoopItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyChickenCoop()">
                            <span>üêî Galinheiro</span>
                            <span class="font-bold text-yellow-600">300ü™ô</span>
                        </div>
                        <div id="chickenItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyChicken()" style="display: none;">
                            <span>üêì Galinha</span>
                            <span class="font-bold text-orange-600">150ü™ô</span>
                        </div>
                        <div id="mixerItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyMixer()">
                            <span>ü•£ Misturador</span>
                            <span class="font-bold text-orange-600">180ü™ô</span>
                        </div>
                        <div id="pigPenItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyPigPen()">
                            <span>üê∑ Chiqueiro</span>
                            <span class="font-bold text-pink-600">350ü™ô</span>
                        </div>
                        <div id="pigItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyPig()" style="display: none;">
                            <span>üê∑ Porco</span>
                            <span class="font-bold text-pink-600">200ü™ô</span>
                        </div>
                        <div id="vaccineItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyVaccine()">
                            <span>üíâ Vacina</span>
                            <span class="font-bold text-green-600">30ü™ô</span>
                        </div>
                        <div id="lakeItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyLake()">
                            <span>üèûÔ∏è Lago dos Peixes</span>
                            <span class="font-bold text-blue-600">250ü™ô</span>
                        </div>
                        <div id="fishingRodItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyFishingRod()" style="display: none;">
                            <span>üé£ Vara de Pesca (20 usos)</span>
                            <span class="font-bold text-blue-600">80ü™ô</span>
                        </div>
                        <div id="mineItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyMine()">
                            <span>‚õèÔ∏è Mina</span>
                            <span class="font-bold text-gray-600">400ü™ô</span>
                        </div>
                        <div id="pickaxeItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyPickaxe()" style="display: none;">
                            <span>‚õèÔ∏è Picareta (30 usos)</span>
                            <span class="font-bold text-gray-600">100ü™ô</span>
                        </div>
                        <div id="mineKeyItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyMineKey()" style="display: none;">
                            <span>üóùÔ∏è Chave da Mina</span>
                            <span class="font-bold text-yellow-600">50ü™ô</span>
                        </div>
                        <div id="birdFeederItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyBirdFeeder()">
                            <span>ü™∂ Comedouro</span>
                            <span class="font-bold text-green-600">150ü™ô</span>
                        </div>
                        <div id="beehiveItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyBeehive()">
                            <span>üçØ Colmeia</span>
                            <span class="font-bold text-yellow-600">200ü™ô</span>
                        </div>
                        <div id="phoneItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyPhone()">
                            <span>üìû Telefone</span>
                            <span class="font-bold text-blue-600">300ü™ô</span>
                        </div>
                        <div id="truckItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyTruck()" style="display: none;">
                            <span>üöö Caminhonete</span>
                            <span class="font-bold text-gray-600">800ü™ô</span>
                        </div>
                        <div id="dieselItem" class="flex justify-between items-center bg-white p-2 rounded cursor-pointer hover:bg-gray-50" onclick="buyDiesel()" style="display: none;">
                            <span>‚õΩ Diesel</span>
                            <span class="font-bold text-black-600">25ü™ô</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- √Årea Central -->
        <div class="col-span-8">
            <!-- Canteiros -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-green-800 mb-4 text-center">üåæ Planta√ß√£o</h2>
                <div class="grid grid-cols-4 gap-4 justify-center max-w-md mx-auto">
                    <div class="canteiro" data-canteiro="0"></div>
                    <div class="canteiro" data-canteiro="1"></div>
                    <div class="canteiro" data-canteiro="2"></div>
                    <div class="canteiro" data-canteiro="3"></div>
                    <div class="canteiro" data-canteiro="4"></div>
                    <div class="canteiro" data-canteiro="5"></div>
                    <div class="canteiro" data-canteiro="6"></div>
                    <div class="canteiro" data-canteiro="7"></div>
                </div>
            </div>

            <!-- Po√ßo de √Ågua -->
            <div id="wellArea" class="mb-8 text-center" style="display: none;">
                <div id="well" class="inline-block bg-blue-200 border-4 border-blue-600 rounded-full w-24 h-24 flex items-center justify-center text-4xl cursor-pointer hover:bg-blue-300 transition-colors" onclick="collectWater()">
                    ü™£
                </div>
                <p class="text-blue-700 font-semibold mt-2">Po√ßo de √Ågua Infinita</p>
            </div>

            <!-- Galinheiro -->
            <div id="chickenCoopArea" class="bg-yellow-100 border-4 border-yellow-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-yellow-800 mb-3 text-center">üêî Galinheiro</h3>
                <div class="grid grid-cols-2 gap-4">
                    <!-- 4 slots de galinhas -->
                    <div class="chicken-slot bg-white rounded-lg p-4 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Galinha 1</div>
                        <div id="chickenSlot0" class="chicken-container text-center mb-3" onclick="addChickenToSlot(0)" oncontextmenu="removeChickenFromSlot(0); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="chickenFeedSlot0" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedChicken(0)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="chickenStatus0" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="eggCollection0" class="egg-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">Ovos prontos!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectEggs(0)">ü•ö Coletar</button>
                        </div>
                        <div id="sacrificeBtn0" class="sacrifice-btn text-center" style="display: none;">
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm mt-2" onclick="sacrificeChicken(0)">üî™ Sacrificar</button>
                        </div>
                        <div id="chickenVaccineBtn0" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('chicken', 0)">üíâ Vacinar</button>
                            <div id="chickenSickTimer0" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="chicken-slot bg-white rounded-lg p-4 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Galinha 2</div>
                        <div id="chickenSlot1" class="chicken-container text-center mb-3" onclick="addChickenToSlot(1)" oncontextmenu="removeChickenFromSlot(1); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="chickenFeedSlot1" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedChicken(1)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="chickenStatus1" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="eggCollection1" class="egg-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">Ovos prontos!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectEggs(1)">ü•ö Coletar</button>
                        </div>
                        <div id="sacrificeBtn1" class="sacrifice-btn text-center" style="display: none;">
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm mt-2" onclick="sacrificeChicken(1)">üî™ Sacrificar</button>
                        </div>
                        <div id="chickenVaccineBtn1" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('chicken', 1)">üíâ Vacinar</button>
                            <div id="chickenSickTimer1" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="chicken-slot bg-white rounded-lg p-4 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Galinha 3</div>
                        <div id="chickenSlot2" class="chicken-container text-center mb-3" onclick="addChickenToSlot(2)" oncontextmenu="removeChickenFromSlot(2); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="chickenFeedSlot2" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedChicken(2)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="chickenStatus2" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="eggCollection2" class="egg-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">Ovos prontos!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectEggs(2)">ü•ö Coletar</button>
                        </div>
                        <div id="sacrificeBtn2" class="sacrifice-btn text-center" style="display: none;">
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm mt-2" onclick="sacrificeChicken(2)">üî™ Sacrificar</button>
                        </div>
                        <div id="chickenVaccineBtn2" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('chicken', 2)">üíâ Vacinar</button>
                            <div id="chickenSickTimer2" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="chicken-slot bg-white rounded-lg p-4 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Galinha 4</div>
                        <div id="chickenSlot3" class="chicken-container text-center mb-3" onclick="addChickenToSlot(3)" oncontextmenu="removeChickenFromSlot(3); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="chickenFeedSlot3" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedChicken(3)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="chickenStatus3" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="eggCollection3" class="egg-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">Ovos prontos!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectEggs(3)">ü•ö Coletar</button>
                        </div>
                        <div id="sacrificeBtn3" class="sacrifice-btn text-center" style="display: none;">
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm mt-2" onclick="sacrificeChicken(3)">üî™ Sacrificar</button>
                        </div>
                        <div id="chickenVaccineBtn3" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('chicken', 3)">üíâ Vacinar</button>
                            <div id="chickenSickTimer3" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                </div>
                
                <!-- √Årea de Pintinhos -->
                <div id="chickArea" class="mt-4 bg-orange-100 border-2 border-orange-300 rounded-lg p-3" style="display: none;">
                    <h4 class="text-lg font-bold text-orange-700 mb-2 text-center">üê£ Pintinhos</h4>
                    <div id="chickList" class="flex flex-wrap gap-2 justify-center"></div>
                </div>
            </div>

            <!-- Chiqueiro -->
            <div id="pigPenArea" class="bg-pink-100 border-4 border-pink-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-pink-800 mb-3 text-center">üê∑ Chiqueiro</h3>
                <div class="grid grid-cols-2 gap-4">
                    <!-- 4 slots de porcos -->
                    <div class="pig-slot bg-white rounded-lg p-4 border-2 border-pink-300">
                        <div class="text-center font-semibold text-pink-700 mb-2">Porco 1</div>
                        <div id="pigSlot0" class="pig-container text-center mb-3" onclick="addPigToSlot(0)" oncontextmenu="removePigFromSlot(0); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar porco</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="pigFeedSlot0" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedPig(0)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="pigStatus0" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="meatCollection0" class="meat-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">Carne pronta!</div>
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm" onclick="collectMeat(0)">ü•© Coletar</button>
                        </div>
                        <div id="pigVaccineBtn0" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('pig', 0)">üíâ Vacinar</button>
                            <div id="pigSickTimer0" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="pig-slot bg-white rounded-lg p-4 border-2 border-pink-300">
                        <div class="text-center font-semibold text-pink-700 mb-2">Porco 2</div>
                        <div id="pigSlot1" class="pig-container text-center mb-3" onclick="addPigToSlot(1)" oncontextmenu="removePigFromSlot(1); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar porco</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="pigFeedSlot1" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedPig(1)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="pigStatus1" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="meatCollection1" class="meat-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">Carne pronta!</div>
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm" onclick="collectMeat(1)">ü•© Coletar</button>
                        </div>
                        <div id="pigVaccineBtn1" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('pig', 1)">üíâ Vacinar</button>
                            <div id="pigSickTimer1" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="pig-slot bg-white rounded-lg p-4 border-2 border-pink-300">
                        <div class="text-center font-semibold text-pink-700 mb-2">Porco 3</div>
                        <div id="pigSlot2" class="pig-container text-center mb-3" onclick="addPigToSlot(2)" oncontextmenu="removePigFromSlot(2); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar porco</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="pigFeedSlot2" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedPig(2)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="pigStatus2" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="meatCollection2" class="meat-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">Carne pronta!</div>
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm" onclick="collectMeat(2)">ü•© Coletar</button>
                        </div>
                        <div id="pigVaccineBtn2" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('pig', 2)">üíâ Vacinar</button>
                            <div id="pigSickTimer2" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="pig-slot bg-white rounded-lg p-4 border-2 border-pink-300">
                        <div class="text-center font-semibold text-pink-700 mb-2">Porco 4</div>
                        <div id="pigSlot3" class="pig-container text-center mb-3" onclick="addPigToSlot(3)" oncontextmenu="removePigFromSlot(3); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar porco</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="pigFeedSlot3" class="feed-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedPig(3)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar ra√ß√£o</div>
                            <div id="pigStatus3" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="meatCollection3" class="meat-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">Carne pronta!</div>
                            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm" onclick="collectMeat(3)">ü•© Coletar</button>
                        </div>
                        <div id="pigVaccineBtn3" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('pig', 3)">üíâ Vacinar</button>
                            <div id="pigSickTimer3" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Campo de Flores (s√≥ aparece na primavera) -->
            <div id="flowerField" class="bg-pink-100 border-4 border-pink-600 rounded-lg p-4 mb-8">
                <h3 class="text-xl font-bold text-pink-800 mb-3 text-center">üå∫ Campo de Flores</h3>
                <div class="grid grid-cols-3 gap-4">
                    <div class="flower-slot bg-white rounded-lg p-2 border-2 border-pink-300">
                        <div class="text-center font-semibold text-pink-700 mb-2">üåπ Rosas</div>
                        <div class="flex justify-center gap-1">
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåπ" data-slot="0" data-flower="0">üåπ</div>
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåπ" data-slot="0" data-flower="1">üåπ</div>
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåπ" data-slot="0" data-flower="2">üåπ</div>
                        </div>
                    </div>
                    <div class="flower-slot bg-white rounded-lg p-2 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">üåª Girass√≥is</div>
                        <div class="flex justify-center gap-1">
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåª" data-slot="1" data-flower="0">üåª</div>
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåª" data-slot="1" data-flower="1">üåª</div>
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåª" data-slot="1" data-flower="2">üåª</div>
                        </div>
                    </div>
                    <div class="flower-slot bg-white rounded-lg p-2 border-2 border-white">
                        <div class="text-center font-semibold text-gray-700 mb-2">üåº Margaridas</div>
                        <div class="flex justify-center gap-1">
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåº" data-slot="2" data-flower="0">üåº</div>
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåº" data-slot="2" data-flower="1">üåº</div>
                            <div class="flower-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üåº" data-slot="2" data-flower="2">üåº</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Curral das Ovelhas -->
            <div id="sheepPenArea" class="bg-white border-4 border-gray-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-gray-800 mb-3 text-center">üêë Curral das Ovelhas</h3>
                <div class="grid grid-cols-2 gap-4">
                    <!-- 4 slots de ovelhas -->
                    <div class="sheep-slot bg-gray-100 rounded-lg p-4 border-2 border-gray-300">
                        <div class="text-center font-semibold text-gray-700 mb-2">Ovelha 1</div>
                        <div id="sheepSlot0" class="sheep-container text-center mb-3" onclick="addSheepToSlot(0)" oncontextmenu="removeSheepFromSlot(0); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar ovelha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="sheepHaySlot0" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedSheep(0)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="sheepStatus0" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="woolCollection0" class="wool-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-white-600 mb-2">L√£ pronta!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="shearSheep(0)">‚úÇÔ∏è Tosquiar</button>
                        </div>
                        <div id="sheepVaccineBtn0" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('sheep', 0)">üíâ Vacinar</button>
                            <div id="sheepSickTimer0" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="sheep-slot bg-gray-100 rounded-lg p-4 border-2 border-gray-300">
                        <div class="text-center font-semibold text-gray-700 mb-2">Ovelha 2</div>
                        <div id="sheepSlot1" class="sheep-container text-center mb-3" onclick="addSheepToSlot(1)" oncontextmenu="removeSheepFromSlot(1); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar ovelha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="sheepHaySlot1" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedSheep(1)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="sheepStatus1" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="woolCollection1" class="wool-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-white-600 mb-2">L√£ pronta!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="shearSheep(1)">‚úÇÔ∏è Tosquiar</button>
                        </div>
                        <div id="sheepVaccineBtn1" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('sheep', 1)">üíâ Vacinar</button>
                            <div id="sheepSickTimer1" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="sheep-slot bg-gray-100 rounded-lg p-4 border-2 border-gray-300">
                        <div class="text-center font-semibold text-gray-700 mb-2">Ovelha 3</div>
                        <div id="sheepSlot2" class="sheep-container text-center mb-3" onclick="addSheepToSlot(2)" oncontextmenu="removeSheepFromSlot(2); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar ovelha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="sheepHaySlot2" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedSheep(2)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="sheepStatus2" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="woolCollection2" class="wool-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-white-600 mb-2">L√£ pronta!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="shearSheep(2)">‚úÇÔ∏è Tosquiar</button>
                        </div>
                        <div id="sheepVaccineBtn2" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('sheep', 2)">üíâ Vacinar</button>
                            <div id="sheepSickTimer2" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="sheep-slot bg-gray-100 rounded-lg p-4 border-2 border-gray-300">
                        <div class="text-center font-semibold text-gray-700 mb-2">Ovelha 4</div>
                        <div id="sheepSlot3" class="sheep-container text-center mb-3" onclick="addSheepToSlot(3)" oncontextmenu="removeSheepFromSlot(3); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar ovelha</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="sheepHaySlot3" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedSheep(3)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="sheepStatus3" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="woolCollection3" class="wool-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-white-600 mb-2">L√£ pronta!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="shearSheep(3)">‚úÇÔ∏è Tosquiar</button>
                        </div>
                        <div id="sheepVaccineBtn3" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('sheep', 3)">üíâ Vacinar</button>
                            <div id="sheepSickTimer3" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Campo de Grama -->
            <div id="grassField" class="bg-green-100 border-4 border-green-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-green-800 mb-3 text-center">üåø Campo de Grama</h3>
                <div class="grid grid-cols-5 gap-2">
                    <!-- 20 slots de grama -->
                </div>
            </div>

            <!-- Lago dos Peixes -->
            <div id="lakeArea" class="bg-blue-100 border-4 border-blue-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-blue-800 mb-3 text-center">üèûÔ∏è Lago dos Peixes</h3>
                <div class="grid grid-cols-2 gap-4">
                    <!-- 4 slots de peixes -->
                    <div class="fish-slot bg-white rounded-lg p-4 border-2 border-blue-300">
                        <div class="text-center font-semibold text-blue-700 mb-2">Peixe 1</div>
                        <div id="fishSlot0" class="fish-container text-center mb-3">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêü</div>
                            <div class="text-sm text-blue-600">Clique para pescar</div>
                            <div class="text-xs text-gray-500">Precisa: vara + minhoca</div>
                        </div>
                        <button id="fishBtn0" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="catchFish(0)">üé£ Pescar</button>
                    </div>
                    
                    <div class="fish-slot bg-white rounded-lg p-4 border-2 border-blue-300">
                        <div class="text-center font-semibold text-blue-700 mb-2">Peixe 2</div>
                        <div id="fishSlot1" class="fish-container text-center mb-3">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêü</div>
                            <div class="text-sm text-blue-600">Clique para pescar</div>
                            <div class="text-xs text-gray-500">Precisa: vara + minhoca</div>
                        </div>
                        <button id="fishBtn1" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="catchFish(1)">üé£ Pescar</button>
                    </div>
                    
                    <div class="fish-slot bg-white rounded-lg p-4 border-2 border-blue-300">
                        <div class="text-center font-semibold text-blue-700 mb-2">Peixe 3</div>
                        <div id="fishSlot2" class="fish-container text-center mb-3">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêü</div>
                            <div class="text-sm text-blue-600">Clique para pescar</div>
                            <div class="text-xs text-gray-500">Precisa: vara + minhoca</div>
                        </div>
                        <button id="fishBtn2" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="catchFish(2)">üé£ Pescar</button>
                    </div>
                    
                    <div class="fish-slot bg-white rounded-lg p-4 border-2 border-blue-300">
                        <div class="text-center font-semibold text-blue-700 mb-2">Peixe 4</div>
                        <div id="fishSlot3" class="fish-container text-center mb-3">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêü</div>
                            <div class="text-sm text-blue-600">Clique para pescar</div>
                            <div class="text-xs text-gray-500">Precisa: vara + minhoca</div>
                        </div>
                        <button id="fishBtn3" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="catchFish(3)">üé£ Pescar</button>
                    </div>
                </div>
            </div>

            <!-- Pasto das Vacas -->
            <div id="pastureArea" class="bg-green-100 border-4 border-green-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-green-800 mb-3 text-center">üêÑ Pasto das Vacas</h3>
                <div class="grid grid-cols-2 gap-4">
                    <!-- 4 slots de vacas -->
                    <div class="cow-slot bg-white rounded-lg p-4 border-2 border-green-300">
                        <div class="text-center font-semibold text-green-700 mb-2">Vaca 1</div>
                        <div id="cowSlot0" class="cow-container text-center mb-3" onclick="addCowToSlot(0)" oncontextmenu="removeCowFromSlot(0); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar vaca</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="haySlot0" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedCow(0)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="cowStatus0" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="milkCollection0" class="milk-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-blue-600 mb-2">Leite pronto!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="collectMilk(0)">ü•õ Coletar</button>
                        </div>
                        <div id="vaccineBtn0" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('cow', 0)">üíâ Vacinar</button>
                            <div id="cowSickTimer0" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="cow-slot bg-white rounded-lg p-4 border-2 border-green-300">
                        <div class="text-center font-semibold text-green-700 mb-2">Vaca 2</div>
                        <div id="cowSlot1" class="cow-container text-center mb-3" onclick="addCowToSlot(1)" oncontextmenu="removeCowFromSlot(1); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar vaca</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="haySlot1" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedCow(1)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="cowStatus1" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="milkCollection1" class="milk-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-blue-600 mb-2">Leite pronto!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="collectMilk(1)">ü•õ Coletar</button>
                        </div>
                        <div id="vaccineBtn1" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('cow', 1)">üíâ Vacinar</button>
                            <div id="cowSickTimer1" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="cow-slot bg-white rounded-lg p-4 border-2 border-green-300">
                        <div class="text-center font-semibold text-green-700 mb-2">Vaca 3</div>
                        <div id="cowSlot2" class="cow-container text-center mb-3" onclick="addCowToSlot(2)" oncontextmenu="removeCowFromSlot(2); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar vaca</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="haySlot2" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedCow(2)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="cowStatus2" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="milkCollection2" class="milk-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-blue-600 mb-2">Leite pronto!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="collectMilk(2)">ü•õ Coletar</button>
                        </div>
                        <div id="vaccineBtn2" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('cow', 2)">üíâ Vacinar</button>
                            <div id="cowSickTimer2" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                    
                    <div class="cow-slot bg-white rounded-lg p-4 border-2 border-green-300">
                        <div class="text-center font-semibold text-green-700 mb-2">Vaca 4</div>
                        <div id="cowSlot3" class="cow-container text-center mb-3" onclick="addCowToSlot(3)" oncontextmenu="removeCowFromSlot(3); return false;">
                            <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                            <div class="text-sm text-gray-600">Clique para adicionar vaca</div>
                            <div class="text-xs text-gray-500">Clique direito para remover</div>
                        </div>
                        <div id="haySlot3" class="hay-container text-center" style="display: none;">
                            <div class="slot mx-auto mb-2" onclick="feedCow(3)"></div>
                            <div class="text-xs text-gray-600 mb-2">Clique para dar feno</div>
                            <div id="cowStatus3" class="text-xs text-center text-gray-500"></div>
                        </div>
                        <div id="milkCollection3" class="milk-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-blue-600 mb-2">Leite pronto!</div>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" onclick="collectMilk(3)">ü•õ Coletar</button>
                        </div>
                        <div id="vaccineBtn3" class="vaccine-btn text-center" style="display: none;">
                            <div class="text-sm font-bold text-red-600 mb-2">ü§í Doente!</div>
                            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm" onclick="vaccinateAnimal('cow', 3)">üíâ Vacinar</button>
                            <div id="cowSickTimer3" class="text-xs text-red-600 mt-1"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bosque -->
            <div id="forestArea" class="bg-green-100 border-4 border-green-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-green-800 mb-3 text-center">üå≤ Bosque</h3>
                <div class="grid grid-cols-4 gap-4">
                    <!-- √Årvore Comum -->
                    <div class="tree-slot bg-white rounded-lg p-3 border-2 border-brown-400">
                        <div class="text-center font-semibold text-brown-700 mb-2">üå≥ √Årvore</div>
                        <div class="flex justify-center">
                            <div id="commonTree" class="tree-item cursor-pointer text-4xl hover:scale-110 transition-transform" onclick="chopTree()">üå≥</div>
                        </div>
                        <div class="text-xs text-center mt-1 text-gray-600">Precisa de machado</div>
                    </div>
                    
                    <!-- Macieira -->
                    <div class="tree-slot bg-white rounded-lg p-3 border-2 border-red-300">
                        <div class="text-center font-semibold text-red-700 mb-2">üçé Macieira</div>
                        <div class="grid grid-cols-2 gap-1 justify-center">
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçé" data-tree="apple" data-fruit="0">üçé</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçé" data-tree="apple" data-fruit="1">üçé</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçé" data-tree="apple" data-fruit="2">üçé</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçé" data-tree="apple" data-fruit="3">üçé</div>
                        </div>
                    </div>
                    
                    <!-- Laranjeira -->
                    <div class="tree-slot bg-white rounded-lg p-3 border-2 border-orange-300">
                        <div class="text-center font-semibold text-orange-700 mb-2">üçä Laranjeira</div>
                        <div class="grid grid-cols-2 gap-1 justify-center">
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçä" data-tree="orange" data-fruit="0">üçä</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçä" data-tree="orange" data-fruit="1">üçä</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçä" data-tree="orange" data-fruit="2">üçä</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçä" data-tree="orange" data-fruit="3">üçä</div>
                        </div>
                    </div>
                    
                    <!-- Bananeira -->
                    <div class="tree-slot bg-white rounded-lg p-3 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">üçå Bananeira</div>
                        <div class="grid grid-cols-2 gap-1 justify-center">
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçå" data-tree="banana" data-fruit="0">üçå</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçå" data-tree="banana" data-fruit="1">üçå</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçå" data-tree="banana" data-fruit="2">üçå</div>
                            <div class="fruit-item cursor-pointer text-2xl hover:scale-110 transition-transform" data-type="üçå" data-tree="banana" data-fruit="3">üçå</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mina -->
            <div id="mineArea" class="bg-gray-800 border-4 border-gray-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-gray-200 mb-3 text-center">‚õèÔ∏è Mina</h3>
                <div id="mineEntrance" class="text-center mb-4">
                    <div class="bg-gray-700 border-2 border-gray-500 rounded-lg p-4 mb-3">
                        <div class="text-4xl mb-2">üö™</div>
                        <div class="text-gray-300 font-semibold">Entrada da Mina</div>
                        <div class="text-sm text-gray-400">Precisa de chave para entrar</div>
                        <button id="enterMineBtn" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded mt-2" onclick="enterMine()">üóùÔ∏è Entrar</button>
                    </div>
                </div>
                
                <div id="mineInterior" class="grid grid-cols-3 gap-4" style="display: none;">
                    <!-- Rocha 1 -->
                    <div class="rock-slot bg-gray-700 rounded-lg p-4 border-2 border-gray-500">
                        <div class="text-center font-semibold text-gray-200 mb-2">Rocha 1</div>
                        <div id="rock0" class="rock-container text-center mb-3">
                            <div class="text-6xl mb-2">ü™®</div>
                            <div class="text-sm text-gray-300">3 batidas restantes</div>
                            <div class="text-xs text-gray-400">Precisa: picareta</div>
                        </div>
                        <button id="mineBtn0" class="bg-gray-600 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm" onclick="mineRock(0)">‚õèÔ∏è Quebrar</button>
                    </div>
                    
                    <!-- Rocha 2 -->
                    <div class="rock-slot bg-gray-700 rounded-lg p-4 border-2 border-gray-500">
                        <div class="text-center font-semibold text-gray-200 mb-2">Rocha 2</div>
                        <div id="rock1" class="rock-container text-center mb-3">
                            <div class="text-6xl mb-2">ü™®</div>
                            <div class="text-sm text-gray-300">3 batidas restantes</div>
                            <div class="text-xs text-gray-400">Precisa: picareta</div>
                        </div>
                        <button id="mineBtn1" class="bg-gray-600 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm" onclick="mineRock(1)">‚õèÔ∏è Quebrar</button>
                    </div>
                    
                    <!-- Rocha 3 -->
                    <div class="rock-slot bg-gray-700 rounded-lg p-4 border-2 border-gray-500">
                        <div class="text-center font-semibold text-gray-200 mb-2">Rocha 3</div>
                        <div id="rock2" class="rock-container text-center mb-3">
                            <div class="text-6xl mb-2">ü™®</div>
                            <div class="text-sm text-gray-300">3 batidas restantes</div>
                            <div class="text-xs text-gray-400">Precisa: picareta</div>
                        </div>
                        <button id="mineBtn2" class="bg-gray-600 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm" onclick="mineRock(2)">‚õèÔ∏è Quebrar</button>
                    </div>
                </div>
                
                <div id="exitMineBtn" class="text-center mt-4" style="display: none;">
                    <button class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="exitMine()">üö™ Sair da Mina</button>
                </div>
            </div>

            <!-- √Årea de Cozinha (Fog√£o e Forno) -->
            <div id="cookingArea" class="bg-red-100 border-4 border-red-600 rounded-lg p-4 mb-8" style="display: none;">
                <h3 class="text-xl font-bold text-red-800 mb-3 text-center">üç≥ Cozinha</h3>
                <div class="grid grid-cols-2 gap-6">
                    <!-- Fog√£o -->
                    <div class="bg-white rounded-lg p-4 border-2 border-red-300">
                        <h4 class="text-lg font-bold text-red-700 mb-3 text-center">üî• Fog√£o</h4>
                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <!-- Slot de lenha -->
                            <div id="stoveFuelSlot" class="slot bg-orange-200 border-orange-400" onclick="addFuelToStove()">
                                <div class="text-xs text-center text-gray-600">2 üî•</div>
                            </div>
                            <!-- Slots de ingredientes -->
                            <div id="stoveSlot1" class="slot" onclick="addIngredientToStove(1)"></div>
                            <div id="stoveSlot2" class="slot" onclick="addIngredientToStove(2)"></div>
                            <div id="stoveSlot3" class="slot" onclick="addIngredientToStove(3)"></div>
                            <div id="stoveSlot4" class="slot" onclick="addIngredientToStove(4)"></div>
                        </div>
                        <button id="cookStove" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 text-sm" onclick="startCooking('stove')" disabled>
                            üç≥ Cozinhar
                        </button>
                        <div id="stoveRecipe" class="text-xs text-center mt-2 text-gray-600"></div>
                    </div>
                    
                    <!-- Forno -->
                    <div class="bg-white rounded-lg p-4 border-2 border-orange-300">
                        <h4 class="text-lg font-bold text-orange-700 mb-3 text-center">üî• Forno</h4>
                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <!-- Slot de lenha -->
                            <div id="ovenFuelSlot" class="slot bg-orange-200 border-orange-400" onclick="addFuelToOven()">
                                <div class="text-xs text-center text-gray-600">3 üî•</div>
                            </div>
                            <!-- Slots de ingredientes -->
                            <div id="ovenSlot1" class="slot" onclick="addIngredientToOven(1)"></div>
                            <div id="ovenSlot2" class="slot" onclick="addIngredientToOven(2)"></div>
                            <div id="ovenSlot3" class="slot" onclick="addIngredientToOven(3)"></div>
                            <div id="ovenSlot4" class="slot" onclick="addIngredientToOven(4)"></div>
                        </div>
                        <button id="cookOven" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 text-sm" onclick="startCooking('oven')" disabled>
                            üî• Assar
                        </button>
                        <div id="ovenRecipe" class="text-xs text-center mt-2 text-gray-600"></div>
                    </div>
                </div>
            </div>

            <!-- Quitanda -->
            <div>
                <h2 class="text-2xl font-bold text-purple-800 mb-4 text-center">üè™ Quitanda</h2>
                <div class="bg-purple-100 border-4 border-purple-600 rounded-lg p-4">
                    <div id="quitanda" class="grid grid-cols-10 gap-2 mb-4">
                        <!-- 20 slots vazios -->
                    </div>
                    <button id="sellAll" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        üí∞ Vender Tudo
                    </button>
                </div>
            </div>
        </div>

        <!-- Coluna Direita -->
        <div class="col-span-2">
            <!-- √Årea Cortar Lenha -->
            <div id="woodCuttingArea" class="bg-amber-100 border-4 border-amber-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-amber-800 mb-3 text-center">ü™ì Cortar Lenha</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-amber-300">
                    <div class="text-center mb-3">
                        <div id="woodSlot" class="slot mx-auto mb-3" onclick="addWoodToSlot()"></div>
                        <div class="text-sm text-gray-600 mb-2">Clique para adicionar tronco</div>
                        <button id="cutButton" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" onclick="cutWood()" disabled>
                            ü™ì Cortar
                        </button>
                    </div>
                    <div class="text-xs text-center text-gray-500">
                        <div>1 tronco = 4 lenhas</div>
                        <div>Tempo: 3 segundos</div>
                        <div id="axeUses" class="font-semibold text-amber-700">Machado: 40 usos</div>
                    </div>
                </div>
            </div>

            <!-- √Årea Secador/Feno -->
            <div id="hayMakerArea" class="bg-yellow-100 border-4 border-yellow-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-yellow-800 mb-3 text-center">ü•ú Secador/Feno</h3>
                
                <!-- Secador -->
                <div class="bg-white rounded-lg p-3 border-2 border-yellow-300 mb-3">
                    <h4 class="text-lg font-bold text-yellow-700 mb-2 text-center">‚òÄÔ∏è Secador</h4>
                    <div class="text-center mb-2">
                        <div id="dryerSlot" class="slot mx-auto mb-2" onclick="addGrassToDryer()"></div>
                        <div class="text-xs text-gray-600 mb-2">8 trevos ‚Üí 8 folhas secas</div>
                        <button id="dryButton" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-1 px-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startDrying()" disabled>
                            ‚òÄÔ∏è Secar
                        </button>
                    </div>
                </div>

                <!-- Fazer Feno -->
                <div class="bg-white rounded-lg p-3 border-2 border-green-300">
                    <h4 class="text-lg font-bold text-green-700 mb-2 text-center">üåæ Fazer Feno</h4>
                    <div class="text-center mb-2">
                        <div id="haySlot" class="slot mx-auto mb-2" onclick="addDriedGrassToHay()"></div>
                        <div class="text-xs text-gray-600 mb-2">4 folhas secas ‚Üí 1 feno</div>
                        <button id="hayButton" class="bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startHayMaking()" disabled>
                            üåæ Fazer
                        </button>
                    </div>
                </div>
            </div>

            <!-- M√°quina de Suco -->
            <div id="juiceMakerArea" class="bg-purple-100 border-4 border-purple-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-purple-800 mb-3 text-center">üßÉ M√°quina de Suco</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-purple-300">
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <!-- Slot de uvas -->
                        <div id="juiceSlot" class="slot" onclick="addGrapesToJuiceMaker()">
                            <div class="text-xs text-center text-gray-600 mt-1">üçáx3</div>
                        </div>
                        <!-- Bot√£o produzir -->
                        <button id="juiceButton" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startJuiceProduction()" disabled>
                            üßÉ Produzir
                        </button>
                    </div>
                    <div id="juiceRecipe" class="text-xs text-center text-gray-600">Receita: 3 uvas = 1 garrafa de suco</div>
                </div>
            </div>

            <!-- Torra de Caf√© -->
            <div id="coffeeRoasterArea" class="bg-amber-100 border-4 border-amber-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-amber-800 mb-3 text-center">‚òï Torra de Caf√©</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-amber-300">
                    <div class="grid grid-cols-3 gap-3 mb-3">
                        <!-- Slot de lenha -->
                        <div id="coffeeWoodSlot" class="slot" onclick="addWoodToCoffeeRoaster()">
                            <div class="text-xs text-center text-gray-600 mt-1">üî•x3</div>
                        </div>
                        <!-- Slot de caf√© -->
                        <div id="coffeeBeanSlot" class="slot" onclick="addCoffeeBeansToCoffeeRoaster()">
                            <div class="text-xs text-center text-gray-600 mt-1">üî¥x4</div>
                        </div>
                        <!-- Bot√£o torrar -->
                        <button id="coffeeRoasterButton" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startCoffeeRoasting()" disabled>
                            ‚òï Torrar
                        </button>
                    </div>
                    <div id="coffeeRoasterRecipe" class="text-xs text-center text-gray-600">Receita: 3 lenhas + 4 caf√©s = 1 saco de caf√©</div>
                </div>
            </div>

            <!-- Moinho -->
            <div id="millArea" class="bg-gray-100 border-4 border-gray-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-gray-800 mb-3 text-center">üè≠ Moinho</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-gray-300">
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <!-- Slot de trigo -->
                        <div id="millSlot" class="slot" onclick="addWheatToMill()">
                            <div class="text-xs text-center text-gray-600 mt-1">üåæx4</div>
                        </div>
                        <!-- Bot√£o moer -->
                        <button id="millButton" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startMilling()" disabled>
                            üè≠ Moer
                        </button>
                    </div>
                    <div id="millRecipe" class="text-xs text-center text-gray-600">Receita: 4 trigos = 1 saco de farinha</div>
                </div>
            </div>

            <!-- M√°quina de Fiar -->
            <div id="spinningWheelArea" class="bg-purple-100 border-4 border-purple-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-purple-800 mb-3 text-center">üé° M√°quina de Fiar</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-purple-300">
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <!-- Slot de l√£s -->
                        <div id="spinningSlot" class="slot" onclick="addWoolToSpinningWheel()">
                            <div class="text-xs text-center text-gray-600 mt-1">üß∂x3</div>
                        </div>
                        <!-- Bot√£o fiar -->
                        <button id="spinningButton" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startSpinning()" disabled>
                            üé° Fiar
                        </button>
                    </div>
                    <div id="spinningRecipe" class="text-xs text-center text-gray-600">Receita: 3 l√£s = 1 novelo de l√£</div>
                </div>
            </div>

            <!-- Misturador -->
            <div id="mixerArea" class="bg-orange-100 border-4 border-orange-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-orange-800 mb-3 text-center">ü•£ Misturador</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-orange-300">
                    <div class="grid grid-cols-3 gap-2 mb-3">
                        <!-- 4 slots de ingredientes -->
                        <div id="mixerSlot1" class="slot" onclick="addIngredientToMixer(1)"></div>
                        <div id="mixerSlot2" class="slot" onclick="addIngredientToMixer(2)"></div>
                        <div id="mixerSlot3" class="slot" onclick="addIngredientToMixer(3)"></div>
                        <div id="mixerSlot4" class="slot" onclick="addIngredientToMixer(4)"></div>
                        <!-- Bot√£o misturar (ocupa 2 colunas) -->
                        <button id="mixerButton" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm col-span-2" onclick="startMixing()" disabled>
                            ü•£ Misturar
                        </button>
                    </div>
                    <div id="mixerRecipe" class="text-xs text-center text-gray-600 mb-2">Receitas dispon√≠veis:</div>
                    <div class="text-xs text-center text-gray-500">
                        <div>üêî Ra√ß√£o p/ Galinhas: 1 trigo + 2 milhos</div>
                        <div>üê∑ Ra√ß√£o p/ Porcos: 1 batata + 1 br√≥colis + 1 cenoura + 1 milho</div>
                    </div>
                </div>
            </div>

            <!-- Comedouro -->
            <div id="birdFeederArea" class="bg-sky-100 border-4 border-sky-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-sky-800 mb-3 text-center">ü™∂ Comedouro</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-sky-300">
                    <div class="text-center mb-3">
                        <div id="feederSlot" class="slot mx-auto mb-3" onclick="addFoodToFeeder()">
                            <div class="text-xs text-center text-gray-600 mt-1">üíß ou üçå</div>
                        </div>
                        <div class="text-sm text-gray-600 mb-2">Adicione √°gua ou banana</div>
                        <div id="feederStatus" class="text-xs text-center text-gray-500">Aguardando comida...</div>
                    </div>
                    <div class="text-xs text-center text-gray-500">
                        <div>P√°ssaros vir√£o comer e trar√£o sementes especiais!</div>
                        <div>üç´ Cacau ‚Ä¢ üê≤ Pitaia ‚Ä¢ ü•ë Avocado</div>
                    </div>
                </div>
            </div>

            <!-- Telefone -->
            <div class="flex items-center gap-4 bg-gray-100 border-2 border-gray-600 rounded-lg px-4 py-2" id="phoneArea" style="display: none;">
                <div class="text-center">
                    <div id="phone" class="text-3xl cursor-pointer hover:scale-110 transition-transform" onclick="answerPhone()">üìû</div>
                    <div class="text-sm font-bold text-gray-700">Telefone</div>
                </div>
                <div class="text-xs">
                    <div id="phoneStatus" class="text-gray-600 font-semibold">Aguardando...</div>
                    <div id="phoneNotification" class="text-red-600 font-bold animate-pulse" style="display: none;">Chamada!</div>
                </div>
            </div>

            <!-- Caminhonete -->
            <div id="truckArea" class="bg-gray-100 border-4 border-gray-600 rounded-lg p-4 mb-6" style="display: none;">
                <h3 class="text-xl font-bold text-gray-800 mb-3 text-center">üöö Caminhonete</h3>
                <div class="bg-white rounded-lg p-4 border-2 border-gray-300">
                    <div class="grid grid-cols-3 gap-3 mb-3">
                        <!-- Slot de diesel -->
                        <div id="truckDieselSlot" class="slot bg-yellow-200 border-yellow-400" onclick="addDieselToTruck()">
                            <div class="text-xs text-center text-gray-600 mt-1">‚õΩ</div>
                        </div>
                        <!-- Slots de carga -->
                        <div id="truckSlot1" class="slot" onclick="addCargoToTruck(1)">
                            <div class="text-xs text-center text-gray-600 mt-1">Carga 1</div>
                        </div>
                        <div id="truckSlot2" class="slot" onclick="addCargoToTruck(2)">
                            <div class="text-xs text-center text-gray-600 mt-1">Carga 2</div>
                        </div>
                    </div>
                    <button id="deliverButton" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm" onclick="startDelivery()" disabled>
                        üöö Entregar
                    </button>
                    <div id="truckStatus" class="text-xs text-center mt-2 text-gray-600">
                        <div>Diesel: <span id="dieselCount">0</span>/1</div>
                        <div>Viagens restantes: <span id="tripsLeft">0</span>/3</div>
                    </div>
                </div>
            </div>

            <!-- Colmeia -->
            <div id="beehiveArea" class="bg-yellow-100 border-4 border-yellow-600 rounded-lg p-4" style="display: none;">
                <h3 class="text-xl font-bold text-yellow-800 mb-3 text-center">üçØ Colmeia</h3>
                <div class="grid grid-cols-3 gap-4">
                    <!-- Abelha 1 -->
                    <div class="bee-slot bg-white rounded-lg p-3 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Abelha 1</div>
                        <div class="text-center mb-3">
                            <div class="text-3xl mb-2">üêù</div>
                            <div id="beeStatus0" class="text-xs text-gray-600">Aguardando flor</div>
                        </div>
                        <div id="flowerSlot0" class="flower-slot text-center mb-3">
                            <div class="slot mx-auto mb-2" onclick="plantFlowerInBeehive(0)">
                                <div class="text-xs text-center text-gray-600 mt-1">Plantar flor</div>
                            </div>
                        </div>
                        <div id="honeyCollection0" class="honey-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">üçØ Mel pronto!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectHoney(0)">üçØ Coletar</button>
                        </div>
                    </div>
                    
                    <!-- Abelha 2 -->
                    <div class="bee-slot bg-white rounded-lg p-3 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Abelha 2</div>
                        <div class="text-center mb-3">
                            <div class="text-3xl mb-2">üêù</div>
                            <div id="beeStatus1" class="text-xs text-gray-600">Aguardando flor</div>
                        </div>
                        <div id="flowerSlot1" class="flower-slot text-center mb-3">
                            <div class="slot mx-auto mb-2" onclick="plantFlowerInBeehive(1)">
                                <div class="text-xs text-center text-gray-600 mt-1">Plantar flor</div>
                            </div>
                        </div>
                        <div id="honeyCollection1" class="honey-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">üçØ Mel pronto!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectHoney(1)">üçØ Coletar</button>
                        </div>
                    </div>
                    
                    <!-- Abelha 3 -->
                    <div class="bee-slot bg-white rounded-lg p-3 border-2 border-yellow-300">
                        <div class="text-center font-semibold text-yellow-700 mb-2">Abelha 3</div>
                        <div class="text-center mb-3">
                            <div class="text-3xl mb-2">üêù</div>
                            <div id="beeStatus2" class="text-xs text-gray-600">Aguardando flor</div>
                        </div>
                        <div id="flowerSlot2" class="flower-slot text-center mb-3">
                            <div class="slot mx-auto mb-2" onclick="plantFlowerInBeehive(2)">
                                <div class="text-xs text-center text-gray-600 mt-1">Plantar flor</div>
                            </div>
                        </div>
                        <div id="honeyCollection2" class="honey-collection text-center" style="display: none;">
                            <div class="text-sm font-bold text-yellow-600 mb-2">üçØ Mel pronto!</div>
                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm" onclick="collectHoney(2)">üçØ Coletar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado do jogo
        let gameState = {
            coins: 200,
            water: 10,
            fertilizer: 50,
            selectedSeed: 'üéÉ',
            selectedSeedName: 'Ab√≥bora',
            canteiros: Array(8).fill().map(() => ({ 
                state: 'empty', 
                seed: null, 
                seedName: null,
                timer: null 
            })),
            celeiro: {},
            quitanda: {},
            currentSeason: 0, // 0=Primavera, 1=Ver√£o, 2=Outono, 3=Inverno
            seasonTimer: 3600, // 1 hora em segundos
            flowerCount: 0,
            flowers: {
                0: [true, true, true], // Rosas
                1: [true, true, true], // Girass√≥is  
                2: [true, true, true]  // Margaridas
            },
            hasWell: false,
            hasForest: false,
            hasGrassField: false,
            grassCount: 0,
            grass: Array(20).fill(true),
            hasPasture: false,
            cows: Array(4).fill().map(() => ({
                hasCow: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                milkReady: false,
                restTimer: null,
                isSick: false,
                sickTimer: null
            })),
            hasHayMaker: false,
            dryer: {
                grassCount: 0,
                isDrying: false
            },
            hayMaker: {
                driedGrassCount: 0,
                isMaking: false
            },
            hasAxe: false,
            axeUses: 0,
            woodCount: 0,
            woodSlotFilled: false,
            isCutting: false,
            fruits: {
                apple: [true, true, true, true],
                orange: [true, true, true, true],
                banana: [true, true, true, true]
            },
            hasCookingArea: false,
            stove: {
                fuel: 0,
                ingredients: [null, null, null, null],
                isCooking: false
            },
            oven: {
                fuel: 0,
                ingredients: [null, null, null, null],
                isCooking: false
            },
            // Sistema do Avatar
            energy: 200,
            maxEnergy: 200,
            isSick: false,
            isResting: false,
            sickTimer: null,
            restTimer: null,
            // Sistema da Composteira
            hasComposter: false,
            composter: {
                ingredients: [null, null, null], // l√≠rio, galho, esterco
                isComposting: false
            },
            // Sistema da Queijeira
            hasCheeseMaker: false,
            cheeseMaker: {
                milkCount: 0,
                isMaking: false
            },
            // Sistema da M√°quina de Suco
            hasJuiceMaker: false,
            juiceMaker: {
                grapeCount: 0,
                isMaking: false
            },
            // Sistema da Torra de Caf√©
            hasCoffeeRoaster: false,
            coffeeRoaster: {
                woodCount: 0,
                coffeeBeanCount: 0,
                isRoasting: false
            },
            // Sistema do Moinho
            hasMill: false,
            mill: {
                wheatCount: 0,
                isMilling: false
            },
            // Sistema do Curral das Ovelhas
            hasSheepPen: false,
            hasShears: false,
            sheep: Array(4).fill().map(() => ({
                hasSheep: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                woolReady: false,
                restTimer: null,
                isSick: false,
                sickTimer: null
            })),
            // Sistema da M√°quina de Fiar
            hasSpinningWheel: false,
            spinningWheel: {
                woolCount: 0,
                isSpinning: false
            },
            // Sistema do Misturador
            hasMixer: false,
            mixer: {
                ingredients: [null, null, null, null],
                isMixing: false
            },
            // Sistema do Galinheiro
            hasChickenCoop: false,
            chickens: Array(4).fill().map(() => ({
                hasChicken: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                eggsReady: false,
                restTimer: null,
                isSick: false,
                sickTimer: null
            })),
            chicks: [], // Array de pintinhos {id, growthTimer}
            // Sistema do Chiqueiro
            hasPigPen: false,
            pigs: Array(4).fill().map(() => ({
                hasPig: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                meatReady: false,
                restTimer: null,
                isSick: false,
                sickTimer: null
            })),
            // Sistema do Lago dos Peixes
            hasLake: false,
            hasFishingRod: false,
            fishingRodUses: 0,
            fishCount: 0,
            fish: Array(4).fill(true), // 4 peixes dispon√≠veis
            // Sistema da Mina
            hasMine: false,
            hasPickaxe: false,
            pickaxeUses: 0,
            hasMineKey: false,
            insideMine: false,
            rocks: Array(3).fill().map(() => ({ hits: 3 })), // 3 rochas com 3 batidas cada
            // Sistema do Comedouro
            hasBirdFeeder: false,
            birdFeeder: {
                hasFood: false,
                foodType: null,
                waitingForBird: false,
                birdTimer: null
            },
            // Sistema da Caixa de Correios
            mailbox: {
                messages: [],
                unreadCount: 0,
                lastLetter: 0,
                lastNewspaper: 0
            },
            // Sistema da Colmeia
            hasBeehive: false,
            bees: Array(3).fill().map(() => ({
                hasFlower: false,
                flowerType: null,
                isGrowing: false,
                isPollenating: false,
                honeyReady: false,
                growthTimer: null,
                pollenationTimer: null
            })),
            // Sistema do Telefone
            hasPhone: false,
            phone: {
                lastCall: 0,
                currentOrder: null,
                orderTimer: null,
                isRinging: false
            },
            // Sistema da Caminhonete
            hasTruck: false,
            truck: {
                hasDiesel: false,
                tripsLeft: 0,
                cargo: [null, null], // 2 slots de carga
                isDelivering: false
            }
        };

        // Pre√ßos dos itens
        const itemPrices = {
            'üéÉ': 25, 'ü•¨': 20, 'ü•î': 18, 'ü•¶': 30, 'üî¥': 35,
            'ü•ï': 22, 'üåΩ': 28, 'üçÖ': 24, 'üåæ': 15, 'üçá': 40,
            'üåπ': 15, 'üåª': 18, 'üåº': 12,
            'üçé': 20, 'üçä': 18, 'üçå': 22,
            'ü™µ': 10, 'üåø': 8, 'üî•': 15, 'üçÉ': 12,
            'ü•õ': 30, 'üí©': 25, 'ü•ö': 35, 'ü•©': 50, 'üêü': 45, 'üêî': 40,
            'üçµ': 60, 'ü•ó': 80, 'üç≤': 120, 'üêü': 90, 'üçó': 85, 'üçû': 40, 'üßÉ': 75, '‚òï': 90, 'ü•Ñ': 45, 'üß∂': 35, 'üßµ': 60, 'üêî': 50, 'üê∑': 80, 'üçó': 60, 'ü•ì': 55,
            'ü™±': 15, 'üêü': 45, 'üíé': 200,
            'üíö': 150, '‚ù§Ô∏è': 180, 'üíô': 160, '‚ö´': 25,
            'üç´': 0, 'üê≤': 0, 'ü•ë': 0, // Frutos especiais n√£o podem ser vendidos
            'üçØ': 80 // Mel pode ser vendido
        };

        // Receitas do fog√£o (com √°gua conectada)
        const stoveRecipes = {
            'üçµ': { // Ch√°
                ingredients: ['üíß', 'üçÉ', 'üçÉ'],
                time: 10, // 10 segundos
                name: 'Ch√° (cura doen√ßa)',
                energyBonus: 0
            },
            'ü•ó': { // Salada
                ingredients: ['ü•¨', 'üçÖ', 'ü•ï'],
                time: 15,
                name: 'Salada (+30% energia)',
                energyBonus: 0.3
            },
            'üç≤': { // Ensopado
                ingredients: ['ü•¶', 'üéÉ', 'ü•ö', 'ü•ö'],
                time: 60,
                name: 'Ensopado (+50% energia)',
                energyBonus: 0.5
            },
            'ü•©': { // Bife
                ingredients: ['ü•©'],
                time: 30,
                name: 'Bife (+100% energia)',
                energyBonus: 1.0
            }
        };

        // Receitas do forno
        const ovenRecipes = {
            'üêü': { // Peixe assado
                ingredients: ['üêü'],
                time: 30,
                name: 'Peixe assado (+70% energia)',
                energyBonus: 0.7
            },
            'üçó': { // Frango assado
                ingredients: ['üêî'],
                time: 60,
                name: 'Frango assado (+70% energia)',
                energyBonus: 0.7
            },
            'üçû': { // P√£o
                ingredients: ['ü•ö', 'ü•õ', 'üåæ'],
                time: 60,
                name: 'P√£o',
                energyBonus: 0
            }
        };

        // Ingredientes v√°lidos para cada slot
        const stoveIngredients = ['üíß', 'üçÉ', 'ü•¨', 'üçÖ', 'ü•ï', 'ü•¶', 'üéÉ', 'ü•ö', 'ü•©'];
        const ovenIngredients = ['üêü', 'üêî', 'ü•ö', 'ü•õ', 'üåæ'];

        // Receitas do misturador
        const mixerRecipes = {
            'üêî': { // Ra√ß√£o para Galinhas
                ingredients: ['üåæ', 'üåΩ', 'üåΩ'],
                name: 'Ra√ß√£o p/ Galinhas',
                time: 30
            },
            'üê∑': { // Ra√ß√£o para Porcos
                ingredients: ['ü•î', 'ü•¶', 'ü•ï', 'üåΩ'],
                name: 'Ra√ß√£o p/ Porcos',
                time: 30
            }
        };

        // Ingredientes v√°lidos para o misturador
        const mixerIngredients = ['üåæ', 'üåΩ', 'ü•î', 'ü•¶', 'ü•ï'];

        // Dados das esta√ß√µes
        const seasons = [
            { name: 'Primavera', emoji: 'üå∏', bonus: 'Planta√ß√µes +10% valor', color: 'green' },
            { name: 'Ver√£o', emoji: '‚òÄÔ∏è', bonus: 'Canteiros d√£o 2 frutos', color: 'yellow' },
            { name: 'Outono', emoji: 'üçÇ', bonus: 'Produtos animais +15%', color: 'orange' },
            { name: 'Inverno', emoji: '‚ùÑÔ∏è', bonus: 'Produtos fabricados +15%', color: 'blue' }
        ];

        // Sistema de energia e sa√∫de
        function useEnergy(amount = 1) {
            if (gameState.isResting) return false;
            
            gameState.energy -= amount;
            if (gameState.isSick) {
                gameState.energy -= amount; // Perde energia mais r√°pido quando doente
            }
            
            if (gameState.energy <= 0) {
                gameState.energy = 0;
                if (gameState.isSick) {
                    gameOver();
                    return false;
                }
            }
            
            updateEnergyDisplay();
            return true;
        }

        function updateEnergyDisplay() {
            const energyFill = document.getElementById('energyFill');
            const energyText = document.getElementById('energyText');
            const statusText = document.getElementById('statusText');
            const avatar = document.getElementById('avatar');
            
            const percentage = (gameState.energy / gameState.maxEnergy) * 100;
            energyFill.style.width = percentage + '%';
            energyText.textContent = `${gameState.energy}/${gameState.maxEnergy}`;
            
            // Atualizar status e emoji do avatar
            if (gameState.isResting) {
                statusText.textContent = 'Descansando...';
                statusText.className = 'text-xs text-center text-blue-600 font-semibold';
                avatar.classList.add('resting');
                avatar.textContent = 'üò¥';
            } else if (gameState.isSick) {
                statusText.textContent = 'Doente ü§í';
                statusText.className = 'text-xs text-center text-red-600 font-semibold';
                avatar.classList.add('sick');
                avatar.classList.remove('resting');
                avatar.textContent = 'ü§í';
            } else {
                statusText.textContent = 'Saud√°vel';
                statusText.className = 'text-xs text-center text-green-600 font-semibold';
                avatar.classList.remove('sick', 'resting');
                avatar.textContent = 'üë®‚Äçüåæ';
            }
        }

        function startResting() {
            if (gameState.isResting) return;
            
            gameState.isResting = true;
            updateEnergyDisplay();
            
            // Descansar por 5 minutos
            gameState.restTimer = setTimeout(() => {
                gameState.energy = gameState.maxEnergy;
                gameState.isResting = false;
                updateEnergyDisplay();
                showMessage('Voc√™ descansou e recuperou toda energia! üò¥');
            }, 5 * 60 * 1000); // 5 minutos
            
            showMessage('Voc√™ est√° descansando por 5 minutos... üò¥');
        }

        function showEatMenu() {
            const eatMenu = document.getElementById('eatMenu');
            const foodOptions = document.getElementById('foodOptions');
            
            foodOptions.innerHTML = '';
            
            // Verificar se tem ch√° e est√° doente
            if (gameState.isSick && gameState.celeiro['üçµ'] > 0) {
                const option = document.createElement('button');
                option.className = 'w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded mb-2';
                option.innerHTML = 'üçµ Ch√° (cura doen√ßa)';
                option.onclick = () => eatFood('üçµ');
                foodOptions.appendChild(option);
            }
            
            // Outras comidas (s√≥ se n√£o estiver doente)
            if (!gameState.isSick) {
                const foods = [
                    { item: 'ü•ó', name: 'Salada (+30% energia)' },
                    { item: 'üç≤', name: 'Ensopado (+50% energia)' },
                    { item: 'ü•©', name: 'Bife (+100% energia)' },
                    { item: 'üêü', name: 'Peixe assado (+70% energia)' },
                    { item: 'üçó', name: 'Frango assado (+70% energia)' }
                ];
                
                foods.forEach(food => {
                    if (gameState.celeiro[food.item] > 0) {
                        const option = document.createElement('button');
                        option.className = 'w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded mb-2';
                        option.innerHTML = `${food.item} ${food.name}`;
                        option.onclick = () => eatFood(food.item);
                        foodOptions.appendChild(option);
                    }
                });
            }
            
            if (foodOptions.children.length === 0) {
                foodOptions.innerHTML = '<p class="text-center text-gray-600">Nenhuma comida dispon√≠vel</p>';
            }
            
            eatMenu.classList.remove('hidden');
        }

        function closeEatMenu() {
            document.getElementById('eatMenu').classList.add('hidden');
        }

        function eatFood(foodItem) {
            if (!gameState.celeiro[foodItem] || gameState.celeiro[foodItem] <= 0) {
                showMessage('Voc√™ n√£o tem esse item no celeiro! üì¶');
                return;
            }
            
            gameState.celeiro[foodItem]--;
            
            if (foodItem === 'üçµ' && gameState.isSick) {
                // Curar doen√ßa
                gameState.isSick = false;
                if (gameState.sickTimer) {
                    clearTimeout(gameState.sickTimer);
                    gameState.sickTimer = null;
                }
                showMessage('Voc√™ se curou da doen√ßa! üçµ‚ú®');
            } else {
                // Recuperar energia
                const recipes = {...stoveRecipes, ...ovenRecipes};
                const recipe = recipes[foodItem];
                if (recipe && recipe.energyBonus > 0) {
                    const energyGain = Math.floor(gameState.maxEnergy * recipe.energyBonus);
                    gameState.energy = Math.min(gameState.maxEnergy, gameState.energy + energyGain);
                    showMessage(`Voc√™ comeu ${foodItem} e ganhou ${energyGain} de energia!`);
                }
            }
            
            updateDisplay();
            updateEnergyDisplay();
            closeEatMenu();
        }

        function makeSick() {
            if (gameState.isSick || gameState.isResting) return;
            
            gameState.isSick = true;
            updateEnergyDisplay();
            showMessage('Voc√™ ficou doente! ü§í Tome ch√° para se curar!');
            
            // Se n√£o se curar em 2 minutos, fica mais grave
            gameState.sickTimer = setTimeout(() => {
                if (gameState.isSick) {
                    showMessage('Sua doen√ßa piorou! Energia cai mais r√°pido! ü§íüíÄ');
                }
            }, 2 * 60 * 1000);
        }

        function gameOver() {
            showMessage('Voc√™ morreu de doen√ßa! O jogo ser√° reiniciado... üíÄ');
            
            setTimeout(() => {
                // Reiniciar jogo
                gameState = {
                    coins: 200,
                    water: 10,
                    fertilizer: 50,
                    selectedSeed: 'üéÉ',
                    selectedSeedName: 'Ab√≥bora',
                    canteiros: Array(8).fill().map(() => ({ 
                        state: 'empty', 
                        seed: null, 
                        seedName: null,
                        timer: null 
                    })),
                    celeiro: {},
                    quitanda: {},
                    currentSeason: 0,
                    seasonTimer: 3600,
                    flowerCount: 0,
                    flowers: {
                        0: [true, true, true],
                        1: [true, true, true],
                        2: [true, true, true]
                    },
                    hasWell: false,
                    hasForest: false,
                    hasGrassField: false,
                    grassCount: 0,
                    grass: Array(20).fill(true),
                    hasPasture: false,
                    cows: Array(4).fill().map(() => ({
                        hasCow: false,
                        isEating: false,
                        isProducing: false,
                        isResting: false,
                        milkReady: false,
                        restTimer: null
                    })),
                    hasHayMaker: false,
                    dryer: {
                        grassCount: 0,
                        isDrying: false
                    },
                    hayMaker: {
                        driedGrassCount: 0,
                        isMaking: false
                    },
                    hasAxe: false,
                    axeUses: 0,
                    woodCount: 0,
                    woodSlotFilled: false,
                    isCutting: false,
                    fruits: {
                        apple: [true, true, true, true],
                        orange: [true, true, true, true],
                        banana: [true, true, true, true]
                    },
                    hasCookingArea: false,
                    stove: {
                        fuel: 0,
                        ingredients: [null, null, null, null],
                        isCooking: false
                    },
                    oven: {
                        fuel: 0,
                        ingredients: [null, null, null, null],
                        isCooking: false
                    },
                    energy: 200,
                    maxEnergy: 200,
                    isSick: false,
                    isResting: false,
                    sickTimer: null,
                    restTimer: null,
                    hasComposter: false,
                    composter: {
                        ingredients: [null, null, null],
                        isComposting: false
                    },
                    hasCheeseMaker: false,
                    cheeseMaker: {
                        milkCount: 0,
                        isMaking: false
                    },
                    hasJuiceMaker: false,
                    juiceMaker: {
                        grapeCount: 0,
                        isMaking: false
                    },
                    hasCoffeeRoaster: false,
                    coffeeRoaster: {
                        woodCount: 0,
                        coffeeBeanCount: 0,
                        isRoasting: false
                    },
                    hasMill: false,
                    mill: {
                        wheatCount: 0,
                        isMilling: false
                    },
                    hasSheepPen: false,
                    hasShears: false,
                    sheep: Array(4).fill().map(() => ({
                        hasSheep: false,
                        isEating: false,
                        isProducing: false,
                        isResting: false,
                        woolReady: false,
                        restTimer: null
                    })),
                    hasSpinningWheel: false,
                    spinningWheel: {
                        woolCount: 0,
                        isSpinning: false
                    },
                    hasMixer: false,
                    mixer: {
                        ingredients: [null, null, null, null],
                        isMixing: false
                    },
                    hasChickenCoop: false,
                    chickens: Array(4).fill().map(() => ({
                        hasChicken: false,
                        isEating: false,
                        isProducing: false,
                        isResting: false,
                        eggsReady: false,
                        restTimer: null
                    })),
                    chicks: [],
                    hasPigPen: false,
                    pigs: Array(4).fill().map(() => ({
                        hasPig: false,
                        isEating: false,
                        isProducing: false,
                        isResting: false,
                        meatReady: false,
                        restTimer: null
                    })),
                    hasLake: false,
                    hasFishingRod: false,
                    fishingRodUses: 0,
                    fishCount: 0,
                    fish: Array(4).fill(true),
                    hasMine: false,
                    hasPickaxe: false,
                    pickaxeUses: 0,
                    hasMineKey: false,
                    insideMine: false,
                    rocks: Array(3).fill().map(() => ({ hits: 3 })),
                    hasBirdFeeder: false,
                    birdFeeder: {
                        hasFood: false,
                        foodType: null,
                        waitingForBird: false,
                        birdTimer: null
                    },
                    mailbox: {
                        messages: [],
                        unreadCount: 0,
                        lastLetter: 0,
                        lastNewspaper: 0
                    },
                    hasBeehive: false,
                    bees: Array(3).fill().map(() => ({
                        hasFlower: false,
                        flowerType: null,
                        isGrowing: false,
                        isPollenating: false,
                        honeyReady: false,
                        growthTimer: null,
                        pollenationTimer: null
                    })),
                    hasPhone: false,
                    phone: {
                        lastCall: 0,
                        currentOrder: null,
                        orderTimer: null,
                        isRinging: false
                    },
                    hasTruck: false,
                    truck: {
                        hasDiesel: false,
                        tripsLeft: 0,
                        cargo: [null, null],
                        isDelivering: false
                    }
                };
                
                // Reset da interface
                document.getElementById('wellArea').style.display = 'none';
                document.getElementById('forestArea').style.display = 'none';
                document.getElementById('grassField').style.display = 'none';
                document.getElementById('pastureArea').style.display = 'none';
                document.getElementById('cookingArea').style.display = 'none';
                document.getElementById('woodCuttingArea').style.display = 'none';
                document.getElementById('hayMakerArea').style.display = 'none';
                document.getElementById('composterArea').style.display = 'none';
                document.getElementById('cheeseArea').style.display = 'none';
                document.getElementById('juiceMakerArea').style.display = 'none';
                document.getElementById('coffeeRoasterArea').style.display = 'none';
                document.getElementById('millArea').style.display = 'none';
                document.getElementById('sheepPenArea').style.display = 'none';
                document.getElementById('spinningWheelArea').style.display = 'none';
                document.getElementById('mixerArea').style.display = 'none';
                document.getElementById('chickenCoopArea').style.display = 'none';
                document.getElementById('pigPenArea').style.display = 'none';
                document.getElementById('lakeArea').style.display = 'none';
                document.getElementById('mineArea').style.display = 'none';
                document.getElementById('birdFeederArea').style.display = 'none';
                document.getElementById('beehiveArea').style.display = 'none';
                document.getElementById('phoneArea').style.display = 'none';
                document.getElementById('truckArea').style.display = 'none';
                document.getElementById('axeItem').style.display = 'none';
                document.getElementById('cowItem').style.display = 'none';
                document.getElementById('hayMakerItem').style.display = 'none';
                document.getElementById('sheepItem').style.display = 'none';
                document.getElementById('shearsItem').style.display = 'none';
                document.getElementById('chickenItem').style.display = 'none';
                document.getElementById('pigItem').style.display = 'none';
                document.getElementById('fishingRodItem').style.display = 'none';
                document.getElementById('pickaxeItem').style.display = 'none';
                document.getElementById('mineKeyItem').style.display = 'none';
                
                // Mostrar itens do mercadinho novamente
                document.getElementById('wellItem').style.display = 'flex';
                document.getElementById('forestItem').style.display = 'flex';
                document.getElementById('grassFieldItem').style.display = 'flex';
                document.getElementById('pastureItem').style.display = 'flex';
                document.getElementById('cookingAreaItem').style.display = 'flex';
                document.getElementById('composterItem').style.display = 'flex';
                document.getElementById('cheeseItem').style.display = 'flex';
                document.getElementById('juiceMakerItem').style.display = 'flex';
                document.getElementById('coffeeRoasterItem').style.display = 'flex';
                document.getElementById('millItem').style.display = 'flex';
                document.getElementById('sheepPenItem').style.display = 'flex';
                document.getElementById('spinningWheelItem').style.display = 'flex';
                document.getElementById('chickenCoopItem').style.display = 'flex';
                document.getElementById('mixerItem').style.display = 'flex';
                document.getElementById('pigPenItem').style.display = 'flex';
                document.getElementById('lakeItem').style.display = 'flex';
                document.getElementById('mineItem').style.display = 'flex';
                document.getElementById('birdFeederItem').style.display = 'flex';
                document.getElementById('beehiveItem').style.display = 'flex';
                document.getElementById('phoneItem').style.display = 'flex';
                document.getElementById('truckItem').style.display = 'none';
                document.getElementById('dieselItem').style.display = 'none';
                
                updateDisplay();
                updateEnergyDisplay();
                initMailSystem();
                showMessage('Jogo reiniciado! Bem-vindo de volta! üöú');
            }, 3000);
        }

        // Sistema de doen√ßa - primeira vez em 15 minutos, depois aleat√≥rio
        let firstSicknessTimer = null;
        
        function initSicknessTimer() {
            // Primeira doen√ßa em 15 minutos
            firstSicknessTimer = setTimeout(() => {
                if (!gameState.isSick && !gameState.isResting) {
                    makeSick();
                }
                firstSicknessTimer = null;
            }, 15 * 60 * 1000); // 15 minutos
        }
        
        function randomSickness() {
            // S√≥ chance aleat√≥ria ap√≥s a primeira doen√ßa
            if (!firstSicknessTimer && !gameState.isSick && !gameState.isResting && Math.random() < 0.05) {
                makeSick();
            }
            
            // Chance de animais ficarem doentes (5% por a√ß√£o)
            if (Math.random() < 0.05) {
                makeAnimalSick();
            }
        }

        // Sistema de doen√ßas dos animais
        function makeAnimalSick() {
            const allAnimals = [];
            
            // Coletar todos os animais saud√°veis
            gameState.cows.forEach((cow, index) => {
                if (cow.hasCow && !cow.isSick) {
                    allAnimals.push({type: 'cow', index});
                }
            });
            
            gameState.sheep.forEach((sheep, index) => {
                if (sheep.hasSheep && !sheep.isSick) {
                    allAnimals.push({type: 'sheep', index});
                }
            });
            
            gameState.chickens.forEach((chicken, index) => {
                if (chicken.hasChicken && !chicken.isSick) {
                    allAnimals.push({type: 'chicken', index});
                }
            });
            
            gameState.pigs.forEach((pig, index) => {
                if (pig.hasPig && !pig.isSick) {
                    allAnimals.push({type: 'pig', index});
                }
            });
            
            if (allAnimals.length === 0) return;
            
            // Escolher um animal aleat√≥rio para ficar doente
            const randomAnimal = allAnimals[Math.floor(Math.random() * allAnimals.length)];
            const animal = getAnimalByType(randomAnimal.type, randomAnimal.index);
            
            animal.isSick = true;
            
            // Limpar timers existentes
            if (animal.restTimer) {
                clearTimeout(animal.restTimer);
                animal.restTimer = null;
            }
            
            // Reset estados
            animal.isEating = false;
            animal.isProducing = false;
            animal.isResting = false;
            animal.milkReady = false;
            animal.eggsReady = false;
            animal.woolReady = false;
            animal.meatReady = false;
            
            // Timer de 7 minutos para vacinar ou o animal morre
            animal.sickTimer = setTimeout(() => {
                killAnimal(randomAnimal.type, randomAnimal.index);
            }, 7 * 60 * 1000); // 7 minutos
            
            const animalNames = {
                cow: 'Vaca',
                sheep: 'Ovelha', 
                chicken: 'Galinha',
                pig: 'Porco'
            };
            
            showMessage(`${animalNames[randomAnimal.type]} ${randomAnimal.index + 1} ficou doente! ü§í Vacine em 7 minutos ou ela morrer√°!`);
        }

        // Obter animal por tipo
        function getAnimalByType(type, index) {
            switch(type) {
                case 'cow': return gameState.cows[index];
                case 'sheep': return gameState.sheep[index];
                case 'chicken': return gameState.chickens[index];
                case 'pig': return gameState.pigs[index];
            }
        }

        // Matar animal doente
        function killAnimal(type, index) {
            const animal = getAnimalByType(type, index);
            
            // Reset completo do animal
            if (type === 'cow') {
                gameState.cows[index] = {
                    hasCow: false,
                    isEating: false,
                    isProducing: false,
                    isResting: false,
                    milkReady: false,
                    restTimer: null,
                    isSick: false,
                    sickTimer: null
                };
                resetCowInterface(index);
            } else if (type === 'sheep') {
                gameState.sheep[index] = {
                    hasSheep: false,
                    isEating: false,
                    isProducing: false,
                    isResting: false,
                    woolReady: false,
                    restTimer: null,
                    isSick: false,
                    sickTimer: null
                };
                resetSheepInterface(index);
            } else if (type === 'chicken') {
                gameState.chickens[index] = {
                    hasChicken: false,
                    isEating: false,
                    isProducing: false,
                    isResting: false,
                    eggsReady: false,
                    restTimer: null,
                    isSick: false,
                    sickTimer: null
                };
                resetChickenInterface(index);
            } else if (type === 'pig') {
                gameState.pigs[index] = {
                    hasPig: false,
                    isEating: false,
                    isProducing: false,
                    isResting: false,
                    meatReady: false,
                    restTimer: null,
                    isSick: false,
                    sickTimer: null
                };
                resetPigInterface(index);
            }
            
            const animalNames = {
                cow: 'Vaca',
                sheep: 'Ovelha',
                chicken: 'Galinha', 
                pig: 'Porco'
            };
            
            showMessage(`${animalNames[type]} ${index + 1} morreu de doen√ßa! üíÄ`);
        }

        // Vacinar animal
        function vaccinateAnimal(type, index) {
            if (!gameState.celeiro['üíâ'] || gameState.celeiro['üíâ'] <= 0) {
                showMessage('Voc√™ n√£o tem vacinas! Compre no mercadinho! üíâ');
                return;
            }
            
            const animal = getAnimalByType(type, index);
            if (!animal.isSick) return;
            
            if (!useEnergy()) return;
            
            // Usar vacina
            gameState.celeiro['üíâ']--;
            
            // Curar animal
            animal.isSick = false;
            if (animal.sickTimer) {
                clearTimeout(animal.sickTimer);
                animal.sickTimer = null;
            }
            
            const animalNames = {
                cow: 'Vaca',
                sheep: 'Ovelha',
                chicken: 'Galinha',
                pig: 'Porco'
            };
            
            updateDisplay();
            showMessage(`${animalNames[type]} ${index + 1} foi curada! üíâ‚ú®`);
            randomSickness();
        }

        // Inicializar quitanda com 20 slots
        function initQuitanda() {
            const quitanda = document.getElementById('quitanda');
            for (let i = 0; i < 20; i++) {
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.dataset.slot = i;
                quitanda.appendChild(slot);
            }
        }

        // Atualizar display
        function updateDisplay() {
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('water').textContent = gameState.water;
            document.getElementById('fertilizer').textContent = gameState.fertilizer;
            updateCeleiro();
            updateQuitanda();
            updateSeasonDisplay();
            updateFlowerField();
            updateFruitDisplay();
        }

        // Atualizar display das esta√ß√µes
        function updateSeasonDisplay() {
            const season = seasons[gameState.currentSeason];
            document.getElementById('currentSeason').textContent = season.emoji;
            document.getElementById('seasonName').textContent = season.name;
            document.getElementById('seasonBonus').textContent = season.bonus;
            
            const minutes = Math.floor(gameState.seasonTimer / 60);
            const seconds = gameState.seasonTimer % 60;
            document.getElementById('seasonTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Atualizar campo de flores
        function updateFlowerField() {
            const flowerField = document.getElementById('flowerField');
            if (gameState.currentSeason === 0) { // Primavera
                flowerField.style.display = 'block';
                
                // Atualizar flores dispon√≠veis
                Object.keys(gameState.flowers).forEach(slotIndex => {
                    gameState.flowers[slotIndex].forEach((available, flowerIndex) => {
                        const flowerElement = document.querySelector(`[data-slot="${slotIndex}"][data-flower="${flowerIndex}"]`);
                        if (flowerElement) {
                            flowerElement.style.opacity = available ? '1' : '0.3';
                            flowerElement.style.pointerEvents = available ? 'auto' : 'none';
                        }
                    });
                });
            } else {
                flowerField.style.display = 'none';
            }
        }

        // Atualizar celeiro
        function updateCeleiro() {
            const celeiro = document.getElementById('celeiro');
            celeiro.innerHTML = '';
            
            Object.entries(gameState.celeiro).forEach(([item, count]) => {
                if (count > 0) {
                    const slot = document.createElement('div');
                    slot.className = 'slot w-12 h-12 flex-shrink-0 relative';
                    slot.innerHTML = `${item}<span class="slot-count">${count}</span>`;
                    slot.onclick = () => moveToQuitanda(item);
                    
                    // Adicionar tooltip com pre√ßo (s√≥ para itens vend√°veis)
                    const nonSellableItems = ['üçÇ', 'üî•', 'ü™µ', '‚òòÔ∏è', 'üå∫', 'üåø', 'üü®', 'ü™±', 'üíâ', 'üóùÔ∏è', 'üç´', 'üê≤', 'ü•ë', 'üü£', 'üå∏', 'üå∑', '‚õΩ'];
                    if (itemPrices[item] && !nonSellableItems.includes(item)) {
                        slot.title = `Valor: ${itemPrices[item]} moedas`;
                        slot.style.cursor = 'pointer';
                    } else {
                        slot.title = 'Item especial - N√£o pode ser vendido';
                        slot.style.cursor = 'not-allowed';
                    }
                    
                    celeiro.appendChild(slot);
                }
            });
        }

        // Atualizar quitanda
        function updateQuitanda() {
            const slots = document.querySelectorAll('#quitanda .slot');
            slots.forEach(slot => {
                slot.innerHTML = '';
                slot.onclick = null;
            });
            
            let slotIndex = 0;
            Object.entries(gameState.quitanda).forEach(([item, count]) => {
                if (count > 0 && slotIndex < 20) {
                    const slot = slots[slotIndex];
                    slot.innerHTML = `${item}<span class="slot-count">${count}</span>`;
                    slot.onclick = () => moveToCeleiro(item);
                    slotIndex++;
                }
            });
        }

        // Mover item para quitanda
        function moveToQuitanda(item) {
            const nonSellableItems = ['üçÇ', 'üî•', 'ü™µ', '‚òòÔ∏è', 'üå∫', 'üåø', 'üü®', 'ü™±', 'üíâ', 'üóùÔ∏è', 'üç´', 'üê≤', 'ü•ë', 'üü£', 'üå∏', 'üå∑', '‚õΩ'];
            if (nonSellableItems.includes(item) || !itemPrices[item]) return; // N√£o pode vender itens especiais
            
            if (gameState.celeiro[item] > 0) {
                if (!useEnergy()) return;
                
                gameState.celeiro[item]--;
                gameState.quitanda[item] = (gameState.quitanda[item] || 0) + 1;
                updateDisplay();
                randomSickness();
            }
        }

        // Mover item de volta para celeiro
        function moveToCeleiro(item) {
            if (gameState.quitanda[item] > 0) {
                if (!useEnergy()) return;
                
                gameState.quitanda[item]--;
                gameState.celeiro[item] = (gameState.celeiro[item] || 0) + 1;
                updateDisplay();
                randomSickness();
            }
        }

        // Vender tudo
        function sellAll() {
            if (!useEnergy()) return;
            
            let totalEarnings = 0;
            
            Object.entries(gameState.quitanda).forEach(([item, count]) => {
                if (count > 0 && itemPrices[item]) {
                    let price = itemPrices[item];
                    
                    // Aplicar b√¥nus da esta√ß√£o
                    if (gameState.currentSeason === 0) { // Primavera - planta√ß√µes +10%
                        const plantItems = ['üéÉ', 'ü•¨', 'ü•î', 'ü•¶', 'üî¥', 'ü•ï', 'üåΩ', 'üçÖ', 'üåæ', 'üçá'];
                        if (plantItems.includes(item)) {
                            price = Math.floor(price * 1.1);
                        }
                    }
                    
                    totalEarnings += count * price;
                    gameState.quitanda[item] = 0;
                }
            });
            
            gameState.coins += totalEarnings;
            updateDisplay();
            randomSickness();
            
            if (totalEarnings > 0) {
                showMessage(`Vendeu tudo por ${totalEarnings} moedas! üí∞`);
            }
        }

        // Comprar po√ßo
        function buyWell() {
            if (gameState.coins >= 100 && !gameState.hasWell) {
                if (!useEnergy()) return;
                
                gameState.coins -= 100;
                gameState.hasWell = true;
                document.getElementById('wellArea').style.display = 'block';
                document.getElementById('wellItem').style.display = 'none';
                updateDisplay();
                showMessage('Po√ßo de √°gua comprado! ü™£');
                randomSickness();
            } else if (gameState.hasWell) {
                showMessage('Voc√™ j√° tem um po√ßo! ü™£');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar bosque
        function buyForest() {
            if (gameState.coins >= 200 && !gameState.hasForest) {
                if (!useEnergy()) return;
                
                gameState.coins -= 200;
                gameState.hasForest = true;
                document.getElementById('forestArea').style.display = 'block';
                document.getElementById('axeItem').style.display = 'block';
                document.getElementById('forestItem').style.display = 'none';
                updateDisplay();
                showMessage('Bosque comprado! üå≤');
                randomSickness();
            } else if (gameState.hasForest) {
                showMessage('Voc√™ j√° tem um bosque! üå≤');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar machado
        function buyAxe() {
            if (gameState.coins >= 50 && !gameState.hasAxe) {
                if (!useEnergy()) return;
                
                gameState.coins -= 50;
                gameState.hasAxe = true;
                gameState.axeUses = 40;
                document.getElementById('woodCuttingArea').style.display = 'block';
                document.getElementById('axeItem').style.display = 'none';
                updateDisplay();
                updateAxeDisplay();
                showMessage('Machado comprado! ü™ì');
                randomSickness();
            } else if (gameState.hasAxe) {
                showMessage('Voc√™ j√° tem um machado! ü™ì');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar campo de grama
        function buyGrassField() {
            if (gameState.coins >= 150 && !gameState.hasGrassField) {
                if (!useEnergy()) return;
                
                gameState.coins -= 150;
                gameState.hasGrassField = true;
                document.getElementById('grassField').style.display = 'block';
                document.getElementById('hayMakerItem').style.display = 'flex'; // Mostrar Secador/Feno no mercadinho
                document.getElementById('grassFieldItem').style.display = 'none';
                initGrassField();
                updateDisplay();
                showMessage('Campo de Grama comprado! üåø');
                randomSickness();
            } else if (gameState.hasGrassField) {
                showMessage('Voc√™ j√° tem um campo de grama! üåø');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar Secador/Feno
        function buyHayMaker() {
            if (gameState.coins >= 100 && !gameState.hasHayMaker) {
                if (!useEnergy()) return;
                
                gameState.coins -= 100;
                gameState.hasHayMaker = true;
                document.getElementById('hayMakerArea').style.display = 'block';
                document.getElementById('hayMakerItem').style.display = 'none';
                updateDisplay();
                showMessage('Secador/Feno comprado! ü•ú');
                randomSickness();
            } else if (gameState.hasHayMaker) {
                showMessage('Voc√™ j√° tem um secador/feno! ü•ú');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar √°rea de cozinha
        function buyCookingArea() {
            if (gameState.coins >= 300 && !gameState.hasCookingArea) {
                if (!useEnergy()) return;
                
                gameState.coins -= 300;
                gameState.hasCookingArea = true;
                document.getElementById('cookingArea').style.display = 'block';
                document.getElementById('cookingAreaItem').style.display = 'none';
                updateDisplay();
                showMessage('Fog√£o & Forno comprados! üç≥');
                randomSickness();
            } else if (gameState.hasCookingArea) {
                showMessage('Voc√™ j√° tem fog√£o e forno! üç≥');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar composteira
        function buyComposter() {
            if (gameState.coins >= 250 && !gameState.hasComposter) {
                if (!useEnergy()) return;
                
                gameState.coins -= 250;
                gameState.hasComposter = true;
                document.getElementById('composterArea').style.display = 'block';
                document.getElementById('composterItem').style.display = 'none';
                updateDisplay();
                showMessage('Composteira comprada! üóëÔ∏è');
                randomSickness();
            } else if (gameState.hasComposter) {
                showMessage('Voc√™ j√° tem uma composteira! üóëÔ∏è');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar queijeira
        function buyCheeseMaker() {
            if (gameState.coins >= 200 && !gameState.hasCheeseMaker) {
                if (!useEnergy()) return;
                
                gameState.coins -= 200;
                gameState.hasCheeseMaker = true;
                document.getElementById('cheeseArea').style.display = 'block';
                document.getElementById('cheeseItem').style.display = 'none';
                updateDisplay();
                showMessage('Queijeira comprada! üßÄ');
                randomSickness();
            } else if (gameState.hasCheeseMaker) {
                showMessage('Voc√™ j√° tem uma queijeira! üßÄ');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar m√°quina de suco
        function buyJuiceMaker() {
            if (gameState.coins >= 150 && !gameState.hasJuiceMaker) {
                if (!useEnergy()) return;
                
                gameState.coins -= 150;
                gameState.hasJuiceMaker = true;
                document.getElementById('juiceMakerArea').style.display = 'block';
                document.getElementById('juiceMakerItem').style.display = 'none';
                updateDisplay();
                showMessage('M√°quina de Suco comprada! üßÉ');
                randomSickness();
            } else if (gameState.hasJuiceMaker) {
                showMessage('Voc√™ j√° tem uma m√°quina de suco! üßÉ');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar torra de caf√©
        function buyCoffeeRoaster() {
            if (gameState.coins >= 180 && !gameState.hasCoffeeRoaster) {
                if (!useEnergy()) return;
                
                gameState.coins -= 180;
                gameState.hasCoffeeRoaster = true;
                document.getElementById('coffeeRoasterArea').style.display = 'block';
                document.getElementById('coffeeRoasterItem').style.display = 'none';
                updateDisplay();
                showMessage('Torra de Caf√© comprada! ‚òï');
                randomSickness();
            } else if (gameState.hasCoffeeRoaster) {
                showMessage('Voc√™ j√° tem uma torra de caf√©! ‚òï');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar moinho
        function buyMill() {
            if (gameState.coins >= 120 && !gameState.hasMill) {
                if (!useEnergy()) return;
                
                gameState.coins -= 120;
                gameState.hasMill = true;
                document.getElementById('millArea').style.display = 'block';
                document.getElementById('millItem').style.display = 'none';
                updateDisplay();
                showMessage('Moinho comprado! üè≠');
                randomSickness();
            } else if (gameState.hasMill) {
                showMessage('Voc√™ j√° tem um moinho! üè≠');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Inicializar campo de grama
        function initGrassField() {
            const grassGrid = document.querySelector('#grassField .grid');
            grassGrid.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const grassSlot = document.createElement('div');
                grassSlot.className = 'bg-white rounded-lg p-2 border-2 border-green-300 cursor-pointer hover:bg-green-50 transition-colors';
                grassSlot.innerHTML = `<div class="grass-item text-2xl text-center hover:scale-110 transition-transform" data-grass="${i}">‚òòÔ∏è</div>`;
                grassSlot.onclick = () => collectGrass(i);
                grassGrid.appendChild(grassSlot);
            }
        }

        // Coletar grama
        function collectGrass(grassIndex) {
            if (!gameState.grass[grassIndex]) return;
            if (!useEnergy()) return;
            
            gameState.grass[grassIndex] = false;
            gameState.celeiro['‚òòÔ∏è'] = (gameState.celeiro['‚òòÔ∏è'] || 0) + 1;
            gameState.grassCount++;
            
            // A cada 8 gramas coletadas, ganha um l√≠rio
            if (gameState.grassCount % 8 === 0) {
                gameState.celeiro['üå∫'] = (gameState.celeiro['üå∫'] || 0) + 1;
                showMessage(`Ganhou um l√≠rio üå∫ por coletar 8 gramas! ‚òòÔ∏è‚ú®`);
            }
            
            // Grama renasce em 1 minuto
            setTimeout(() => {
                gameState.grass[grassIndex] = true;
                updateGrassDisplay();
            }, 60 * 1000); // 1 minuto
            
            updateDisplay();
            updateGrassDisplay();
            showMessage('Coletou grama! ‚òòÔ∏è');
            randomSickness();
        }

        // Atualizar display da grama
        function updateGrassDisplay() {
            gameState.grass.forEach((available, grassIndex) => {
                const grassElement = document.querySelector(`[data-grass="${grassIndex}"]`);
                if (grassElement) {
                    grassElement.style.opacity = available ? '1' : '0.3';
                    grassElement.style.pointerEvents = available ? 'auto' : 'none';
                    grassElement.parentElement.style.cursor = available ? 'pointer' : 'not-allowed';
                }
            });
        }

        // Adicionar combust√≠vel ao fog√£o
        function addFuelToStove() {
            if (gameState.stove.isCooking) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üî•'] && gameState.celeiro['üî•'] >= 2) {
                gameState.celeiro['üî•'] -= 2;
                gameState.stove.fuel = 2;
                document.getElementById('stoveFuelSlot').innerHTML = 'üî•üî•';
                updateDisplay();
                checkStoveRecipe();
                showMessage('Lenha adicionada ao fog√£o! üî•');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 2 lenhas! üî•');
            }
        }

        // Adicionar combust√≠vel ao forno
        function addFuelToOven() {
            if (gameState.oven.isCooking) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üî•'] && gameState.celeiro['üî•'] >= 3) {
                gameState.celeiro['üî•'] -= 3;
                gameState.oven.fuel = 3;
                document.getElementById('ovenFuelSlot').innerHTML = 'üî•üî•üî•';
                updateDisplay();
                checkOvenRecipe();
                showMessage('Lenha adicionada ao forno! üî•');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 3 lenhas! üî•');
            }
        }

        // Adicionar ingrediente ao fog√£o
        function addIngredientToStove(slotIndex) {
            if (gameState.stove.isCooking) return;
            if (!useEnergy()) return;
            
            // Mostrar apenas ingredientes v√°lidos para o fog√£o
            const availableItems = stoveIngredients.filter(item => {
                if (item === 'üíß') {
                    return gameState.water > 0; // √Ågua vem do sistema de √°gua
                }
                return gameState.celeiro[item] && gameState.celeiro[item] > 0;
            });
            
            if (availableItems.length === 0) {
                showMessage('Nenhum ingrediente v√°lido dispon√≠vel! üì¶');
                return;
            }
            
            // Por simplicidade, usar o primeiro item dispon√≠vel
            const selectedItem = availableItems[0];
            
            if (selectedItem === 'üíß') {
                if (gameState.water > 0) {
                    gameState.water--;
                    gameState.stove.ingredients[slotIndex - 1] = selectedItem;
                    document.getElementById(`stoveSlot${slotIndex}`).innerHTML = selectedItem;
                    updateDisplay();
                    checkStoveRecipe();
                    showMessage(`${selectedItem} adicionado ao fog√£o!`);
                    randomSickness();
                }
            } else if (gameState.celeiro[selectedItem] > 0) {
                gameState.celeiro[selectedItem]--;
                gameState.stove.ingredients[slotIndex - 1] = selectedItem;
                document.getElementById(`stoveSlot${slotIndex}`).innerHTML = selectedItem;
                updateDisplay();
                checkStoveRecipe();
                showMessage(`${selectedItem} adicionado ao fog√£o!`);
                randomSickness();
            }
        }

        // Adicionar ingrediente ao forno
        function addIngredientToOven(slotIndex) {
            if (gameState.oven.isCooking) return;
            if (!useEnergy()) return;
            
            // Mostrar apenas ingredientes v√°lidos para o forno
            const availableItems = ovenIngredients.filter(item => gameState.celeiro[item] && gameState.celeiro[item] > 0);
            
            if (availableItems.length === 0) {
                showMessage('Nenhum ingrediente v√°lido dispon√≠vel! üì¶');
                return;
            }
            
            const selectedItem = availableItems[0];
            
            if (gameState.celeiro[selectedItem] > 0) {
                gameState.celeiro[selectedItem]--;
                gameState.oven.ingredients[slotIndex - 1] = selectedItem;
                document.getElementById(`ovenSlot${slotIndex}`).innerHTML = selectedItem;
                updateDisplay();
                checkOvenRecipe();
                showMessage(`${selectedItem} adicionado ao forno!`);
                randomSickness();
            }
        }

        // Verificar receita do fog√£o
        function checkStoveRecipe() {
            if (gameState.stove.fuel === 0) return;
            
            const currentIngredients = gameState.stove.ingredients.filter(item => item !== null);
            
            for (const [dish, recipe] of Object.entries(stoveRecipes)) {
                if (arraysEqual(currentIngredients.sort(), recipe.ingredients.sort())) {
                    document.getElementById('stoveRecipe').textContent = recipe.name;
                    document.getElementById('cookStove').disabled = false;
                    return;
                }
            }
            
            document.getElementById('stoveRecipe').textContent = '';
            document.getElementById('cookStove').disabled = true;
        }

        // Verificar receita do forno
        function checkOvenRecipe() {
            if (gameState.oven.fuel === 0) return;
            
            const currentIngredients = gameState.oven.ingredients.filter(item => item !== null);
            
            for (const [dish, recipe] of Object.entries(ovenRecipes)) {
                if (arraysEqual(currentIngredients.sort(), recipe.ingredients.sort())) {
                    document.getElementById('ovenRecipe').textContent = recipe.name;
                    document.getElementById('cookOven').disabled = false;
                    return;
                }
            }
            
            document.getElementById('ovenRecipe').textContent = '';
            document.getElementById('cookOven').disabled = true;
        }

        // Comparar arrays
        function arraysEqual(a, b) {
            return a.length === b.length && a.every((val, i) => val === b[i]);
        }

        // Iniciar cozimento
        function startCooking(type) {
            if (!useEnergy()) return;
            
            const isStove = type === 'stove';
            const cookingState = isStove ? gameState.stove : gameState.oven;
            const recipes = isStove ? stoveRecipes : ovenRecipes;
            
            const currentIngredients = cookingState.ingredients.filter(item => item !== null);
            
            for (const [dish, recipe] of Object.entries(recipes)) {
                if (arraysEqual(currentIngredients.sort(), recipe.ingredients.sort())) {
                    cookingState.isCooking = true;
                    
                    const button = document.getElementById(isStove ? 'cookStove' : 'cookOven');
                    button.disabled = true;
                    button.textContent = `Cozinhando... ${recipe.time}s`;
                    
                    let countdown = recipe.time;
                    const timer = setInterval(() => {
                        countdown--;
                        button.textContent = `Cozinhando... ${countdown}s`;
                        
                        if (countdown <= 0) {
                            clearInterval(timer);
                            finishCooking(type, dish);
                        }
                    }, 1000);
                    
                    showMessage(`Cozinhando ${recipe.name}!`);
                    randomSickness();
                    return;
                }
            }
        }

        // Finalizar cozimento
        function finishCooking(type, dish) {
            const isStove = type === 'stove';
            const cookingState = isStove ? gameState.stove : gameState.oven;
            
            // Adicionar prato ao celeiro
            gameState.celeiro[dish] = (gameState.celeiro[dish] || 0) + 1;
            
            // Reset do equipamento
            cookingState.fuel = 0;
            cookingState.ingredients = [null, null, null, null];
            cookingState.isCooking = false;
            
            // Reset da interface
            const fuelSlot = document.getElementById(isStove ? 'stoveFuelSlot' : 'ovenFuelSlot');
            fuelSlot.innerHTML = `<div class="text-xs text-center text-gray-600">${isStove ? '2' : '3'} üî•</div>`;
            
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`${isStove ? 'stove' : 'oven'}Slot${i}`).innerHTML = '';
            }
            
            const button = document.getElementById(isStove ? 'cookStove' : 'cookOven');
            button.textContent = isStove ? 'üç≥ Cozinhar' : 'üî• Assar';
            button.disabled = true;
            
            document.getElementById(`${isStove ? 'stove' : 'oven'}Recipe`).textContent = '';
            
            updateDisplay();
            showMessage(`${dish} pronto! Adicionado ao celeiro!`);
        }

        // Coletar √°gua do po√ßo
        function collectWater() {
            if (gameState.hasWell) {
                if (!useEnergy()) return;
                
                gameState.water += 4;
                updateDisplay();
                showMessage('Coletou 4 baldes de √°gua! üíß');
                randomSickness();
            }
        }

        // Cortar √°rvore
        function chopTree() {
            if (!gameState.hasAxe) {
                showMessage('Voc√™ precisa de um machado! ü™ì');
                return;
            }
            
            if (!useEnergy()) return;
            
            if (gameState.axeUses <= 0) {
                showMessage('Seu machado quebrou! Compre outro! ü™ì');
                gameState.hasAxe = false;
                document.getElementById('axeItem').style.display = 'block';
                document.getElementById('woodCuttingArea').style.display = 'none';
                return;
            }
            
            gameState.celeiro['ü™µ'] = (gameState.celeiro['ü™µ'] || 0) + 1;
            gameState.woodCount++;
            gameState.axeUses--;
            
            // A cada 3 troncos, ganha 1 galho
            if (gameState.woodCount % 3 === 0) {
                gameState.celeiro['üåø'] = (gameState.celeiro['üåø'] || 0) + 1;
                showMessage('Ganhou um galho! üåø');
            }
            
            updateDisplay();
            updateAxeDisplay();
            showMessage('Coletou 1 tronco! ü™µ');
            randomSickness();
            
            if (gameState.axeUses === 0) {
                showMessage('Seu machado quebrou! ü™ìüí•');
                gameState.hasAxe = false;
                document.getElementById('axeItem').style.display = 'block';
                document.getElementById('woodCuttingArea').style.display = 'none';
            }
        }

        // Coletar fruta
        function collectFruit(type, tree, fruitIndex) {
            if (!gameState.fruits[tree][fruitIndex]) return;
            if (!useEnergy()) return;
            
            gameState.fruits[tree][fruitIndex] = false;
            gameState.celeiro[type] = (gameState.celeiro[type] || 0) + 1;
            
            // Fruta cresce novamente em 5 minutos
            setTimeout(() => {
                gameState.fruits[tree][fruitIndex] = true;
                updateFruitDisplay();
            }, 5 * 60 * 1000);
            
            updateDisplay();
            updateFruitDisplay();
            showMessage(`Coletou ${type}!`);
            randomSickness();
        }

        // Atualizar display das frutas
        function updateFruitDisplay() {
            Object.keys(gameState.fruits).forEach(tree => {
                gameState.fruits[tree].forEach((available, fruitIndex) => {
                    const fruitElement = document.querySelector(`[data-tree="${tree}"][data-fruit="${fruitIndex}"]`);
                    if (fruitElement) {
                        fruitElement.style.opacity = available ? '1' : '0.3';
                        fruitElement.style.pointerEvents = available ? 'auto' : 'none';
                    }
                });
            });
        }

        // Atualizar display do machado
        function updateAxeDisplay() {
            const axeUsesElement = document.getElementById('axeUses');
            if (axeUsesElement) {
                axeUsesElement.textContent = `Machado: ${gameState.axeUses} usos`;
            }
        }

        // Adicionar tronco ao slot
        function addWoodToSlot() {
            if (gameState.woodSlotFilled || gameState.isCutting) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['ü™µ'] && gameState.celeiro['ü™µ'] > 0) {
                gameState.celeiro['ü™µ']--;
                gameState.woodSlotFilled = true;
                document.getElementById('woodSlot').innerHTML = 'ü™µ';
                document.getElementById('cutButton').disabled = false;
                updateDisplay();
                showMessage('Tronco adicionado! ü™µ');
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem troncos! ü™µ');
            }
        }

        // Cortar lenha
        function cutWood() {
            if (!gameState.woodSlotFilled || gameState.isCutting) return;
            if (!useEnergy()) return;
            
            if (gameState.axeUses <= 0) {
                showMessage('Seu machado quebrou! ü™ì');
                return;
            }
            
            gameState.isCutting = true;
            gameState.axeUses--;
            document.getElementById('cutButton').disabled = true;
            document.getElementById('cutButton').textContent = 'Cortando... 3s';
            
            let countdown = 3;
            const timer = setInterval(() => {
                countdown--;
                document.getElementById('cutButton').textContent = `Cortando... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    
                    // Adicionar 4 lenhas ao celeiro
                    gameState.celeiro['üî•'] = (gameState.celeiro['üî•'] || 0) + 4;
                    
                    // Reset do slot
                    gameState.woodSlotFilled = false;
                    gameState.isCutting = false;
                    document.getElementById('woodSlot').innerHTML = '';
                    document.getElementById('cutButton').textContent = 'ü™ì Cortar';
                    document.getElementById('cutButton').disabled = true;
                    
                    updateDisplay();
                    updateAxeDisplay();
                    showMessage('Cortou 4 lenhas! üî•');
                    randomSickness();
                    
                    if (gameState.axeUses === 0) {
                        showMessage('Seu machado quebrou! ü™ìüí•');
                        gameState.hasAxe = false;
                        document.getElementById('axeItem').style.display = 'block';
                        document.getElementById('woodCuttingArea').style.display = 'none';
                    }
                }
            }, 1000);
        }

        // Adicionar grama ao secador
        function addGrassToDryer() {
            if (gameState.dryer.isDrying || gameState.dryer.grassCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['‚òòÔ∏è'] && gameState.celeiro['‚òòÔ∏è'] >= 8) {
                gameState.celeiro['‚òòÔ∏è'] -= 8;
                gameState.dryer.grassCount = 8;
                document.getElementById('dryerSlot').innerHTML = '‚òòÔ∏èx8';
                document.getElementById('dryButton').disabled = false;
                updateDisplay();
                showMessage('8 trevos adicionados ao secador! ‚òòÔ∏è');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 8 trevos! ‚òòÔ∏è');
            }
        }

        // Iniciar secagem
        function startDrying() {
            if (gameState.dryer.grassCount < 8 || gameState.dryer.isDrying) return;
            if (!useEnergy()) return;
            
            gameState.dryer.isDrying = true;
            document.getElementById('dryButton').disabled = true;
            document.getElementById('dryButton').textContent = 'Secando... 30s';
            
            let countdown = 30;
            const timer = setInterval(() => {
                countdown--;
                document.getElementById('dryButton').textContent = `Secando... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    
                    // Adicionar 8 gramas secas ao celeiro
                    gameState.celeiro['üçÇ'] = (gameState.celeiro['üçÇ'] || 0) + 8;
                    
                    // Reset do secador
                    gameState.dryer.grassCount = 0;
                    gameState.dryer.isDrying = false;
                    document.getElementById('dryerSlot').innerHTML = '';
                    document.getElementById('dryButton').textContent = '‚òÄÔ∏è Secar';
                    document.getElementById('dryButton').disabled = true;
                    
                    updateDisplay();
                    showMessage('Secagem conclu√≠da! 8 gramas secas prontas! üçÉ');
                    randomSickness();
                }
            }, 1000);
        }

        // Adicionar grama seca ao fazer feno
        function addDriedGrassToHay() {
            if (gameState.hayMaker.isMaking || gameState.hayMaker.driedGrassCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üçÇ'] && gameState.celeiro['üçÇ'] >= 4) {
                gameState.celeiro['üçÇ'] -= 4;
                gameState.hayMaker.driedGrassCount = 4;
                document.getElementById('haySlot').innerHTML = 'üçÇx4';
                document.getElementById('hayButton').disabled = false;
                updateDisplay();
                showMessage('4 gramas secas adicionadas! üçÇ');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 4 gramas secas! üçÇ');
            }
        }

        // Iniciar fazer feno
        function startHayMaking() {
            if (gameState.hayMaker.driedGrassCount < 4 || gameState.hayMaker.isMaking) return;
            if (!useEnergy()) return;
            
            gameState.hayMaker.isMaking = true;
            document.getElementById('hayButton').disabled = true;
            document.getElementById('hayButton').textContent = 'Fazendo... 10s';
            
            let countdown = 10;
            const timer = setInterval(() => {
                countdown--;
                document.getElementById('hayButton').textContent = `Fazendo... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    
                    // Adicionar 1 feno ao celeiro
                    gameState.celeiro['üü®'] = (gameState.celeiro['üü®'] || 0) + 1;
                    
                    // Reset do fazer feno
                    gameState.hayMaker.driedGrassCount = 0;
                    gameState.hayMaker.isMaking = false;
                    document.getElementById('haySlot').innerHTML = '';
                    document.getElementById('hayButton').textContent = 'üåæ Fazer';
                    document.getElementById('hayButton').disabled = true;
                    
                    updateDisplay();
                    showMessage('Feno pronto! üåæ');
                    randomSickness();
                }
            }, 1000);
        }

        // Selecionar semente
        document.querySelectorAll('.seed-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.seed-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                gameState.selectedSeed = btn.dataset.seed;
                gameState.selectedSeedName = btn.dataset.name;
            });
        });

        // L√≥gica dos canteiros
        document.querySelectorAll('.canteiro').forEach(canteiro => {
            canteiro.addEventListener('click', () => {
                const index = parseInt(canteiro.dataset.canteiro);
                const canteiroState = gameState.canteiros[index];
                
                if (canteiroState.state === 'empty') {
                    // Adubar
                    if (gameState.fertilizer > 0) {
                        if (!useEnergy()) return;
                        
                        gameState.fertilizer--;
                        canteiroState.state = 'fertilized';
                        canteiro.classList.add('fertilized');
                        canteiro.innerHTML = 'üå±';
                        updateDisplay();
                        randomSickness();
                    } else {
                        showMessage('Sem adubo! üçÇ');
                    }
                } else if (canteiroState.state === 'fertilized') {
                    // Plantar
                    if (gameState.coins >= 10) {
                        if (!useEnergy()) return;
                        
                        gameState.coins -= 10;
                        canteiroState.state = 'planted';
                        canteiroState.seed = gameState.selectedSeed;
                        canteiroState.seedName = gameState.selectedSeedName;
                        canteiro.classList.remove('fertilized');
                        canteiro.classList.add('planted');
                        canteiro.innerHTML = 'üå±';
                        updateDisplay();
                        randomSickness();
                    } else {
                        showMessage('Moedas insuficientes! üí∏');
                    }
                } else if (canteiroState.state === 'planted') {
                    // Regar
                    if (gameState.water > 0) {
                        if (!useEnergy()) return;
                        
                        gameState.water--;
                        canteiroState.state = 'watered';
                        canteiro.classList.remove('planted');
                        canteiro.classList.add('watered');
                        canteiro.innerHTML = 'üíß';
                        
                        // Timer para crescimento (30 segundos)
                        canteiroState.timer = setTimeout(() => {
                            canteiroState.state = 'ready';
                            canteiro.classList.remove('watered');
                            canteiro.classList.add('ready');
                            canteiro.innerHTML = canteiroState.seed;
                        }, 30000);
                        
                        updateDisplay();
                        randomSickness();
                    } else {
                        showMessage('Sem √°gua! üíß');
                    }
                } else if (canteiroState.state === 'ready') {
                    // Colher
                    if (!useEnergy()) return;
                    
                    const seed = canteiroState.seed;
                    let harvestAmount = 1;
                    
                    // No ver√£o, cada canteiro d√° 2 frutos
                    if (gameState.currentSeason === 1) {
                        harvestAmount = 2;
                    }
                    
                    gameState.celeiro[seed] = (gameState.celeiro[seed] || 0) + harvestAmount;
                    
                    // Sistema de minhocas - a cada 2 canteiros colhidos
                    gameState.harvestedCount = (gameState.harvestedCount || 0) + 1;
                    if (gameState.harvestedCount % 2 === 0) {
                        gameState.celeiro['ü™±'] = (gameState.celeiro['ü™±'] || 0) + 1;
                        showMessage('Uma minhoca apareceu! ü™±');
                    }
                    
                    // Reset canteiro
                    canteiroState.state = 'empty';
                    canteiroState.seed = null;
                    canteiroState.seedName = null;
                    canteiro.className = 'canteiro';
                    canteiro.innerHTML = '';
                    
                    updateDisplay();
                    showMessage(`Colheu ${harvestAmount}x ${seed}! üåæ`);
                    randomSickness();
                }
            });
        });

        // Sistema de esta√ß√µes
        function updateSeason() {
            gameState.seasonTimer--;
            
            if (gameState.seasonTimer <= 0) {
                gameState.currentSeason = (gameState.currentSeason + 1) % 4;
                gameState.seasonTimer = 3600; // Reset para 1 hora
                showMessage(`${seasons[gameState.currentSeason].emoji} ${seasons[gameState.currentSeason].name} chegou!`);
            }
            
            updateDisplay();
        }

        // Coletar flores
        function collectFlower(type, slotIndex, flowerIndex) {
            if (!gameState.flowers[slotIndex][flowerIndex]) return;
            if (!useEnergy()) return;
            
            gameState.flowers[slotIndex][flowerIndex] = false;
            gameState.celeiro[type] = (gameState.celeiro[type] || 0) + 1;
            gameState.flowerCount++;
            
            // A cada 4 flores coletadas, ganha uma erva
            if (gameState.flowerCount % 4 === 0) {
                gameState.celeiro['üçÉ'] = (gameState.celeiro['üçÉ'] || 0) + 1;
                showMessage('Ganhou folhas verdes! üçÉ');
            }
            
            // Flor cresce novamente em 5 minutos
            setTimeout(() => {
                gameState.flowers[slotIndex][flowerIndex] = true;
                updateDisplay();
            }, 5 * 60 * 1000);
            
            updateDisplay();
            showMessage(`Coletou ${type}!`);
            randomSickness();
        }

        // Timer das esta√ß√µes (atualiza a cada segundo)
        setInterval(updateSeason, 1000);
        
        // Timer para atualizar display das vacas (a cada segundo)
        setInterval(updateCowDisplay, 1000);
        
        // Timer para atualizar display das ovelhas (a cada segundo)
        setInterval(updateSheepDisplay, 1000);
        
        // Timer para atualizar display das galinhas (a cada segundo)
        setInterval(updateChickenDisplay, 1000);
        
        // Timer para atualizar display dos porcos (a cada segundo)
        setInterval(updatePigDisplay, 1000);
        
        // Timer para atualizar display dos peixes (a cada segundo)
        setInterval(updateFishDisplay, 1000);

        // Mostrar mensagens
        function showMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'fixed top-20 right-4 bg-yellow-400 text-yellow-900 px-4 py-2 rounded-lg font-bold shadow-lg z-50';
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => messageDiv.remove(), 3000);
        }

        // Event listeners
        document.getElementById('sellAll').addEventListener('click', sellAll);

        // Event listeners para flores
        document.querySelectorAll('.flower-item').forEach(flower => {
            flower.addEventListener('click', () => {
                const type = flower.dataset.type;
                const slotIndex = parseInt(flower.dataset.slot);
                const flowerIndex = parseInt(flower.dataset.flower);
                collectFlower(type, slotIndex, flowerIndex);
            });
        });

        // Event listeners para frutas
        document.querySelectorAll('.fruit-item').forEach(fruit => {
            fruit.addEventListener('click', () => {
                const type = fruit.dataset.type;
                const tree = fruit.dataset.tree;
                const fruitIndex = parseInt(fruit.dataset.fruit);
                collectFruit(type, tree, fruitIndex);
            });
        });

        // Comprar pasto das vacas
        function buyPasture() {
            if (gameState.coins >= 400 && !gameState.hasPasture) {
                if (!useEnergy()) return;
                
                gameState.coins -= 400;
                gameState.hasPasture = true;
                document.getElementById('pastureArea').style.display = 'block';
                document.getElementById('cowItem').style.display = 'flex'; // Mostrar vaca no mercadinho
                document.getElementById('pastureItem').style.display = 'none';
                updateDisplay();
                showMessage('Pasto das Vacas comprado! üêÑ');
                randomSickness();
            } else if (gameState.hasPasture) {
                showMessage('Voc√™ j√° tem um pasto! üêÑ');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar vaca
        function buyCow() {
            if (gameState.coins >= 500) {
                if (!useEnergy()) return;
                
                gameState.coins -= 500;
                gameState.celeiro['üêÑ'] = (gameState.celeiro['üêÑ'] || 0) + 1;
                updateDisplay();
                showMessage('Vaca comprada! Adicione ao pasto! üêÑ');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Adicionar vaca ao slot
        function addCowToSlot(slotIndex) {
            if (gameState.cows[slotIndex].hasCow) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üêÑ'] && gameState.celeiro['üêÑ'] > 0) {
                gameState.celeiro['üêÑ']--;
                gameState.cows[slotIndex].hasCow = true;
                
                // Atualizar interface
                const cowSlot = document.getElementById(`cowSlot${slotIndex}`);
                cowSlot.innerHTML = `
                    <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêÑ</div>
                    <div class="text-sm text-green-600 font-bold">Vaca adicionada!</div>
                `;
                cowSlot.onclick = null;
                
                // Mostrar slot de feno
                const haySlot = document.getElementById(`haySlot${slotIndex}`);
                haySlot.style.display = 'block';
                haySlot.querySelector('.slot').innerHTML = 'üü®';
                
                updateDisplay();
                showMessage('Vaca adicionada ao pasto! üêÑ');
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem vacas! Compre no mercadinho! üêÑ');
            }
        }

        // Fun√ß√µes de reset das interfaces
        function resetCowInterface(index) {
            const cowSlot = document.getElementById(`cowSlot${index}`);
            cowSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar vaca</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            cowSlot.onclick = () => addCowToSlot(index);
            
            document.getElementById(`haySlot${index}`).style.display = 'none';
            document.getElementById(`milkCollection${index}`).style.display = 'none';
        }

        function resetSheepInterface(index) {
            const sheepSlot = document.getElementById(`sheepSlot${index}`);
            sheepSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar ovelha</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            sheepSlot.onclick = () => addSheepToSlot(index);
            
            document.getElementById(`sheepHaySlot${index}`).style.display = 'none';
            document.getElementById(`woolCollection${index}`).style.display = 'none';
        }

        function resetChickenInterface(index) {
            const chickenSlot = document.getElementById(`chickenSlot${index}`);
            chickenSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            chickenSlot.onclick = () => addChickenToSlot(index);
            
            document.getElementById(`chickenFeedSlot${index}`).style.display = 'none';
            document.getElementById(`eggCollection${index}`).style.display = 'none';
            document.getElementById(`sacrificeBtn${index}`).style.display = 'none';
        }

        function resetPigInterface(index) {
            const pigSlot = document.getElementById(`pigSlot${index}`);
            pigSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar porco</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            pigSlot.onclick = () => addPigToSlot(index);
            
            document.getElementById(`pigFeedSlot${index}`).style.display = 'none';
            document.getElementById(`meatCollection${index}`).style.display = 'none';
        }

        // Alimentar vaca com feno
        function feedCow(slotIndex) {
            const cow = gameState.cows[slotIndex];
            if (!cow.hasCow || cow.isEating || cow.isProducing || cow.isResting || cow.isSick) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üü®'] && gameState.celeiro['üü®'] > 0) {
                gameState.celeiro['üü®']--;
                cow.isEating = true;
                
                // Atualizar status e interface
                const statusElement = document.getElementById(`cowStatus${slotIndex}`);
                const haySlot = document.getElementById(`haySlot${slotIndex}`).querySelector('.slot');
                
                statusElement.textContent = 'Comendo... 15s';
                haySlot.style.pointerEvents = 'none';
                haySlot.style.opacity = '0.5';
                haySlot.innerHTML = 'üçΩÔ∏è';
                
                // Comer por 15 segundos
                let countdown = 15;
                const eatTimer = setInterval(() => {
                    countdown--;
                    statusElement.textContent = `Comendo... ${countdown}s`;
                    
                    if (countdown <= 0) {
                        clearInterval(eatTimer);
                        startMilkProduction(slotIndex);
                    }
                }, 1000);
                
                updateDisplay();
                showMessage(`Vaca ${slotIndex + 1} est√° comendo feno! üü®`);
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem feno! Fa√ßa no secador! üü®');
            }
        }

        // Iniciar produ√ß√£o de leite
        function startMilkProduction(slotIndex) {
            const cow = gameState.cows[slotIndex];
            cow.isEating = false;
            cow.isProducing = true;
            
            const statusElement = document.getElementById(`cowStatus${slotIndex}`);
            const haySlot = document.getElementById(`haySlot${slotIndex}`).querySelector('.slot');
            
            // Produzir por 10 segundos
            statusElement.textContent = 'Produzindo leite... 10s';
            haySlot.innerHTML = 'ü•õ';
            
            let countdown = 10;
            const produceTimer = setInterval(() => {
                countdown--;
                statusElement.textContent = `Produzindo leite... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(produceTimer);
                    finishMilkProduction(slotIndex);
                }
            }, 1000);
        }

        // Finalizar produ√ß√£o de leite
        function finishMilkProduction(slotIndex) {
            const cow = gameState.cows[slotIndex];
            cow.isProducing = false;
            cow.milkReady = true;
            
            // Esconder slot de feno e mostrar coleta de leite
            document.getElementById(`haySlot${slotIndex}`).style.display = 'none';
            document.getElementById(`milkCollection${slotIndex}`).style.display = 'block';
            
            showMessage(`Vaca ${slotIndex + 1} produziu leite! Clique para coletar! ü•õ`);
        }

        // Coletar leite
        function collectMilk(slotIndex) {
            const cow = gameState.cows[slotIndex];
            if (!cow.milkReady) return;
            if (!useEnergy()) return;
            
            // Adicionar 3 leites e 1 esterco
            let milkAmount = 3;
            let manureAmount = 1;
            
            // B√¥nus do outono: produtos animais +15%
            if (gameState.currentSeason === 2) {
                milkAmount = Math.floor(milkAmount * 1.15);
                manureAmount = Math.floor(manureAmount * 1.15);
            }
            
            gameState.celeiro['ü•õ'] = (gameState.celeiro['ü•õ'] || 0) + milkAmount;
            gameState.celeiro['üí©'] = (gameState.celeiro['üí©'] || 0) + manureAmount;
            
            cow.milkReady = false;
            cow.isResting = true;
            
            // Esconder coleta e mostrar descanso
            document.getElementById(`milkCollection${slotIndex}`).style.display = 'none';
            const statusElement = document.getElementById(`cowStatus${slotIndex}`);
            statusElement.textContent = 'Descansando... 10min';
            statusElement.style.display = 'block';
            
            // Descansar por 10 minutos
            cow.restTimer = setTimeout(() => {
                cow.isResting = false;
                const haySlot = document.getElementById(`haySlot${slotIndex}`);
                haySlot.style.display = 'block';
                haySlot.querySelector('.slot').style.pointerEvents = 'auto';
                haySlot.querySelector('.slot').style.opacity = '1';
                haySlot.querySelector('.slot').innerHTML = 'üü®';
                statusElement.textContent = 'Pronta para comer!';
                showMessage(`Vaca ${slotIndex + 1} terminou o descanso! üêÑ`);
            }, 10 * 60 * 1000); // 10 minutos
            
            updateDisplay();
            showMessage(`Coletou ${milkAmount} leites e ${manureAmount} esterco da vaca ${slotIndex + 1}! ü•õüí©`);
            randomSickness();
        }

        // Atualizar display das vacas
        function updateCowDisplay() {
            gameState.cows.forEach((cow, index) => {
                const statusElement = document.getElementById(`cowStatus${index}`);
                const haySlot = document.getElementById(`haySlot${index}`);
                const milkCollection = document.getElementById(`milkCollection${index}`);
                
                if (!cow.hasCow) return;
                
                if (cow.isResting && cow.restTimer) {
                    // Mostrar tempo restante do descanso
                    const timeLeft = Math.ceil((cow.restTimer._idleStart + cow.restTimer._idleTimeout - Date.now()) / 1000);
                    if (timeLeft > 0) {
                        const minutes = Math.floor(timeLeft / 60);
                        const seconds = timeLeft % 60;
                        statusElement.textContent = `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Remover vaca do slot
        function removeCowFromSlot(slotIndex) {
            if (!gameState.cows[slotIndex].hasCow) return;
            if (!useEnergy()) return;
            
            const cow = gameState.cows[slotIndex];
            
            // Limpar timers
            if (cow.restTimer) {
                clearTimeout(cow.restTimer);
                cow.restTimer = null;
            }
            
            // Devolver vaca ao celeiro
            gameState.celeiro['üêÑ'] = (gameState.celeiro['üêÑ'] || 0) + 1;
            
            // Reset do estado da vaca
            gameState.cows[slotIndex] = {
                hasCow: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                milkReady: false,
                restTimer: null
            };
            
            // Reset da interface
            const cowSlot = document.getElementById(`cowSlot${slotIndex}`);
            cowSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar vaca</div>
            `;
            cowSlot.onclick = () => addCowToSlot(slotIndex);
            
            document.getElementById(`haySlot${slotIndex}`).style.display = 'none';
            document.getElementById(`milkCollection${slotIndex}`).style.display = 'none';
            
            updateDisplay();
            showMessage(`Vaca ${slotIndex + 1} removida do pasto! üêÑ`);
            randomSickness();
        }

        // Adicionar ingrediente √† composteira
        function addIngredientToComposter(slotIndex) {
            if (gameState.composter.isComposting) return;
            if (!useEnergy()) return;
            
            let ingredient = null;
            let requiredAmount = 1;
            
            // Definir ingrediente baseado no slot
            if (slotIndex === 1) {
                ingredient = 'üå∫'; // l√≠rio
            } else if (slotIndex === 2) {
                ingredient = 'üåø'; // galho
            } else if (slotIndex === 3) {
                ingredient = 'üí©'; // esterco
                requiredAmount = 2;
            }
            
            // Verificar se j√° tem ingrediente no slot
            if (gameState.composter.ingredients[slotIndex - 1] !== null) {
                showMessage('Slot j√° preenchido! üóëÔ∏è');
                return;
            }
            
            // Verificar se tem o ingrediente no celeiro
            if (gameState.celeiro[ingredient] && gameState.celeiro[ingredient] >= requiredAmount) {
                gameState.celeiro[ingredient] -= requiredAmount;
                gameState.composter.ingredients[slotIndex - 1] = ingredient;
                
                // Atualizar interface
                const slotElement = document.getElementById(`composterSlot${slotIndex}`);
                if (requiredAmount === 2) {
                    slotElement.innerHTML = `${ingredient}${ingredient}`;
                } else {
                    slotElement.innerHTML = ingredient;
                }
                
                updateDisplay();
                checkComposterRecipe();
                showMessage(`${ingredient} adicionado √† composteira!`);
                randomSickness();
            } else {
                showMessage(`Voc√™ precisa de ${requiredAmount} ${ingredient}! üì¶`);
            }
        }

        // Verificar receita da composteira
        function checkComposterRecipe() {
            const hasAllIngredients = gameState.composter.ingredients.every(ingredient => ingredient !== null);
            
            if (hasAllIngredients) {
                document.getElementById('composterButton').disabled = false;
            } else {
                document.getElementById('composterButton').disabled = true;
            }
        }

        // Iniciar compostagem
        function startComposting() {
            if (gameState.composter.isComposting) return;
            if (!useEnergy()) return;
            
            const hasAllIngredients = gameState.composter.ingredients.every(ingredient => ingredient !== null);
            if (!hasAllIngredients) return;
            
            gameState.composter.isComposting = true;
            
            const button = document.getElementById('composterButton');
            button.disabled = true;
            button.textContent = 'Fazendo... 60s';
            
            let countdown = 60;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Fazendo... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishComposting();
                }
            }, 1000);
            
            showMessage('Compostagem iniciada! üóëÔ∏è');
            randomSickness();
        }

        // Finalizar compostagem
        function finishComposting() {
            // Adicionar 10 adubos
            gameState.fertilizer += 10;
            
            // Reset da composteira
            gameState.composter.ingredients = [null, null, null];
            gameState.composter.isComposting = false;
            
            // Reset da interface
            for (let i = 1; i <= 3; i++) {
                const slotElement = document.getElementById(`composterSlot${i}`);
                if (i === 1) {
                    slotElement.innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üå∫</div>';
                } else if (i === 2) {
                    slotElement.innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üåø</div>';
                } else {
                    slotElement.innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üí©x2</div>';
                }
            }
            
            const button = document.getElementById('composterButton');
            button.textContent = 'üóëÔ∏è Fazer';
            button.disabled = true;
            
            updateDisplay();
            showMessage('Compostagem conclu√≠da! +10 adubos! üçÇ');
        }

        // Adicionar leite √† queijeira
        function addMilkToCheeseMaker() {
            if (gameState.cheeseMaker.isMaking || gameState.cheeseMaker.milkCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['ü•õ'] && gameState.celeiro['ü•õ'] >= 2) {
                gameState.celeiro['ü•õ'] -= 2;
                gameState.cheeseMaker.milkCount = 2;
                document.getElementById('cheeseSlot').innerHTML = 'ü•õü•õ';
                document.getElementById('cheeseButton').disabled = false;
                updateDisplay();
                showMessage('2 leites adicionados √† queijeira! ü•õ');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 2 leites! ü•õ');
            }
        }

        // Iniciar produ√ß√£o de queijo
        function startCheeseMaking() {
            if (gameState.cheeseMaker.milkCount < 2 || gameState.cheeseMaker.isMaking) return;
            if (!useEnergy()) return;
            
            gameState.cheeseMaker.isMaking = true;
            
            const button = document.getElementById('cheeseButton');
            button.disabled = true;
            button.textContent = 'Curando... 60s';
            
            let countdown = 60;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Curando... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishCheeseMaking();
                }
            }, 1000);
            
            showMessage('Queijo sendo curado! üßÄ');
            randomSickness();
        }

        // Finalizar produ√ß√£o de queijo
        function finishCheeseMaking() {
            // Adicionar 1 queijo ao celeiro
            gameState.celeiro['üßÄ'] = (gameState.celeiro['üßÄ'] || 0) + 1;
            
            // Reset da queijeira
            gameState.cheeseMaker.milkCount = 0;
            gameState.cheeseMaker.isMaking = false;
            
            // Reset da interface
            document.getElementById('cheeseSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">ü•õx2</div>';
            
            const button = document.getElementById('cheeseButton');
            button.textContent = 'üßÄ Curar';
            button.disabled = true;
            
            updateDisplay();
            showMessage('Queijo pronto! Adicionado ao celeiro! üßÄ');
        }

        // Adicionar uvas √† m√°quina de suco
        function addGrapesToJuiceMaker() {
            if (gameState.juiceMaker.isMaking || gameState.juiceMaker.grapeCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üçá'] && gameState.celeiro['üçá'] >= 3) {
                gameState.celeiro['üçá'] -= 3;
                gameState.juiceMaker.grapeCount = 3;
                document.getElementById('juiceSlot').innerHTML = 'üçáüçáüçá';
                document.getElementById('juiceButton').disabled = false;
                updateDisplay();
                showMessage('3 uvas adicionadas √† m√°quina de suco! üçá');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 3 uvas! üçá');
            }
        }

        // Iniciar produ√ß√£o de suco
        function startJuiceProduction() {
            if (gameState.juiceMaker.grapeCount < 3 || gameState.juiceMaker.isMaking) return;
            if (!useEnergy()) return;
            
            gameState.juiceMaker.isMaking = true;
            
            const button = document.getElementById('juiceButton');
            button.disabled = true;
            button.textContent = 'Produzindo... 20s';
            
            let countdown = 20;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Produzindo... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishJuiceProduction();
                }
            }, 1000);
            
            showMessage('Suco sendo produzido! üßÉ');
            randomSickness();
        }

        // Finalizar produ√ß√£o de suco
        function finishJuiceProduction() {
            // Adicionar 1 garrafa de suco ao celeiro
            gameState.celeiro['üßÉ'] = (gameState.celeiro['üßÉ'] || 0) + 1;
            
            // Reset da m√°quina de suco
            gameState.juiceMaker.grapeCount = 0;
            gameState.juiceMaker.isMaking = false;
            
            // Reset da interface
            document.getElementById('juiceSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üçáx3</div>';
            
            const button = document.getElementById('juiceButton');
            button.textContent = 'üßÉ Produzir';
            button.disabled = true;
            
            updateDisplay();
            showMessage('Garrafa de suco pronta! Adicionada ao celeiro! üßÉ');
        }

        // Adicionar lenha √† torra de caf√©
        function addWoodToCoffeeRoaster() {
            if (gameState.coffeeRoaster.isRoasting || gameState.coffeeRoaster.woodCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üî•'] && gameState.celeiro['üî•'] >= 3) {
                gameState.celeiro['üî•'] -= 3;
                gameState.coffeeRoaster.woodCount = 3;
                document.getElementById('coffeeWoodSlot').innerHTML = 'üî•üî•üî•';
                updateDisplay();
                checkCoffeeRoasterRecipe();
                showMessage('3 lenhas adicionadas √† torra de caf√©! üî•');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 3 lenhas! üî•');
            }
        }

        // Adicionar gr√£os de caf√© √† torra
        function addCoffeeBeansToCoffeeRoaster() {
            if (gameState.coffeeRoaster.isRoasting || gameState.coffeeRoaster.coffeeBeanCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üî¥'] && gameState.celeiro['üî¥'] >= 4) {
                gameState.celeiro['üî¥'] -= 4;
                gameState.coffeeRoaster.coffeeBeanCount = 4;
                document.getElementById('coffeeBeanSlot').innerHTML = 'üî¥üî¥üî¥üî¥';
                updateDisplay();
                checkCoffeeRoasterRecipe();
                showMessage('4 gr√£os de caf√© adicionados √† torra! üî¥');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 4 gr√£os de caf√©! üî¥');
            }
        }

        // Verificar receita da torra de caf√©
        function checkCoffeeRoasterRecipe() {
            if (gameState.coffeeRoaster.woodCount >= 3 && gameState.coffeeRoaster.coffeeBeanCount >= 4) {
                document.getElementById('coffeeRoasterButton').disabled = false;
            } else {
                document.getElementById('coffeeRoasterButton').disabled = true;
            }
        }

        // Iniciar torrefa√ß√£o do caf√©
        function startCoffeeRoasting() {
            if (gameState.coffeeRoaster.woodCount < 3 || gameState.coffeeRoaster.coffeeBeanCount < 4 || gameState.coffeeRoaster.isRoasting) return;
            if (!useEnergy()) return;
            
            gameState.coffeeRoaster.isRoasting = true;
            
            const button = document.getElementById('coffeeRoasterButton');
            button.disabled = true;
            button.textContent = 'Torrando... 60s';
            
            let countdown = 60;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Torrando... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishCoffeeRoasting();
                }
            }, 1000);
            
            showMessage('Caf√© sendo torrado! ‚òï');
            randomSickness();
        }

        // Finalizar torrefa√ß√£o do caf√©
        function finishCoffeeRoasting() {
            // Adicionar 1 saco de caf√© ao celeiro
            gameState.celeiro['‚òï'] = (gameState.celeiro['‚òï'] || 0) + 1;
            
            // Reset da torra de caf√©
            gameState.coffeeRoaster.woodCount = 0;
            gameState.coffeeRoaster.coffeeBeanCount = 0;
            gameState.coffeeRoaster.isRoasting = false;
            
            // Reset da interface
            document.getElementById('coffeeWoodSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üî•x3</div>';
            document.getElementById('coffeeBeanSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üî¥x4</div>';
            
            const button = document.getElementById('coffeeRoasterButton');
            button.textContent = '‚òï Torrar';
            button.disabled = true;
            
            updateDisplay();
            showMessage('Saco de caf√© pronto! Adicionado ao celeiro! ‚òï');
        }

        // Adicionar trigo ao moinho
        function addWheatToMill() {
            if (gameState.mill.isMilling || gameState.mill.wheatCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üåæ'] && gameState.celeiro['üåæ'] >= 4) {
                gameState.celeiro['üåæ'] -= 4;
                gameState.mill.wheatCount = 4;
                document.getElementById('millSlot').innerHTML = 'üåæüåæüåæüåæ';
                document.getElementById('millButton').disabled = false;
                updateDisplay();
                showMessage('4 trigos adicionados ao moinho! üåæ');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 4 trigos! üåæ');
            }
        }

        // Iniciar moagem
        function startMilling() {
            if (gameState.mill.wheatCount < 4 || gameState.mill.isMilling) return;
            if (!useEnergy()) return;
            
            gameState.mill.isMilling = true;
            
            const button = document.getElementById('millButton');
            button.disabled = true;
            button.textContent = 'Moendo... 30s';
            
            let countdown = 30;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Moendo... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishMilling();
                }
            }, 1000);
            
            showMessage('Trigo sendo mo√≠do! üè≠');
            randomSickness();
        }

        // Finalizar moagem
        function finishMilling() {
            // Adicionar 1 saco de farinha ao celeiro
            gameState.celeiro['ü•Ñ'] = (gameState.celeiro['ü•Ñ'] || 0) + 1;
            
            // Reset do moinho
            gameState.mill.wheatCount = 0;
            gameState.mill.isMilling = false;
            
            // Reset da interface
            document.getElementById('millSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üåæx4</div>';
            
            const button = document.getElementById('millButton');
            button.textContent = 'üè≠ Moer';
            button.disabled = true;
            
            updateDisplay();
            showMessage('Saco de farinha pronto! Adicionado ao celeiro! ü•Ñ');
        }

        // Comprar m√°quina de fiar
        function buySpinningWheel() {
            if (gameState.coins >= 120 && !gameState.hasSpinningWheel) {
                if (!useEnergy()) return;
                
                gameState.coins -= 120;
                gameState.hasSpinningWheel = true;
                document.getElementById('spinningWheelArea').style.display = 'block';
                document.getElementById('spinningWheelItem').style.display = 'none';
                updateDisplay();
                showMessage('M√°quina de Fiar comprada! üé°');
                randomSickness();
            } else if (gameState.hasSpinningWheel) {
                showMessage('Voc√™ j√° tem uma m√°quina de fiar! üé°');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar misturador
        function buyMixer() {
            if (gameState.coins >= 180 && !gameState.hasMixer) {
                if (!useEnergy()) return;
                
                gameState.coins -= 180;
                gameState.hasMixer = true;
                document.getElementById('mixerArea').style.display = 'block';
                document.getElementById('mixerItem').style.display = 'none';
                updateDisplay();
                showMessage('Misturador comprado! ü•£');
                randomSickness();
            } else if (gameState.hasMixer) {
                showMessage('Voc√™ j√° tem um misturador! ü•£');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Adicionar l√£s √† m√°quina de fiar
        function addWoolToSpinningWheel() {
            if (gameState.spinningWheel.isSpinning || gameState.spinningWheel.woolCount > 0) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üß∂'] && gameState.celeiro['üß∂'] >= 3) {
                gameState.celeiro['üß∂'] -= 3;
                gameState.spinningWheel.woolCount = 3;
                document.getElementById('spinningSlot').innerHTML = 'üß∂üß∂üß∂';
                document.getElementById('spinningButton').disabled = false;
                updateDisplay();
                showMessage('3 l√£s adicionadas √† m√°quina de fiar! üß∂');
                randomSickness();
            } else {
                showMessage('Voc√™ precisa de 3 l√£s! üß∂');
            }
        }

        // Iniciar fia√ß√£o
        function startSpinning() {
            if (gameState.spinningWheel.woolCount < 3 || gameState.spinningWheel.isSpinning) return;
            if (!useEnergy()) return;
            
            gameState.spinningWheel.isSpinning = true;
            
            const button = document.getElementById('spinningButton');
            button.disabled = true;
            button.textContent = 'Fiando... 30s';
            
            let countdown = 30;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Fiando... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishSpinning();
                }
            }, 1000);
            
            showMessage('L√£ sendo fiada! üé°');
            randomSickness();
        }

        // Finalizar fia√ß√£o
        function finishSpinning() {
            // Adicionar 1 novelo de l√£ ao celeiro
            gameState.celeiro['üßµ'] = (gameState.celeiro['üßµ'] || 0) + 1;
            
            // Reset da m√°quina de fiar
            gameState.spinningWheel.woolCount = 0;
            gameState.spinningWheel.isSpinning = false;
            
            // Reset da interface
            document.getElementById('spinningSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üß∂x3</div>';
            
            const button = document.getElementById('spinningButton');
            button.textContent = 'üé° Fiar';
            button.disabled = true;
            
            updateDisplay();
            showMessage('Novelo de l√£ pronto! Adicionado ao celeiro! üßµ');
        }

        // Adicionar ingrediente ao misturador
        function addIngredientToMixer(slotIndex) {
            if (gameState.mixer.isMixing) return;
            if (!useEnergy()) return;
            
            // Verificar se o slot j√° est√° preenchido
            if (gameState.mixer.ingredients[slotIndex - 1] !== null) {
                showMessage('Slot j√° preenchido! ü•£');
                return;
            }
            
            // Mostrar apenas ingredientes v√°lidos para o misturador
            const availableItems = mixerIngredients.filter(item => gameState.celeiro[item] && gameState.celeiro[item] > 0);
            
            if (availableItems.length === 0) {
                showMessage('Nenhum ingrediente v√°lido dispon√≠vel! üì¶');
                return;
            }
            
            // Por simplicidade, usar o primeiro item dispon√≠vel
            const selectedItem = availableItems[0];
            
            if (gameState.celeiro[selectedItem] > 0) {
                gameState.celeiro[selectedItem]--;
                gameState.mixer.ingredients[slotIndex - 1] = selectedItem;
                document.getElementById(`mixerSlot${slotIndex}`).innerHTML = selectedItem;
                updateDisplay();
                checkMixerRecipe();
                showMessage(`${selectedItem} adicionado ao misturador!`);
                randomSickness();
            }
        }

        // Verificar receita do misturador
        function checkMixerRecipe() {
            const currentIngredients = gameState.mixer.ingredients.filter(item => item !== null);
            
            for (const [feed, recipe] of Object.entries(mixerRecipes)) {
                if (arraysEqual(currentIngredients.sort(), recipe.ingredients.sort())) {
                    document.getElementById('mixerRecipe').textContent = `Receita: ${recipe.name}`;
                    document.getElementById('mixerButton').disabled = false;
                    return;
                }
            }
            
            document.getElementById('mixerRecipe').textContent = 'Receitas dispon√≠veis:';
            document.getElementById('mixerButton').disabled = true;
        }

        // Iniciar mistura
        function startMixing() {
            if (!useEnergy()) return;
            
            const currentIngredients = gameState.mixer.ingredients.filter(item => item !== null);
            
            for (const [feed, recipe] of Object.entries(mixerRecipes)) {
                if (arraysEqual(currentIngredients.sort(), recipe.ingredients.sort())) {
                    gameState.mixer.isMixing = true;
                    
                    const button = document.getElementById('mixerButton');
                    button.disabled = true;
                    button.textContent = `Misturando... ${recipe.time}s`;
                    
                    let countdown = recipe.time;
                    const timer = setInterval(() => {
                        countdown--;
                        button.textContent = `Misturando... ${countdown}s`;
                        
                        if (countdown <= 0) {
                            clearInterval(timer);
                            finishMixing(feed);
                        }
                    }, 1000);
                    
                    showMessage(`Misturando ${recipe.name}!`);
                    randomSickness();
                    return;
                }
            }
        }

        // Finalizar mistura
        function finishMixing(feed) {
            // Adicionar ra√ß√£o ao celeiro
            gameState.celeiro[feed] = (gameState.celeiro[feed] || 0) + 1;
            
            // Reset do misturador
            gameState.mixer.ingredients = [null, null, null, null];
            gameState.mixer.isMixing = false;
            
            // Reset da interface
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`mixerSlot${i}`).innerHTML = '';
            }
            
            const button = document.getElementById('mixerButton');
            button.textContent = 'ü•£ Misturar';
            button.disabled = true;
            
            document.getElementById('mixerRecipe').textContent = 'Receitas dispon√≠veis:';
            
            updateDisplay();
            showMessage(`${feed} pronta! Adicionada ao celeiro!`);
        }

        // Comprar curral das ovelhas
        function buySheepPen() {
            if (gameState.coins >= 350 && !gameState.hasSheepPen) {
                if (!useEnergy()) return;
                
                gameState.coins -= 350;
                gameState.hasSheepPen = true;
                document.getElementById('sheepPenArea').style.display = 'block';
                document.getElementById('sheepItem').style.display = 'flex'; // Mostrar ovelha no mercadinho
                document.getElementById('shearsItem').style.display = 'flex'; // Mostrar tesoura no mercadinho
                document.getElementById('sheepPenItem').style.display = 'none';
                updateDisplay();
                showMessage('Curral das Ovelhas comprado! üêë');
                randomSickness();
            } else if (gameState.hasSheepPen) {
                showMessage('Voc√™ j√° tem um curral! üêë');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar ovelha
        function buySheep() {
            if (gameState.coins >= 400) {
                if (!useEnergy()) return;
                
                gameState.coins -= 400;
                gameState.celeiro['üêë'] = (gameState.celeiro['üêë'] || 0) + 1;
                updateDisplay();
                showMessage('Ovelha comprada! Adicione ao curral! üêë');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar tesoura de tosquiar
        function buyShears() {
            if (gameState.coins >= 80 && !gameState.hasShears) {
                if (!useEnergy()) return;
                
                gameState.coins -= 80;
                gameState.hasShears = true;
                document.getElementById('shearsItem').style.display = 'none';
                updateDisplay();
                showMessage('Tesoura de Tosquiar comprada! ‚úÇÔ∏è');
                randomSickness();
            } else if (gameState.hasShears) {
                showMessage('Voc√™ j√° tem uma tesoura! ‚úÇÔ∏è');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Adicionar ovelha ao slot
        function addSheepToSlot(slotIndex) {
            if (gameState.sheep[slotIndex].hasSheep) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üêë'] && gameState.celeiro['üêë'] > 0) {
                gameState.celeiro['üêë']--;
                gameState.sheep[slotIndex].hasSheep = true;
                
                // Atualizar interface
                const sheepSlot = document.getElementById(`sheepSlot${slotIndex}`);
                sheepSlot.innerHTML = `
                    <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêë</div>
                    <div class="text-sm text-gray-600 font-bold">Ovelha adicionada!</div>
                `;
                sheepSlot.onclick = null;
                
                // Mostrar slot de feno
                const haySlot = document.getElementById(`sheepHaySlot${slotIndex}`);
                haySlot.style.display = 'block';
                haySlot.querySelector('.slot').innerHTML = 'üü®';
                
                updateDisplay();
                showMessage('Ovelha adicionada ao curral! üêë');
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem ovelhas! Compre no mercadinho! üêë');
            }
        }

        // Alimentar ovelha com feno
        function feedSheep(slotIndex) {
            const sheep = gameState.sheep[slotIndex];
            if (!sheep.hasSheep || sheep.isEating || sheep.isProducing || sheep.isResting || sheep.isSick) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üü®'] && gameState.celeiro['üü®'] > 0) {
                gameState.celeiro['üü®']--;
                sheep.isEating = true;
                
                // Atualizar status e interface
                const statusElement = document.getElementById(`sheepStatus${slotIndex}`);
                const haySlot = document.getElementById(`sheepHaySlot${slotIndex}`).querySelector('.slot');
                
                statusElement.textContent = 'Comendo... 15s';
                haySlot.style.pointerEvents = 'none';
                haySlot.style.opacity = '0.5';
                haySlot.innerHTML = 'üçΩÔ∏è';
                
                // Comer por 15 segundos
                let countdown = 15;
                const eatTimer = setInterval(() => {
                    countdown--;
                    statusElement.textContent = `Comendo... ${countdown}s`;
                    
                    if (countdown <= 0) {
                        clearInterval(eatTimer);
                        startWoolProduction(slotIndex);
                    }
                }, 1000);
                
                updateDisplay();
                showMessage(`Ovelha ${slotIndex + 1} est√° comendo feno! üü®`);
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem feno! Fa√ßa no secador! üü®');
            }
        }

        // Iniciar produ√ß√£o de l√£
        function startWoolProduction(slotIndex) {
            const sheep = gameState.sheep[slotIndex];
            sheep.isEating = false;
            sheep.isProducing = true;
            
            const statusElement = document.getElementById(`sheepStatus${slotIndex}`);
            const haySlot = document.getElementById(`sheepHaySlot${slotIndex}`).querySelector('.slot');
            
            // Produzir por 7 segundos
            statusElement.textContent = 'Produzindo l√£... 7s';
            haySlot.innerHTML = 'üß∂';
            
            let countdown = 7;
            const produceTimer = setInterval(() => {
                countdown--;
                statusElement.textContent = `Produzindo l√£... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(produceTimer);
                    finishWoolProduction(slotIndex);
                }
            }, 1000);
        }

        // Finalizar produ√ß√£o de l√£
        function finishWoolProduction(slotIndex) {
            const sheep = gameState.sheep[slotIndex];
            sheep.isProducing = false;
            sheep.woolReady = true;
            
            // Esconder slot de feno e mostrar coleta de l√£
            document.getElementById(`sheepHaySlot${slotIndex}`).style.display = 'none';
            document.getElementById(`woolCollection${slotIndex}`).style.display = 'block';
            
            showMessage(`Ovelha ${slotIndex + 1} produziu l√£! Clique para tosquiar! üß∂`);
        }

        // Tosquiar ovelha (coletar l√£)
        function shearSheep(slotIndex) {
            const sheep = gameState.sheep[slotIndex];
            if (!sheep.woolReady || !gameState.hasShears) {
                if (!gameState.hasShears) {
                    showMessage('Voc√™ precisa de uma tesoura de tosquiar! ‚úÇÔ∏è');
                }
                return;
            }
            if (!useEnergy()) return;
            
            // Adicionar 2 l√£s
            let woolAmount = 2;
            
            // B√¥nus do outono: produtos animais +15%
            if (gameState.currentSeason === 2) {
                woolAmount = Math.floor(woolAmount * 1.15);
            }
            
            gameState.celeiro['üß∂'] = (gameState.celeiro['üß∂'] || 0) + woolAmount;
            
            sheep.woolReady = false;
            sheep.isResting = true;
            
            // Esconder coleta e mostrar descanso
            document.getElementById(`woolCollection${slotIndex}`).style.display = 'none';
            const statusElement = document.getElementById(`sheepStatus${slotIndex}`);
            statusElement.textContent = 'Descansando... 10min';
            statusElement.style.display = 'block';
            
            // Descansar por 10 minutos
            sheep.restTimer = setTimeout(() => {
                sheep.isResting = false;
                const haySlot = document.getElementById(`sheepHaySlot${slotIndex}`);
                haySlot.style.display = 'block';
                haySlot.querySelector('.slot').style.pointerEvents = 'auto';
                haySlot.querySelector('.slot').style.opacity = '1';
                haySlot.querySelector('.slot').innerHTML = 'üü®';
                statusElement.textContent = 'Pronta para comer!';
                showMessage(`Ovelha ${slotIndex + 1} terminou o descanso! üêë`);
            }, 10 * 60 * 1000); // 10 minutos
            
            updateDisplay();
            showMessage(`Tosquiou ${woolAmount} l√£s da ovelha ${slotIndex + 1}! üß∂‚úÇÔ∏è`);
            randomSickness();
        }

        // Remover ovelha do slot
        function removeSheepFromSlot(slotIndex) {
            if (!gameState.sheep[slotIndex].hasSheep) return;
            if (!useEnergy()) return;
            
            const sheep = gameState.sheep[slotIndex];
            
            // Limpar timers
            if (sheep.restTimer) {
                clearTimeout(sheep.restTimer);
                sheep.restTimer = null;
            }
            
            // Devolver ovelha ao celeiro
            gameState.celeiro['üêë'] = (gameState.celeiro['üêë'] || 0) + 1;
            
            // Reset do estado da ovelha
            gameState.sheep[slotIndex] = {
                hasSheep: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                woolReady: false,
                restTimer: null
            };
            
            // Reset da interface
            const sheepSlot = document.getElementById(`sheepSlot${slotIndex}`);
            sheepSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar ovelha</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            sheepSlot.onclick = () => addSheepToSlot(slotIndex);
            
            document.getElementById(`sheepHaySlot${slotIndex}`).style.display = 'none';
            document.getElementById(`woolCollection${slotIndex}`).style.display = 'none';
            
            updateDisplay();
            showMessage(`Ovelha ${slotIndex + 1} removida do curral! üêë`);
            randomSickness();
        }

        // Atualizar display das ovelhas
        function updateSheepDisplay() {
            gameState.sheep.forEach((sheep, index) => {
                const statusElement = document.getElementById(`sheepStatus${index}`);
                const haySlot = document.getElementById(`sheepHaySlot${index}`);
                const woolCollection = document.getElementById(`woolCollection${index}`);
                
                if (!sheep.hasSheep) return;
                
                if (sheep.isResting && sheep.restTimer) {
                    // Mostrar tempo restante do descanso
                    const timeLeft = Math.ceil((sheep.restTimer._idleStart + sheep.restTimer._idleTimeout - Date.now()) / 1000);
                    if (timeLeft > 0) {
                        const minutes = Math.floor(timeLeft / 60);
                        const seconds = timeLeft % 60;
                        statusElement.textContent = `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Comprar galinheiro
        function buyChickenCoop() {
            if (gameState.coins >= 300 && !gameState.hasChickenCoop) {
                if (!useEnergy()) return;
                
                gameState.coins -= 300;
                gameState.hasChickenCoop = true;
                document.getElementById('chickenCoopArea').style.display = 'block';
                document.getElementById('chickenItem').style.display = 'flex'; // Mostrar galinha no mercadinho
                document.getElementById('chickenCoopItem').style.display = 'none';
                updateDisplay();
                showMessage('Galinheiro comprado! üêî');
                randomSickness();
            } else if (gameState.hasChickenCoop) {
                showMessage('Voc√™ j√° tem um galinheiro! üêî');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar galinha
        function buyChicken() {
            if (gameState.coins >= 150) {
                if (!useEnergy()) return;
                
                gameState.coins -= 150;
                gameState.celeiro['üêì'] = (gameState.celeiro['üêì'] || 0) + 1;
                updateDisplay();
                showMessage('Galinha comprada! Adicione ao galinheiro! üêì');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Adicionar galinha ao slot
        function addChickenToSlot(slotIndex) {
            if (gameState.chickens[slotIndex].hasChicken) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üêì'] && gameState.celeiro['üêì'] > 0) {
                gameState.celeiro['üêì']--;
                gameState.chickens[slotIndex].hasChicken = true;
                
                // Atualizar interface
                const chickenSlot = document.getElementById(`chickenSlot${slotIndex}`);
                chickenSlot.innerHTML = `
                    <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üêì</div>
                    <div class="text-sm text-yellow-600 font-bold">Galinha adicionada!</div>
                `;
                chickenSlot.onclick = null;
                
                // Mostrar slot de ra√ß√£o e bot√£o sacrificar
                const feedSlot = document.getElementById(`chickenFeedSlot${slotIndex}`);
                feedSlot.style.display = 'block';
                feedSlot.querySelector('.slot').innerHTML = 'üêî';
                
                document.getElementById(`sacrificeBtn${slotIndex}`).style.display = 'block';
                
                updateDisplay();
                showMessage('Galinha adicionada ao galinheiro! üêì');
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem galinhas! Compre no mercadinho! üêì');
            }
        }

        // Alimentar galinha com ra√ß√£o
        function feedChicken(slotIndex) {
            const chicken = gameState.chickens[slotIndex];
            if (!chicken.hasChicken || chicken.isEating || chicken.isProducing || chicken.isResting || chicken.isSick) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üêî'] && gameState.celeiro['üêî'] > 0) {
                gameState.celeiro['üêî']--;
                chicken.isEating = true;
                
                // Atualizar status e interface
                const statusElement = document.getElementById(`chickenStatus${slotIndex}`);
                const feedSlot = document.getElementById(`chickenFeedSlot${slotIndex}`).querySelector('.slot');
                
                statusElement.textContent = 'Comendo... 10s';
                feedSlot.style.pointerEvents = 'none';
                feedSlot.style.opacity = '0.5';
                feedSlot.innerHTML = 'üçΩÔ∏è';
                
                // Comer por 10 segundos
                let countdown = 10;
                const eatTimer = setInterval(() => {
                    countdown--;
                    statusElement.textContent = `Comendo... ${countdown}s`;
                    
                    if (countdown <= 0) {
                        clearInterval(eatTimer);
                        startEggProduction(slotIndex);
                    }
                }, 1000);
                
                updateDisplay();
                showMessage(`Galinha ${slotIndex + 1} est√° comendo ra√ß√£o! üêî`);
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem ra√ß√£o para galinhas! Fa√ßa no misturador! üêî');
            }
        }

        // Iniciar produ√ß√£o de ovos
        function startEggProduction(slotIndex) {
            const chicken = gameState.chickens[slotIndex];
            chicken.isEating = false;
            chicken.isProducing = true;
            
            const statusElement = document.getElementById(`chickenStatus${slotIndex}`);
            const feedSlot = document.getElementById(`chickenFeedSlot${slotIndex}`).querySelector('.slot');
            
            // Produzir por 7 segundos
            statusElement.textContent = 'Botando ovos... 7s';
            feedSlot.innerHTML = 'ü•ö';
            
            let countdown = 7;
            const produceTimer = setInterval(() => {
                countdown--;
                statusElement.textContent = `Botando ovos... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(produceTimer);
                    finishEggProduction(slotIndex);
                }
            }, 1000);
        }

        // Finalizar produ√ß√£o de ovos
        function finishEggProduction(slotIndex) {
            const chicken = gameState.chickens[slotIndex];
            chicken.isProducing = false;
            chicken.eggsReady = true;
            
            // Esconder slot de ra√ß√£o e mostrar coleta de ovos
            document.getElementById(`chickenFeedSlot${slotIndex}`).style.display = 'none';
            document.getElementById(`eggCollection${slotIndex}`).style.display = 'block';
            
            // Chance de pintinho (10% se tiver 2-3 galinhas)
            const activeChickens = gameState.chickens.filter(c => c.hasChicken).length;
            if (activeChickens >= 2 && activeChickens <= 3 && Math.random() < 0.1) {
                spawnChick();
            }
            
            showMessage(`Galinha ${slotIndex + 1} botou ovos! Clique para coletar! ü•ö`);
        }

        // Coletar ovos
        function collectEggs(slotIndex) {
            const chicken = gameState.chickens[slotIndex];
            if (!chicken.eggsReady) return;
            if (!useEnergy()) return;
            
            // Adicionar 3 ovos
            let eggAmount = 3;
            
            // B√¥nus do outono: produtos animais +15%
            if (gameState.currentSeason === 2) {
                eggAmount = Math.floor(eggAmount * 1.15);
            }
            
            gameState.celeiro['ü•ö'] = (gameState.celeiro['ü•ö'] || 0) + eggAmount;
            
            chicken.eggsReady = false;
            chicken.isResting = true;
            
            // Esconder coleta e mostrar descanso
            document.getElementById(`eggCollection${slotIndex}`).style.display = 'none';
            const statusElement = document.getElementById(`chickenStatus${slotIndex}`);
            statusElement.textContent = 'Descansando... 7min';
            statusElement.style.display = 'block';
            
            // Descansar por 7 minutos
            chicken.restTimer = setTimeout(() => {
                chicken.isResting = false;
                const feedSlot = document.getElementById(`chickenFeedSlot${slotIndex}`);
                feedSlot.style.display = 'block';
                feedSlot.querySelector('.slot').style.pointerEvents = 'auto';
                feedSlot.querySelector('.slot').style.opacity = '1';
                feedSlot.querySelector('.slot').innerHTML = 'üêî';
                statusElement.textContent = 'Pronta para comer!';
                showMessage(`Galinha ${slotIndex + 1} terminou o descanso! üêì`);
            }, 7 * 60 * 1000); // 7 minutos
            
            updateDisplay();
            showMessage(`Coletou ${eggAmount} ovos da galinha ${slotIndex + 1}! ü•ö`);
            randomSickness();
        }

        // Sacrificar galinha
        function sacrificeChicken(slotIndex) {
            const chicken = gameState.chickens[slotIndex];
            if (!chicken.hasChicken) return;
            if (!useEnergy()) return;
            
            // Confirmar sacrif√≠cio
            if (!confirm(`Tem certeza que deseja sacrificar a galinha ${slotIndex + 1}?`)) return;
            
            // Limpar timers
            if (chicken.restTimer) {
                clearTimeout(chicken.restTimer);
                chicken.restTimer = null;
            }
            
            // Adicionar frango cru ao celeiro
            gameState.celeiro['üçó'] = (gameState.celeiro['üçó'] || 0) + 1;
            
            // Reset do estado da galinha
            gameState.chickens[slotIndex] = {
                hasChicken: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                eggsReady: false,
                restTimer: null
            };
            
            // Reset da interface
            const chickenSlot = document.getElementById(`chickenSlot${slotIndex}`);
            chickenSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            chickenSlot.onclick = () => addChickenToSlot(slotIndex);
            
            document.getElementById(`chickenFeedSlot${slotIndex}`).style.display = 'none';
            document.getElementById(`eggCollection${slotIndex}`).style.display = 'none';
            document.getElementById(`sacrificeBtn${slotIndex}`).style.display = 'none';
            
            updateDisplay();
            showMessage(`Galinha ${slotIndex + 1} foi sacrificada! +1 Frango Cru! üçó`);
            randomSickness();
        }

        // Remover galinha do slot
        function removeChickenFromSlot(slotIndex) {
            const chicken = gameState.chickens[slotIndex];
            if (!chicken.hasChicken) return;
            if (!useEnergy()) return;
            
            // Limpar timers
            if (chicken.restTimer) {
                clearTimeout(chicken.restTimer);
                chicken.restTimer = null;
            }
            
            // Devolver galinha ao celeiro
            gameState.celeiro['üêì'] = (gameState.celeiro['üêì'] || 0) + 1;
            
            // Reset do estado da galinha
            gameState.chickens[slotIndex] = {
                hasChicken: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                eggsReady: false,
                restTimer: null
            };
            
            // Reset da interface
            const chickenSlot = document.getElementById(`chickenSlot${slotIndex}`);
            chickenSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar galinha</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            chickenSlot.onclick = () => addChickenToSlot(slotIndex);
            
            document.getElementById(`chickenFeedSlot${slotIndex}`).style.display = 'none';
            document.getElementById(`eggCollection${slotIndex}`).style.display = 'none';
            document.getElementById(`sacrificeBtn${slotIndex}`).style.display = 'none';
            
            updateDisplay();
            showMessage(`Galinha ${slotIndex + 1} removida do galinheiro! üêì`);
            randomSickness();
        }

        // Gerar pintinho
        function spawnChick() {
            const chickId = Date.now();
            const chick = {
                id: chickId,
                growthTimer: setTimeout(() => {
                    // Pintinho vira galinha adulta
                    gameState.celeiro['üêì'] = (gameState.celeiro['üêì'] || 0) + 1;
                    
                    // Remover pintinho da lista
                    gameState.chicks = gameState.chicks.filter(c => c.id !== chickId);
                    updateChickDisplay();
                    
                    showMessage('Um pintinho cresceu e virou galinha adulta! üêì');
                }, 30 * 60 * 1000) // 30 minutos
            };
            
            gameState.chicks.push(chick);
            updateChickDisplay();
            showMessage('Um pintinho nasceu! üê£ Ele crescer√° em 30 minutos!');
        }

        // Atualizar display dos pintinhos
        function updateChickDisplay() {
            const chickArea = document.getElementById('chickArea');
            const chickList = document.getElementById('chickList');
            
            if (gameState.chicks.length > 0) {
                chickArea.style.display = 'block';
                chickList.innerHTML = '';
                
                gameState.chicks.forEach(chick => {
                    const chickElement = document.createElement('div');
                    chickElement.className = 'bg-yellow-200 border-2 border-yellow-400 rounded-lg p-2 text-center';
                    chickElement.innerHTML = `
                        <div class="text-2xl">üê£</div>
                        <div class="text-xs text-yellow-700" id="chick-${chick.id}">Crescendo...</div>
                    `;
                    chickList.appendChild(chickElement);
                });
            } else {
                chickArea.style.display = 'none';
            }
        }

        // Atualizar display das galinhas
        function updateChickenDisplay() {
            gameState.chickens.forEach((chicken, index) => {
                const statusElement = document.getElementById(`chickenStatus${index}`);
                const feedSlot = document.getElementById(`chickenFeedSlot${index}`);
                const eggCollection = document.getElementById(`eggCollection${index}`);
                
                if (!chicken.hasChicken) return;
                
                if (chicken.isResting && chicken.restTimer) {
                    // Mostrar tempo restante do descanso
                    const timeLeft = Math.ceil((chicken.restTimer._idleStart + chicken.restTimer._idleTimeout - Date.now()) / 1000);
                    if (timeLeft > 0) {
                        const minutes = Math.floor(timeLeft / 60);
                        const seconds = timeLeft % 60;
                        statusElement.textContent = `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
            
            // Atualizar tempo dos pintinhos
            gameState.chicks.forEach(chick => {
                const chickElement = document.getElementById(`chick-${chick.id}`);
                if (chickElement && chick.growthTimer) {
                    const timeLeft = Math.ceil((chick.growthTimer._idleStart + chick.growthTimer._idleTimeout - Date.now()) / 1000);
                    if (timeLeft > 0) {
                        const minutes = Math.floor(timeLeft / 60);
                        const seconds = timeLeft % 60;
                        chickElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Comprar chiqueiro
        function buyPigPen() {
            if (gameState.coins >= 350 && !gameState.hasPigPen) {
                if (!useEnergy()) return;
                
                gameState.coins -= 350;
                gameState.hasPigPen = true;
                document.getElementById('pigPenArea').style.display = 'block';
                document.getElementById('pigItem').style.display = 'flex'; // Mostrar porco no mercadinho
                document.getElementById('pigPenItem').style.display = 'none';
                updateDisplay();
                showMessage('Chiqueiro comprado! üê∑');
                randomSickness();
            } else if (gameState.hasPigPen) {
                showMessage('Voc√™ j√° tem um chiqueiro! üê∑');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar porco
        function buyPig() {
            if (gameState.coins >= 200) {
                if (!useEnergy()) return;
                
                gameState.coins -= 200;
                gameState.celeiro['üê∑'] = (gameState.celeiro['üê∑'] || 0) + 1;
                updateDisplay();
                showMessage('Porco comprado! Adicione ao chiqueiro! üê∑');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar vacina
        function buyVaccine() {
            if (gameState.coins >= 30) {
                if (!useEnergy()) return;
                
                gameState.coins -= 30;
                gameState.celeiro['üíâ'] = (gameState.celeiro['üíâ'] || 0) + 1;
                updateDisplay();
                showMessage('Vacina comprada! Use em animais doentes! üíâ');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar lago dos peixes
        function buyLake() {
            if (gameState.coins >= 250 && !gameState.hasLake) {
                if (!useEnergy()) return;
                
                gameState.coins -= 250;
                gameState.hasLake = true;
                document.getElementById('lakeArea').style.display = 'block';
                document.getElementById('fishingRodItem').style.display = 'flex'; // Mostrar vara no mercadinho
                document.getElementById('lakeItem').style.display = 'none';
                updateDisplay();
                showMessage('Lago dos Peixes comprado! üèûÔ∏è');
                randomSickness();
            } else if (gameState.hasLake) {
                showMessage('Voc√™ j√° tem um lago! üèûÔ∏è');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar vara de pesca
        function buyFishingRod() {
            if (gameState.coins >= 80) {
                if (!useEnergy()) return;
                
                gameState.coins -= 80;
                gameState.hasFishingRod = true;
                gameState.fishingRodUses = 20;
                updateDisplay();
                showMessage('Vara de Pesca comprada! 20 usos dispon√≠veis! üé£');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar mina
        function buyMine() {
            if (gameState.coins >= 400 && !gameState.hasMine) {
                if (!useEnergy()) return;
                
                gameState.coins -= 400;
                gameState.hasMine = true;
                document.getElementById('mineArea').style.display = 'block';
                document.getElementById('pickaxeItem').style.display = 'flex'; // Mostrar picareta no mercadinho
                document.getElementById('mineKeyItem').style.display = 'flex'; // Mostrar chave no mercadinho
                document.getElementById('mineItem').style.display = 'none';
                updateDisplay();
                showMessage('Mina comprada! ‚õèÔ∏è');
                randomSickness();
            } else if (gameState.hasMine) {
                showMessage('Voc√™ j√° tem uma mina! ‚õèÔ∏è');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar picareta
        function buyPickaxe() {
            if (gameState.coins >= 100) {
                if (!useEnergy()) return;
                
                gameState.coins -= 100;
                gameState.hasPickaxe = true;
                gameState.pickaxeUses = 30;
                updateDisplay();
                showMessage('Picareta comprada! 30 usos dispon√≠veis! ‚õèÔ∏è');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar chave da mina
        function buyMineKey() {
            if (gameState.coins >= 50) {
                if (!useEnergy()) return;
                
                gameState.coins -= 50;
                gameState.celeiro['üóùÔ∏è'] = (gameState.celeiro['üóùÔ∏è'] || 0) + 1;
                updateDisplay();
                showMessage('Chave da Mina comprada! üóùÔ∏è');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Comprar comedouro
        function buyBirdFeeder() {
            if (gameState.coins >= 150 && !gameState.hasBirdFeeder) {
                if (!useEnergy()) return;
                
                gameState.coins -= 150;
                gameState.hasBirdFeeder = true;
                document.getElementById('birdFeederArea').style.display = 'block';
                document.getElementById('birdFeederItem').style.display = 'none';
                updateDisplay();
                showMessage('Comedouro comprado! ü™∂');
                randomSickness();
            } else if (gameState.hasBirdFeeder) {
                showMessage('Voc√™ j√° tem um comedouro! ü™∂');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        // Adicionar comida ao comedouro
        function addFoodToFeeder() {
            if (gameState.birdFeeder.hasFood || gameState.birdFeeder.waitingForBird) return;
            if (!useEnergy()) return;
            
            let selectedFood = null;
            
            // Verificar se tem √°gua ou banana
            if (gameState.water > 0) {
                selectedFood = 'üíß';
                gameState.water--;
            } else if (gameState.celeiro['üçå'] && gameState.celeiro['üçå'] > 0) {
                selectedFood = 'üçå';
                gameState.celeiro['üçå']--;
            } else {
                showMessage('Voc√™ precisa de √°gua ou banana! üíßüçå');
                return;
            }
            
            // Adicionar comida ao comedouro
            gameState.birdFeeder.hasFood = true;
            gameState.birdFeeder.foodType = selectedFood;
            gameState.birdFeeder.waitingForBird = true;
            
            // Atualizar interface
            document.getElementById('feederSlot').innerHTML = selectedFood;
            document.getElementById('feederStatus').textContent = 'Aguardando p√°ssaro...';
            
            // P√°ssaro vem comer em 30 segundos a 2 minutos (aleat√≥rio)
            const waitTime = (30 + Math.random() * 90) * 1000; // 30s a 2min
            gameState.birdFeeder.birdTimer = setTimeout(() => {
                birdComesEating();
            }, waitTime);
            
            updateDisplay();
            showMessage(`${selectedFood} adicionado ao comedouro! Aguardando p√°ssaro... ü™∂`);
            randomSickness();
        }

        // P√°ssaro vem comer
        function birdComesEating() {
            if (!gameState.birdFeeder.hasFood) return;
            
            // P√°ssaro come a comida
            gameState.birdFeeder.hasFood = false;
            gameState.birdFeeder.foodType = null;
            gameState.birdFeeder.waitingForBird = false;
            gameState.birdFeeder.birdTimer = null;
            
            // Escolher semente aleat√≥ria
            const specialSeeds = ['üç´', 'üê≤', 'ü•ë']; // Cacau, Pitaia, Avocado
            const selectedSeed = specialSeeds[Math.floor(Math.random() * specialSeeds.length)];
            
            // Adicionar semente ao celeiro
            gameState.celeiro[selectedSeed] = (gameState.celeiro[selectedSeed] || 0) + 1;
            
            // Mostrar bot√£o da semente na √°rea de sementes
            const seedNames = {
                'üç´': 'Cacau',
                'üê≤': 'Pitaia', 
                'ü•ë': 'Avocado'
            };
            
            const seedButton = document.querySelector(`[data-seed="${selectedSeed}"]`);
            if (seedButton) {
                seedButton.style.display = 'block';
            }
            
            // Reset da interface
            document.getElementById('feederSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">üíß ou üçå</div>';
            document.getElementById('feederStatus').textContent = 'Aguardando comida...';
            
            updateDisplay();
            showMessage(`ü™∂ P√°ssaro trouxe uma semente de ${seedNames[selectedSeed]}! ${selectedSeed}`);
        }

        // Entrar na mina
        function enterMine() {
            if (!gameState.celeiro['üóùÔ∏è'] || gameState.celeiro['üóùÔ∏è'] <= 0) {
                showMessage('Voc√™ precisa de uma chave para entrar na mina! üóùÔ∏è');
                return;
            }
            
            if (!useEnergy()) return;
            
            // Usar chave
            gameState.celeiro['üóùÔ∏è']--;
            gameState.insideMine = true;
            
            // Mostrar interior da mina
            document.getElementById('mineEntrance').style.display = 'none';
            document.getElementById('mineInterior').style.display = 'grid';
            document.getElementById('exitMineBtn').style.display = 'block';
            
            updateDisplay();
            updateRockDisplay();
            showMessage('Voc√™ entrou na mina! ‚õèÔ∏è');
            randomSickness();
        }

        // Sair da mina
        function exitMine() {
            gameState.insideMine = false;
            
            // Mostrar entrada da mina
            document.getElementById('mineEntrance').style.display = 'block';
            document.getElementById('mineInterior').style.display = 'none';
            document.getElementById('exitMineBtn').style.display = 'none';
            
            showMessage('Voc√™ saiu da mina! üö™');
        }

        // Quebrar rocha
        function mineRock(rockIndex) {
            if (!gameState.hasPickaxe) {
                showMessage('Voc√™ precisa de uma picareta! ‚õèÔ∏è');
                return;
            }
            
            if (gameState.pickaxeUses <= 0) {
                showMessage('Sua picareta quebrou! Compre outra! ‚õèÔ∏èüí•');
                gameState.hasPickaxe = false;
                document.getElementById('pickaxeItem').style.display = 'flex';
                return;
            }
            
            if (gameState.rocks[rockIndex].hits <= 0) {
                showMessage('Esta rocha j√° foi completamente quebrada! ü™®');
                return;
            }
            
            if (!useEnergy()) return;
            
            // Usar picareta
            gameState.pickaxeUses--;
            gameState.rocks[rockIndex].hits--;
            
            // Determinar o que sai da rocha (sorte)
            const drops = ['üíö', '‚ù§Ô∏è', 'üíô', '‚ö´']; // Esmeralda, Rubi, Safira, Carv√£o
            const weights = [20, 15, 18, 47]; // Probabilidades: Esmeralda 20%, Rubi 15%, Safira 18%, Carv√£o 47%
            
            const randomNum = Math.random() * 100;
            let cumulativeWeight = 0;
            let selectedDrop = '‚ö´'; // Default: carv√£o
            
            for (let i = 0; i < drops.length; i++) {
                cumulativeWeight += weights[i];
                if (randomNum <= cumulativeWeight) {
                    selectedDrop = drops[i];
                    break;
                }
            }
            
            // Adicionar item ao celeiro
            gameState.celeiro[selectedDrop] = (gameState.celeiro[selectedDrop] || 0) + 1;
            
            const dropNames = {
                'üíö': 'Esmeralda',
                '‚ù§Ô∏è': 'Rubi', 
                'üíô': 'Safira',
                '‚ö´': 'Carv√£o'
            };
            
            updateDisplay();
            updateRockDisplay();
            showMessage(`Voc√™ encontrou: ${selectedDrop} ${dropNames[selectedDrop]}! (Picareta: ${gameState.pickaxeUses} usos restantes)`);
            randomSickness();
            
            if (gameState.pickaxeUses === 0) {
                showMessage('Sua picareta quebrou! ‚õèÔ∏èüí•');
                gameState.hasPickaxe = false;
                document.getElementById('pickaxeItem').style.display = 'flex';
            }
            
            // Se a rocha foi completamente quebrada, regenerar ap√≥s 5 minutos
            if (gameState.rocks[rockIndex].hits <= 0) {
                setTimeout(() => {
                    gameState.rocks[rockIndex].hits = 3;
                    updateRockDisplay();
                    showMessage(`Rocha ${rockIndex + 1} se regenerou! ü™®`);
                }, 5 * 60 * 1000); // 5 minutos
            }
        }

        // Atualizar display das rochas
        function updateRockDisplay() {
            gameState.rocks.forEach((rock, index) => {
                const rockElement = document.getElementById(`rock${index}`);
                const mineBtn = document.getElementById(`mineBtn${index}`);
                
                if (rockElement && mineBtn) {
                    const hitsText = rockElement.querySelector('.text-sm');
                    hitsText.textContent = `${rock.hits} batidas restantes`;
                    
                    if (rock.hits <= 0) {
                        rockElement.querySelector('.text-6xl').textContent = 'üíé';
                        hitsText.textContent = 'Rocha quebrada - regenerando...';
                        mineBtn.disabled = true;
                        mineBtn.style.opacity = '0.5';
                    } else {
                        rockElement.querySelector('.text-6xl').textContent = 'ü™®';
                        mineBtn.disabled = false;
                        mineBtn.style.opacity = '1';
                    }
                }
            });
        }

        // Pescar peixe
        function catchFish(fishIndex) {
            if (!gameState.fish[fishIndex]) {
                showMessage('N√£o h√° peixe neste local! üêü');
                return;
            }
            
            if (!gameState.hasFishingRod) {
                showMessage('Voc√™ precisa de uma vara de pesca! üé£');
                return;
            }
            
            if (gameState.fishingRodUses <= 0) {
                showMessage('Sua vara de pesca quebrou! Compre outra! üé£üí•');
                gameState.hasFishingRod = false;
                document.getElementById('fishingRodItem').style.display = 'flex';
                return;
            }
            
            if (!gameState.celeiro['ü™±'] || gameState.celeiro['ü™±'] <= 0) {
                showMessage('Voc√™ precisa de minhocas para pescar! ü™±');
                return;
            }
            
            if (!useEnergy()) return;
            
            // Usar minhoca e vara
            gameState.celeiro['ü™±']--;
            gameState.fishingRodUses--;
            
            // Pegar peixe
            gameState.fish[fishIndex] = false;
            gameState.celeiro['üêü'] = (gameState.celeiro['üêü'] || 0) + 1;
            gameState.fishCount++;
            
            // A cada 5 peixes, ganha uma p√©rola
            if (gameState.fishCount % 5 === 0) {
                gameState.celeiro['üíé'] = (gameState.celeiro['üíé'] || 0) + 1;
                showMessage('Uma p√©rola apareceu! üíé');
            }
            
            // Peixe renasce em 3 minutos
            setTimeout(() => {
                gameState.fish[fishIndex] = true;
                updateFishDisplay();
            }, 3 * 60 * 1000); // 3 minutos
            
            updateDisplay();
            updateFishDisplay();
            showMessage(`Pescou um peixe! üêü (Vara: ${gameState.fishingRodUses} usos restantes)`);
            randomSickness();
            
            if (gameState.fishingRodUses === 0) {
                showMessage('Sua vara de pesca quebrou! üé£üí•');
                gameState.hasFishingRod = false;
                document.getElementById('fishingRodItem').style.display = 'flex';
            }
        }

        // Atualizar display dos peixes
        function updateFishDisplay() {
            gameState.fish.forEach((available, fishIndex) => {
                const fishSlot = document.getElementById(`fishSlot${fishIndex}`);
                const fishBtn = document.getElementById(`fishBtn${fishIndex}`);
                
                if (fishSlot && fishBtn) {
                    if (available) {
                        fishSlot.querySelector('.slot').style.opacity = '1';
                        fishBtn.disabled = false;
                        fishBtn.style.opacity = '1';
                    } else {
                        fishSlot.querySelector('.slot').style.opacity = '0.3';
                        fishBtn.disabled = true;
                        fishBtn.style.opacity = '0.5';
                    }
                }
            });
        }

        // Adicionar porco ao slot
        function addPigToSlot(slotIndex) {
            if (gameState.pigs[slotIndex].hasPig) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üê∑'] && gameState.celeiro['üê∑'] > 0) {
                gameState.celeiro['üê∑']--;
                gameState.pigs[slotIndex].hasPig = true;
                
                // Atualizar interface
                const pigSlot = document.getElementById(`pigSlot${slotIndex}`);
                pigSlot.innerHTML = `
                    <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;">üê∑</div>
                    <div class="text-sm text-pink-600 font-bold">Porco adicionado!</div>
                `;
                pigSlot.onclick = null;
                
                // Mostrar slot de ra√ß√£o
                const feedSlot = document.getElementById(`pigFeedSlot${slotIndex}`);
                feedSlot.style.display = 'block';
                feedSlot.querySelector('.slot').innerHTML = 'üê∑';
                
                updateDisplay();
                showMessage('Porco adicionado ao chiqueiro! üê∑');
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem porcos! Compre no mercadinho! üê∑');
            }
        }

        // Alimentar porco com ra√ß√£o
        function feedPig(slotIndex) {
            const pig = gameState.pigs[slotIndex];
            if (!pig.hasPig || pig.isEating || pig.isProducing || pig.isResting || pig.isSick) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['üê∑'] && gameState.celeiro['üê∑'] > 0) {
                gameState.celeiro['üê∑']--;
                pig.isEating = true;
                
                // Atualizar status e interface
                const statusElement = document.getElementById(`pigStatus${slotIndex}`);
                const feedSlot = document.getElementById(`pigFeedSlot${slotIndex}`).querySelector('.slot');
                
                statusElement.textContent = 'Comendo... 15s';
                feedSlot.style.pointerEvents = 'none';
                feedSlot.style.opacity = '0.5';
                feedSlot.innerHTML = 'üçΩÔ∏è';
                
                // Comer por 15 segundos
                let countdown = 15;
                const eatTimer = setInterval(() => {
                    countdown--;
                    statusElement.textContent = `Comendo... ${countdown}s`;
                    
                    if (countdown <= 0) {
                        clearInterval(eatTimer);
                        startMeatProduction(slotIndex);
                    }
                }, 1000);
                
                updateDisplay();
                showMessage(`Porco ${slotIndex + 1} est√° comendo ra√ß√£o! üê∑`);
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem ra√ß√£o para porcos! Fa√ßa no misturador! üê∑');
            }
        }

        // Iniciar produ√ß√£o de carne
        function startMeatProduction(slotIndex) {
            const pig = gameState.pigs[slotIndex];
            pig.isEating = false;
            pig.isProducing = true;
            
            const statusElement = document.getElementById(`pigStatus${slotIndex}`);
            const feedSlot = document.getElementById(`pigFeedSlot${slotIndex}`).querySelector('.slot');
            
            // Produzir por 10 segundos
            statusElement.textContent = 'Gerando carne... 10s';
            feedSlot.innerHTML = 'ü•ì';
            
            let countdown = 10;
            const produceTimer = setInterval(() => {
                countdown--;
                statusElement.textContent = `Gerando carne... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(produceTimer);
                    finishMeatProduction(slotIndex);
                }
            }, 1000);
        }

        // Finalizar produ√ß√£o de carne
        function finishMeatProduction(slotIndex) {
            const pig = gameState.pigs[slotIndex];
            pig.isProducing = false;
            pig.meatReady = true;
            
            // Esconder slot de ra√ß√£o e mostrar coleta de carne
            document.getElementById(`pigFeedSlot${slotIndex}`).style.display = 'none';
            document.getElementById(`meatCollection${slotIndex}`).style.display = 'block';
            
            showMessage(`Porco ${slotIndex + 1} gerou carne! Clique para coletar! ü•ì`);
        }

        // Coletar carne
        function collectMeat(slotIndex) {
            const pig = gameState.pigs[slotIndex];
            if (!pig.meatReady) return;
            if (!useEnergy()) return;
            
            // Adicionar 1 carne su√≠na
            let meatAmount = 1;
            
            // B√¥nus do outono: produtos animais +15%
            if (gameState.currentSeason === 2) {
                meatAmount = Math.floor(meatAmount * 1.15);
            }
            
            gameState.celeiro['ü•ì'] = (gameState.celeiro['ü•ì'] || 0) + meatAmount;
            
            pig.meatReady = false;
            pig.isResting = true;
            
            // Esconder coleta e mostrar descanso
            document.getElementById(`meatCollection${slotIndex}`).style.display = 'none';
            const statusElement = document.getElementById(`pigStatus${slotIndex}`);
            statusElement.textContent = 'Descansando... 12min';
            statusElement.style.display = 'block';
            
            // Descansar por 12 minutos
            pig.restTimer = setTimeout(() => {
                pig.isResting = false;
                const feedSlot = document.getElementById(`pigFeedSlot${slotIndex}`);
                feedSlot.style.display = 'block';
                feedSlot.querySelector('.slot').style.pointerEvents = 'auto';
                feedSlot.querySelector('.slot').style.opacity = '1';
                feedSlot.querySelector('.slot').innerHTML = 'üê∑';
                statusElement.textContent = 'Pronto para comer!';
                showMessage(`Porco ${slotIndex + 1} terminou o descanso! üê∑`);
            }, 12 * 60 * 1000); // 12 minutos
            
            updateDisplay();
            showMessage(`Coletou ${meatAmount} carne su√≠na do porco ${slotIndex + 1}! ü•ì`);
            randomSickness();
        }

        // Remover porco do slot
        function removePigFromSlot(slotIndex) {
            if (!gameState.pigs[slotIndex].hasPig) return;
            if (!useEnergy()) return;
            
            const pig = gameState.pigs[slotIndex];
            
            // Limpar timers
            if (pig.restTimer) {
                clearTimeout(pig.restTimer);
                pig.restTimer = null;
            }
            
            // Devolver porco ao celeiro
            gameState.celeiro['üê∑'] = (gameState.celeiro['üê∑'] || 0) + 1;
            
            // Reset do estado do porco
            gameState.pigs[slotIndex] = {
                hasPig: false,
                isEating: false,
                isProducing: false,
                isResting: false,
                meatReady: false,
                restTimer: null
            };
            
            // Reset da interface
            const pigSlot = document.getElementById(`pigSlot${slotIndex}`);
            pigSlot.innerHTML = `
                <div class="slot mx-auto mb-2" style="width: 60px; height: 60px; font-size: 30px;"></div>
                <div class="text-sm text-gray-600">Clique para adicionar porco</div>
                <div class="text-xs text-gray-500">Clique direito para remover</div>
            `;
            pigSlot.onclick = () => addPigToSlot(slotIndex);
            
            document.getElementById(`pigFeedSlot${slotIndex}`).style.display = 'none';
            document.getElementById(`meatCollection${slotIndex}`).style.display = 'none';
            
            updateDisplay();
            showMessage(`Porco ${slotIndex + 1} removido do chiqueiro! üê∑`);
            randomSickness();
        }

        // Atualizar display dos porcos
        function updatePigDisplay() {
            gameState.pigs.forEach((pig, index) => {
                const statusElement = document.getElementById(`pigStatus${index}`);
                const feedSlot = document.getElementById(`pigFeedSlot${index}`);
                const meatCollection = document.getElementById(`meatCollection${index}`);
                
                if (!pig.hasPig) return;
                
                if (pig.isResting && pig.restTimer) {
                    // Mostrar tempo restante do descanso
                    const timeLeft = Math.ceil((pig.restTimer._idleStart + pig.restTimer._idleTimeout - Date.now()) / 1000);
                    if (timeLeft > 0) {
                        const minutes = Math.floor(timeLeft / 60);
                        const seconds = timeLeft % 60;
                        statusElement.textContent = `Descansando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Sistema da Caixa de Correios
        const motivationalMessages = [
            "üå± Cada semente plantada √© uma esperan√ßa que floresce!",
            "üöú O trabalho duro de hoje √© a colheita abundante de amanh√£!",
            "üåæ Paci√™ncia e dedica√ß√£o fazem a fazenda prosperar!",
            "üêÑ Cuidar dos animais √© cuidar da vida!",
            "üåü Voc√™ est√° construindo algo incr√≠vel, continue assim!",
            "üåª Como as flores seguem o sol, siga seus sonhos!",
            "üí™ Cada desafio superado te torna um fazendeiro melhor!",
            "üçØ O doce sabor do sucesso vem do trabalho √°rduo!",
            "üåà Depois da tempestade, sempre vem a bonan√ßa!",
            "üéØ Foque no progresso, n√£o na perfei√ß√£o!",
            "üå∏ Sua fazenda √© o reflexo do seu cora√ß√£o!",
            "‚≠ê Grandes fazendeiros come√ßaram exatamente onde voc√™ est√°!",
            "üåø A natureza recompensa quem a respeita!",
            "üèÜ Cada pequena vit√≥ria merece ser celebrada!",
            "üíö Sua paix√£o pela agricultura √© inspiradora!"
        ];

        const newspaperTips = [
            {
                headline: "üåæ TRIGO EM ALTA!",
                content: "O trigo est√° com pre√ßos excelentes hoje! Aproveite para vender sua produ√ß√£o. Dica: Plante mais trigo na pr√≥xima esta√ß√£o!",
                products: ["üåæ"]
            },
            {
                headline: "ü•õ LEITE VALORIZADO!",
                content: "Produtos l√°cteos est√£o em alta demanda! Suas vacas s√£o um investimento que vale ouro. Dica: Mantenha-as bem alimentadas!",
                products: ["ü•õ", "üßÄ"]
            },
            {
                headline: "üçá FRUTAS DA ESTA√á√ÉO!",
                content: "Frutas frescas est√£o sendo muito procuradas! Colha suas frutas regularmente. Dica: Fa√ßa sucos para agregar valor!",
                products: ["üçá", "üçé", "üçä", "üçå"]
            },
            {
                headline: "ü•ö OVOS PRECIOSOS!",
                content: "A demanda por ovos frescos disparou! Suas galinhas s√£o uma mina de ouro. Dica: Alimente-as bem para mais ovos!",
                products: ["ü•ö"]
            },
            {
                headline: "üåΩ MILHO DOURADO!",
                content: "O milho est√° com cota√ß√£o excelente! √â hora de expandir o plantio. Dica: Use milho para fazer ra√ß√£o tamb√©m!",
                products: ["üåΩ"]
            },
            {
                headline: "üß∂ L√É EM DESTAQUE!",
                content: "Produtos de l√£ est√£o valorizados! Suas ovelhas s√£o um tesouro. Dica: Transforme l√£ em novelos para maior lucro!",
                products: ["üß∂", "üßµ"]
            },
            {
                headline: "üêü PEIXES FRESCOS!",
                content: "Peixes est√£o com pre√ßos √≥timos! Invista em equipamentos de pesca. Dica: Use minhocas dos canteiros!",
                products: ["üêü"]
            },
            {
                headline: "üçØ MEL DOURADO!",
                content: "O mel est√° sendo muito valorizado! Suas abelhas s√£o produtoras de ouro l√≠quido. Dica: Plante mais flores especiais!",
                products: ["üçØ"]
            },
            {
                headline: "ü•© CARNES PREMIUM!",
                content: "Carnes de qualidade est√£o em alta! Cuide bem dos seus animais. Dica: Animais bem alimentados rendem mais!",
                products: ["ü•©", "ü•ì", "üçó"]
            },
            {
                headline: "üå∫ FLORES ESPECIAIS!",
                content: "Flores raras est√£o sendo muito procuradas! Mantenha seu comedouro ativo. Dica: P√°ssaros trazem sementes valiosas!",
                products: ["üå∫", "üåπ", "üåª", "üåº"]
            }
        ];

        function openMailbox() {
            const modal = document.getElementById('mailboxModal');
            modal.classList.remove('hidden');
            
            // Marcar todas as mensagens como lidas
            gameState.mailbox.unreadCount = 0;
            gameState.mailbox.messages.forEach(msg => msg.read = true);
            updateMailboxDisplay();
            
            displayMessages();
        }

        function closeMailbox() {
            document.getElementById('mailboxModal').classList.add('hidden');
        }

        function displayMessages() {
            const mailList = document.getElementById('mailList');
            
            if (gameState.mailbox.messages.length === 0) {
                mailList.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <div class="text-4xl mb-2">üì≠</div>
                        <div>Nenhuma mensagem ainda...</div>
                        <div class="text-sm mt-2">Cartas chegam a cada 40 minutos</div>
                        <div class="text-sm">Jornal chega a cada 25 minutos</div>
                    </div>
                `;
                return;
            }
            
            mailList.innerHTML = '';
            
            // Mostrar mensagens mais recentes primeiro
            const sortedMessages = [...gameState.mailbox.messages].reverse();
            
            sortedMessages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `border rounded-lg p-4 ${message.type === 'newspaper' ? 'bg-yellow-50 border-yellow-300' : 'bg-pink-50 border-pink-300'}`;
                
                const timeAgo = Math.floor((Date.now() - message.timestamp) / 60000);
                const timeText = timeAgo < 1 ? 'Agora' : `${timeAgo}min atr√°s`;
                
                if (message.type === 'newspaper') {
                    messageDiv.innerHTML = `
                        <div class="flex items-start gap-3">
                            <div class="text-2xl">üì∞</div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-bold text-yellow-800">${message.headline}</h4>
                                    <span class="text-xs text-gray-500">${timeText}</span>
                                </div>
                                <p class="text-sm text-yellow-700 mb-2">${message.content}</p>
                                <div class="flex gap-1">
                                    ${message.products.map(product => `<span class="text-lg">${product}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="flex items-start gap-3">
                            <div class="text-2xl">üíå</div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-bold text-pink-800">Carta Motivacional</h4>
                                    <span class="text-xs text-gray-500">${timeText}</span>
                                </div>
                                <p class="text-sm text-pink-700">${message.content}</p>
                            </div>
                        </div>
                    `;
                }
                
                mailList.appendChild(messageDiv);
            });
        }

        function sendLetter() {
            const randomMessage = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            
            const letter = {
                id: Date.now(),
                type: 'letter',
                content: randomMessage,
                timestamp: Date.now(),
                read: false
            };
            
            gameState.mailbox.messages.push(letter);
            gameState.mailbox.unreadCount++;
            gameState.mailbox.lastLetter = Date.now();
            
            updateMailboxDisplay();
            showMessage('üì¨ Nova carta chegou! Mensagem motivacional recebida!');
        }

        function sendNewspaper() {
            const randomTip = newspaperTips[Math.floor(Math.random() * newspaperTips.length)];
            
            const newspaper = {
                id: Date.now(),
                type: 'newspaper',
                headline: randomTip.headline,
                content: randomTip.content,
                products: randomTip.products,
                timestamp: Date.now(),
                read: false
            };
            
            gameState.mailbox.messages.push(newspaper);
            gameState.mailbox.unreadCount++;
            gameState.mailbox.lastNewspaper = Date.now();
            
            updateMailboxDisplay();
            showMessage('üì∞ Jornal dos Agricultores chegou! Confira as dicas!');
        }

        function updateMailboxDisplay() {
            const mailCount = document.getElementById('mailCount');
            const mailNotification = document.getElementById('mailNotification');
            const mailbox = document.getElementById('mailbox');
            
            mailCount.textContent = `${gameState.mailbox.messages.length} mensagens`;
            
            if (gameState.mailbox.unreadCount > 0) {
                mailNotification.style.display = 'block';
                mailNotification.textContent = `${gameState.mailbox.unreadCount} nova(s)!`;
                mailbox.classList.add('animate-bounce');
            } else {
                mailNotification.style.display = 'none';
                mailbox.classList.remove('animate-bounce');
            }
        }

        function checkMailDelivery() {
            const now = Date.now();
            
            // Verificar se √© hora de enviar carta (40 minutos = 2400000ms)
            if (now - gameState.mailbox.lastLetter >= 40 * 60 * 1000) {
                sendLetter();
            }
            
            // Verificar se √© hora de enviar jornal (25 minutos = 1500000ms)
            if (now - gameState.mailbox.lastNewspaper >= 25 * 60 * 1000) {
                sendNewspaper();
            }
        }

        // Timer para verificar entregas de correio (a cada minuto)
        setInterval(checkMailDelivery, 60 * 1000);
        
        // Timer para verificar chamadas telef√¥nicas (a cada minuto)
        setInterval(checkPhoneCalls, 60 * 1000);
        
        // Timer para atualizar display do telefone (a cada segundo)
        setInterval(updatePhoneDisplay, 1000);

        // Inicializar sistema de correios
        function initMailSystem() {
            gameState.mailbox.lastLetter = Date.now();
            gameState.mailbox.lastNewspaper = Date.now();
            updateMailboxDisplay();
        }

        // Sistema do Telefone
        const phoneOrders = [
            { item: 'ü•Ñ', name: 'Sacos de Farinha', amount: 30, reward: 2400 },
            { item: '‚òï', name: 'Sacos de Caf√©', amount: 25, reward: 2250 },
            { item: 'üßÉ', name: 'Garrafas de Suco', amount: 20, reward: 1500 },
            { item: 'üßÄ', name: 'Queijos', amount: 15, reward: 1200 },
            { item: 'üßµ', name: 'Novelos de L√£', amount: 18, reward: 1080 },
            { item: 'üçû', name: 'P√£es', amount: 35, reward: 1400 },
            { item: 'ü•õ', name: 'Baldes de Leite', amount: 40, reward: 1200 },
            { item: 'ü•ö', name: 'Ovos', amount: 50, reward: 1750 },
            { item: 'üçØ', name: 'Potes de Mel', amount: 12, reward: 960 }
        ];

        function buyPhone() {
            if (gameState.coins >= 300 && !gameState.hasPhone) {
                if (!useEnergy()) return;
                
                gameState.coins -= 300;
                gameState.hasPhone = true;
                gameState.phone.lastCall = Date.now();
                document.getElementById('phoneArea').style.display = 'flex';
                document.getElementById('phoneItem').style.display = 'none';
                document.getElementById('truckItem').style.display = 'flex'; // Mostrar caminhonete no mercadinho
                updateDisplay();
                showMessage('Telefone comprado! üìû Aguarde pedidos especiais!');
                randomSickness();
            } else if (gameState.hasPhone) {
                showMessage('Voc√™ j√° tem um telefone! üìû');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        function buyTruck() {
            if (gameState.coins >= 800 && !gameState.hasTruck) {
                if (!useEnergy()) return;
                
                gameState.coins -= 800;
                gameState.hasTruck = true;
                document.getElementById('truckArea').style.display = 'block';
                document.getElementById('truckItem').style.display = 'none';
                document.getElementById('dieselItem').style.display = 'flex'; // Mostrar diesel no mercadinho
                updateDisplay();
                updateTruckDisplay();
                showMessage('Caminhonete comprada! üöö Compre diesel para abastecer!');
                randomSickness();
            } else if (gameState.hasTruck) {
                showMessage('Voc√™ j√° tem uma caminhonete! üöö');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        function buyDiesel() {
            if (gameState.coins >= 25) {
                if (!useEnergy()) return;
                
                gameState.coins -= 25;
                gameState.celeiro['‚õΩ'] = (gameState.celeiro['‚õΩ'] || 0) + 1;
                updateDisplay();
                showMessage('Diesel comprado! ‚õΩ Use na caminhonete!');
                randomSickness();
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        function addDieselToTruck() {
            if (gameState.truck.hasDiesel || gameState.truck.isDelivering) return;
            if (!useEnergy()) return;
            
            if (gameState.celeiro['‚õΩ'] && gameState.celeiro['‚õΩ'] > 0) {
                gameState.celeiro['‚õΩ']--;
                gameState.truck.hasDiesel = true;
                gameState.truck.tripsLeft = 3;
                
                document.getElementById('truckDieselSlot').innerHTML = '‚õΩ';
                updateDisplay();
                updateTruckDisplay();
                checkTruckReady();
                showMessage('Diesel adicionado! 3 viagens dispon√≠veis! ‚õΩ');
                randomSickness();
            } else {
                showMessage('Voc√™ n√£o tem diesel! Compre no mercadinho! ‚õΩ');
            }
        }

        function addCargoToTruck(slotIndex) {
            if (gameState.truck.isDelivering) return;
            if (gameState.truck.cargo[slotIndex - 1] !== null) return;
            if (!useEnergy()) return;
            
            // Verificar se h√° pedido ativo
            if (!gameState.phone.currentOrder) {
                showMessage('N√£o h√° pedido ativo! Aguarde uma chamada! üìû');
                return;
            }
            
            const order = gameState.phone.currentOrder;
            const requiredItem = order.item;
            const requiredAmount = order.amount;
            
            // Verificar se tem o item necess√°rio
            if (!gameState.celeiro[requiredItem] || gameState.celeiro[requiredItem] < requiredAmount) {
                showMessage(`Voc√™ precisa de ${requiredAmount}x ${requiredItem}! üì¶`);
                return;
            }
            
            // Adicionar carga ao slot
            gameState.celeiro[requiredItem] -= requiredAmount;
            gameState.truck.cargo[slotIndex - 1] = {
                item: requiredItem,
                amount: requiredAmount,
                reward: order.reward
            };
            
            document.getElementById(`truckSlot${slotIndex}`).innerHTML = `${requiredItem}x${requiredAmount}`;
            updateDisplay();
            checkTruckReady();
            showMessage(`${requiredAmount}x ${requiredItem} carregado no slot ${slotIndex}! üì¶`);
            randomSickness();
        }

        function checkTruckReady() {
            const hasCargoInAnySlot = gameState.truck.cargo.some(cargo => cargo !== null);
            const hasFuel = gameState.truck.hasDiesel && gameState.truck.tripsLeft > 0;
            
            document.getElementById('deliverButton').disabled = !(hasCargoInAnySlot && hasFuel);
        }

        function startDelivery() {
            if (gameState.truck.isDelivering) return;
            if (!gameState.truck.hasDiesel || gameState.truck.tripsLeft <= 0) {
                showMessage('Caminhonete sem combust√≠vel! ‚õΩ');
                return;
            }
            
            const hasCargoInAnySlot = gameState.truck.cargo.some(cargo => cargo !== null);
            if (!hasCargoInAnySlot) {
                showMessage('Caminhonete sem carga! üì¶');
                return;
            }
            
            if (!useEnergy()) return;
            
            gameState.truck.isDelivering = true;
            
            const button = document.getElementById('deliverButton');
            button.disabled = true;
            button.textContent = 'Entregando... 15s';
            
            let countdown = 15;
            const timer = setInterval(() => {
                countdown--;
                button.textContent = `Entregando... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    finishDelivery();
                }
            }, 1000);
            
            showMessage('Caminhonete saiu para entrega! üöö');
            randomSickness();
        }

        function finishDelivery() {
            let totalReward = 0;
            let deliveredItems = [];
            
            // Processar cada slot de carga
            gameState.truck.cargo.forEach((cargo, index) => {
                if (cargo) {
                    totalReward += cargo.reward;
                    deliveredItems.push(`${cargo.amount}x ${cargo.item}`);
                    
                    // Limpar slot
                    gameState.truck.cargo[index] = null;
                    document.getElementById(`truckSlot${index + 1}`).innerHTML = `<div class="text-xs text-center text-gray-600 mt-1">Carga ${index + 1}</div>`;
                }
            });
            
            // Adicionar recompensa
            gameState.coins += totalReward;
            
            // Consumir combust√≠vel
            gameState.truck.tripsLeft--;
            if (gameState.truck.tripsLeft <= 0) {
                gameState.truck.hasDiesel = false;
                document.getElementById('truckDieselSlot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">‚õΩ</div>';
            }
            
            // Limpar pedido do telefone
            gameState.phone.currentOrder = null;
            gameState.phone.isRinging = false;
            
            // Reset da interface
            gameState.truck.isDelivering = false;
            const button = document.getElementById('deliverButton');
            button.textContent = 'üöö Entregar';
            button.disabled = true;
            
            updateDisplay();
            updateTruckDisplay();
            updatePhoneDisplay();
            checkTruckReady();
            
            showMessage(`Entrega conclu√≠da! +${totalReward} moedas! üööüí∞`);
            if (deliveredItems.length > 0) {
                showMessage(`Itens entregues: ${deliveredItems.join(', ')}`);
            }
        }

        function updateTruckDisplay() {
            if (!gameState.hasTruck) return;
            
            document.getElementById('dieselCount').textContent = gameState.truck.hasDiesel ? '1' : '0';
            document.getElementById('tripsLeft').textContent = gameState.truck.tripsLeft;
        }

        function checkPhoneCalls() {
            if (!gameState.hasPhone) return;
            
            const now = Date.now();
            
            // Verificar se √© hora de receber pedido (35 minutos = 2100000ms)
            if (now - gameState.phone.lastCall >= 35 * 60 * 1000 && !gameState.phone.currentOrder) {
                receivePhoneOrder();
            }
        }

        function receivePhoneOrder() {
            const randomOrder = phoneOrders[Math.floor(Math.random() * phoneOrders.length)];
            
            gameState.phone.currentOrder = {
                ...randomOrder,
                timeLimit: 10 * 60 * 1000, // 10 minutos
                startTime: Date.now()
            };
            
            gameState.phone.isRinging = true;
            gameState.phone.lastCall = Date.now();
            
            // Atualizar interface
            document.getElementById('phoneNotification').style.display = 'block';
            document.getElementById('phoneStatus').textContent = 'Tocando!';
            document.getElementById('phone').classList.add('animate-bounce');
            
            showMessage('üìû Telefone tocando! Pedido especial chegou!');
        }

        function answerPhone() {
            if (!gameState.phone.isRinging || !gameState.phone.currentOrder) return;
            
            const order = gameState.phone.currentOrder;
            const modal = document.getElementById('phoneModal');
            const content = document.getElementById('phoneOrderContent');
            
            // Verificar se tem o item necess√°rio
            const hasEnough = gameState.celeiro[order.item] && gameState.celeiro[order.item] >= order.amount;
            
            content.innerHTML = `
                <div class="text-center">
                    <div class="text-4xl mb-2">üë®‚Äçüíº</div>
                    <div class="font-bold text-lg mb-2">Agr√¥nomo Parceiro</div>
                    <div class="text-sm text-gray-600 mb-4">"Ol√°! Preciso urgentemente de:"</div>
                </div>
                <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 text-center">
                    <div class="text-3xl mb-2">${order.item}</div>
                    <div class="font-bold text-lg">${order.amount}x ${order.name}</div>
                    <div class="text-green-600 font-bold mt-2">Pagamento: ${order.reward} moedas</div>
                    <div class="text-red-600 text-sm mt-2">‚è∞ Tempo limite: 10 minutos</div>
                </div>
                <div class="text-center">
                    <div class="text-sm ${hasEnough ? 'text-green-600' : 'text-red-600'}">
                        Voc√™ tem: ${gameState.celeiro[order.item] || 0}/${order.amount}
                    </div>
                </div>
            `;
            
            // Habilitar/desabilitar bot√£o aceitar
            document.getElementById('acceptOrderBtn').disabled = !hasEnough;
            if (!hasEnough) {
                document.getElementById('acceptOrderBtn').classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                document.getElementById('acceptOrderBtn').classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            modal.classList.remove('hidden');
        }

        function acceptOrder() {
            const order = gameState.phone.currentOrder;
            if (!order) return;
            
            // Verificar se tem caminhonete
            if (!gameState.hasTruck) {
                showMessage('Voc√™ precisa de uma caminhonete para entregar! üöö');
                return;
            }
            
            // Verificar se ainda tem os itens
            if (!gameState.celeiro[order.item] || gameState.celeiro[order.item] < order.amount) {
                showMessage('Voc√™ n√£o tem itens suficientes! üì¶');
                return;
            }
            
            if (!useEnergy()) return;
            
            // Apenas aceitar o pedido - n√£o remover itens ainda
            gameState.phone.isRinging = false;
            
            updateDisplay();
            updatePhoneDisplay();
            hangUpPhone();
            
            showMessage(`Pedido aceito! Carregue a caminhonete para entregar! üööüì¶`);
            randomSickness();
        }

        function rejectOrder() {
            // Limpar pedido
            gameState.phone.currentOrder = null;
            gameState.phone.isRinging = false;
            
            updatePhoneDisplay();
            hangUpPhone();
            
            showMessage('Pedido recusado! üìû');
        }

        function hangUpPhone() {
            document.getElementById('phoneModal').classList.add('hidden');
        }

        function updatePhoneDisplay() {
            if (!gameState.hasPhone) return;
            
            const phoneStatus = document.getElementById('phoneStatus');
            const phoneNotification = document.getElementById('phoneNotification');
            const phone = document.getElementById('phone');
            
            if (gameState.phone.isRinging) {
                phoneStatus.textContent = 'Tocando!';
                phoneNotification.style.display = 'block';
                phone.classList.add('animate-bounce');
            } else if (gameState.phone.currentOrder) {
                // Mostrar tempo restante
                const timeLeft = Math.ceil((gameState.phone.currentOrder.startTime + gameState.phone.currentOrder.timeLimit - Date.now()) / 1000);
                if (timeLeft > 0) {
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    phoneStatus.textContent = `Pedido: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    phoneNotification.style.display = 'block';
                } else {
                    // Tempo esgotado
                    gameState.phone.currentOrder = null;
                    gameState.phone.isRinging = false;
                    phoneStatus.textContent = 'Aguardando...';
                    phoneNotification.style.display = 'none';
                    phone.classList.remove('animate-bounce');
                    showMessage('Tempo do pedido esgotou! ‚è∞');
                }
            } else {
                phoneStatus.textContent = 'Aguardando...';
                phoneNotification.style.display = 'none';
                phone.classList.remove('animate-bounce');
            }
        }

        // Sistema da Colmeia
        function buyBeehive() {
            if (gameState.coins >= 200 && !gameState.hasBeehive) {
                if (!useEnergy()) return;
                
                gameState.coins -= 200;
                gameState.hasBeehive = true;
                
                // Adicionar 3 sementes de cada flor especial
                gameState.celeiro['üü£'] = (gameState.celeiro['üü£'] || 0) + 3; // Lavanda
                gameState.celeiro['üå∏'] = (gameState.celeiro['üå∏'] || 0) + 3; // Sakura
                gameState.celeiro['üå∑'] = (gameState.celeiro['üå∑'] || 0) + 3; // Tulipa
                
                // Mostrar bot√µes das sementes especiais
                document.querySelector('[data-seed="üü£"]').style.display = 'block';
                document.querySelector('[data-seed="üå∏"]').style.display = 'block';
                document.querySelector('[data-seed="üå∑"]').style.display = 'block';
                
                document.getElementById('beehiveArea').style.display = 'block';
                document.getElementById('beehiveItem').style.display = 'none';
                updateDisplay();
                showMessage('Colmeia comprada! üçØ Inclui 3 sementes de cada flor especial!');
                randomSickness();
            } else if (gameState.hasBeehive) {
                showMessage('Voc√™ j√° tem uma colmeia! üçØ');
            } else {
                showMessage('Moedas insuficientes! üí∏');
            }
        }

        function plantFlowerInBeehive(beeIndex) {
            const bee = gameState.bees[beeIndex];
            if (bee.hasFlower || bee.isGrowing || bee.isPollenating) return;
            if (!useEnergy()) return;
            
            // Verificar se tem sementes de flores especiais
            const specialFlowers = ['üü£', 'üå∏', 'üå∑'];
            let selectedFlower = null;
            
            for (const flower of specialFlowers) {
                if (gameState.celeiro[flower] && gameState.celeiro[flower] > 0) {
                    selectedFlower = flower;
                    break;
                }
            }
            
            if (!selectedFlower) {
                showMessage('Voc√™ precisa de sementes especiais! üü£üå∏üå∑');
                return;
            }
            
            // Usar semente
            gameState.celeiro[selectedFlower]--;
            bee.hasFlower = true;
            bee.flowerType = selectedFlower;
            bee.isGrowing = true;
            
            // Atualizar interface
            const flowerSlot = document.getElementById(`flowerSlot${beeIndex}`);
            flowerSlot.querySelector('.slot').innerHTML = 'üå±';
            document.getElementById(`beeStatus${beeIndex}`).textContent = 'Flor crescendo... 10s';
            
            // Crescer por 10 segundos
            let countdown = 10;
            const growthInterval = setInterval(() => {
                countdown--;
                document.getElementById(`beeStatus${beeIndex}`).textContent = `Flor crescendo... ${countdown}s`;
                
                if (countdown <= 0) {
                    clearInterval(growthInterval);
                    finishFlowerGrowth(beeIndex);
                }
            }, 1000);
            
            bee.growthTimer = growthInterval;
            updateDisplay();
            showMessage(`Plantou ${selectedFlower} para abelha ${beeIndex + 1}!`);
            randomSickness();
        }

        function finishFlowerGrowth(beeIndex) {
            const bee = gameState.bees[beeIndex];
            bee.isGrowing = false;
            bee.isPollenating = true;
            
            // Mostrar flor crescida
            const flowerSlot = document.getElementById(`flowerSlot${beeIndex}`);
            flowerSlot.querySelector('.slot').innerHTML = bee.flowerType;
            document.getElementById(`beeStatus${beeIndex}`).textContent = 'Polinizando... 15min';
            
            // Polinizar por 15 minutos
            let countdown = 15 * 60; // 15 minutos em segundos
            const pollenationInterval = setInterval(() => {
                countdown--;
                const minutes = Math.floor(countdown / 60);
                const seconds = countdown % 60;
                document.getElementById(`beeStatus${beeIndex}`).textContent = `Polinizando... ${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (countdown <= 0) {
                    clearInterval(pollenationInterval);
                    finishHoneyProduction(beeIndex);
                }
            }, 1000);
            
            bee.pollenationTimer = pollenationInterval;
            showMessage(`Abelha ${beeIndex + 1} come√ßou a polinizar! üêù`);
        }

        function finishHoneyProduction(beeIndex) {
            const bee = gameState.bees[beeIndex];
            bee.isPollenating = false;
            bee.honeyReady = true;
            
            // Esconder slot de flor e mostrar coleta de mel
            document.getElementById(`flowerSlot${beeIndex}`).style.display = 'none';
            document.getElementById(`honeyCollection${beeIndex}`).style.display = 'block';
            document.getElementById(`beeStatus${beeIndex}`).textContent = 'Mel pronto!';
            
            showMessage(`Abelha ${beeIndex + 1} produziu mel! üçØ`);
        }

        function collectHoney(beeIndex) {
            const bee = gameState.bees[beeIndex];
            if (!bee.honeyReady) return;
            if (!useEnergy()) return;
            
            // Adicionar mel ao celeiro
            gameState.celeiro['üçØ'] = (gameState.celeiro['üçØ'] || 0) + 1;
            
            // Reset da abelha
            bee.hasFlower = false;
            bee.flowerType = null;
            bee.honeyReady = false;
            
            if (bee.growthTimer) {
                clearInterval(bee.growthTimer);
                bee.growthTimer = null;
            }
            
            if (bee.pollenationTimer) {
                clearInterval(bee.pollenationTimer);
                bee.pollenationTimer = null;
            }
            
            // Reset da interface
            const flowerSlot = document.getElementById(`flowerSlot${beeIndex}`);
            flowerSlot.style.display = 'block';
            flowerSlot.querySelector('.slot').innerHTML = '<div class="text-xs text-center text-gray-600 mt-1">Plantar flor</div>';
            
            document.getElementById(`honeyCollection${beeIndex}`).style.display = 'none';
            document.getElementById(`beeStatus${beeIndex}`).textContent = 'Aguardando flor';
            
            updateDisplay();
            showMessage(`Coletou mel da abelha ${beeIndex + 1}! üçØ`);
            randomSickness();
        }

        // Inicializar jogo
        initQuitanda();
        initSicknessTimer();
        initMailSystem();
        updateDisplay();
        updateEnergyDisplay();
        updateFishDisplay();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9724de11072c0093',t:'MTc1NTcyNDEyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
